{"generatedAt":1678844070902,"generateTime":306,"contents":[{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Code","description":"","navigation":false,"layout":"page","body":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"C++\",\"/cpp\"]",":secondary":"[\"Github →\",\"https://github.com/DrAugus/draugus.github.io/tree/master/code\"]"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Coding Record"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"coding coding coding"}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Only Coding"}]}]},{"type":"element","tag":"template","props":{"v-slot:root":""},"children":[{"type":"element","tag":"ellipsis","props":{"blur":"140px","left":"0px","top":"1rem","width":"30rem"},"children":[]}]},{"type":"element","tag":"card","props":{"icon":"noto-v1:desktop-computer"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Code"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Code Everything, variety of code languages, view in "},{"type":"element","tag":"a","props":{"href":"./code"},"children":[{"type":"text","value":"code"}]},{"type":"text","value":", more info in "},{"type":"element","tag":"a","props":{"href":"./cpp"},"children":[{"type":"text","value":"cpp"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"./algorithm"},"children":[{"type":"text","value":"dsa"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:0.index.md","_source":"content","_file":"0.index.md","_extension":"md"},{"_path":"/cpp/_dir","_dir":"cpp","_draft":false,"_partial":true,"_locale":"","title":"C++","icon":"bx:code-curly","_id":"content:1.cpp:_dir.yml","_type":"yaml","_source":"content","_file":"1.cpp/_dir.yml","_extension":"yml"},{"_path":"/cpp","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"basin cpp","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basin-cpp"},"children":[{"type":"text","value":"basin cpp"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./feature"},"children":[{"type":"text","value":"cpp feature"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./c_cpp_diff"},"children":[{"type":"text","value":"cpp & c diff"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./concept"},"children":[{"type":"text","value":"一些概念"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./tips"},"children":[{"type":"text","value":"一些要点"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./complex_declaration"},"children":[{"type":"text","value":"复杂声明辨析"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./code"},"children":[{"type":"text","value":"程序题"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./stl"},"children":[{"type":"text","value":"标准库stl"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:0.index.md","_source":"content","_file":"1.cpp/0.index.md","_extension":"md"},{"_path":"/cpp/c_cpp_diff","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"C 与 C++","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"c-与-c"},"children":[{"type":"text","value":"C 与 C++"}]},{"type":"element","tag":"h2","props":{"id":"简单版本"},"children":[{"type":"text","value":"简单版本"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++是面向对象的语言，而C是面向过程的语言"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++引入new/delete运算符，取代了C中的malloc/free库函数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++引入引用的概念，而C中没有"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++引入类的概念，而C中没有"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++引入函数重载的特性，而C中没有"}]}]},{"type":"element","tag":"h2","props":{"id":"标准"},"children":[{"type":"text","value":"标准"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"分别隶属于两个不同的标准委员会。C以C99标准为主流，C11已经发布；C++以C++98/03为主流，C++11/14也日趋流行。"}]},{"type":"element","tag":"h2","props":{"id":"语言本身"},"children":[{"type":"text","value":"语言本身"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++是面向对象语言，C是面向过程语言。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"结构：C以结构体struct为核心结构；C++以类class为核心结构。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多态：C可以以宏定义的方式“自定义”部分地支持多态；C++自身提供多态，并以模板templates支持编译期多态，以虚函数virtual\nfunction支持运行期多态。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"头文件的调用：C++用< >代替” “代表系统头文件；且复用C的头文件时，去掉”.h”在开头加上”C”。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"输入输出：鉴于C++中以对象作为核心，输入和输出都是在流对象上的操作。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"封装：C中的封装由于struct的特性全部为公有封装，C++中的封装由于class的特性更加完善、安全。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常见风格：C中常用宏定义来进行文本替换，不具有类型安全性；C++中常建议采用常量定义，具有类型安全性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"效率：常见的说法是同等目的C通常比C++更富有效率(\n这其实有一定的误解，主要在于C++代码更难于优化且少有人使用编译期求值的特性)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常用语言/库特性："}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数组：C中采用内建数组，C++中建议采用vector。相比之下vector的大小可以动态增长，且使用一些技巧后增长并不低效，且成员函数丰富。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"字符串 C中采用C风格的string(实则为字符串数组)，C++中建议采用string，对比与上一条类似。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"内存分配：C中使用malloc与free，它们是是C标准库函数，C++中建议使用new/delete代替前者，他们说是C++的运算符(\n这是笔试面试常考点)以C++中的new为例，new可分为operator new(new 操作)、new operator(new 操作符)和placement new(定位 new)\n。其中operator new执行和malloc相同的任务，即分配内存，但对构造函数一无所知；而 new\noperator则调用operator new，分配内存后再调用对象构造函数进行对象的构造。其中operator new是可以重载的。placement\nnew，就是operator\nnew的一个重载版本，允许你在一个已经分配好的内存中构造一个新的对象。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"指针：C中通常使用的是原生指针(raw pointer)\n，由于常出现程序员在申请后忘记释放造成资源泄漏的问题，在C++98中加入了“第一代”基于引用计数的智能指针auto_ptr，由于初代的各种问题(\n主要是无法解决循环指针)，在03标准也就是TR1中引入了shared_ptr,weak_ptr和unique_ptr这三个功能各异的智能指针，并与11标准中正式确定，较好的解决了上述问题。"}]}]},{"type":"element","tag":"h2","props":{"id":"仅有c才有的常用特性"},"children":[{"type":"text","value":"仅有C++才有的常用特性"}]},{"type":"element","tag":"h3","props":{"id":"语言范式特性"},"children":[{"type":"text","value":"语言(范式)特性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"面向对象编程：C++中以关键字class和多态特性支持的一种编程范式；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"泛型编程：C++中以关键字template支持的一种编程范式；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"模板元编程 ：C++中以模板特化和模板递归调用机制支持的一种编程范式。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++中以对象和类型作为整个程序的核心，在对象方面，时刻注意对象创建和析构的成本，例如有一个很常用的(具名)返回值优化((N)\nRVO); 在类型方面，有运行时类型信息(RTTI)等技术作为C++类型技术的支撑。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"函数重载：C++允许拥有不同变量但具有相同函数名的函数(函数重载的编译器实现方式、函数重载和(主)模板特化的区别都曾考过)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"异常：以catch、throw、try等关键字支持的一种机制。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"命名空间：namespace，可以避免和减少命名冲突且让代码具有更强的可读性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"谓词用法：通常以bool函数或仿函数(functor)或lambda函数的形式，出现在STL的大多数算法的第三个元素。"}]}]},{"type":"element","tag":"h3","props":{"id":"常见关键字操作符特性"},"children":[{"type":"text","value":"常见关键字(操作符)特性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto：在C中，auto代表自动类型通常都可省略；而在C++11新标准中，则起到一种“动态类型”的作用——通常在自动类型推导和decltype搭配使用。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"空指针：在C中常以NULL代表空指针，在C++中根据新标准用nullptr来代表空指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"&: 在C中仅代表取某个左值(lvalue)的地址，在C++中还可以表示引用(别名)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"&&：在C中仅能表示逻辑与，在C++中还可以表示右值引用。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"[]：在C中仅能表示下标操作符，在C++中还可以表示lambda函数的捕捉列表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"{}：在C中仅能用于数组的初始化，在C++中由于引入了初始化列表(initializer_list)，可用于任何类型、容器等的初始化。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常量定义：C中常以define来定义常量，C++中用const来定义运行期常量，用constexpr来定义编译器常量。"}]}]},{"type":"element","tag":"h3","props":{"id":"常用新特性"},"children":[{"type":"text","value":"常用新特性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"右值引用和move语义(太多内容，建议自查)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基于范围的for循环(与python中的写法类似，常用于容器)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基于auto——decltype的自动类型推导。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lambda函数(一种局部、匿名函数，高效方便地出现在需要局部、匿名语义的地方)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"标准规范后的多线程库。"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"简单版本","depth":2,"text":"简单版本"},{"id":"标准","depth":2,"text":"标准"},{"id":"语言本身","depth":2,"text":"语言本身"},{"id":"仅有c才有的常用特性","depth":2,"text":"仅有C++才有的常用特性","children":[{"id":"语言范式特性","depth":3,"text":"语言(范式)特性"},{"id":"常见关键字操作符特性","depth":3,"text":"常见关键字(操作符)特性"},{"id":"常用新特性","depth":3,"text":"常用新特性"}]}]}},"_type":"markdown","_id":"content:1.cpp:c_cpp_diff.md","_source":"content","_file":"1.cpp/c_cpp_diff.md","_extension":"md"},{"_path":"/cpp/code","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"程序题","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"程序题"},"children":[{"type":"text","value":"程序题"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"输出"},{"type":"element","tag":"code","props":{"code":"int a = 4;\n\nint &f(int x) {\n    a = a + x;\n    return a;\n}\n\nint main() {\n    int t = 5;\n    cout << f(t) << endl; //a = 9\n    f(t) = 20; //a = 20\n    cout << f(t) << endl; //a = 25\n    t = f(t); //a = 30 t = 30\n    cout << f(t) << endl; // a = 60\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de7ba9"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    a "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" t "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"(t) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":" //a = 9"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"(t) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":" //a = 20"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"(t) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":" //a = 25"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    t "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"(t);"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":" //a = 30 t = 30"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"(t) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":" // a = 60"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"求下面函数的返回值"},{"type":"element","tag":"code","props":{"code":"int func(int x) {\n  int countx = 0;\n  while (x) {\n    countx++;\n    x = x & (x - 1);\n  }\n  return countx;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-de7ba9"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" countx "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (x) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    countx"}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    x "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (x "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" countx;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"假定x = 9999。 答案：8"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"思路：将x转化为2进制，看含有的1的个数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"输出"},{"type":"element","tag":"code","props":{"code":"int main()\n{\n    int i = 1;\n    printf(\"%d,%d\\n\", ++i, ++i);    \n    printf(\"%d,%d\\n\", ++i, i++);   \n    printf(\"%d,%d\\n\", i++, i++);    \n    printf(\"%d,%d\\n\", i++, ++i);   \n    system(\"pause\");\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"i, "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"i);    "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"i, i"}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":");   "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", i"}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", i"}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":");    "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", i"}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"i);   "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aea5cf"},"children":[{"type":"text","value":"system"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"pause\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-abb77c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"3 3 5 3 6 5 8 9"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈内存与文字常量区"},{"type":"element","tag":"code","props":{"code":"char str1[] = \"abc\";\nchar str2[] = \"abc\";\n\nconst char str3[] = \"abc\";\nconst char str4[] = \"abc\";\n\nconst char *str5 = \"abc\";\nconst char *str6 = \"abc\";\n\nchar *str7 = \"abc\";\nchar *str8 = \"abc\";\n\ncout << (str1 == str2) << endl;//0  分别指向各自的栈内存\ncout << (str3 == str4) << endl;//0  分别指向各自的栈内存\n\ncout << (str5 == str6) << endl;//1指向文字常量区地址相同\ncout << (str7 == str8) << endl;//1指向文字常量区地址相同\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str1[] "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str2[] "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str3[] "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str4[] "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"str5 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"str6 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"str7 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"str8 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e50b65"},"children":[{"type":"text","value":"\"abc\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (str1 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str2) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":"//0  分别指向各自的栈内存"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (str3 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str4) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":"//0  分别指向各自的栈内存"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (str5 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str6) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":"//1指向文字常量区地址相同"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" (str7 "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" str8) "}]},{"type":"element","tag":"span","props":{"class":"ct-514e44"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd6189"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-b403a5"},"children":[{"type":"text","value":"//1指向文字常量区地址相同"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"结果是：0 0 1 1"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"解答：str1,str2,str3,str4是数组变量，它们有各自的内存空间；而str5,str6,str7,str8是指针，它们指向相同的常量区域。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e50b65{color:#0A3069}\n.ct-b403a5{color:#6E7781}\n.ct-de7ba9{color:#953800}\n.ct-aea5cf{color:#8250DF}\n.ct-abb77c{color:#0550AE}\n.ct-cd6189{color:#24292F}\n.ct-514e44{color:#CF222E}\n.dark .ct-514e44{color:#FF7B72}\n.dark .ct-cd6189{color:#C9D1D9}\n.dark .ct-abb77c{color:#79C0FF}\n.dark .ct-aea5cf{color:#D2A8FF}\n.dark .ct-de7ba9{color:#FFA657}\n.dark .ct-b403a5{color:#8B949E}\n.dark .ct-e50b65{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:code.md","_source":"content","_file":"1.cpp/code.md","_extension":"md"},{"_path":"/cpp/complex_declaration","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"复杂声明","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"复杂声明"},"children":[{"type":"text","value":"复杂声明"}]},{"type":"element","tag":"h2","props":{"id":"case-1"},"children":[{"type":"text","value":"case 1"}]},{"type":"element","tag":"code","props":{"code":"void * ( * (*fp1)(int))[10];\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"fp1)("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"))["}]},{"type":"element","tag":"span","props":{"class":"ct-a502a1"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"];"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fp1"}]},{"type":"text","value":"是一个指针，指向一个函数，这个函数的参数为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"int"}]},{"type":"text","value":"型，函数的返回值是一个指针，这个指针指向一个数组，这个数组有10个元素，每个元素是一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"void*"}]},{"type":"text","value":"型指针。"}]},{"type":"element","tag":"h2","props":{"id":"case-2"},"children":[{"type":"text","value":"case 2"}]},{"type":"element","tag":"code","props":{"code":"float (*(* fp2)(int,int,int))(int);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" fp2)("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"))("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fp2"}]},{"type":"text","value":"是一个指针，指向一个函数，这个函数的参数为3个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"int"}]},{"type":"text","value":"型，函数的返回值是一个指针，这个指针指向一个函数，这个函数的参数为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"int"}]},{"type":"text","value":"型，函数的返回值是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"float"}]},{"type":"text","value":"型。"}]},{"type":"element","tag":"h2","props":{"id":"case-3"},"children":[{"type":"text","value":"case 3"}]},{"type":"element","tag":"code","props":{"code":"int (* ( * fp3)())[10]();\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" fp3)())["}]},{"type":"element","tag":"span","props":{"class":"ct-a502a1"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"]();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fp3"}]},{"type":"text","value":"是一个指针，指向一个函数，这个函数的参数为空，函数的返回值是一个指针，这个指针指向一个数组，这个数组有10个元素，每个元素是一个指针，指向一个函数，这个函数的参数为空，函数的返回值是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"int"}]},{"type":"text","value":"型。"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"have error: 'fp3' declared as array of functions of type 'int ()'"}]}]},{"type":"element","tag":"h2","props":{"id":"case-4"},"children":[{"type":"text","value":"case 4"}]},{"type":"element","tag":"code","props":{"code":"int (*s[10])(int)\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" (*s["}]},{"type":"element","tag":"span","props":{"class":"ct-a502a1"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"])("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"函数指针数组，每个指针指向一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"int func(int param)"}]},{"type":"text","value":"的函数"}]},{"type":"element","tag":"h2","props":{"id":"case-5"},"children":[{"type":"text","value":"case 5"}]},{"type":"element","tag":"code","props":{"code":"int id[sizeof(unsigned long)];\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" id["}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"unsigned"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94d5d3"},"children":[{"type":"text","value":"long"}]},{"type":"element","tag":"span","props":{"class":"ct-cc6217"},"children":[{"type":"text","value":")];"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个对吗？为什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"正确 这个 sizeof是编译时运算符，编译时就确定了，可以看成和机器有关的常量。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a502a1{color:#0550AE}\n.ct-cc6217{color:#24292F}\n.ct-94d5d3{color:#CF222E}\n.dark .ct-94d5d3{color:#FF7B72}\n.dark .ct-cc6217{color:#C9D1D9}\n.dark .ct-a502a1{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"case-1","depth":2,"text":"case 1"},{"id":"case-2","depth":2,"text":"case 2"},{"id":"case-3","depth":2,"text":"case 3"},{"id":"case-4","depth":2,"text":"case 4"},{"id":"case-5","depth":2,"text":"case 5"}]}},"_type":"markdown","_id":"content:1.cpp:complex_declaration.md","_source":"content","_file":"1.cpp/complex_declaration.md","_extension":"md"},{"_path":"/cpp/concept/_dir","_dir":"concept","_draft":false,"_partial":true,"_locale":"","title":"Concept","icon":"icon-park-outline:concept-sharing","_id":"content:1.cpp:concept:_dir.yml","_type":"yaml","_source":"content","_file":"1.cpp/concept/_dir.yml","_extension":"yml"},{"_path":"/cpp/concept","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"概念辨析","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"概念辨析"},"children":[{"type":"text","value":"概念辨析"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./const"},"children":[{"type":"text","value":"const"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./stack_memory"},"children":[{"type":"text","value":"堆栈 内存"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./pointer"},"children":[{"type":"text","value":"指针"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./reference"},"children":[{"type":"text","value":"引用"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./atomic"},"children":[{"type":"text","value":"atomic"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./exception"},"children":[{"type":"text","value":"异常"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./lambda"},"children":[{"type":"text","value":"lambda"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./class"},"children":[{"type":"text","value":"类"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./virtual"},"children":[{"type":"text","value":"虚函数"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./concurrent"},"children":[{"type":"text","value":"并发"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"../thread-mutex"},"children":[{"type":"text","value":"线程 锁"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./stl"},"children":[{"type":"text","value":"STL"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"oop"},"children":[{"type":"text","value":"oop"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What is OOP?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"OOP stands for Object-Oriented Programming."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Procedural programming is about writing procedures or functions that perform operations on the data, while object-oriented programming is about creating objects that contain both data and functions."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Object-oriented programming has several advantages over procedural programming:"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OOP is faster and easier to execute"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OOP provides a clear structure for the programs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OOP helps to keep the C++ code DRY \"Don't Repeat Yourself\", and makes the code easier to maintain, modify and debug"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OOP makes it possible to create full reusable applications with less code and shorter development time"}]}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tip: The \"Don't Repeat Yourself\" (DRY) principle is about reducing the repetition of code. You should extract out the codes that are common for the application, and place them at a single place and reuse them instead of repeating it."}]}]},{"type":"element","tag":"h2","props":{"id":"what-are-classes-and-objects"},"children":[{"type":"text","value":"What are Classes and Objects?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"example:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"class - fruit"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nobject - apple, banana"}]},{"type":"element","tag":"code","props":{"code":"class Fruit {\n\n};\n\nint main {\n  Fruit apple;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"Fruit"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" main {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"  Fruit apple;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"参数"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"code","props":{"code":"void display_name (std::string name) {\n  std::cout << name;\n}\n\nint main () {\n  display_name('Lisa');\n  display_name('Tom');\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"display_name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" name;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"display_name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"'Lisa'"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"display_name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"'Tom'"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"parameter"}]},{"type":"text","value":" is passed to the function, it is called an "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"argument"}]},{"type":"text","value":". So, from the example above: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" is a parameter, while Lisa and Tom are arguments."}]},{"type":"element","tag":"h2","props":{"id":"特性-封装-继承-多态"},"children":[{"type":"text","value":"特性 —— 封装 继承 多态"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Encapsulation, Inheritance, Polymorphism"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Why Encapsulation?"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It is considered good practice to declare your class attributes as private (as often as you can). Encapsulation ensures better control of your data, because you (or others) can change one part of the code without affecting other parts"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Increased security of data"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Inheritance"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":" (child) - the class that inherits from another class"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":" (parent) - the class being inherited from"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Why And When To Use \"Inheritance\" and \"Polymorphism\"?"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is useful for code reusability: reuse attributes and methods of an existing class when you create a new class."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"多态"}]},{"type":"text","value":"：是对于不同对象接收相同消息时产生不同的动作。C++的多态性具体体现在运行和编译两个方面："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在程序运行时的多态性通过继承和虚函数来体现；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在程序编译时多态性体现在函数和运算符的重载上；"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"虚函数"}]},{"type":"text","value":"：在基类中冠以关键字 virtual 的成员函数。 它提供了一种接口界面。允许在派生类中对基类的虚函数重新定义。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"纯虚函数的作用"}]},{"type":"text","value":"：在基类中为其派生类保留一个函数的名字，以便派生类根据需要对它进行定义。作为接口而存在\n纯虚函数不具备函数的功能，一般不能直接被调用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从基类继承来的纯虚函数，在派生类中仍是虚函数。如果一个类中至少有一个纯虚函数，那么这个类被称为"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象类"}]},{"type":"text","value":"（abstract class）。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抽象类中不仅包括纯虚函数，也可包括虚函数。抽象类必须用作派生其他类的基类，而不能用于直接创建对象实例。但仍可使用指向抽象类的指针支持运行时多态性。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"继承描述符"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"父public成员"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"父protected成员"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"父private成员"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子public成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子protected成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"protected"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子protected成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子protected成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子private成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"子private成员"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"public"}]},{"type":"text","value":"：只继承基类的接口。当继承是接口的一部分时，就选用public继承。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"private"}]},{"type":"text","value":"：只继承基类的实现。当继承是实现细节时，就选用private继承。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"protected"}]},{"type":"text","value":"：当继承是面向派生类而不是面向用户接口中的一部分时，就选用protected继承。 private意味着”根据某物实现出“的语义。和复合拥有同样的语义。"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ 中虚函数与纯虚函数的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ 的重载和重写是如何实现的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ 中什么是菱形继承问题？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"父类和子类是不是在同一个虚函数表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ 中多态是怎么实现的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"虚表指针的大小"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"虚函数表的存放内容"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构造函数可以是虚函数吗"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"析构函数可以是虚函数吗"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在基类的函数前加上virtual关键字，在派生类中重写该函数，运行时将会根据对象的实际类型来调用相应的函数。\n如果对象类型是派生类，就调用派生类的函数；如果对象类型是基类，就调用基类的函数"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n用virtual关键字申明的函数叫做虚函数，虚函数肯定是类的成员函数。\n存在虚函数的类都有一个一维的虚函数表叫做虚表，类的对象有一个指向虚表开始的虚指针。\n虚表是和类对应的，虚表指针是和对象对应的。\n多态性是一个接口多种实现，是面向对象的核心，分为类的多态性和函数的多态性。\n多态用虚函数来实现，结合动态绑定。\n纯虚函数是虚函数再加上 = 0； 抽象类是指包括至少一个纯虚函数的类。\n纯虚函数:virtual void fun()=0;即抽象类！必须在子类实现这个函数，即先有名称，没有内容，在派生类实现内容。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./virtual"},"children":[{"type":"text","value":"更多虚函数"}]}]},{"type":"element","tag":"h2","props":{"id":"编译时链接有几种方式静态链接和动态链接的区别是什么"},"children":[{"type":"text","value":"编译时链接有几种方式？"},{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/cyyljw/p/10949660.html","rel":["nofollow"]},"children":[{"type":"text","value":"静态链接和动态链接的区别"}]},{"type":"text","value":"是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"问题变形，"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 C++ 从代码到可执行二进制文件的过程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 C++ 编译的过程"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"answer："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编译分为3步"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"首先对源文件进行预处理，这个过程主要是处理一些#号定义的命令或语句（如宏、#include、预编译指令#ifdef等），生成*.i文件；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"然后进行编译，这个过程主要是进行词法分析、语法分析和语义分析等，生成*.s的汇编文件；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最后进行汇编，这个过程比较简单，就是将对应的汇编指令翻译成机器指令，生成可重定位的二进制目标文件。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态链接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动态链接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更多细节，"},{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/kang___xi/article/details/79571137","rel":["nofollow"]},"children":[{"type":"text","value":"从编写源代码到程序在内存中运行的全过程解析"}]}]}]},{"type":"element","tag":"h2","props":{"id":"转移语义move-semantics"},"children":[{"type":"text","value":"转移语义(Move Semantics)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"转移语义是 C++ 编程语言中一个概念，它指的是将一个对象的所有权从一个对象转移到另一个对象的过程。转移语义可以通过移动构造函数和移动赋值运算符来实现，它可以让你在不拷贝对象的情况下，快速地将一个对象的所有权从一个对象转移到另一个对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的例子，展示了如何使用移动构造函数和移动赋值运算符来执行移动语义："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <string>\n#include <utility>\n\nclass Person\n{\npublic:\n    Person(const std::string& name, int age)\n        : m_name(name), m_age(age)\n    {\n        std::cout << \"Person(const std::string&, int) called.\" << std::endl;\n    }\n\n    // 移动构造函数\n    Person(std::string&& name, int age)\n        : m_name(std::move(name)), m_age(age)\n    {\n        std::cout << \"Person(std::string&&, int) called.\" << std::endl;\n    }\n\n    // 移动赋值运算符\n    Person& operator=(Person&& other)\n    {\n        std::cout << \"operator=(Person&&) called.\" << std::endl;\n\n        if (this != &other)\n        {\n            m_name = std::move(other.m_name);\n            m_age = other.m_age;\n        }\n\n        return *this;\n    }\n\n    void print() const\n    {\n        std::cout << \"name: \" << m_name << \", age: \" << m_age << std::endl;\n    }\n\nprivate:\n    std::string m_name;\n    int m_age;\n};\n\nint main()\n{\n    std::string name = \"Jane Doe\";\n    Person p1(name, 25);\n\n    // 调用移动构造函数\n    Person p2(std::move(name), 26);\n    p2.print();\n\n    // 调用移动赋值运算符\n    Person p3 = std::move(p2);\n    p3.print();\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"<string>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"<utility>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"Person"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        : "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"m_name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(name), "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"m_age"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(age)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"Person(const std::string&, int) called.\""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"    // 移动构造函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        : "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"m_name"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(name)), "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"m_age"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(age)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"Person(std::string&&, int) called.\""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"    // 移动赋值运算符"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"operator"}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"other"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"operator=(Person&&) called.\""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"other)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"            m_name "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(other.m_name);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"            m_age "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" other.m_age;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"const"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"name: \""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" m_name "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\", age: \""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" m_age "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::string m_name;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" m_age;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::string name "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"Jane Doe\""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    Person "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(name, "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"25"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"    // 调用移动构造函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    Person "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(name), "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"26"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    p2."}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"    // 调用移动赋值运算符"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    Person p3 "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"(p2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    p3."}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们定义了一个名为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Person"}]},{"type":"text","value":" 的类，该类包含两个成员变量："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"m_name"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"m_age"}]},{"type":"text","value":"，分别表示人的姓名和年龄。我们定义了两个构造函数来创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Person"}]},{"type":"text","value":" 类的对象，一个接收 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const std::string&"}]},{"type":"text","value":" 类型的参数，另一个接收 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::string&&"}]},{"type":"text","value":" 类型的参数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main"}]},{"type":"text","value":" 函数中，我们首先创建了一个名为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" 的字符串变量，然后通过第一个构造函数创建了一个名为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p1"}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Person"}]},{"type":"text","value":" 类的对象。接着，我们调用了第二个构造函数，并通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::move"}]},{"type":"text","value":" 函数将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" 变量转换为右值。这样，我们就可以通过移动构造函数创建了一个名为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p2"}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Person"}]},{"type":"text","value":" 类的对象，并且成功地将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":" 变量的所有权转移到了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p2"}]},{"type":"text","value":" 对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接下来，我们再次调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::move"}]},{"type":"text","value":" 函数，将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p2"}]},{"type":"text","value":" 对象转换为右值，然后通过移动赋值运算符将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p2"}]},{"type":"text","value":" 对象的所有权转移到了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p3"}]},{"type":"text","value":" 对象。最后，我们调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p3"}]},{"type":"text","value":" 对象的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"print"}]},{"type":"text","value":" 方法，打印出它的姓名和年龄。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"经过上面的操作，我们成功地通过移动构造函数和移动赋值运算符实现了对象所有权的转移。这种方式可以比拷贝对象更快，同时也避免了拷贝对象时可能出现的问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过，转移语义也有一些需要注意的地方。在执行移动语义后，原来的对象会失去所有权，它的状态可能会变得不确定。因此，在执行移动语义后，原来的对象不应该再被使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，移动语义也不能用于所有的场景。例如，如果对象中包含了 const 成员变量，那么就不能使用移动语义。在这种情况下，只能通过拷贝语义来转移对象所有权。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，转移语义是一种有用的工具，它可以提高代码的效率，同时也可以避免一些常见的问题。在使用时，需要根据具体的情况来选择合适的方法，并且注意避免出现问题。"}]},{"type":"element","tag":"h2","props":{"id":"左值和右值"},"children":[{"type":"text","value":"左值和右值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"左值和右值是在编译原理中常用的概念。在 C++ 中，左值是可以出现在赋值语句的左边的表达式，它表示的是一个内存地址。右值是出现在赋值语句的右边的表达式，它代表的是一个存储在内存中的数值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，在下面的赋值语句中："}]},{"type":"element","tag":"code","props":{"code":"x = 10;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"x "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" 是一个左值，因为它表示的是一个存储了数值 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"10"}]},{"type":"text","value":" 的内存地址。而数字 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"10"}]},{"type":"text","value":" 本身是一个右值，因为它代表的是一个存储在内存中的值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，表达式 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"10 + 20"}]},{"type":"text","value":" 的结果是一个右值，因为它表示的是一个临时存储的值，而不是一个内存地址。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，左值和右值是编译器在编译代码时用来区分不同类型的表达式的概念。"}]},{"type":"element","tag":"h2","props":{"id":"malloc-和-newfree-和-delete-的区别"},"children":[{"type":"text","value":"malloc 和 new，free 和 delete 的区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"malloc是函数，而new是关键字。然后new作为C++中动态对象创建的基石，除了完成堆空间的分配操作以外还要完成一些初始化操作，及new的过程中会调用对象的构造函数去初始化，而malloc不会。最后要明确的是malloc分配的内存只能用free来释放，而new分配的地址只能用delete来释放，如果new分配的是数组，则需要delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"\n来释放，否则会出现未定义行为。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"delete"}]},{"type":"text","value":"会调用对象的析构函数,和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"new"}]},{"type":"text","value":"对应"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"free"}]},{"type":"text","value":"\n只会释放内存，new调用构造函数。malloc与free是C++/C语言的标准库函数，new/delete是C++的运算符。它们都可用于申请动态内存和释放内存。对于非内部数据类型的对象而言，光用maloc/free无法满足动态对象的要求。对象在创建的同时要自动执行构造函数，对象在消亡之前要自动执行析构函数。由于malloc/free是库函数而不是运算符，不在编译器控制权限之内，不能够把执行构造函数和析构函数的任务强加于malloc/free。因此C++语言需要一个能完成动态内存分配和初始化工作的运算符new，以及一个能完成清理与释放内存工作的运算符delete。注意new/delete不是库函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"delete"}]},{"type":"text","value":" 与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"delete []"}]},{"type":"text","value":"区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"delete只会调用一次析构函数，而delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"会调用每一个成员的析构函数。在More Effective\nC++中有更为详细的解释：“当delete操作符用于数组时，它为每个数组元素调用析构函数，然后调用operator\ndelete来释放内存。”delete与new配套，delete "},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"与new "},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"配套"}]},{"type":"element","tag":"code","props":{"code":"MemTest *mTest1 = new MemTest[10];\nMemTest *mTest2 = new MemTest;\nInt *pInt1 = new int[10];\nInt *pInt2 = new int;\ndelete[]pInt1; //-1-\ndelete[]pInt2; //-2-\ndelete[]mTest1;//-3-\ndelete[]mTest2;//-4-\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"MemTest "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"mTest1 "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" MemTest["}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"MemTest "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"mTest2 "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" MemTest;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"Int "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"pInt1 "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"Int "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"pInt2 "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"[]pInt1;"}]},{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":" //-1-"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"[]pInt2;"}]},{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":" //-2-"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"[]mTest1;"}]},{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"//-3-"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"[]mTest2;"}]},{"type":"element","tag":"span","props":{"class":"ct-aa7e4d"},"children":[{"type":"text","value":"//-4-"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在-4-处报错。 这就说明：对于内建简单数据类型，delete和delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"功能是相同的。对于自定义的复杂数据类型，delete和delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"\n不能互用。delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"\n删除一个数组，delete删除一个指针。简单来说，用new分配的内存用delete删除；用new"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"分配的内存用delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"删除。delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"\n会调用数组元素的析构函数。内部数据类型没有析构函数，所以问题不大。如果你在用delete时没用括号，delete就会认为指向的是单个对象，否则，它就会认为指向的是一个数组。"}]},{"type":"element","tag":"h2","props":{"id":"组合与继承"},"children":[{"type":"text","value":"组合与继承"}]},{"type":"element","tag":"h3","props":{"id":"组合"},"children":[{"type":"text","value":"组合"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优点："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不会破环封装性父类的任何变化不会引起子类的变化"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"组合运用复杂的设计他们的关系实在程序运行的时候才确定的可以支持动态的组合"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"整体类可以对局部类的接口进行封装，提供新的接口"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"缺点："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"整体类不能自动获得和局部类同样的接口，只有通过创建局部的对象去调用它"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建整体类的时候需要创建局部类的对象"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"继承"},"children":[{"type":"text","value":"继承"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优点："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"子类继承了父类能自动获得父类的接口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建子类对象的时候不用创建父类对象"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"缺点："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"破坏了封装，父类的改变必定引起子类的改变，子类缺乏独立性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"支持功能上的扩展，但多重继承往往增加了系统结构的复杂度。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"继承是在静态编译的时候就已经确定了关系，不支持动态继承。"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"深拷贝与浅拷贝区别是什么"},"children":[{"type":"text","value":"深拷贝与浅拷贝区别是什么？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"浅拷贝"}]},{"type":"text","value":"：如果在类中没有显式地声明一个"},{"type":"element","tag":"a","props":{"href":"#copyConstructor"},"children":[{"type":"text","value":"拷贝构造函数"}]},{"type":"text","value":"\n，那么，编译器将会根据需要生成一个默认的"},{"type":"element","tag":"a","props":{"href":"#copyConstructor"},"children":[{"type":"text","value":"拷贝构造函数"}]},{"type":"text","value":"，完成对象之间的位拷贝。default\nmemberwise copy即称为浅拷贝。 此处需要注意，并非像大多数人认为的“如果class未定义出copy\nconstructor，那么编译器就会为之合成一个执行default memberwise copy语义的copy\nconstructor”。 通常情况下，只有在default copy constructor被视为trivial时，才会发生上述情况。一个class，如果既没有任何base/member\nclass含有copy\nconstructor，也没有任何virtual base class或 virtual functions， 它就会被视为trivial。 通常情况下，浅拷贝是够用的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"深拷贝"}]},{"type":"text","value":"：然而在某些状况下，类内成员变量需要动态开辟堆内存，如果实行位拷贝，也就是把对象里的值完全复制给另一个对象，如A=B。\n这时，如果B中有一个成员变量指针已经申请了内存，那A中的那个成员变量也指向同一块内存。如果此时B中执行析构函数释放掉指向那一块堆的指针，这时A内的指针就将成为悬挂指针。\n因此，这种情况下不能简单地复制指针，而应该复制“资源”，也就是再重新开辟一块同样大小的内存空间。"}]}]},{"type":"element","tag":"h2","props":{"id":"动态绑定和静态绑定的区别"},"children":[{"type":"text","value":"动态绑定和静态绑定的区别"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对象的静态类型：对象在声明时采用的类型。是在编译期确定的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对象的动态类型：目前所指对象的类型。是在运行期决定的。对象的动态类型可以更改，但是静态类型无法更改。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态绑定：绑定的是对象的静态类型，某特性(比如函数)依赖于对象的静态类型，发生在编译期。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动态绑定：绑定的是对象的动态类型，某特性(比如函数)依赖于对象的动态类型，发生在运行期。"}]}]},{"type":"element","tag":"h2","props":{"id":"变量的声明和定义有什么区别"},"children":[{"type":"text","value":"变量的声明和定义有什么区别？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"声明"}]},{"type":"text","value":"告诉编译器，这个变量或函数已经在程序其他地方存在了，所以我正在把这个信息告诉你，下面我要调用的时候请放行。但请不要为我分配任何内存空间，\n因为已经这个步骤在变量或函数定义的地方进行分配了"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n而"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"定义"}]},{"type":"text","value":"则很清楚了，就是要求分配内存空间。 很多时候，声明和定义是合而为一的。"}]},{"type":"element","tag":"code","props":{"code":"int a;\nvoid func() {};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"() {};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里同时声明且定义了一个变量和一个函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"声明可以进行多次，定义只能进行一次"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jianshu.com/p/92e81ecc8737","rel":["nofollow"]},"children":[{"type":"text","value":"more info"}]}]},{"type":"element","tag":"h2","props":{"id":"内联函数"},"children":[{"type":"text","value":"内联函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内联函数是一种编译器优化技术，它允许将函数的代码“内联”到调用它的代码中。这意味着，编译器不会生成一个独立的函数，而是会将函数的代码拷贝到每个调用该函数的地方。这样可以避免在函数调用时执行额外的操作，因此可以提高程序的性能。"}]},{"type":"element","tag":"h2","props":{"id":"lambda-函数的特点和普通函数相比有什么优点"},"children":[{"type":"text","value":"lambda 函数的特点，和普通函数相比有什么优点？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"匿名函数，可以在程序的需要时创建和使用，并在不再需要时销毁。lambda 函数具有以下一些特点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lambda 函数可以包含多条语句，并且可以使用控制结构（如 if、for 等）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lambda 函数可以访问外部作用域中的变量，并且可以捕获外部作用域中的变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lambda 函数可以通过参数传递给其它函数，并且可以作为参数返回给调用者。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"与普通函数相比，lambda 函数的优点在于它更加简洁，可以在程序的需要时创建和使用，并且可以访问外部作用域中的变量。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"指定变量名：例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[x]"}]},{"type":"text","value":"，表示将外部作用域中的变量 x 捕获到 lambda 函数中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用拷贝语义：例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[=x]"}]},{"type":"text","value":"，表示将外部作用域中的变量 x 捕获到 lambda 函数中，并使用拷贝语义。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用引用语义：例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&x]"}]},{"type":"text","value":"，表示将外部作用域中的变量 x 捕获到 lambda 函数中，并使用引用语义。"}]}]},{"type":"element","tag":"h2","props":{"id":"extern-c-的作用"},"children":[{"type":"text","value":"extern C 的作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"extern \"C\" 是 C++ 语言中的一个关键字，用于在 C++ 程序中调用 C 语言的函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++ 语言是在 C 语言的基础上发展而来的，它增加了许多新的特性和功能，但是同时也保留了 C 语言的一些特性。例如，C++ 程序可以通过 extern \"C\" 关键字调用 C 语言中的函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了理解 extern \"C\" 的作用，我们需要先了解 C++ 和 C 语言的函数命名方式的区别。在 C++ 中，函数名称会经过名称改编，也就是说，编译器会在函数名称中添加一些额外的信息，以区分重载函数。例如，下面是一个 C++ 程序中定义的函数："}]},{"type":"element","tag":"code","props":{"code":"int add(int x, int y)\n{\n    return x + y;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" y;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，我们定义了一个名为 add 的函数，它接收两个 int 类型的参数，并返回一个 int 类型的结果。但是，在编译时，编译器会将函数名称 add 改编为一个新的名称，例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_Z3addii"}]},{"type":"text","value":" 。这样，即使在不同的文件中定义了同名函数，编译器也能区分它们，避免出现冲突。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而在 C 语言中，函数名称不会经过名称改编。例如，下面是一个 C 程序中定义的函数："}]},{"type":"element","tag":"code","props":{"code":"int add(int x, int y)\n{\n    return x + y;\n}\n","language":"c","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" y;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，我们定义了一个名为 add 的函数，它接收两个 int 类型的参数，并返回一个 int 类型的结果。与 C++ 不同的是，在 C 语言中，函数名称不会经过名称改编，例如 add 依然是 add 。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，如果在 C++ 程序中直接调用 C 语言中定义的函数，就会出现问题。例如，下面是一个 C++ 程序中调用 C 语言中定义的函数的例子："}]},{"type":"element","tag":"code","props":{"code":"extern int add(int x, int y);\n\nint main()\n{\n    int result = add(1, 2);\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"extern"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2356f5"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" result "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，我们在 C++ 程序中调用了 C 语言中定义的函数 add 。但是，由于 C++ 和 C 语言的函数命名方式不同，C++ 程序并不能直接调用 C 语言中的函数。因此，在上面的例子中，编译器会报错，提示无法找到 add 函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了解决这个问题，C++ 语言引入了 extern \"C\" 关键字。它能够告诉编译器，接下来定义的函数是 C 语言中的函数，它们的名称不会经过名称改编。因此，可以在 C++ 程序中通过 extern \"C\" 来调用 C 语言中的函数。例如，下面是一个 C++ 程序中正确调用 C 语言中的函数的例子："}]},{"type":"element","tag":"code","props":{"code":"extern \"C\" int add(int x, int y);\n\nint main()\n{\n    int result = add(1, 2);\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"extern"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd913e"},"children":[{"type":"text","value":"\"C\""}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" x, "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" y);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" result "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97c2d0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f538a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ae9db5"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb02fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，我们使用了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"extern \"C\""}]},{"type":"text","value":" 来声明 C 语言中的函数，并通过它调用了 C 语言中的函数 add 。由于编译器知道 add 函数是 C 语言中的函数，它的名称不会经过名称改编，所以编译器能够正确地找到 add 函数，并调用它。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，extern \"C\" 是 C++ 语言中的一个关键字，用于在 C++ 程序中调用 C 语言的函数。它能告诉编译器，接下来定义的函数是 C 语言中的函数，它们的名称不会经过名称改编。通过 extern \"C\"，C++ 程序就能够正确地调用 C 语言中的函数。这样，C++ 程序就能够充分利用 C 语言中的代码，提高开发效率。"}]},{"type":"element","tag":"h2","props":{"id":"volatile关键字的作用"},"children":[{"type":"text","value":"volatile关键字的作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"volatile"}]},{"type":"text","value":"关键字用于声明一个变量时，它会告诉编译器，这个变量的值可能会在某个时刻由其他线程更改。这意味着，当一个线程访问这个变量时，它必须每次都从内存中重新读取这个变量的值，而不是使用它在线程本地缓存中的值。这种声明方式可以防止某些线程中的编译器优化，从而确保多个线程都能访问到最新的值。"}]},{"type":"element","tag":"h2","props":{"id":"结构struct与联合union的区别"},"children":[{"type":"text","value":"结构（struct）与联合（union）的区别"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"结构和联合都是由多个不同的数据类型成员组成, 但在任何同一时刻, 联合中只存放了一个被选中的成员（所有成员共用一块地址空间）,\n而结构的所有成员都存在（不同成员的存放地址不同）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对于联合的不同成员赋值, 将会对其它成员重写, 原来成员的值就不存在了, 而对于结构的不同成员赋值是互不影响的。"}]}]},{"type":"element","tag":"h2","props":{"id":"重载overload和重写override有的书也叫做覆盖的区别"},"children":[{"type":"text","value":"重载（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"overload"}]},{"type":"text","value":")和重写("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"override"}]},{"type":"text","value":"，有的书也叫做“覆盖”）的区别？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常考的题目。从定义上来说："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重载：是指允许存在多个同名函数，而这些函数的参数表不同（或许参数个数不同，或许参数类型不同，或许两者都不同）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重写：是指子类重新定义父类虚函数的方法。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从实现原理上来说："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重载"}]},{"type":"text","value":"：编译器根据函数不同的参数表，对同名函数的名称做修饰，然后这些同名函数就成了不同的函数（至少对于编译器来说是这样的）。如，有两个同名函数：function\nfunc(p:integer):\ninteger;和function func(p:string):\ninteger;。那么编译器做过修饰后的函数名称可能是这样的：int_func、str_func。对于这两个函数的调用，在编译器间就已经确定了，是静态的。也就是说，它们的地址在编译期就绑定了（早绑定），因此，重载和多态无关！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重写"}]},{"type":"text","value":"\n：和多态真正相关。当子类重新定义了父类的虚函数后，父类指针根据赋给它的不同的子类指针，动态的调用属于子类的该函数，这样的函数调用在编译期间是无法确定的（调用的子类的虚函数的地址无法给出）。因此，这样的函数地址是在运行期绑定的（晚绑定）。"}]}]},{"type":"element","tag":"h2","props":{"id":"面向对象编程与面向过程编程的区别与联系"},"children":[{"type":"text","value":"面向对象编程与面向过程编程的区别与联系"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C语言编程的过程。主函数，定义变量，调用函数然后实现。面向过程编程是一种非常具体，要面面俱到的的编程方式。\n而面向对象是以对象为单位来进行编程，比较像正常人的思维。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面我们举个例子，比如开车、加速、减速、刹车。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n用面向过程来说就是你要先有一个车，然后这四个分别是4件事，也就是说你要写4个函数，分别是开车、加速、减速、刹车，这分别是四个事件，如果使用的话要调用4个函数。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n但是对于面向对象的编程来说，我们关心的是车这个类，而不是开车、加速、减速和刹车这四个过程。这4个过程是车这个类的一部分，只是其中的一种行为，而且对于行为的顺序没有强制要求。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"两种思想的对比"}]},{"type":"text","value":"："},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n面向过程是具体的东西，而且面向过程是面向对象的基础。面向对象可以说是面向过程的抽象，比如汽车有开车，加减速和刹车，关于汽车的操作有好多，\n每一个都需要一个具体的过程来实现，把这些过程抽象的总结起来就可以形成一个类，这个类包括的汽车所有的东西，所有的操作。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n总结来说就是，面向过程是一种基础的方法，它考虑的是实际的实现，一般情况下，面向过程是自顶向下逐步求精，其最重要的是模块化的思想方法。\n因此在模块化编程的时候才会有“低耦合，高内聚”的思想来提高效率。面向对象的方法主要是把事物给对象化，包括其属性和行为。\n当程序较小的时候，面向过程就会体现出一种优势，其程序流程十分清楚。但是，面向对象编程更贴近实际生活的思想。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"面向过程和面向对象的本质理解"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n面向过程是具体化的，流程化的。解决一个问题，需要一步一步分析需要怎样，然后需要怎样，一步一步实现的。\n面向对象是模型化的，抽象出一个类，这是一个封闭的环境，在这个环境中有数据有解决问题的方法，你如果需要什么功能直接使用就可以了，\n至于是怎么实现的，你不用知道。\n从代码层面来看，面向对象和面向过程的主要区别就是数据是单独存储还是与操作存储在一起。\n在类的里边，实现具体的功能还是需要流程化、具体化的代码去实现的，在类里还是需要具体的算法来实现的。\n总结来说面向对象的底层还是面向过程，面向过程抽象成类，然后封装，方便使用就是面向对象。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ae9db5{color:#0550AE}\n.ct-aa7e4d{color:#6E7781}\n.ct-dd913e{color:#0A3069}\n.ct-97c2d0{color:#8250DF}\n.ct-2356f5{color:#953800}\n.ct-bb02fd{color:#24292F}\n.ct-4f538a{color:#CF222E}\n.dark .ct-4f538a{color:#FF7B72}\n.dark .ct-bb02fd{color:#C9D1D9}\n.dark .ct-2356f5{color:#FFA657}\n.dark .ct-97c2d0{color:#D2A8FF}\n.dark .ct-dd913e{color:#A5D6FF}\n.dark .ct-aa7e4d{color:#8B949E}\n.dark .ct-ae9db5{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"oop","depth":2,"text":"oop"},{"id":"what-are-classes-and-objects","depth":2,"text":"What are Classes and Objects?"},{"id":"参数","depth":2,"text":"参数"},{"id":"特性-封装-继承-多态","depth":2,"text":"特性 —— 封装 继承 多态"},{"id":"编译时链接有几种方式静态链接和动态链接的区别是什么","depth":2,"text":"编译时链接有几种方式？静态链接和动态链接的区别是什么？"},{"id":"转移语义move-semantics","depth":2,"text":"转移语义(Move Semantics)"},{"id":"左值和右值","depth":2,"text":"左值和右值"},{"id":"malloc-和-newfree-和-delete-的区别","depth":2,"text":"malloc 和 new，free 和 delete 的区别"},{"id":"组合与继承","depth":2,"text":"组合与继承","children":[{"id":"组合","depth":3,"text":"组合"},{"id":"继承","depth":3,"text":"继承"}]},{"id":"深拷贝与浅拷贝区别是什么","depth":2,"text":"深拷贝与浅拷贝区别是什么？"},{"id":"动态绑定和静态绑定的区别","depth":2,"text":"动态绑定和静态绑定的区别"},{"id":"变量的声明和定义有什么区别","depth":2,"text":"变量的声明和定义有什么区别？"},{"id":"内联函数","depth":2,"text":"内联函数"},{"id":"lambda-函数的特点和普通函数相比有什么优点","depth":2,"text":"lambda 函数的特点，和普通函数相比有什么优点？"},{"id":"extern-c-的作用","depth":2,"text":"extern C 的作用"},{"id":"volatile关键字的作用","depth":2,"text":"volatile关键字的作用"},{"id":"结构struct与联合union的区别","depth":2,"text":"结构（struct）与联合（union）的区别"},{"id":"重载overload和重写override有的书也叫做覆盖的区别","depth":2,"text":"重载（overload)和重写(override，有的书也叫做“覆盖”）的区别？"},{"id":"面向对象编程与面向过程编程的区别与联系","depth":2,"text":"面向对象编程与面向过程编程的区别与联系"}]}},"_type":"markdown","_id":"content:1.cpp:concept:0.index.md","_source":"content","_file":"1.cpp/concept/0.index.md","_extension":"md"},{"_path":"/cpp/concept/atomic","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"原子","description":"atomic 是一个 C++ 关键字，它表示一个原子操作，即一个不可被线程安全地拆分的操作。原子操作通常用于多线程环境下，可以保证在执行过程中不会被其他线程干扰。","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"原子"},"children":[{"type":"text","value":"原子"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"atomic 是一个 C++ 关键字，它表示一个原子操作，即一个不可被线程安全地拆分的操作。原子操作通常用于多线程环境下，可以保证在执行过程中不会被其他线程干扰。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++ 的 atomic 类型提供了一种简单的方法来执行原子操作，它可以保证在多线程环境下，一个原子操作的执行是完整的，不会被线程安全地拆分。atomic 类型提供了一些基本的操作，包括原子加法、原子减法、原子比较、原子交换等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的 atomic 类型的使用示例："}]},{"type":"element","tag":"code","props":{"code":"#include <atomic>\n#include <iostream>\n\nint main() {\n  std::atomic<int> a(0);\n  std::cout << \"a = \" << a << std::endl; // 输出 a 的值\n\n  a++; // 原子加法\n  std::cout << \"a = \" << a << std::endl; // 输出 a 的值\n\n  a--; // 原子减法\n  std::cout << \"a = \" << a << std::endl; // 输出 a 的值\n\n  int b = 1;\n  a.compare_exchange_strong(b, 2); // 原子比较并交换\n  std::cout << \"a = \" << a << std::endl; // 输出 a 的值\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"<atomic>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cf9ac1"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cf9ac1"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-88c9ab"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"\"a = \""}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 输出 a 的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  a"}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 原子加法"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"\"a = \""}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 输出 a 的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  a"}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 原子减法"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"\"a = \""}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 输出 a 的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-88c9ab"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  a."}]},{"type":"element","tag":"span","props":{"class":"ct-cf9ac1"},"children":[{"type":"text","value":"compare_exchange_strong"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"(b, "}]},{"type":"element","tag":"span","props":{"class":"ct-88c9ab"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 原子比较并交换"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d666cb"},"children":[{"type":"text","value":"\"a = \""}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e77a1d"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9afdd"},"children":[{"type":"text","value":" // 输出 a 的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e0177d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-88c9ab"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90bf3b"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的程序定义了一个 atomic 类型的变量 a，并使用原子加法、原子减法、原子比较并交换等操作来修改 a 的值。通过使用 atomic 类型，我们可以确保在多线程环境下，这些操作的执行是完整的，不会被其他线程打断。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常情况下，atomic 类型的变量可以和普通类型的变量一样使用，只不过在多线程环境下，它们可以保证操作的完整性。因此，如果你的程序需要在多线程环境下执行原子操作，那么你可以使用 atomic 类型来保证操作的正确性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，atomic 类型还支持一些高级的操作，比如原子访问、原子指针、原子引用等。这些操作可以让你在多线程环境下，安全地访问、操作、交换指针和引用类型的变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，atomic 是 C++ 中一个非常重要的关键字，它可以保证在多线程环境下，原子操作的完整性。如果你的程序需要在多线程环境下执行原子操作，那么你可以使用 atomic 类型来保证操作的正确性。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e9afdd{color:#6E7781}\n.ct-88c9ab{color:#0550AE}\n.ct-e77a1d{color:#953800}\n.ct-cf9ac1{color:#8250DF}\n.ct-d666cb{color:#0A3069}\n.ct-90bf3b{color:#24292F}\n.ct-e0177d{color:#CF222E}\n.dark .ct-e0177d{color:#FF7B72}\n.dark .ct-90bf3b{color:#C9D1D9}\n.dark .ct-d666cb{color:#A5D6FF}\n.dark .ct-cf9ac1{color:#D2A8FF}\n.dark .ct-e77a1d{color:#FFA657}\n.dark .ct-88c9ab{color:#79C0FF}\n.dark .ct-e9afdd{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:concept:atomic.md","_source":"content","_file":"1.cpp/concept/atomic.md","_extension":"md"},{"_path":"/cpp/concept/class","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"类","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"类"},"children":[{"type":"text","value":"类"}]},{"type":"element","tag":"h2","props":{"id":"一个空类会生成哪些函数"},"children":[{"type":"text","value":"一个空类会生成哪些函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果一个类是空的，也就是说它没有定义任何成员变量和成员函数，那么它只会生成一个默认的构造函数。如果您显式地定义了构造函数，那么这个空类将会生成您定义的构造函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个空类的例子："}]},{"type":"element","tag":"code","props":{"code":"class EmptyClass {\n    // This class has no members\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"EmptyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"    // This class has no members"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个例子中，类 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EmptyClass"}]},{"type":"text","value":" 没有定义任何成员变量和成员函数。因此，它只会生成一个默认的构造函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您想要在空类中添加一些成员函数，可以使用如下代码："}]},{"type":"element","tag":"code","props":{"code":"class EmptyClass {\n    public:\n        EmptyClass() {\n            // This is the default constructor\n        }\n\n        void doSomething() {\n            // This is a member function\n        }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"EmptyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"EmptyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"            // This is the default constructor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"            // This is a member function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个例子中，类 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EmptyClass"}]},{"type":"text","value":" 除了默认的构造函数外，还定义了一个成员函数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"doSomething"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，一个空类会生成一个默认的构造函数，如果您显式地定义了构造函数，那么这个空类将会生成您定义的构造函数。"}]},{"type":"element","tag":"h2","props":{"id":"类默认的构造函数是什么"},"children":[{"type":"text","value":"类默认的构造函数是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类的默认构造函数是一种特殊的构造函数，用于在创建对象时初始化对象的成员变量。如果您没有定义任何构造函数，那么编译器会自动生成一个默认构造函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的例子，演示了类的默认构造函数的使用："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\nusing namespace std;\n\nclass Point {\n    public:\n        int x;\n        int y;\n};\n\nint main() {\n    // Create an object of class Point\n    Point p;\n\n    // Initialize the object's member variables\n    p.x = 10;\n    p.y = 20;\n\n    // Print the object's member variables\n    cout << \"x = \" << p.x << endl;\n    cout << \"y = \" << p.y << endl;\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4976b"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"Point"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" y;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"    // Create an object of class Point"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    Point p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"    // Initialize the object's member variables"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    p.x "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5340f9"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    p.y "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5340f9"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"    // Print the object's member variables"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4976b"},"children":[{"type":"text","value":"\"x = \""}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" p.x "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4976b"},"children":[{"type":"text","value":"\"y = \""}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" p.y "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5340f9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个例子中，类 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" 包含两个成员变量 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"y"}]},{"type":"text","value":"。我们创建了一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" 类的对象 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p"}]},{"type":"text","value":"，并且通过默认构造函数初始化了这个对象的成员变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个例子中，编译器会自动生成一个默认的构造函数，这个构造函数会将对象的成员变量初始化为默认值。在这个例子中，因为我们没有定义构造函数，所以编译器会自动生成一个默认的构造函数，将对象的成员变量 x 和 y 初始化为 0。"}]},{"type":"element","tag":"h2","props":{"id":"只定义析构函数会自动生成哪些构造函数"},"children":[{"type":"text","value":"只定义析构函数，会自动生成哪些构造函数？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你只定义了析构函数，那么编译器会自动为你生成一个默认构造函数和一个复制构造函数。这两个函数都没有参数，并且会执行默认的行为。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"默认构造函数会将类的所有成员变量都初始化为它们的默认值（例如，整型会被初始化为0，指针会被初始化为nullptr）。复制构造函数会将类的所有成员变量都复制到新的对象中，这样新的对象就和原来的对象完全一样了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这些默认生成的构造函数可能会带来一些问题，比如内存泄漏。如果类中有指针成员变量，那么默认构造函数可能会导致内存泄漏，因为它不会分配内存给指针指向的对象。复制构造函数也可能会导致问题，因为它只是简单地复制了指针，而不会创建新的对象。因此，如果你定义了析构函数，那么你应该同时定义构造函数，以避免这些问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当你定义了析构函数时，你应该同时定义构造函数来避免内存泄漏和其他问题。构造函数有多种类型，包括默认构造函数、复制构造函数、转换构造函数和移动构造函数。每一种构造函数都有它的用途和作用，你应该根据你的需要来选择使用哪一种构造函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"默认构造函数是一种不带参数的构造函数。它用于创建一个对象时，如果没有提供任何参数，就会使用默认构造函数来初始化对象。复制构造函数是一种接受一个类型相同的对象作为参数的构造函数。它用于创建一个新的对象，并复制原来的对象的成员变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"转换构造函数是一种接受一个不同类型的对象作为参数的构造函数。它可以用来将一个对象转换为另一个类型的对象。移动构造函数是一种接受一个类型相同的对象作为参数的构造函数，但是它不会复制原来的对象，而是将原来的对象移动到新的对象上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"定义构造函数时，你可以指定不同的参数列表来满足不同的需求。例如，你可以定义一个默认构造函数来初始化对象的成员变量，也可以定义一个接受参数的构造函数来根据参数来初始化对象的成员变量。你也可以定义一个复制构造函数来将一个对象复制到另一个对象上，或者定义一个转换构造函数来将一个对象转换为另一个类型的对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"定义构造函数时，你应该注意几个重要的方面。首先，构造函数的名字应该和类的名字相同，这样编译器才能识别它是一个构造函数。其次，构造函数不应该有返回值，因为它的作用是创建一个对象，而不是返回一个值。最后，构造函数应该避免执行抛出异常的代码，因为如果构造函数抛出异常，程序将无法继续运行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，构造函数是非常重要的，它可以让你创建一个对象并初始化它的成员变量。如果你只定义了析构函数，那么编译器会自动为你生成默认的构造函数和复制构造函数，但这些默认生成的函数可能不能满足你的需求，因此你应该自己定义构造函数，以便根据你的需要来初始化对象的成员变量。构造函数有多种类型，包括默认构造函数、复制构造函数、转换构造函数和移动构造函数，每一种构造函数都有它的用途和作用。例如，默认构造函数用于创建一个对象时，如果没有提供任何参数，就会使用默认构造函数来初始化对象。复制构造函数用于创建一个新的对象，并复制原来的对象的成员变量。转换构造函数用于将一个对象转换为另一个类型的对象。移动构造函数用于将一个对象移动到另一个对象上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常情况下，类中会包含多个构造函数，每个构造函数都有它的用途和作用。例如，一个类可能包含一个默认构造函数和一个接受参数的构造函数，这样你就可以根据需要选择使用哪一个构造函数来初始化对象的成员变量。同时，你还可以定义复制构造函数和转换构造函数，以便满足不同的需求。总之，定义构造函数可以帮助你创建对象并初始化它的成员变量，这样你就可以使用这些对象来完成特定的任务。在定义构造函数时，你应该注意构造函数的名字应该和类的名字相同，并且构造函数不应该有返回值。此外，构造函数应该避免执行抛出异常的代码，因为如果构造函数抛出异常，程序将无法继续运行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总结一下，构造函数是非常重要的，它可以让你创建一个对象并初始化它的成员变量。如果你只定义了析构函数，那么编译器会自动为你生成默认的构造函数和复制构造函数，但这些默认生成的函数可能不能满足你的需求，因此你应该自己定义构造函数，以便根据你的需要来初始化对象的成员变量。构造函数有多种类型，包括默认构造函数、复制构造函数、转换构造函数和移动构造函数，每一种构造函数都有它的用途和作用。"}]},{"type":"element","tag":"h2","props":{"id":"如何实现一个不能在堆分配的类如何实现一个不能被继承的类"},"children":[{"type":"text","value":"如何实现一个不能在堆分配的类，如何实现一个不能被继承的类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如何实现一个不能在堆上分配的类，如果要在堆上分配就是会使用new，所以可以重载new 操作符，并将其重载于class A的private内："}]},{"type":"element","tag":"code","props":{"code":"class A \n{\npublic:\n    A(int a):_x(a){}\n    int Display() {\n    return _x;\n}\nvoid setVal(int x) {\n    _x = x;\n    return;\n}\nprivate:\n    //\n    int _x;\n    void* operator new(size_t t){\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"):"}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"_x"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"(a){}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"Display"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" _x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"setVal"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    _x "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-17b1d2"},"children":[{"type":"text","value":"    //"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" _x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"void*"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"operator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如何实现一个不能被继承的类，这里有一个比较简单的方法，利用C++11的新关键字final："}]},{"type":"element","tag":"code","props":{"code":"class B final {\n    public:\n        B(int a) {\n        }\n};  \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68b8a9"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a112b3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a51575"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc140b"},"children":[{"type":"text","value":"};  "}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5340f9{color:#0550AE}\n.ct-d4976b{color:#0A3069}\n.ct-68b8a9{color:#8250DF}\n.ct-17b1d2{color:#6E7781}\n.ct-a51575{color:#953800}\n.ct-cc140b{color:#24292F}\n.ct-a112b3{color:#CF222E}\n.dark .ct-a112b3{color:#FF7B72}\n.dark .ct-cc140b{color:#C9D1D9}\n.dark .ct-a51575{color:#FFA657}\n.dark .ct-17b1d2{color:#8B949E}\n.dark .ct-68b8a9{color:#D2A8FF}\n.dark .ct-d4976b{color:#A5D6FF}\n.dark .ct-5340f9{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"一个空类会生成哪些函数","depth":2,"text":"一个空类会生成哪些函数"},{"id":"类默认的构造函数是什么","depth":2,"text":"类默认的构造函数是什么？"},{"id":"只定义析构函数会自动生成哪些构造函数","depth":2,"text":"只定义析构函数，会自动生成哪些构造函数？"},{"id":"如何实现一个不能在堆分配的类如何实现一个不能被继承的类","depth":2,"text":"如何实现一个不能在堆分配的类，如何实现一个不能被继承的类"}]}},"_type":"markdown","_id":"content:1.cpp:concept:class.md","_source":"content","_file":"1.cpp/concept/class.md","_extension":"md"},{"_path":"/cpp/concept/concurrent","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"并发","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"并发"},"children":[{"type":"text","value":"并发"}]},{"type":"element","tag":"h2","props":{"id":"并发-并行-线程-进程-协程"},"children":[{"type":"text","value":"并发 并行 线程 进程 协程"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一开始大家想要同一时间执行那么三五个程序，大家能一块跑一跑。特别是UI什么的，别一上计算量比较大的玩意就跟死机一样。于是就有了"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"并发"}]},{"type":"text","value":"，从程序员的角度可以看成是多个独立的逻辑流。内部可以是多cpu并行，也可以是单cpu时间分片，能快速的切换逻辑流，看起来像是大家一块跑的就行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"但是一块跑就有问题了。我计算到一半，刚把多次方程解到最后一步，你突然插进来，我的中间状态咋办，我用来储存的内存被你覆盖了咋办？所以跑在一个cpu里面的并发都需要处理上下文切换的问题。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"进程"}]},{"type":"text","value":"就是这样抽象出来个一个概念，搭配虚拟内存、进程表之类的东西，用来管理独立的程序运行、切换。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"后来一电脑上有了好几个cpu，好咧，大家都别闲着，一人跑一进程。就是所谓的"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"并行"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"因为程序的使用涉及大量的计算机资源配置，把这活随意的交给用户程序，非常容易让整个系统分分钟被搞跪，资源分配也很难做到相对的公平。所以核心的操作需要陷入内核(kernel)，切换到操作系统，让老大帮你来做。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有的时候碰着I/O访问，阻塞了后面所有的计算。空着也是空着，老大就直接把CPU切换到其他进程，让人家先用着。当然除了I/O阻塞，还有时钟阻塞等等。一开始大家都这样弄，后来发现不成，太慢了。为啥呀，一切换进程得反复进入内核，置换掉一大堆状态。进程数一高，大部分系统资源就被进程切换给吃掉了。后来搞出"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"线程"}]},{"type":"text","value":"的概念，大致意思就是，这个地方阻塞了，但我还有其他地方的逻辑流可以计算，这些逻辑流是共享一个地址空间的，不用特别麻烦的切换页表、刷新TLB，只要把寄存器刷新一遍就行，能比切换进程开销少点。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果连时钟阻塞、 线程切换这些功能我们都不需要了，自己在进程里面写一个逻辑流调度的东西。那么我们即可以利用到并发优势，又可以避免反复系统调用，还有进程切换造成的开销，分分钟给你上几千个逻辑流不费力。这就是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"用户态线程"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从上面可以看到，实现一个用户态线程有两个必须要处理的问题：一是碰着阻塞式I\\O会导致整个进程被挂起；二是由于缺乏时钟阻塞，进程需要自己拥有调度线程的能力。如果一种实现使得每个线程需要自己通过调用某个方法，主动交出控制权。那么我们就称这种用户态线程是协作式的，即是协程。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"本质上协程就是用户空间下的线程。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"语义不同"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于语义不同 C++和Java有一处最大的区别在于语义不同\nJava 只生成了一个对象 a和b仅仅是把持对象的引用而已"}]}]},{"type":"element","tag":"code","props":{"code":"Animal a = new Animal();  \nAnimal b = a;\n","language":"Java","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Animal a = new Animal();  \nAnimal b = a;"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而C++生成了两个对象"}]}]},{"type":"element","tag":"code","props":{"code":"Animal a;\nAnimal b = a;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-35f919"},"children":[{"type":"text","value":"Animal a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-35f919"},"children":[{"type":"text","value":"Animal b "}]},{"type":"element","tag":"span","props":{"class":"ct-e13067"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-35f919"},"children":[{"type":"text","value":" a;"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"高并发系统核心指标"},"children":[{"type":"text","value":"高并发系统核心指标"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"高并发性能指标:QPS、TPS、RT、并发数、吞吐量"}]},{"type":"element","tag":"h3","props":{"id":"qps每秒查询"},"children":[{"type":"text","value":"QPS，每秒查询"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"QPS：Queries Per Second是衡量信息检索系统（例如搜索引擎或数据库）在一秒钟内接收到的搜索流量的一种常见度量。该术语在任何请求-响应系统中都得到更广泛的使用，更正确地称为每秒请求数（RPS：Request Per\nSecond）。"}]},{"type":"element","tag":"h3","props":{"id":"tps每秒事务"},"children":[{"type":"text","value":"TPS，每秒事务"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TPS：是Transactions Per\nSecond的缩写，也就是事务数/秒。它是软件测试结果的测量单位。一个事务是指一个客户端向服务器发送请求然后服务器做出响应的过程。客户端在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"QPS vs\nTPS：QPS基本类似于TPS，但是不同的是，对于一个页面的一次访问，形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入“QPS”之中。如，访问一个页面会请求服务器2次，一次访问，产生一个“T”，产生2个“Q”。"}]},{"type":"element","tag":"h3","props":{"id":"rt响应时间"},"children":[{"type":"text","value":"RT，响应时间"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RT（Response-time）响应时间：执行一个请求从开始到最后收到响应数据所花费的总体时间，即从客户端发起请求到收到服务器响应结果的时间。该请求可以是任何东西，从内存获取，磁盘IO，复杂的数据库查询或加载完整的网页。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"暂时忽略传输时间，响应时间是处理时间和等待时间的总和。处理时间是完成请求要求的工作所需的时间，等待时间是请求在被处理之前必须在队列中等待的时间。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"响应时间是一个系统最重要的指标之一，它的数值大小直接反应了系统的快慢。"}]},{"type":"element","tag":"h3","props":{"id":"concurrency并发数"},"children":[{"type":"text","value":"Concurrency，并发数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"并发数是指系统同时能处理的请求数量，这个也反应了系统的负载能力。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"并发意味着可以同时进行多个处理。并发在现代编程中无处不在，网络中有多台计算机同时存在，一台计算机上同时运行着多个应用程序。"}]},{"type":"element","tag":"h3","props":{"id":"吞吐量"},"children":[{"type":"text","value":"吞吐量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"系统的吞吐量（承压能力）和处理对CPU的消耗、外部接口、IO等因素紧密关联。单个处理请求对CPU消耗越高，外部系统接口、IO速度越慢，系统吞吐能力越低，反之越高。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"系统吞吐量有几个重要指标参数：QPS（TPS）、并发数、响应时间。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"QPS（TPS）：（Queries Per Second）每秒钟请求/事务数量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"并发数： 系统同时处理的请求/事务数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"响应时间： 一般取平均响应时间。"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"QPS（TPS）= 并发数/平均响应时间"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n并发数 = QPS*平均响应时间"}]}]},{"type":"element","tag":"h3","props":{"id":"结语"},"children":[{"type":"text","value":"结语"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"按二八定律来看，如果每天 80% 的访问集中在 20% 的时间里，这 20% 的时间就叫做峰值时间。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"公式：( 总PV数 "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"80% ) / ( 每天秒数"}]},{"type":"text","value":" 20% ) = 峰值时间每秒请求数(QPS)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"机器：峰值时间每秒QPS / 单台机器的QPS = 需要的机器"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每天300w PV 的在单台机器上，这台机器需要多少QPS？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n( 3000000 "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0.8 ) / (86400"}]},{"type":"text","value":" 0.2 ) = 139 (QPS)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果一台机器的QPS是58，需要几台机器来支持？\n139 / 58 = 3"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最佳线程数、QPS、RT"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"单线程QPS公式：QPS=1000ms/RT\n对同一个系统而言，支持的线程数越多，QPS越高。假设一个RT是80ms，则可以很容易的计算出QPS，QPS = 1000/80 = 12.5。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n多线程场景，如果把服务端的线程数提升到2，那么整个系统的QPS则为 2*（1000/80） = 25，可见QPS随着线程的增加而线性增长，那QPS上不去就加线程呗，听起来是这个道理，但是往往现实并非如此。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最佳线程数量"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"刚好消耗完服务器的瓶颈资源的临界线程数，公式如下 最佳线程数量=（（线程等待时间+线程cpu时间）/ 线程cpu时间）* cpu数量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"特性："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在达到最佳线程数的时候，线程数量继续递增，则QPS不变，而响应时间变长，持续递增线程数量，则QPS开始下降。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每个系统都有其最佳线程数量，但是不同状态下，最佳线程数量是会变化的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"瓶颈资源可以是CPU，可以是内存，可以是锁资源，IO资源，超过最佳线程数-->导致资源的竞争，超过最佳线程数-->响应时间递增。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e13067{color:#CF222E}\n.ct-35f919{color:#24292F}\n.dark .ct-35f919{color:#C9D1D9}\n.dark .ct-e13067{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"并发-并行-线程-进程-协程","depth":2,"text":"并发 并行 线程 进程 协程"},{"id":"高并发系统核心指标","depth":2,"text":"高并发系统核心指标","children":[{"id":"qps每秒查询","depth":3,"text":"QPS，每秒查询"},{"id":"tps每秒事务","depth":3,"text":"TPS，每秒事务"},{"id":"rt响应时间","depth":3,"text":"RT，响应时间"},{"id":"concurrency并发数","depth":3,"text":"Concurrency，并发数"},{"id":"吞吐量","depth":3,"text":"吞吐量"},{"id":"结语","depth":3,"text":"结语"}]}]}},"_type":"markdown","_id":"content:1.cpp:concept:concurrent.md","_source":"content","_file":"1.cpp/concept/concurrent.md","_extension":"md"},{"_path":"/cpp/concept/const","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"const","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"const"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"h2","props":{"id":"如何在const成员函数中赋值"},"children":[{"type":"text","value":"如何在const成员函数中赋值？"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mutable"}]},{"type":"text","value":"去掉const的成员函数的const性质"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为什么要有这种去除常量标志的需求？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"两个概念：物理常量性和逻辑常量性"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"物理常量性：实际上就是常量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"逻辑常量性：对用户而言是常量，但在用户不能访问的细节上不是常量。"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"const_cast和mutable的比较"},"children":[{"type":"text","value":"const_cast和mutable的比较"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"const_cast:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"强制去掉对象的const属性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"缺点：对const对象，调用包含const_cast的const成员函数，属于未定义行为。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mutable:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用场景：对可能要发生变化的成员前，加上存储描述符mutable。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"实质：对加了mutable的成员，无视所有const声明。"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"const-与-define-的比较const有什么优点"},"children":[{"type":"text","value":"const 与 #define 的比较，const有什么优点?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"const 常量有数据类型，而宏常量没有数据类型。编译器可以对前者进行类型安全检查。而对后者只进行字符替换，没有类型安全检查，并且在字符替换可能会产生意料不到的错误（边际效应）\n。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有些集成化的调试工具可以对 const 常量进行调试，但是不能对宏常量进行调试。"}]}]},{"type":"element","tag":"h2","props":{"id":"conststatic-关键字有什么区别"},"children":[{"type":"text","value":"const、static 关键字有什么区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"都是用于声明变量时的修饰符，它们都能被用来修饰一个变量的作用域、生命周期和内存分配方式。但是，它们之间还是有一些区别的："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"用于声明一个变量时，它表示这个变量的值不能被修改。也就是说，如果一个变量被声明为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"，它的值在程序执行过程中是固定的，不能被修改。"},{"type":"element","tag":"code","props":{"code":"const int x = 5;  // 声明一个名为x，值为5的常量\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0ba3c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-7f07b0"},"children":[{"type":"text","value":"  // 声明一个名为x，值为5的常量"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"用于声明一个变量时，它表示这个变量的作用域为整个程序，而不是局限于特定的函数或块。如果一个变量被声明为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"，它在程序开始执行时会分配内存，并在程序结束时释放内存。此外，如果一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"变量在多个函数中被访问，那么它的值只会被初始化一次。"},{"type":"element","tag":"code","props":{"code":"static int x = 5;  // 声明一个名为x，值为5的静态变量\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-35a329"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0ba3c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-a33eaa"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-7f07b0"},"children":[{"type":"text","value":"  // 声明一个名为x，值为5的静态变量"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"综上，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"都是用来声明变量的修饰符，但它们之间的区别在于："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"用来保证变量值不能被修改，而"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":"用来保证变量的作用域和生命周期。"}]},{"type":"element","tag":"h2","props":{"id":"如何初始化const和static数据成员"},"children":[{"type":"text","value":"如何初始化const和static数据成员？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常在类外初始化static数据成员，但是 static const 的整型(ool，char，int，long)可以再类声明中初始化， static\nconst的其他类型也必须在类外初始化(包括整型的数组)。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7f07b0{color:#6E7781}\n.ct-a0ba3c{color:#0550AE}\n.ct-a33eaa{color:#24292F}\n.ct-35a329{color:#CF222E}\n.dark .ct-35a329{color:#FF7B72}\n.dark .ct-a33eaa{color:#C9D1D9}\n.dark .ct-a0ba3c{color:#79C0FF}\n.dark .ct-7f07b0{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"如何在const成员函数中赋值","depth":2,"text":"如何在const成员函数中赋值？"},{"id":"const_cast和mutable的比较","depth":2,"text":"const_cast和mutable的比较"},{"id":"const-与-define-的比较const有什么优点","depth":2,"text":"const 与 #define 的比较，const有什么优点?"},{"id":"conststatic-关键字有什么区别","depth":2,"text":"const、static 关键字有什么区别"},{"id":"如何初始化const和static数据成员","depth":2,"text":"如何初始化const和static数据成员？"}]}},"_type":"markdown","_id":"content:1.cpp:concept:const.md","_source":"content","_file":"1.cpp/concept/const.md","_extension":"md"},{"_path":"/cpp/concept/diff","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"概念辨析","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"概念辨析"},"children":[{"type":"text","value":"概念辨析"}]},{"type":"element","tag":"h2","props":{"id":"struct-和-class-的区别"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"struct"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" 的区别"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"struct 是值类型，class 是对象类型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"struct 不能被继承，class 可以被继承"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"struct 默认的访问权限是 public, 而 class 默认的访问权限是 private."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"struct 总是有默认的构造函数，即使是重载默认构造函数仍然会保留。这是因为 struct 的构造函数是由编译器自动生成的，但是如果重载构造函数，必需对 struct 中的变量全部初始化。并且 struct 的用途是那些描述轻量级的对象，例如 Line, Point 等，并且效率比较高。class 在没有重载构造函数时有默认的无参数构造函数，但是一被重载些默认构造函数将被覆盖。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"struct 的 new 和 class 的 new 是不同的。struct的new就是执行一下构造函数创建一个新实例再对所有的字段进行Copy。而class则是在堆上分配一块内存然后再执行构造函数，struct的内存并不是在new的时候分配的，而是在定义的时候分配"}]}]},{"type":"element","tag":"h2","props":{"id":"new和malloc的区别"},"children":[{"type":"text","value":"new和malloc的区别"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"new从自由存储区上分配内存，malloc从堆上分配内存。自由存储区是C++基于new操作符的一个抽象概念，凡是通过new操作符进行内存申请，该内存即为自由存储区。而堆是操作系统中的术语，是操作系统所维护的一块特殊内存，用于程序的内存动态分配。那么自由存储区是否能够是堆（问题等价于new是否能在堆上动态分配内存），这取决于operator new 的实现细节。自由存储区不仅可以是堆，还可以是静态存储区，这都看operator new在哪里为对象分配内存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"new、delete 返回的是某种数据类型指针；malloc、free 返回的是 void 指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用new操作符申请内存分配时无须指定内存块的大小，编译器会根据类型信息自行计算；使用malloc则需要显式地指出所需内存的尺寸。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"new 可以调用对象的构造函数，对应的 delete 调用相应的析构函数；malloc 仅仅分配内存，free 仅仅回收内存，并不执行构造和析构函数。在new一个对象的时候，首先会调用malloc为对象分配内存空间，然后调用对象的构造函数。delete会调用对象的析构函数，然后调用free回收内存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"new、delete 是操作符，可以重载；malloc、free 是函数，可以重写(覆盖)。"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"struct-和-class-的区别","depth":2,"text":"struct 和 class 的区别"},{"id":"new和malloc的区别","depth":2,"text":"new和malloc的区别"}]}},"_type":"markdown","_id":"content:1.cpp:concept:diff.md","_source":"content","_file":"1.cpp/concept/diff.md","_extension":"md"},{"_path":"/cpp/concept/exception","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"异常","description":"在实际的 C++ 开发中，我们经常会遇到诸如程序运行中突然崩溃、程序运行所用内存越来越多最终不得不重启等问题，这些问题往往都是内存资源管理不当造成的。比如：","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"异常"},"children":[{"type":"text","value":"异常"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实际的 C++ 开发中，我们经常会遇到诸如程序运行中突然崩溃、程序运行所用内存越来越多最终不得不重启等问题，这些问题往往都是内存资源管理不当造成的。比如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有些内存资源已经被释放，但指向它的指针并没有改变指向（成为了野指针），并且后续还在使用；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有些内存资源已经被释放，后期又试图再释放一次（重复释放同一块内存会导致程序运行崩溃）；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有及时释放不再使用的内存资源，造成内存泄漏，程序占用的内存资源越来越多。"}]}]},{"type":"element","tag":"h2","props":{"id":"如何确保对象在抛出异常时也能被删除什么是raii"},"children":[{"type":"text","value":"如何确保对象在抛出异常时也能被删除？什么是RAII？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的思想是RAII：设计一个class，令他的构造函数和析构函数分别获取和释放资源。 有两个方法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"利用“函数的局部对象无论函数以何种方式(包括因异常)结束都会被析构”这一特性，将“一定要释放的资源”放进局部对象的析构函数；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用智能指针。"}]}]},{"type":"element","tag":"h2","props":{"id":"如何避免内存泄漏"},"children":[{"type":"text","value":"如何避免内存泄漏"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用智能指针。C++中的智能指针是一种特殊的指针，它可以自动管理分配的内存，在智能指针超出作用域时自动释放内存，因此可以避免内存泄漏。C++11标准引入了标准库中的unique_ptr和shared_ptr两种智能指针类型，程序员可以使用这两种智能指针来管理内存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用RAII技术。RAII（Resource Acquisition Is Initialization，资源获取即初始化）是一种编程技术，它在对象构造时获取资源（例如内存），在对象析构时释放资源，从而避免内存泄漏。在C++中，程序员可以使用类的构造函数和析构函数来实现RAII技术。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"严格控制内存分配与释放。如果不能使用智能指针或RAII技术，则程序员应该认真跟踪内存分配与释放，并在适当的时候使用delete关键字释放内存。"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"如何确保对象在抛出异常时也能被删除什么是raii","depth":2,"text":"如何确保对象在抛出异常时也能被删除？什么是RAII？"},{"id":"如何避免内存泄漏","depth":2,"text":"如何避免内存泄漏"}]}},"_type":"markdown","_id":"content:1.cpp:concept:exception.md","_source":"content","_file":"1.cpp/concept/exception.md","_extension":"md"},{"_path":"/cpp/concept/lambda","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"lambda","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"lambda"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tag":"h2","props":{"id":"stroustrup-intro"},"children":[{"type":"text","value":"stroustrup intro"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"from "},{"type":"element","tag":"a","props":{"href":"https://www.stroustrup.com/hopl20main-p5-p-bfc9cd4--final.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"Thriving in a Crowded and Changing World: C++ 2006-2020"}]},{"type":"text","value":"(p53)"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The lambda library was a masterpiece of early template metaprogramming and very\nconvenient and popular. Unfortunately, it wasn't particularly efficient. For years, I tracked its\nperformance relative to hand-coded equivalents and found a fairly consistent 2.5 times overhead. I\ncould not recommend something that was convenient, but slow. Doing so would damage C++’s reputation as a language for\nefficient code"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"lambda 表达式库是早期模板元编程的典范，非常方便和流行。不幸的是，它的效率并不特别高。多年来，我追踪了它相对于手工编码的同等实现的性能，发现它的开销是后者的 2.5 倍且这种差距相当一致。我不能推荐一种方便但却很慢的东西。这样做会损害C++ 作为产生高效代码的语言的声誉。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"from "},{"type":"element","tag":"a","props":{"href":"https://www.stroustrup.com/hopl20main-p5-p-bfc9cd4--final.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"Thriving in a Crowded and Changing World: C++ 2006-2020"}]},{"type":"text","value":"(p55)"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the callback is invoked on the same\nthread as test, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&s]"}]},{"type":"text","value":" capture is potentially efficient because s is not copied. If the callback is invoked\non a different thread, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&s]"}]},{"type":"text","value":" capture could be a disaster because s could go out of scope before it\nwas used; in that case, we want a copy. A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[=]"}]},{"type":"text","value":" capture list means \"copy all local variables into the\nlambda.\" A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&]"}]},{"type":"text","value":" capture list means \"the lambda can refer to all local variables by reference\" and\nimplies that the lambda can be implemented as simply a local function."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果回调函数在与 test 相同的线程上被调用，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&s]"}]},{"type":"text","value":" 捕获可能效率更高，因为 s 没有被复制。如果回调函数在不同的线程上被调用，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&s]"}]},{"type":"text","value":" 捕获可能是一个灾难，因为 s在被使用之前可能会超出作用域；这种情况下，我们想要一份副本。一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[=]"}]},{"type":"text","value":" 捕获列表意味着“将所有局部变量复制到 lambda 表达式中”。而一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&]"}]},{"type":"text","value":" 捕获列表意味着“lambda 表达式可以通过引用指代所有局部变量”，并意味着lambda 表达式可以简单地实现为一个局部函数。"}]},{"type":"element","tag":"h2","props":{"id":"other"},"children":[{"type":"text","value":"other"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"lambda 表达式的价值在于，就地封装短小的功能闭包，可以极其方便地表达出我们希望执行的具体操作，并让上下文结合得更加紧密。\nlambda 表达式的类型在 C++11 中被称为“闭包类型（Closure Type）”。它是一个特殊的，匿名的非 union 的类类型。\nlambda表达式有如下优点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"声明式编程风格：就地匿名定义目标函数或函数对象，不需要额外写一个命名函数或者函数对象。以更直接的方式去写程序，好的可读性和可维护性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简洁：不需要额外再写一个函数或者函数对象，避免了代码膨胀和功能分散，让开发者更加集中精力在手边的问题，同时也获取了更高的生产率。 在需要的时间和地点实现功能闭包，使程序更灵活。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"语法形式   "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ capture ] ( params ) opt -> ret { body; };"}]},{"type":"text","value":"\n其中 capture 是捕获列表，params 是参数表，opt 是函数选项，ret 是返回值类型，body是函数体。\nlambda 表达式还可以通过捕获列表捕获一定范围内的变量："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[]"}]},{"type":"text","value":" 不捕获任何变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[&]"}]},{"type":"text","value":" 捕获外部作用域中所有变量，并作为引用在函数体中使用（按引用捕获）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[=]"}]},{"type":"text","value":" 捕获外部作用域中所有变量，并作为副本在函数体中使用（按值捕获）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[=, &foo]"}]},{"type":"text","value":" 按值捕获外部作用域中所有变量，并按引用捕获 foo 变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[bar]"}]},{"type":"text","value":" 按值捕获 bar 变量，同时不捕获其他变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[this]"}]},{"type":"text","value":" 捕获当前类中的 this 指针，让 lambda"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"表达式拥有和当前类成员函数同样的访问权限。如果已经使用了 & 或者 =，就默认添加此选项。捕获 this 的目的是可以在 lambda 中使用当前类的成员函数和成员变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lambda表达式完整的声明格式如下：\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[capture list] (params list) mutable exception-> return type { function body }"}]},{"type":"text","value":"\n各项具体含义如下"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"capture list：捕获外部变量列表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"params list：形参列表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mutable指示符：用来说用是否可以修改捕获的变量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exception：异常设定"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"return type：返回类型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"function body：函数体"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，我们还可以省略其中的某些成分来声明“不完整”的Lambda表达式，常见的有以下几种："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[capture list] (params list) -> return type {function body}"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[capture list] (params list) {function body}"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[capture list] {function body}"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中：\n格式1声明了const类型的表达式，这种类型的表达式不能修改捕获列表中的值。\n格式2省略了返回值类型，但编译器可以根据以下规则推断出Lambda表达式的返回类型：\n（1）：如果function\nbody中存在return语句，则该Lambda表达式的返回类型由return语句的返回类型确定；\n（2）：如果function body中没有return语句，则返回值为void类型。\n格式3中省略了参数列表，类似普通函数中的无参函数。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"stroustrup-intro","depth":2,"text":"stroustrup intro"},{"id":"other","depth":2,"text":"other"}]}},"_type":"markdown","_id":"content:1.cpp:concept:lambda.md","_source":"content","_file":"1.cpp/concept/lambda.md","_extension":"md"},{"_path":"/cpp/concept/operator","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Operator","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"operator"},"children":[{"type":"text","value":"Operator"}]},{"type":"element","tag":"h2","props":{"id":"assignment-operators"},"children":[{"type":"text","value":"Assignment Operators"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Operator"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Same As"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = 5"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = 5"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"+="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x += 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x + 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x -= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x - 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x *= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x * 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x /= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x / 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"%="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x %= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x % 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"&="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x &= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x & 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"=`"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"^="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x ^= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x ^ 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":">>="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x >>= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x >> 3"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<<="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x <<= 3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"x = x << 3"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"位运算符"},"children":[{"type":"text","value":"位运算符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"|p |q| "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p & q"}]},{"type":"text","value":"| "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p | q"}]},{"type":"text","value":"| "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p ^ q"}]},{"type":"text","value":"|\n| :---: | :---: | :---: | :---: | :---: |\n|0 | 0 | 0 | 0 | 0|\n|0 | 1 | 0 | 1 | 1|\n|1 | 1 | 1 | 1 | 0|\n|1 | 0 | 0 | 1 | 1|"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~"}]},{"type":"text","value":" 取反运算符，按二进制位进行\"取反\"运算"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"assignment-operators","depth":2,"text":"Assignment Operators"},{"id":"位运算符","depth":2,"text":"位运算符"}]}},"_type":"markdown","_id":"content:1.cpp:concept:operator.md","_source":"content","_file":"1.cpp/concept/operator.md","_extension":"md"},{"_path":"/cpp/concept/pointer","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"指针","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"指针"},"children":[{"type":"text","value":"指针"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" sign can be confusing here, as it does two different things in our code:"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When used in declaration ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"string* ptr"}]},{"type":"text","value":"), it creates a pointer variable."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When not used in declaration, it act as a dereference operator."}]}]}]}]},{"type":"element","tag":"code","props":{"code":"string food = \"Pizza\";\nstring* ptr = &food;\n// Output the value of food (Pizza)\ncout << food << \"\\n\";\n// Output the memory address of food (0x6dfed4)\ncout << &food << \"\\n\";\n// Access the memory address of food and output its value (Pizza)\ncout << *ptr << \"\\n\";\n// Change the value of the pointer\n*ptr = \"Hamburger\";\n// Output the new value of the pointer (Hamburger)\ncout << *ptr << \"\\n\";\n// Output the new value of the food variable (Hamburger)\ncout << food << \"\\n\";\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"string food "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\"Pizza\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" ptr "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"food;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Output the value of food (Pizza)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" food "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Output the memory address of food (0x6dfed4)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"food "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Access the memory address of food and output its value (Pizza)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"ptr "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Change the value of the pointer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"ptr "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\"Hamburger\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Output the new value of the pointer (Hamburger)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"ptr "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":"// Output the new value of the food variable (Hamburger)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" food "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"智能指针"},"children":[{"type":"text","value":"智能指针"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将原生指针封装成对象，来解决堆上内存泄漏的问题。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为什么要使用智能指针："}]},{"type":"element","tag":"blockquote","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"智能指针的作用是管理一个指针，因为存在以下这种情况：申请的空间在函数结束时忘记释放，造成内存泄漏。使用智能指针可以很大程度上的避免这个问题，因为智能指针就是一个类，当超出了类的作用域是，类会自动调用析构函数，析构函数会自动释放资源。所以智能指针的作用原理就是在函数结束时自动释放内存空间，不需要手动释放内存空间。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当栈对象生存周期结束，智能指针会调用析构函数释放之前申请的内存，从而避免内存泄漏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"智能指针是类，一定要有"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"operator*"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"operator->();"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":"传回所指的对象，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"->"}]},{"type":"text","value":"调用对象的成员。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"shared_ptr：拥有共享对象所有权语义的智能指针；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"weak_ptr：到 shared_ptr 所管理对象的弱引用；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unique_ptr：拥有独有对象所有权语义的智能指针。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11常用的智能指针有shared_ptr，它采用计数的方法，记录当前内存被几个智能指针引用。计数内存在堆上分配。 当新增一个引用时，计数+1；失去一个引用，计数-1.当引用为0，智能指针自动释放申请的内存资源。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"初始化shared_ptr可以通过make_shared函数，或者，通过构造函数传入普通指针，并通过get获得指针。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"智能指针有内存泄露的情况"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当两个对象相互使用一个shared_ptr成员变量指向对方，会造成循环引用，使引用计数失效，从而导致内存泄漏。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如：parent有一个shared_ptr类型的成员指向孩子，而child也有一个shared_ptr类型的成员指向父亲。然后在创建孩子和父亲对象时也使用了智能指针c和p，随后将c和p分别又赋值给child的智能指针成员parent和parent的智能指针成员child。从而形成了一个循环引用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了解决循环引用导致的内存泄漏，引入了weak_ptr弱指针，weak_ptr的构造函数不会修改引用计数的值，从而不会对对象的内存进行管理，其类似一个普通指针，但不指向引用计数的共享内存，但是其可以检测到所管理的对象是否已经被释放，从而避免非法访问。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"shared_ptr多个指针指向相同的对象，也叫共享指针。shared_ptr采用了引用计数的方式，更好地解决了赋值与拷贝的问题，每一个shared_ptr的拷贝都指向相同的内存，每拷贝一次内部的引用计数加1，每析构一次内部的引用计数减1，为0时自动删除所指向的堆内存。shared_ptr内部的引用计数是线程安全的，但是对象的读取时需要加锁。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"成员函数："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1) get： 获得内部对象的指针；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2) swap：交换所管理的对象；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(3) reset：替换所管理的对象；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4) use_count：返回shared_ptr所指对象的引用计数；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(5) operator*和operator->：解引用存储的对象指针；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(6) operator=：对shared_ptr赋值；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(7) operator bool：检查是否有关联的管理对象；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(8) owner_before：提供基于拥有者的共享指针排序。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"交换： std::swap(std::shared_ptr) 特化的swap算法用于交换两个智能指针。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"初始化：通过构造函数传入指针初始化，也可以使用std::make_shared 或 std::allocate_shared 函数初始化。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意事项："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1) 不能将指针直接赋值给一个智能指针，一个是类，一个是指针。不能使用类似这样的形式 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"shared_ptr<int> p = new int"}]},{"type":"text","value":"；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2) 避免循环引用，这是shared_ptr的一个最大陷阱，导致内存泄漏，这一点在weak_ptr中将得到完善；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(3) 管理数组指针时，需要制定Deleter以使用delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"操作符销毁内存，shared_ptr并没有针对数组的特化版本；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4) 不能把一个原生指针交给两个智能指针对象管理，对其它智能指针也是如此。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当对象中存在指针成员时，除了在复制对象时需要考虑自定义拷贝构造函数，还应该考虑"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当函数的参数为对象时，实参传递给形参的实际上是实参的一个拷贝对象，系统自动通过拷贝构造函数实现；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当函数的返回值为一个对象时，该对象实际上是函数内对象的一个拷贝，用于返回函数调用处。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"浅拷贝带来内存泄漏的问题，本质在于析构函数释放多次堆内存，使用std::shared_ptr，可以完美解决这个问题。"}]}]},{"type":"element","tag":"h2","props":{"id":"简述-c-中智能指针的特点"},"children":[{"type":"text","value":"简述 C++ 中智能指针的特点"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"shared_ptr, 关于shared_ptr使用需要记住什么？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"尽量避免使用raw pointer构建shared_ptr，至于原因此处不便于多讲，后续还有讲解"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"shared_ptr使得依据共享生命周期而经行地资源管理进行垃圾回收更为方便"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"shared_ptr对象的大小通常是unique_ptr的两倍，这个差异是由于Control Block导致的，并且shared_ptr的引用计数的操作是原子的，这里的分析也会在后续看到"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"默认的资源销毁是采用delete，但是shared_ptr也支持用户提供deleter，与unique_ptr不同，不同类型的deleter对shared_ptr的类型没有影响。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++程序设计中使用堆内存是非常频繁的操作。C++11中引入了"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"智能指针"}]},{"type":"text","value":"的概念，方便管理"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"堆内存"}]},{"type":"text","value":"。\n使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"普通指针"}]},{"type":"text","value":"，容易造成堆内存泄露（忘记释放），二次释放，程序发生异常时内存泄露等问题等，使用智能指针能更好的管理堆内存。\n从较浅的层面看，智能指针是利用了一种叫做RAII（资源获取即初始化）的技术对普通的指针进行封装，这使得智能指针实质是一个对象，行为表现的却像一个指针。\n智能指针的作用是防止忘记调用delete释放内存和程序异常的进入catch块忘记释放内存。\n另外指针的释放时机也是非常有考究的，多次释放同一个指针会造成程序崩溃，这些都可以通过智能指针来解决。\n智能指针还有一个作用是把值语义转换成引用语义"}]},{"type":"element","tag":"h2","props":{"id":"c-中智能指针和指针的区别是什么"},"children":[{"type":"text","value":"C++ 中智能指针和指针的区别是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"智能指针是指在C++中，用于管理堆内存资源的特殊类型的指针。智能指针与普通指针的区别在于，智能指针会自动管理内存资源的分配和释放，以避免内存泄漏和空指针异常。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"普通指针是指在C++中，指向内存中的某个地址的变量。普通指针可以指向任意类型的内存资源，并通过解引用运算符*访问指针指向的内存资源。但是，普通指针不会自动管理内存资源，程序员需要自己手动分配和释放内存，否则可能会导致内存泄漏和空指针异常。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面是一个使用普通指针的示例程序："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\nint main() {\n  int* p = new int(5);\n  std::cout << *p << std::endl;\n  delete p;\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc92fd"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" p "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个指针"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p"}]},{"type":"text","value":"，并使用动态内存分配运算符"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"new"}]},{"type":"text","value":"为它分配了一个新的内存空间，并将值"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"5"}]},{"type":"text","value":"赋值给它。然后我们通过解引用运算符"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":"访问指针指向的内存空间，并将它的值输出到标准输出流。最后，我们使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"delete"}]},{"type":"text","value":"运算符释放指针所指向的内存空间，避免内存泄漏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个程序的运行结果是输出数字"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"5"}]},{"type":"text","value":"，然后正常退出。但是，如果我们没有正确释放指针所指向的内存空间，就会导致内存泄漏，从而影响程序的性能和稳定性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了避免这种情况的发生，我们可以使用智能指针。智能指针是指在C++中，用于管理堆内存资源的特殊类型的指针。智能指针会自动管理内存资源的分配和释放，以避免内存泄漏和空指针异常。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面是一个使用智能指针的示例程序："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <memory>\n\nint main() {\n  std::unique_ptr<int> p(new int(5));\n  std::cout << *p << std::endl;\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"<memory>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc92fd"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"::unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc92fd"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们使用了C++标准库中的std::unique_ptr智能指针类型。我们使用这个类型的构造函数，创建了一个新的智能指针，并为它分配了一个新的内存空间，并将值5赋值给它。然后我们通过解引用运算符*访问指针指向的内存空间，并将它的值输出到标准输出流。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们没有手动释放指针所指向的内存空间，但是由于我们使用了智能指针，它会在智能指针被销毁时，自动释放指针所指向的内存空间，因此，我们不必担心内存泄漏的问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，智能指针与普通指针的区别在于，智能指针会自动管理内存资源的分配和释放，以避免内存泄漏和空指针异常。智能指针可以方便程序员管理堆内存资源，提高程序的性能和稳定性。"}]},{"type":"element","tag":"h2","props":{"id":"指针和引用的区别是什么"},"children":[{"type":"text","value":"指针和引用的区别是什么？"}]},{"type":"element","tag":"blockquote","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本质：指针是一个变量，存储内容是一个地址，指向内存的一个存储单元。而引用是原变量的一个别名，实质上和原变量是一个东西，是某块内存的别名。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n指针的值可以为空，且非const指针可以被重新赋值以指向另一个不同的对象。而引用的值不能为空，并且引用在定义的时候必须初始化，一旦初始化，就和原变量“绑定”，不能更改这个绑定关系。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"引用必须被初始化，指针不必。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"引用初始化以后不能被改变，指针可以改变所指的对象。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不存在指向空值的引用，但是存在指向空值的指针。"}]}]},{"type":"element","tag":"h2","props":{"id":"简述数组与指针的区别"},"children":[{"type":"text","value":"简述数组与指针的区别？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数组要么在静态存储区被创建（如全局数组），要么在栈上被创建。指针可以随时指向任意类型的内存块。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"修改内容上的差别"},{"type":"element","tag":"code","props":{"code":"char a[] = \"hello\";\na[0] = 'X';\nchar *p = \"world\"; // 注意p 指向常量字符串\np[0] = 'X'; // 编译器不能发现该错误，运行时错误\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" a[] "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"a["}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"'X'"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":" // 注意p 指向常量字符串"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"p["}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"'X'"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":" // 编译器不能发现该错误，运行时错误"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用运算符"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sizeof"}]},{"type":"text","value":"可以计算出数组的容量（字节数）。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sizeof(p)"}]},{"type":"text","value":" p 为指针得到的是一个指针变量的字节数，而不是p 所指的内存容量。C++/C\n语言没有办法知道指针所指的内存容量，除非在申请内存时记住它。注意当数组作为函数的参数进行传递时，该数组自动退化为同类型的指针。"},{"type":"element","tag":"code","props":{"code":"char a[] = \"hello world\";\nchar *p = a;\ncout << sizeof(a) << endl; // 12 字节\ncout << sizeof(p) << endl; // 4 字节\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" a[] "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdc44b"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"(a) "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":" // 12 字节"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"(p) "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":" // 4 字节"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"计算数组和指针的内存容量"},{"type":"element","tag":"code","props":{"code":"void Func(char a[100]) {\n  cout << sizeof(a) << endl; // 4 字节而不是100 字节\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc92fd"},"children":[{"type":"text","value":"Func"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-419e4e"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-93a2b3"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"]) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"  cout "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"(a) "}]},{"type":"element","tag":"span","props":{"class":"ct-456686"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":" endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-f58160"},"children":[{"type":"text","value":" // 4 字节而不是100 字节"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2ee313"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"指针引起的崩溃-常见原因"},"children":[{"type":"text","value":"指针引起的崩溃 常见原因"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"指针未判空"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"野指针"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"其他地方改写了指针"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-419e4e{color:#953800}\n.ct-fc92fd{color:#8250DF}\n.ct-93a2b3{color:#0550AE}\n.ct-f58160{color:#6E7781}\n.ct-bdc44b{color:#0A3069}\n.ct-456686{color:#CF222E}\n.ct-2ee313{color:#24292F}\n.dark .ct-2ee313{color:#C9D1D9}\n.dark .ct-456686{color:#FF7B72}\n.dark .ct-bdc44b{color:#A5D6FF}\n.dark .ct-f58160{color:#8B949E}\n.dark .ct-93a2b3{color:#79C0FF}\n.dark .ct-fc92fd{color:#D2A8FF}\n.dark .ct-419e4e{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"智能指针","depth":2,"text":"智能指针"},{"id":"简述-c-中智能指针的特点","depth":2,"text":"简述 C++ 中智能指针的特点"},{"id":"c-中智能指针和指针的区别是什么","depth":2,"text":"C++ 中智能指针和指针的区别是什么？"},{"id":"指针和引用的区别是什么","depth":2,"text":"指针和引用的区别是什么？"},{"id":"简述数组与指针的区别","depth":2,"text":"简述数组与指针的区别？"},{"id":"指针引起的崩溃-常见原因","depth":2,"text":"指针引起的崩溃 常见原因"}]}},"_type":"markdown","_id":"content:1.cpp:concept:pointer.md","_source":"content","_file":"1.cpp/concept/pointer.md","_extension":"md"},{"_path":"/cpp/concept/reference","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"引用","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"引用"},"children":[{"type":"text","value":"引用"}]},{"type":"element","tag":"h2","props":{"id":"左值引用"},"children":[{"type":"text","value":"左值引用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常规引用，一般表示对象的身份。"}]},{"type":"element","tag":"h2","props":{"id":"右值引用"},"children":[{"type":"text","value":"右值引用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"右值引用就是必须绑定到右值（一个临时对象、将要销毁的对象）的引用，一般表示对象的值。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n右值引用可实现转移语义（Move Semantics）和完美转发（Perfect Forwarding），它的主要目的有两个方面："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"消除两个对象交互时不必要的对象拷贝，节省运算存储资源，提高效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"能够更简洁明确地定义泛型函数。"}]}]},{"type":"element","tag":"h2","props":{"id":"引用折叠"},"children":[{"type":"text","value":"引用折叠"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X& &"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X& &&"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X&& &"}]},{"type":"text","value":"可折叠成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X&"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X&& &&"}]},{"type":"text","value":" 可折叠成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X&&"}]}]}]},{"type":"element","tag":"h2","props":{"id":"什么是引用申明和使用引用要注意哪些问题"},"children":[{"type":"text","value":"什么是“引用”？申明和使用“引用”要注意哪些问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"引用就是某个目标变量的“别名”(alias)\n，对应用的操作与对变量直接操作效果完全相同。申明一个引用的时候，切记要对其进行初始化。引用声明完毕后，相当于目标变量名有两个名称，即该目标原名称和引用名，不能再把该引用名作为其他变量名的别名。声明一个引用，不是新定义了一个变量，它只表示该引用名是目标变量名的一个别名，它本身不是一种数据类型，因此引用本身不占存储单元，系统也不给引用分配存储单元。不能建立数组的引用。"}]},{"type":"element","tag":"h2","props":{"id":"将引用作为函数参数有哪些特点"},"children":[{"type":"text","value":"将“引用”作为函数参数有哪些特点"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"传递引用给函数与传递指针的效果是一样的。这时，被调函数的形参就成为原来主调函数中的实参变量或对象的一个别名来使用，所以在被调函数中对形参变量的操作就是对其相应的目标对象（在主调函数中）的操作。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用引用传递函数的参数，在内存中并没有产生实参的副本，它是直接对实参操作；而使用一般变量传递函数的参数，当发生函数调用时，需要给形参分配存储单元，形参变量是实参变量的副本；如果传递的是对象，还将调用拷贝构造函数。因此，当参数传递的数据较大时，用引用比用一般变量传递参数的效率和所占空间都好。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用指针作为函数的参数虽然也能达到与使用引用的效果，但是，在被调函数中同样要给形参分配存储单元，且需要重复使用\"*\n指针变量名\"的形式进行运算，这很容易产生错误且程序的阅读性较差；另一方面，在主调函数的调用点处，必须用变量的地址作为实参。而引用更容易使用，更清晰。"}]}]},{"type":"element","tag":"h2","props":{"id":"在什么时候需要使用常引用"},"children":[{"type":"text","value":"在什么时候需要使用“常引用”"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果既要利用引用提高程序的效率，又要保护传递给函数的数据不在函数中被改变，就应使用常引用。常引用声明方式：const 类型标识符\n&引用名=目标变量名；"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"例1"}]}]},{"type":"element","tag":"code","props":{"code":"int a ;\nconst int &ra=a;\nra=1; //错误\na=1; //正确\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" a ;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"ra"}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"ra"}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-2a476c"},"children":[{"type":"text","value":" //错误"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-2a476c"},"children":[{"type":"text","value":" //正确"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"例2"}]}]},{"type":"element","tag":"code","props":{"code":"string foo( );\nvoid bar(string & s);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dda3e9"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"( );"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dda3e9"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dda3e9"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么下面的表达式将是非法的："}]},{"type":"element","tag":"code","props":{"code":"bar(foo( ));\nbar(\"hello world\");\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"( ));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3486c0"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原因在于foo( )和\"hello world\"\n串都会产生一个临时对象，而在C++中，这些临时对象都是const类型的。因此上面的表达式就是试图将一个const类型的对象转换为非const类型，这是非法的。引用型参数应该在能被定义为const的情况下，尽量定义为const\n。"}]},{"type":"element","tag":"h2","props":{"id":"将引用作为函数返回值类型的格式好处和需要遵守的规则"},"children":[{"type":"text","value":"将“引用”作为函数返回值类型的格式、好处和需要遵守的规则?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"格式："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"类型标识符 &函数名（形参列表及类型说明）{ //函数体 }"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n好处：在内存中不产生被返回值的副本（注意：正是因为这点原因，所以返回一个局部变量的引用是不可取的。因为随着该局部变量生存期的结束，相应的引用也会失效，产生runtime\nerror!"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n注意事项："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不能返回局部变量的引用。这条可以参照Effective C++"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"的Item\n31。主要原因是局部变量会在函数返回后被销毁，因此被返回的引用就成为了\"无所指\"的引用，程序会进入未知状态。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不能返回函数内部new分配的内存的引用。这条可以参照Effective C++"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"的Item\n31。虽然不存在局部变量的被动销毁问题，可对于这种情况（返回函数内部new分配内存的引用），又面临其它尴尬局面。例如，被函数返回的引用只是作为一个临时变量出现，而没有被赋予一个实际的变量，那么这个引用所指向的空间（由new分配）就无法释放，造成memory\nleak。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以返回类成员的引用，但最好是const。这条原则可以参照Effective C++"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"的Item 30。主要原因是当对象的属性是与某种业务规则（business\nrule）相关联的时候，其赋值常常与某些其它属性或者对象的状态有关，因此有必要将赋值操作封装在一个业务规则当中。如果其它对象可以获得该属性的非常量引用（或指针），那么对该属性的单纯赋值就会破坏业务规则的完整性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"流操作符重载返回值申明为“引用”的作用："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"流操作符<<和>>，这两个操作符常常希望被连续使用，例如：cout << \"hello\" << endl;\n因此这两个操作符的返回值应该是一个仍然支持这两个操作符的流引用。可选的其它方案包括：返回一个流对象和返回一个流对象指针。但是对于返回一个流对象，程序必须重新（拷贝）构造一个新的流对象，也就是说，连续的两个<<\n操作符实际上是针对不同对象的！这无法让人接受。对于返回一个流指针则不能连续使用<<\n操作符。因此，返回一个流对象引用是惟一选择。这个唯一选择很关键，它说明了引用的重要性以及无可替代性，也许这就是C++语言中引入引用这个概念的原因吧。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"赋值操作符=。这个操作符象流操作符一样，是可以连续使用的，例如：x = j = 10;或者(x=10)\n=100;赋值操作符的返回值必须是一个左值，以便可以被继续赋值。因此引用成了这个操作符的惟一返回值选择。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在另外的一些操作符中，却千万不能返回引用：+-*/ 四则运算符。它们不能返回引用，Effective C++"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"\n的Item23详细的讨论了这个问题。主要原因是这四个操作符没有side\neffect，因此，它们必须构造一个对象作为返回值，可选的方案包括：返回一个对象、返回一个局部变量的引用，返回一个new分配的对象的引用、返回一个静态对象引用。根据前面提到的引用作为返回值的三个规则，第2、3两个方案都被否决了。静态对象的引用又因为((\na+b) == (c+d))会永远为true而导致错误。所以可选的只剩下返回一个对象了。"}]}]},{"type":"element","tag":"code","props":{"code":"int &put(int n);\nint vals[10];\nint error = -1;\nvoid main() {\n  put(0) = 10; //以put(0)函数值作为左值，等价于vals[0]=10;\n  put(9) = 20; //以put(9)函数值作为左值，等价于vals[9]=20;\n  cout << vals[0];\n  cout << vals[9];\n}\nint &put(int n) {\n  if (n >= 0 && n <= 9) return vals[n];\n  else {\n    cout << \"subscript error\";\n    return error;\n  }\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"put"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dda3e9"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" vals["}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" error "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"put"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-2a476c"},"children":[{"type":"text","value":" //以put(0)函数值作为左值，等价于vals[0]=10;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"put"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-2a476c"},"children":[{"type":"text","value":" //以put(9)函数值作为左值，等价于vals[9]=20;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  cout "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" vals["}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  cout "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" vals["}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-b65b3c"},"children":[{"type":"text","value":"put"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dda3e9"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" (n "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":">="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" n "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002f3a"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" vals[n];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3486c0"},"children":[{"type":"text","value":"\"subscript error\""}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-08a431"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":" error;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce1dc"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3486c0{color:#0A3069}\n.ct-b65b3c{color:#8250DF}\n.ct-dda3e9{color:#953800}\n.ct-2a476c{color:#6E7781}\n.ct-002f3a{color:#0550AE}\n.ct-5ce1dc{color:#24292F}\n.ct-08a431{color:#CF222E}\n.dark .ct-08a431{color:#FF7B72}\n.dark .ct-5ce1dc{color:#C9D1D9}\n.dark .ct-002f3a{color:#79C0FF}\n.dark .ct-2a476c{color:#8B949E}\n.dark .ct-dda3e9{color:#FFA657}\n.dark .ct-b65b3c{color:#D2A8FF}\n.dark .ct-3486c0{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"左值引用","depth":2,"text":"左值引用"},{"id":"右值引用","depth":2,"text":"右值引用"},{"id":"引用折叠","depth":2,"text":"引用折叠"},{"id":"什么是引用申明和使用引用要注意哪些问题","depth":2,"text":"什么是“引用”？申明和使用“引用”要注意哪些问题"},{"id":"将引用作为函数参数有哪些特点","depth":2,"text":"将“引用”作为函数参数有哪些特点"},{"id":"在什么时候需要使用常引用","depth":2,"text":"在什么时候需要使用“常引用”"},{"id":"将引用作为函数返回值类型的格式好处和需要遵守的规则","depth":2,"text":"将“引用”作为函数返回值类型的格式、好处和需要遵守的规则?"}]}},"_type":"markdown","_id":"content:1.cpp:concept:reference.md","_source":"content","_file":"1.cpp/concept/reference.md","_extension":"md"},{"_path":"/cpp/concept/stack_memory","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"堆栈 内存","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"堆栈-内存"},"children":[{"type":"text","value":"堆栈 内存"}]},{"type":"element","tag":"h2","props":{"id":"简述-c-的内存分区"},"children":[{"type":"text","value":"简述 C++ 的内存分区"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C/C++内存存储区有哪几种类型？"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在C++中，内存被分为若干个不同的区域，分别用于存放不同类型的数据。这些内存区域包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈区：用于存放函数的局部变量和临时变量。栈区的内存空间是自动分配和释放的，由编译器自动管理。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆区：用于存放动态分配的内存空间。堆区的内存空间是需要手动分配和释放的，由程序员自己管理。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态存储区：用于存放全局变量和静态变量。静态存储区的内存空间在程序初始化时分配，在程序结束时释放。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常量存储区：用于存放常量数据。常量存储区的内存空间在程序初始化时分配，在程序结束时释放。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"程序代码区：用于存放程序的可执行代码。程序代码区的内存空间在程序初始化时分配，在程序结束时释放。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"栈区和堆区是C++程序中最常用的内存区域。栈区用于存放函数的局部变量和临时变量，其内存空间是自动分配和释放的，由编译器自动管理。堆区用于存放动态分配的内存空间，其内存空间是需要手动分配和释放的，由程序员自己管理。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面是一个使用栈区和堆区的示例程序："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\nvoid func() {\n  int a = 5; // a 存放在栈区\n  std::cout << a << std::endl;\n}\n\nint main() {\n  int* p = new int(5); // p 存放在栈区，它所指向的内存空间存放在堆区\n  std::cout << *p << std::endl;\n  delete p;\n\n  func();\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ca446"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-487821"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-87ecfe"},"children":[{"type":"text","value":" // a 存放在栈区"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-487821"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" p "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-87ecfe"},"children":[{"type":"text","value":" // p 存放在栈区，它所指向的内存空间存放在堆区"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-487821"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个函数func和一个主函数main。在函数func中，我们定义了一个局部变量a，它存放在栈区中。在主函数main中，我们定义了一个指针p，并使用动态内存分配运算符new为它分配了一个新的内存空间，并将值5赋值给它。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"根据这个程序的定义，我们可以得到以下的内存分配情况："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"变量a存放在栈区，它的生命周期与函数func相同。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"指针p存放在栈区，它所指向的内存空间存放在堆区，它的生命周期与主函数main相同。\n在这个程序中，变量a和指针p都是在函数调用时分配内存空间的，并在函数结束时释放内存空间。因此，它们的生命周期与函数的调用相关。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，C++的内存分区是指将内存分为若干个不同的区域，分别用于存放不同类型的数据。这些内存区域包括栈区、堆区、静态存储区、常量存储区和程序代码区。C++程序中最常用的内存区域是栈区和堆区，它们分别用于存放函数的局部变量和动态分配的内存空间。"}]},{"type":"element","tag":"h2","props":{"id":"简述-c-中内存对齐的使用场景"},"children":[{"type":"text","value":"简述 C++ 中内存对齐的使用场景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在C++中，内存对齐指的是将内存空间按照某种规则进行划分和排列，以提高内存访问的效率。内存对齐通常用于结构体和联合体，以减少内存碎片，提高内存利用率。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面是一个使用内存对齐的示例程序："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\nstruct S {\n  char c;\n  int i;\n  double d;\n} __attribute__((aligned(8)));\n\nint main() {\n  S s;\n  std::cout << sizeof(s) << std::endl;\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ca446"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"S"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" c;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" i;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" d;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"__attribute__((aligned(8)))"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-487821"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  S s;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"(s) "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-54cfd6"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个结构体S，并在定义的后面加上了一个属性说明符，指定结构体的内存对齐方式为8字节对齐。这意味着编译器会将结构体的内存空间按照8字节为单位进行划分和排列。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于结构体S中包含了3个成员，分别为一个字符、一个整型数和一个浮点数，它们的大小分别为1字节、4字节和8字节。根据内存对齐的规则，编译器会将这3个成员按照8字节为单位进行划分和排列，并将剩余的空间补齐为8字节的倍数。因此，结构体S的大小应该为24字节。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序的主函数中，我们定义了一个结构体变量s，并使用了sizeof运算符计算了它的大小。如果编译器支持内存对齐，那么程序的输出应该为24。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，内存对齐是指将内存空间按照某种规则进行划分和排列，以提高内存访问的效率。内存对齐通常用于结构体和联合体，以减少内存碎片，提高内存利用率。使用内存对齐可以提高程序的性能和效率。"}]},{"type":"element","tag":"h2","props":{"id":"c-是如何进行内存管理的"},"children":[{"type":"text","value":"C++ 是如何进行内存管理的？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"提供了一些与内存管理相关的关键字和操作符，用于帮助程序员在程序中合理地分配和释放内存。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关键字new用于在堆上分配内存，并返回指向该内存区域的指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关键字delete用于释放由new关键字分配的内存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运算符new"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"用于在堆上分配数组，并返回指向该数组的指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运算符delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"用于释放由new"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"运算符分配的数组。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面的代码演示了如何在堆上分配内存，并使用delete关键字释放该内存："}]},{"type":"element","tag":"code","props":{"code":"int *p = new int;   // 分配一个int型变量的内存\n*p = 100;           // 通过指针p访问该内存并赋值\ndelete p;           // 释放内存\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-87ecfe"},"children":[{"type":"text","value":"   // 分配一个int型变量的内存"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5ba8d"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-87ecfe"},"children":[{"type":"text","value":"           // 通过指针p访问该内存并赋值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca1850"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-e8033c"},"children":[{"type":"text","value":" p;"}]},{"type":"element","tag":"span","props":{"class":"ct-87ecfe"},"children":[{"type":"text","value":"           // 释放内存"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要注意的是，如果程序员忘记使用delete关键字释放内存，可能会造成内存泄露，即内存无法被释放而被浪费。因此，程序员应该认真跟踪内存分配并在适当的时候使用delete关键字释放内存。"}]},{"type":"element","tag":"h2","props":{"id":"内存中堆与栈的区别是什么"},"children":[{"type":"text","value":"内存中堆与栈的区别是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"堆和栈是内存中两种不同的存储区域，它们各有特点，并在程序执行中扮演不同的角色。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈是一种后进先出（LIFO）的内存结构，由编译器自动分配和释放。栈中的变量通常是局部变量，它们在函数调用结束时自动释放。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆是一种动态分配内存的方式，由程序员控制内存的分配和释放。堆中的变量通常是全局变量或者是动态分配的内存，它们在程序结束前一直保存在内存中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，栈和堆最大的区别在于分配和释放方式不同。栈中的变量是由编译器自动分配释放的，而堆中的变量是由程序员手动分配释放的。另外，栈中的变量一般是局部变量，堆中的变量一般是全局变量或者是动态分配的内存。"}]},{"type":"element","tag":"h2","props":{"id":"内存的分配方式有几种"},"children":[{"type":"text","value":"内存的分配方式有几种"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从静态存储区域分配。内存在程序编译的时候就已经分配好，这块内存在程序的整个运行期间都存在。例如全局变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在栈上创建。在执行函数时，函数内局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元自动被释放。栈内存分配运算内置于处理器的指令集中，效率很高，但是分配的内存容量有限。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从堆上分配，亦称动态内存分配。程序在运行的时候用malloc或new申请任意多少的内存，程序员自己负责在何时用free或delete释放内存。动态内存的生存期由我们决定，使用非常灵活，但问题也最多。"}]}]},{"type":"element","tag":"h2","props":{"id":"c如何避免内存泄漏"},"children":[{"type":"text","value":"C++如何避免内存泄漏"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这其实可以看做是一个编程风格的问题。"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用RAII(Resource Acquisition Is Initialization,资源获取即初始化)技法，以构造函数获取资源(内存),析构函数释放。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"相比于使用原生指针，更建议使用智能指针，尤其是C++11标准化后的智能指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"注意delete和delete"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"的使用方法。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这是很复杂的一种情况，是关于类的copy constructor的。首先先介绍一些概念。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"同default constructor一样，标准保证，如果类作者没有为class声明一个copy constructor，那么编译器会在需要的时候产生出来(这也是一个常考点：问道”如果类作者未定义出default/copy\nconstructor，编译器会自动产生一个吗？”答案是否定的)\n不过请注意！！这里编译器即使产生出来，也是为满足它的需求，而非类作者的需求！！\n而什么时候是编译器”需要”的时候呢？是在当这个class 【不表现出】bitwise copy semantics(位逐次拷贝，即浅拷贝)\n的时候。 在4中情况下class【不表现出】bitwise copy semantics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当class内含一个member object且该member object声明了一个copy constructor(无论该copy ctor是类作者自己生明的还是编译器合成的)；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当class继承自一个base class且该base class有一个copy constructor(无论该copy ctor是类作者自己生明的还是编译器合成的)；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当class声明了virtual function；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当class派生自一个继承链，且该链中存在virtual base class时。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"言归正传，如果class中仅仅是一些普通资源，那么default memberwise copy是完全够用的；然而，挡在该class中存在了一块动态分配的内存，并且在之后执行了bitwise copy\nsemantics后，将会有一个按位拷贝的对象和原来class中的某个成员指向同一块heap空间，当执行它们的析构函数后，该内存将被释放两次，这是未定义的行为。因此，在必要的时候需要使用user###defined explicit\ncopy constructor，来避免内存泄露。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-54cfd6{color:#953800}\n.ct-87ecfe{color:#6E7781}\n.ct-a5ba8d{color:#0550AE}\n.ct-487821{color:#8250DF}\n.ct-1ca446{color:#0A3069}\n.ct-e8033c{color:#24292F}\n.ct-ca1850{color:#CF222E}\n.dark .ct-ca1850{color:#FF7B72}\n.dark .ct-e8033c{color:#C9D1D9}\n.dark .ct-1ca446{color:#A5D6FF}\n.dark .ct-487821{color:#D2A8FF}\n.dark .ct-a5ba8d{color:#79C0FF}\n.dark .ct-87ecfe{color:#8B949E}\n.dark .ct-54cfd6{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"简述-c-的内存分区","depth":2,"text":"简述 C++ 的内存分区"},{"id":"简述-c-中内存对齐的使用场景","depth":2,"text":"简述 C++ 中内存对齐的使用场景"},{"id":"c-是如何进行内存管理的","depth":2,"text":"C++ 是如何进行内存管理的？"},{"id":"内存中堆与栈的区别是什么","depth":2,"text":"内存中堆与栈的区别是什么？"},{"id":"内存的分配方式有几种","depth":2,"text":"内存的分配方式有几种"},{"id":"c如何避免内存泄漏","depth":2,"text":"C++如何避免内存泄漏"}]}},"_type":"markdown","_id":"content:1.cpp:concept:stack_memory.md","_source":"content","_file":"1.cpp/concept/stack_memory.md","_extension":"md"},{"_path":"/cpp/concept/stl","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"STL","description":"refer","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"stl"},"children":[{"type":"text","value":"STL"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zintrulcre.vip/posts/cpp/basics/basics/#%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"容器"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"实现"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"查询"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"插入删除"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"特点"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"array"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"数组"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"大小固定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"数组"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"尾部 O(1)，其他 O(n)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"大小可变，扩容耗时"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"deque"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"双端队列"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"头尾 O(1)，其他 O(n)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"一个中央控制器，多个缓冲区"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"双向链表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"forward_list"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"单向链表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"stack"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"deque / list"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"先进后出"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"deque / list"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"先进先出"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"priority_queue"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"vector"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn) 堆，完全二叉树"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"红黑树"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"multiset"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"红黑树"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"红黑树"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"multimap"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"红黑树"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"O(logn)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"unordered_set"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"哈希表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"unordered_multiset"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"哈希表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"unordered_map"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"哈希表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"unordered_multimap"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"哈希表"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"平均 O(1)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"常用的容器有哪些"},"children":[{"type":"text","value":"常用的容器有哪些"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL（Standard Template Library，标准模板库）是C++语言的一个重要组成部分，它提供了一组用于管理内存和容器数据结构的模板类。STL中常用的容器包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"vector：动态数组，可以存储任意类型的对象。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"deque：双端队列，可以在队列两端进行插入和删除操作。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"list：双向链表，可以在链表中任意位置进行插入和删除操作。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"set：集合，可以存储不重复的元素，并支持快速查找。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"map：映射，可以存储键值对，并支持快速查找。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了上述容器之外，STL还包括许多其他容器，例如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"stack"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"queue"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"priority_queue"}]},{"type":"text","value":"等。程序员可以根据实际需要选择适当的容器来管理内存和数据。"}]},{"type":"element","tag":"h2","props":{"id":"简述-vector-的实现原理"},"children":[{"type":"text","value":"简述 vector 的实现原理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vector 是一种数据结构，它的实现原理是将数据存储在一个连续的内存空间中，以便更快地访问和修改数据。与数组不同，Vector 可以自动扩展和收缩，以便存储更多的数据。由于 Vector 在内存中连续存储数据，所以它可以更快地进行读写操作，比数组更加高效。"}]},{"type":"element","tag":"h2","props":{"id":"stl-中-vector-与-list-具体是怎么实现的常见操作的时间复杂度是多少"},"children":[{"type":"text","value":"STL 中 vector 与 list 具体是怎么实现的？常见操作的时间复杂度是多少？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vector 是一种数组，其中的数据是连续存储在内存中的。因此，vector 是一个顺序容器，可以快速随机访问其中的元素。vector 的内部实现是一个动态数组，它会在需要的时候自动扩展或缩小，以适应存储的数据量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"list 是一种链表，它的内部实现是一个单向链表。因此，list 是一个链式容器，可以高效地插入和删除元素。list 的内存分配方式和 vector 不同，它会为每个元素在内存中分配一个独立的空间，因此它可以存储不连续的数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 STL 中，vector 和 list 的常见操作的时间复杂度通常如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vector:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 vector 的末尾插入或删除元素：O(1)（常数时间）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 vector 的中间插入或删除元素：O(n)（线性时间）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"访问 vector 中的元素：O(1)（常数时间）\nlist:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 list 的末尾插入或删除元素：O(1)"}]}]},{"type":"element","tag":"h2","props":{"id":"c-的-vector-和-list中如果删除末尾的元素其指针和迭代器如何变化若删除的是中间的元素呢"},"children":[{"type":"text","value":"C++ 的 vector 和 list中，如果删除末尾的元素，其指针和迭代器如何变化？若删除的是中间的元素呢？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 C++ 的 vector 和 list 中，如果删除的是末尾的元素，那么容器的大小会减少 1，所有指向容器末尾的指针和迭代器都会失效。但指向容器内部的指针和迭代器不会发生变化，仍然可以正常使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果删除的是容器中间的元素，那么容器的大小也会减少 1，所有指向容器中间被删除元素的指针和迭代器都会失效。而指向容器内部其它位置的指针和迭代器可能会发生变化，例如在 vector 中，它们的位置会向前移动，因为被删除的元素会导致整个容器向前移动。因此，在删除容器中间元素时，需要格外小心，以避免导致指针和迭代器失效。"}]},{"type":"element","tag":"h2","props":{"id":"vector的reserve和capacity的区别"},"children":[{"type":"text","value":"vector的reserve和capacity的区别?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"reserve()用于让容器预留空间，避免再次内存分配；capacity() 返回在重新进行内存分配以前所能容纳的元素数量。"}]},{"type":"element","tag":"h2","props":{"id":"auto_ptr能作为vector的元素吗为什么"},"children":[{"type":"text","value":"auto_ptr能作为vector的元素吗？为什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不可以。 当复制一个auto_ptr时，它所指向的对象的所有权被交到复制的auto_ptr上面，而它自身将被设置为null。复制一个auto_ptr意味着改变它的值。"}]},{"type":"element","tag":"h2","props":{"id":"stl中的vector增减元素对迭代器的影响"},"children":[{"type":"text","value":"STL中的vector：增减元素对迭代器的影响"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 STL 中的 vector 中，增加或删除元素对迭代器的影响取决于操作的位置。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果在 vector 的末尾增加或删除元素，那么不会对迭代器产生任何影响。指向 vector 中任意位置的迭代器都会保持有效，并且可以继续正常使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果在 vector 的中间增加或删除元素，那么会导致指向 vector 中间被操作位置的迭代器失效。如果是在 vector 中间插入元素，那么所有指向 vector 中间被插入元素后面的位置的迭代器都会失效，因为整个 vector 后续的元素都会向后移动。如果是在 vector 中间删除元素，那么所有指向 vector 中间被删除元素后面的位置的迭代器都会失效，因为整个 vector 后续的元素都会向前移动。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，在 STL 中的 vector 中，如果要在 vector 的中间增加或删除元素，需要特别小心，避免导致指向 vector 中间的迭代器失效。"}]},{"type":"element","tag":"h2","props":{"id":"在模板中如何声明嵌套从属类型即模板嵌套类型"},"children":[{"type":"text","value":"在模板中，如何声明嵌套从属类型(即模板嵌套类型)？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"template内出现的类型如果依赖于某个template参数，则称之为从属类型；如果从属类型在class内呈嵌套状，则称之为嵌套从属类型。"}]},{"type":"element","tag":"code","props":{"code":"template<typename C>\nvoid doSomething(const C& container)\n{\n    if(container.size() > 0)\n    C::iterator iter(container.begin());\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(container."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::iterator "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"iter"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(container."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此时，根据C++的规则，编译器先假设C::iterator不是一个类型。然而iter的声明只有在C::iterator是一个类型时才合理。因此需要我们自己告诉编译器。\n那么，就需要再C::\niterator之前加上typename，告诉编译器C::iterator是一个类型。"}]},{"type":"element","tag":"code","props":{"code":"template<typename C>\nvoid doSomething(const C& container)\n{\n    if(container.size() > 0)\n    typename C::iterator iter(container.begin());\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(container."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"iter"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(container."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上就是。"}]},{"type":"element","tag":"h2","props":{"id":"stl中排序算法的实现是什么"},"children":[{"type":"text","value":"STL中排序算法的实现是什么"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL中的sort()，在数据量大时，采用quicksort，分段递归排序；一旦分段后的数量小于某个门限值，改用Insertion\nsort，避免quicksort深度递归带来的过大的额外负担，如果递归层次过深，还会改用heapsort。"}]},{"type":"element","tag":"h2","props":{"id":"函数模板特化与重载决议中的陷阱"},"children":[{"type":"text","value":"函数模板特化与重载决议中的陷阱"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"模板特化"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"非特化的模板也被称为主模板；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"类模板能全特化和偏特化；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"函数模板只能全特化，不过由于函数重载的原因，能达到偏特化的效果。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1和2中的f(p)分别会调用a、b、c中的哪一个？ 1和2中的f(p)分别会调用a、b、c中的哪一个？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"code1"},{"type":"element","tag":"code","props":{"code":"template<typename T> void f(T);/* a */          \ntemplate<typename T> void f(T*);/* b */         \ntemplate< > void f<int>(int*);/* c */           \nint* p;                                         \nf(p);   \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* a */"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"          "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* b */"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"         "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"< > "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* c */"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"           "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" p;                                         "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(p);   "}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"这里，a是第一个主模板，b是第二个主模板，且b是第一个主模板a的重载而非偏特化(函数模板没有偏特化)\n。c是第二个主模板b的显式特化(全特化)。 在f(p)调用时，发生重载决议，会无视特化存在(\n标准规定：重载决议无视模板特化，重载决议只会发生在主模板之间)。在主模板a和b中决议出b，即第二个主模板被决议选中，然后再调用其全特化版本c。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"code2"},{"type":"element","tag":"code","props":{"code":"template<typename T> void f(T);/* a */\ntemplate< > void f<int*>(int*);/* b */\ntemplate<typename T> void f(T*);/* c */\nint* p;\nf(p);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* a */"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"< > "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* b */"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-3206c3"},"children":[{"type":"text","value":"/* c */"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(p);"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"这里a是第一个主模板，b是第一个主模板a的全特化，c是第二个主模板。在f(p)\n调用时，发生重载决议，同样会无视特化存在，在主模板a和c中决议出c，而c并无全特化版本，因此直接调用c。"}]}]},{"type":"element","tag":"h2","props":{"id":"相等和等价的区别哪些类型的容器使用相等或等价"},"children":[{"type":"text","value":"相等和等价的区别？哪些类型的容器使用相等或等价？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"相等(equality)是以"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"operator=="}]},{"type":"text","value":"为基础，如果"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x==y"}]},{"type":"text","value":"为真，则判定x和y相等。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"等价(equivalence)是以"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"operator<"}]},{"type":"text","value":"为基础，如果"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"!(x < y) && !(y < x)"}]},{"type":"text","value":"为真，则判定x和y等价。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常，关联容器采用“等价”，而顺序容器采用“相等”。"}]},{"type":"element","tag":"h2","props":{"id":"vector-和-list-的区别"},"children":[{"type":"text","value":"vector 和 list 的区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vector 和 list 都是常用的数据结构，它们都可以用来存储一组数据。不同之处在于，vector 是一种更高效的数据结构，它的内存分配是连续的，而 list 的内存分配是离散的。这意味着，当需要在 vector 中存储或访问大量数据时，它会比 list 更快。另一方面，list 比 vector 更灵活，因为它允许在任意位置插入或删除元素。总之，两者都有各自的优势，应根据具体情况选择合适的数据结构使用。"}]},{"type":"element","tag":"h2","props":{"id":"vector-的扩容原理"},"children":[{"type":"text","value":"vector 的扩容原理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vector 是一种动态数组，它的内存空间是可以自动扩容的。当在 vector 中添加新元素时，如果 vector 内部的存储空间不够用，那么 vector 会自动分配更多的空间来存储新的元素。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体来说，当 vector 的存储空间不够用时，它会把当前的存储空间扩大一倍，然后把原来的数据复制到新的存储空间中。这样就能保证 vector 在扩容时的时间复杂度为 O(1)，即使在 vector 中添加了大量数据，它的性能也不会下降。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过，有时候这种自动扩容的方式可能会造成内存的浪费，因为 vector 扩容时会分配更多的空间，但并不一定全部都会被使用。因此，在使用 vector 时，应该根据具体情况来选择合适的扩容策略，以提高 vector 的内存利用率。"}]},{"type":"element","tag":"h2","props":{"id":"简述-stl-中的-map-的实现原理"},"children":[{"type":"text","value":"简述 STL 中的 map 的实现原理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL 中的 map 是一种关联式容器，它可以将键值对存储在一起，每个键都与一个值相关联。map 可以快速查找、插入和删除元素，因此在许多应用场景中都非常有用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"map 的底层实现通常是基于红黑树这种数据结构，红黑树是一种平衡二叉树，它能够保证查找、插入和删除的时间复杂度都为 O(log n)。在红黑树中，每个节点都有一个颜色（红色或黑色），通过控制节点的颜色和插入、删除的方式，能够保证红黑树的深度接近于log n，从而保证了红黑树的高性能。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"红黑树中的每个节点都存储着一个键值对，并且键是有序的，因此 map 中的元素也是有序的。当插入、查找或删除元素时，map 都会在红黑树中执行相应的操作，从而保证了 map 的高性能。总之，map 是一种非常实用的数据结构，能够满足许多应用场景的需求。"}]},{"type":"element","tag":"h2","props":{"id":"map-和-unordered_map-的区别"},"children":[{"type":"text","value":"map 和 unordered_map 的区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"map 和 unordered_map 都是 STL 中的容器，它们都可以用来存储键值对。不同之处在于，map 是一种有序容器，它会根据键的大小自动排序，而 unordered_map 是一种无序容器，它不会对键进行排序。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一方面，map 的底层实现是基于红黑树这种数据结构，它的查找、插入和删除操作的时间复杂度都是 O(log n)，而 unordered_map 的底层实现是基于哈希表，它的查找、插入和删除操作的时间复杂度都是 O(1)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，如果你需要保证键值对的顺序，那么可以使用 map，否则可以使用 unordered_map。另外，如果你需要高性能，那么可以使用 unordered_map，因为它的时间复杂度更低。总之，两者都有各自的优势，应根据具体情况选择合适的容器使用。"}]},{"type":"element","tag":"h2","props":{"id":"stl-sort-函数的实现"},"children":[{"type":"text","value":"stl sort 函数的实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL 中的 sort 函数是一种高效的排序算法，它可以对一个数组或容器中的元素进行排序。sort 函数的实现通常是基于快速排序这种排序算法，快速排序的时间复杂度为 O(n log n)，它能够在大多数情况下保证排序的高性能。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在快速排序中，首先会选择一个基准元素，然后把数组分成两部分，一部分的元素都小于基准元素，另一部分的元素都大于基准元素。接下来，分别对这两部分的元素再次进行快速排序，直到所有的元素都排好序为止。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL 中的 sort 函数也是采用类似的方式来实现的。首先，它会选择一个基准元素，然后把容器中的元素分成两部分，一部分的元素都小于基准元素，另一部分的元素都大于基准元素。接着，分别对这两部分的元素再次进行快速排序，直到所有的元素都排好序为止。总之，sort 函数是一种非常实用的排序工具，能够满足许多应用场景的需求。"}]},{"type":"element","tag":"h2","props":{"id":"stl容器里哪个是线程安全的"},"children":[{"type":"text","value":"stl容器里哪个是线程安全的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"STL 容器提供了许多常用的数据结构，如 vector、list、set 等。但是，由于它们不是线程安全的，所以在多线程环境下使用时需要注意。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在多线程环境下，同一个 STL 容器的不同线程可能同时对其进行写操作，如果不加锁的话，可能会导致数据冲突和数据不一致的问题。例如，下面的代码使用了 STL 中的 vector 模板类来实现一个线程不安全的示例："}]},{"type":"element","tag":"code","props":{"code":"#include <vector>\n#include <thread>\n\nstd::vector<int> v;\n\nvoid add_value(int value)\n{\n    v.push_back(value);\n}\n\nint main()\n{\n    std::thread t1(add_value, 1);\n    std::thread t2(add_value, 2);\n    std::thread t3(add_value, 3);\n    std::thread t4(add_value, 4);\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::vector"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" v;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"add_value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    v."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"push_back"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(value);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t1."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t2."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t3."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t4."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，v 是一个全局变量，它是 vector 类型的。程序启动了四个线程，每个线程都调用了 add_value 函数，并向 v 中添加了一个值。但是，由于 v 是线程不安全的，所以如果不加锁的话，它可能会导致数据冲突和数据不一致的问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了解决线程不安全的问题，可以在使用 STL 容器时使用同步机制，如互斥锁或信号量。例如，下面的代码使用了互斥锁来保证 vector 是线程安全的："}]},{"type":"element","tag":"code","props":{"code":"#include <vector>\n#include <thread>\n#include <mutex>\n\nstd::vector<int> v;\nstd::mutex m;\n\nvoid add_value(int value)\n{\n    std::lock_guard<std::mutex> lock(m);\n    v.push_back(value);\n}\n\nint main()\n{\n    std::thread t1(add_value, 1);\n    std::thread t2(add_value, 2);\n    std::thread t3(add_value, 3);\n    std::thread t4(add_value, 4);\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<mutex>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::vector"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" v;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::mutex m;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"add_value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::lock_guard"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(m);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    v."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"push_back"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(value);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t1."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t2."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t3."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t4."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，vector 模板类用于实现一个动态数组。为了保证 vector 是线程安全的，程序使用了互斥锁来同步多个线程的访问。在调用 add_value 函数时，会先加锁，然后再调用 vector 的 push_back 方法，并在函数结束时自动解锁。这样就能保证 vector 是线程安全的了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，STL 中也提供了一些线程安全的容器，如 queue、stack 等。例如，下面的代码使用 STL 中的 queue 模板类来实现一个线程安全的例子："}]},{"type":"element","tag":"code","props":{"code":"#include <queue>\n#include <thread>\n\nstd::queue<int> q;\n\nvoid add_value(int value)\n{\n    q.push(value);\n}\n\nint main()\n{\n    std::thread t1(add_value, 1);\n    std::thread t2(add_value, 2);\n    std::thread t3(add_value, 3);\n    std::thread t4(add_value, 4);\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<queue>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4342f8"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::queue"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" q;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"add_value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    q."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(value);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-230890"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"t4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"(add_value, "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t1."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t2."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t3."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    t4."}]},{"type":"element","tag":"span","props":{"class":"ct-74154d"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f7ad44"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fac48"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d150"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的代码中，queue 模板类用于实现一个队列。由于 queue 是线程安全的，所以在多线程环境下使用时不需要加锁。可以直接调用 queue 的 push 方法，将元素加入队列尾部。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，在使用 STL 容器时，应该根据实际情况选择合适的容器，并在必要时使用同步机制，来保证线程安全。这样才能让程序更稳定，并且避免出现数据不一致的问题。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4342f8{color:#0A3069}\n.ct-3206c3{color:#6E7781}\n.ct-7fac48{color:#0550AE}\n.ct-74154d{color:#8250DF}\n.ct-230890{color:#953800}\n.ct-f5d150{color:#24292F}\n.ct-f7ad44{color:#CF222E}\n.dark .ct-f7ad44{color:#FF7B72}\n.dark .ct-f5d150{color:#C9D1D9}\n.dark .ct-230890{color:#FFA657}\n.dark .ct-74154d{color:#D2A8FF}\n.dark .ct-7fac48{color:#79C0FF}\n.dark .ct-3206c3{color:#8B949E}\n.dark .ct-4342f8{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"常用的容器有哪些","depth":2,"text":"常用的容器有哪些"},{"id":"简述-vector-的实现原理","depth":2,"text":"简述 vector 的实现原理"},{"id":"stl-中-vector-与-list-具体是怎么实现的常见操作的时间复杂度是多少","depth":2,"text":"STL 中 vector 与 list 具体是怎么实现的？常见操作的时间复杂度是多少？"},{"id":"c-的-vector-和-list中如果删除末尾的元素其指针和迭代器如何变化若删除的是中间的元素呢","depth":2,"text":"C++ 的 vector 和 list中，如果删除末尾的元素，其指针和迭代器如何变化？若删除的是中间的元素呢？"},{"id":"vector的reserve和capacity的区别","depth":2,"text":"vector的reserve和capacity的区别?"},{"id":"auto_ptr能作为vector的元素吗为什么","depth":2,"text":"auto_ptr能作为vector的元素吗？为什么？"},{"id":"stl中的vector增减元素对迭代器的影响","depth":2,"text":"STL中的vector：增减元素对迭代器的影响"},{"id":"在模板中如何声明嵌套从属类型即模板嵌套类型","depth":2,"text":"在模板中，如何声明嵌套从属类型(即模板嵌套类型)？"},{"id":"stl中排序算法的实现是什么","depth":2,"text":"STL中排序算法的实现是什么"},{"id":"函数模板特化与重载决议中的陷阱","depth":2,"text":"函数模板特化与重载决议中的陷阱"},{"id":"相等和等价的区别哪些类型的容器使用相等或等价","depth":2,"text":"相等和等价的区别？哪些类型的容器使用相等或等价？"},{"id":"vector-和-list-的区别","depth":2,"text":"vector 和 list 的区别"},{"id":"vector-的扩容原理","depth":2,"text":"vector 的扩容原理"},{"id":"简述-stl-中的-map-的实现原理","depth":2,"text":"简述 STL 中的 map 的实现原理"},{"id":"map-和-unordered_map-的区别","depth":2,"text":"map 和 unordered_map 的区别"},{"id":"stl-sort-函数的实现","depth":2,"text":"stl sort 函数的实现"},{"id":"stl容器里哪个是线程安全的","depth":2,"text":"stl容器里哪个是线程安全的"}]}},"_type":"markdown","_id":"content:1.cpp:concept:stl.md","_source":"content","_file":"1.cpp/concept/stl.md","_extension":"md"},{"_path":"/cpp/concept/virtual","_dir":"concept","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"虚函数","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"虚函数"},"children":[{"type":"text","value":"虚函数"}]},{"type":"element","tag":"h2","props":{"id":"c虚函数表多态的实现原理"},"children":[{"type":"text","value":"C++虚函数表（多态的实现原理）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"“多态”的关键在于通过基类指针或引用调用一个虚函数时，编译时不确定到底调用的是基类还是派生类的函数，运行时才确定。这是如何实现的呢？"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\nusing namespace std;\nclass A\n{\npublic:\n    int i;\n    virtual void func() {}\n    virtual void func2() {}\n};\nclass B : public A\n{\n    int j;\n    void func() {}\n};\nint main()\n{\n    cout << sizeof(A) << \", \" << sizeof(B);  //输出 8,12\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-139d4a"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"A"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" i;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"() {}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"func2"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"() {}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"A"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" j;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"() {}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"(A) "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-139d4a"},"children":[{"type":"text","value":"\", \""}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"(B);"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"  //输出 8,12"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6dfa72"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 32 位编译模式下，程序的运行结果是：\n8, 12"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果将程序中的 virtual 关键字去掉，输出结果变为：\n4, 8"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对比发现，有了虚函数以后，对象所占用的存储空间比没有虚函数时多了 4 个字节。实际上，任何有虚函数的类及其派生类的对象都包含这多出来的\n4 个字节，这 4 个字节就是实现多态的关键——它位于对象存储空间的最前端，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"其中存放的是虚函数表的地址"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"**\n每一个有虚函数的类（或有虚函数的类的派生类）都有一个虚函数表，该类的任何对象中都放着该虚函数表的指针（可以认为这是由编译器自动添加到构造函数中的指令完成的）。**"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"虚函数表是编译器生成的，程序运行时被载入内存。一个类的虚函数表中列出了该类的全部虚函数地址。例如，在上面的程序中，类 A\n对象的存储空间以及虚函数表（假定类 A 还有其他虚函数）如图 1 所示。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/code/virtual_1.jpg"},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"图1：类A对象的存储空间以及虚函数表"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类 B 对象的存储空间以及虚函数表（假定类 B 还有其他虚函数）如图 2 所示。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/code/virtual_2.jpg"},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"图2：类B对象的存储空间以及虚函数表"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多态的函数调用语句被编译成根据基类指针所指向的（或基类引用所引用的）对象中存放的虚函数表的地址，在虚函数表中查找虚函数地址，并调用虚函数的一系列指令。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设 pa 的类型是 A*，则 pa->func() 这条语句的执行过程如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"取出 pa 指针所指位置的前 4 个字节，即对象所属的类的虚函数表的地址（在 64 位编译模式下，由于指针占 8 个字节，所以要取出 8\n个字节）。如果 pa 指向的是类 A 的对象，则这个地址就是类 A 的虚函数表的地址；如果 pa 指向的是类 B 的对象，则这个地址就是类\nB 的虚函数表的地址。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据虚函数表的地址找到虚函数表，在其中查找要调用的虚函数的地址。不妨认为虚函数表是以函数名作为索引来查找的，虽然还有更高效的查找方法。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果 pa 指向的是类 A 的对象，自然就会在类 A 的虚函数表中查出 A::func 的地址；如果 pa 指向的是类 B 的对象，就会在类 B\n的虚函数表中查出 B::func 的地址。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n类 B 没有自己的 func2 函数，因此在类 B 的虚函数表中保存的是 A::func2 的地址，这样，即便 pa 指向类 B 的对象，pa->func2()\n;这条语句在执行过程中也能在类 B 的虚函数表中找到 A::func2 的地址。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据找到的虚函数的地址调用虚函数。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由以上过程可以看出，只要是通过基类指针或基类引用调用虚函数的语句，就一定是多态的，也一定会执行上面的查表过程，\n哪怕这个虚函数仅在基类中有，在派生类中没有。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多态机制能够提高程序的开发效率，但是也增加了程序运行时的开销。虚函数表、各个对象中包含的 4\n个字节的虚函数表的地址都是空间上的额外开销；而查虚函数表的过程则是时间上的额外开销。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在计算机发展的早期，计算机非常昂贵稀有，运行速度慢，计算机的运算时间和内存是宝贵的，\n因此人们不惜多花人力编写运行速度更快、更节省内存的程序；\n如今，计算机的运算时间和内存往往没有人的时间宝贵，运算速度也很快，\n因此，在用户可以接受的前提下，降低程序运行的效率以提升人员的开发效率就是值得的了。“多态”的应用就是典型例子。"}]},{"type":"element","tag":"h2","props":{"id":"c中虚函数功能的实现机制"},"children":[{"type":"text","value":"C++中虚函数功能的实现机制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要理解C++中虚函数是如何工作的，需要回答四个问题。"}]},{"type":"element","tag":"h3","props":{"id":"什么是虚函数"},"children":[{"type":"text","value":"什么是虚函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"虚函数由于必须是在类中声明的函数，因此又称为虚方法。\n所有以virtual修饰符开始的成员函数都成为虚方法。此时注意是virtual修饰的成员函数不是virtual修饰的成员函数名。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如：基类中定义："}]},{"type":"element","tag":"code","props":{"code":"virtual void show();    //由于有virtual修饰因此是虚函数\nvoidshow(int);          //虽然和前面声明的show虚函数同名，但不是虚函数。\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"    //由于有virtual修饰因此是虚函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"voidshow"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"          //虽然和前面声明的show虚函数同名，但不是虚函数。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所有的虚函数地址都会放在所属类的虚函数表vtbl中。\n另外在基类中声明为虚函数的成员方法，到达子类时仍然是虚函数，即使子类中重新定义基类虚函数时未使用virtual修饰，\n该函数地址仍会放在子类的虚函数表vtbl中。"}]},{"type":"element","tag":"h3","props":{"id":"正确区分重载重写和隐藏"},"children":[{"type":"text","value":"正确区分重载、重写和隐藏"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意三个概念的适用范围：处在同一个类中的函数才会出现重载。处在父类和子类中的函数才会出现重写和隐藏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重载"}]},{"type":"text","value":"：同一类中，函数名相同，但参数列表不同。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重写"}]},{"type":"text","value":"：父子类中，函数名相同，参数列表相同，且有virtual修饰。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"隐藏"}]},{"type":"text","value":"：父子类中，函数名相同，参数列表相同，但没有virtual修饰；或：函数名相同，参数列表不同，无论有无virtual修饰都是隐藏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如："}]},{"type":"element","tag":"code","props":{"code":"//基类中\nvirtual void show();//1 是虚函数\nvoid show(int);//2 不是虚函数\n//子类中\nvoid show();//3 是虚函数\nvoid show(int);//4 不是虚函数\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//基类中"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//1 是虚函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//2 不是虚函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//子类中"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//3 是虚函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//4 不是虚函数"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1,2构成重载，3,4构成重载，1,3构成重写，2,4构成隐藏。\n另外2,3也会构成隐藏，子类对象无法访问基类的void show(int)成员方法，\n但是由于子类中4的存在导致了子类对象也可以直接调用void show(int)函数，\n不过此时调用的函数不在是基类中定义的void show(int)函数2，而是子类中的与3重载的4号函数。"}]},{"type":"element","tag":"h3","props":{"id":"虚函数表是如何创建和继承的"},"children":[{"type":"text","value":"虚函数表是如何创建和继承的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基类的虚函数表的创建：首先在基类声明中找到所有的虚函数，按照其声明顺序，\n编码0,1,2,3,4……，然后按照此声明顺序为基类创建一个虚函数表，其内容就是指向这些虚函数的函数指针，\n按照虚函数声明的顺序将这些虚函数的地址填入虚函数表中。例如若show放在虚函数声明的第二位，则在虚函数表中也放在第二位。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于子类的虚函数表：首先将基类的虚函数表复制到该子类的虚函数表中。若子类重写了基类的虚函数show，\n则将子类的虚函数表中存放show的函数地址(未重写前存放的是子类的show虚函数的函数地址)更新为重写后函数的函数指针。\n若子类增加了一些虚函数的声明，则将这些虚函数的地址加到该类虚函数表的后面。"}]},{"type":"element","tag":"h3","props":{"id":"虚函数表是如何访问的"},"children":[{"type":"text","value":"虚函数表是如何访问的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当执行pBase->show()时，要观察show在Base基类中声明的是虚函数还是非虚函数。 若为虚函数将使用动态联编(\n使用虚函数表决定如何调用函数)，\n若为非虚函数则使用静态联编(根据调用指针pBase的类型来确定调用哪个类的成员函数)。 此处假设show为虚函数，\n首先：由于检查到pBase指针类型所指的类Base中show定义为虚函数，\n因此找到pBase所指的对象(有可能是Base类型也可能是Extend类型。)，访问对象得到该对象所属类的虚函数表地址。\n其次：查找show在Base类中声明的位置在Base类中所有虚函数声明中的位序。\n然后到pBase所指对象的所属类(有可能是Extend哦，多态)的虚函数表中访问该位序的函数指针，从而得到要执行的函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如："}]},{"type":"element","tag":"code","props":{"code":"//...\nBase::virtual void show();//1\n//...\nExtend::virtual void show();//2\n//...\nExtern ext;\nBase* pBase = &ext;\npBase->show();\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-417e70"},"children":[{"type":"text","value":"Extend"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66f59e"},"children":[{"type":"text","value":"//..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"Extern ext;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" pBase "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-783d74"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"ext;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"pBase->"}]},{"type":"element","tag":"span","props":{"class":"ct-13da68"},"children":[{"type":"text","value":"show"}]},{"type":"element","tag":"span","props":{"class":"ct-1928f6"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当执行pBase->show();时首先到Base中查看show()，发现其为虚函数，然后访问pBase指向的ext对象，在对象中得到Extend类的虚函数表，\n在Base类声明中找到show()声明的位序0，访问Extend类的虚函数表的位置0，得到show的函数地址。\n注意若只有基类定义了virtual void show();而子类未重写virtual void show();即上面的函数（2），\n则Extend虚函数表中的位序0中存放的地址仍然是Base类中定义的virtual void show()函数，\n而若Extend类中重写了Base类中的virtual void show()方法，则Extend的虚函数表中位序0的函数地址将被更新为Extend中新重写的函数地址。\n从而调用pBase->show()时将产生多态的现象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总结：当调用pBase->show();时，执行的步骤："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"判断Base类中show是否为虚函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若不是虚函数则找到pBase所指向的对象所属类Base。执行Base::show()。若是虚函数则执行步骤3."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"访问pBase所指对象的虚函数表指针得到pBase所指对象所在类的虚函数表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查找Base中show()在声明时的位序为x，到步骤3得到的虚函数表中找到位序x，从而得到要执行的show的函数地址。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据函数地址和Base中声明的show的函数类型(形参和返回值)访问地址所指向的函数。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上为虚函数的工作机制。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"只有用virtual修饰的成员方法才会放到虚函数表中去。"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n子类对父类函数的隐藏将导致无法通过子类对象访问基类的成员方法。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此给出以下建议："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若要在子类中重新定义父类的方法(有virtual为重写，无virtual为隐藏)，则应确保子类中的函数声明和父类函数声明中的形参完全一样。\n但返回值类型是基类引用/指针的成员函数在重新定义时可以返回子类的引用/指针(返回值协变)，这是由于子类的对象可以赋给基类引用/指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若基类中声明了函数的重载版本，则在派生类中重新定义时应该重新定义所有基类的重载版本。这是因为，重新定义一个函数，其他的基类重载版本将被隐藏，\n导致子类无法使用这些基类的成员方法。所以需要每个都重新定义。若一些父类的重载版本，子类确实不需要修改，\n则由于重新定义了一个重载版本，即使有些重载版本不需要修改也要重新定义，在定义体中直接调用基类的成员方法(使用作用于限定符访问)。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从虚函数的实现机制可以看到要想在子类中实现多态需要满足三个重要的条件。\n(1)在基类中函数声明为虚函数。(2)在子类中，对基类的虚函数进行了重写。(3)基类的指针指向了子类的对象。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6dfa72{color:#0550AE}\n.ct-66f59e{color:#6E7781}\n.ct-13da68{color:#8250DF}\n.ct-417e70{color:#953800}\n.ct-139d4a{color:#0A3069}\n.ct-1928f6{color:#24292F}\n.ct-783d74{color:#CF222E}\n.dark .ct-783d74{color:#FF7B72}\n.dark .ct-1928f6{color:#C9D1D9}\n.dark .ct-139d4a{color:#A5D6FF}\n.dark .ct-417e70{color:#FFA657}\n.dark .ct-13da68{color:#D2A8FF}\n.dark .ct-66f59e{color:#8B949E}\n.dark .ct-6dfa72{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"c虚函数表多态的实现原理","depth":2,"text":"C++虚函数表（多态的实现原理）"},{"id":"c中虚函数功能的实现机制","depth":2,"text":"C++中虚函数功能的实现机制","children":[{"id":"什么是虚函数","depth":3,"text":"什么是虚函数"},{"id":"正确区分重载重写和隐藏","depth":3,"text":"正确区分重载、重写和隐藏"},{"id":"虚函数表是如何创建和继承的","depth":3,"text":"虚函数表是如何创建和继承的"},{"id":"虚函数表是如何访问的","depth":3,"text":"虚函数表是如何访问的"}]}]}},"_type":"markdown","_id":"content:1.cpp:concept:virtual.md","_source":"content","_file":"1.cpp/concept/virtual.md","_extension":"md"},{"_path":"/cpp/feature","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"C++ Feature","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"c-feature"},"children":[{"type":"text","value":"C++ Feature"}]},{"type":"element","tag":"h2","props":{"id":"c-11-有什么新特性"},"children":[{"type":"text","value":"C++ 11 有什么新特性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"与之前的版本相比，C++11增加了许多新的特性，包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"新的类型：C++11增加了多种新的类型，例如auto和decltype，它们可以让程序员更容易地定义变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"字面常量：C++11提供了新的字面常量，例如nullptr和u8\"hello\"，它们可以让程序员更方便地声明和使用指针和字符串。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"智能指针：C++11提供了多种新的智能指针，例如unique_ptr和shared_ptr，它们可以自动管理内存，避免出现内存泄漏和野指针等错误。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./concept#lambda-%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E7%82%B9%E5%92%8C%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E7%9B%B8%E6%AF%94%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E7%82%B9"},"children":[{"type":"text","value":"Lambda表达式"}]},{"type":"text","value":"：C++11增加了Lambda表达式，它可以让程序员在代码中定义和使用匿名函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"新的容器：C++11增加了多种新的容器，例如unordered_map和array，它们可以提高容器的性能和使用方便性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多线程支持：C++11增加了对多线程的支持，它提供了一系列的多线程库，可以让程序员方便地编写多线程程序。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了以上特性之外，C++11还增加了许多其他的特性，例如对默认构造函数、拷贝构造函数、赋值运算符和移动运算符的编译器自动生成（叫做\"自动类型推导\"），以及对Unicode字符集的支持等等。"}]},{"type":"element","tag":"h3","props":{"id":"线程库"},"children":[{"type":"text","value":"线程库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11中提供了一个多线程库，它可以让程序员在C++代码中创建和管理多线程。这个库包含了许多类和函数，可以用来操作线程、互斥量、条件变量和其他的同步对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的C++11多线程程序的例子，它创建了两个线程，分别打印\"hello\"和\"world\"："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n\nint main() {\n  std::thread t1([]() { std::cout << \"hello\" << std::endl; });\n  std::thread t2([]() { std::cout << \"world\" << std::endl; });\n\n  t1.join();\n  t2.join();\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"([]() { "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl; });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"([]() { "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl; });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  t1."}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  t2."}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们使用了"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":"类来创建新的线程，并使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"join()"}]},{"type":"text","value":"函数来等待线程结束。由于C++11的多线程库包含了许多类和函数，所以可以支持多种多线程编程模型，比如生产者-消费者模型、同步-异步模型等等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在C++11中，如果想要使用多线程库，需要在代码中包含"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<thread>"}]},{"type":"text","value":"头文件。这个头文件包含了所有多线程库的声明，并且提供了一些宏定义和常量，可以用来查询系统的多线程支持情况。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread::hardware_concurrency()"}]},{"type":"text","value":"函数来获取系统的最大线程数，或者使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::this_thread::get_id()"}]},{"type":"text","value":"函数来获取当前线程的标识符，等等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<thread>"}]},{"type":"text","value":"头文件之外，C++11的多线程库还包含了其他几个头文件，它们可以用来实现更为复杂的多线程程序。例如，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<mutex>"}]},{"type":"text","value":"头文件包含了互斥量类型和函数，可以用来保证多个线程对共享数据的互斥访问；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<future>"}]},{"type":"text","value":"头文件包含了"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"future"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"promise"}]},{"type":"text","value":"类型，可以用来实现线程间的同步和通信等等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，C++11的多线程库为C++程序员提供了一系列的工具和类型，可以让他们编写高性能的多线程程序。"}]},{"type":"element","tag":"h3","props":{"id":"智能指针"},"children":[{"type":"text","value":"智能指针"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"智能指针是一种智能指针类型，它在管理内存时具有智能化的行为。普通的指针只能表示一个内存地址，而智能指针则具有自动释放内存和避免野指针等特性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在C++11中，智能指针主要由两个模板类实现："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_ptr"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_ptr"}]},{"type":"text","value":"表示一个独占的指针，它管理的内存在任何时候都只能被一个指针所指向。例如，当一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_ptr"}]},{"type":"text","value":"对象被析构时，它所管理的内存会被自动释放。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"表示一个共享的指针，它管理的内存可以被多个指针所指向。例如，当一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"对象的引用计数变为0时，它所管理的内存会被自动释放。\n下面是一个使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_ptr"}]},{"type":"text","value":"的简单示例："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <memory>\n\nint main() {\n  std::unique_ptr<int> p(new int(5));  // 声明一个独占指针，并分配一个int类型的对象\n  std::cout << *p << std::endl;  // 输出指针指向的对象的值\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<memory>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"));"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 声明一个独占指针，并分配一个int类型的对象"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"p "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 输出指针指向的对象的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们声明了一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_ptr"}]},{"type":"text","value":"类型的指针p，并使用它来指向一个int类型的内存。我们可以通过解引用指针的方式来访问指针指向的对象，就像使用普通指针一样。当程序执行完毕，智能指针p会被析构，它所管理的内存就会被自动释放，避免了内存泄漏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一个模板类"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"的用法也非常相似，下面是一个使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"的简单示例："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <memory>\n\nint main() {\n  std::shared_ptr<int> p1(new int(5));  // 声明一个共享指针，并分配一个int类型的对象\n  std::cout << *p1 << std::endl;  // 输出指针指向的对象的值\n\n  std::shared_ptr<int> p2 = p1;  // 将一个共享指针赋值给另一个共享指针\n  std::cout << p1.use_count() << \" \" << p2.use_count() << std::endl;  // 输出两个指针的引用计数\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<memory>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"));"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 声明一个共享指针，并分配一个int类型的对象"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"p1 "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 输出指针指向的对象的值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::shared_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" p2 "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" p1;"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 将一个共享指针赋值给另一个共享指针"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" p1."}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"use_count"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"\" \""}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" p2."}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"use_count"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl;"}]},{"type":"element","tag":"span","props":{"class":"ct-ad4a3f"},"children":[{"type":"text","value":"  // 输出两个指针的引用计数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们声明了两个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::shared_ptr"}]},{"type":"text","value":"类型的指针p1和p2，并让它们指向同一个int类型的对象。我们可以通过调用指针的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"use_count()"}]},{"type":"text","value":"方法来获取它的引用计数，表示当前有多少个指针指向这个内存。当程序执行完毕，如果所有的指针都被析构了，智能指针所管理的内存就会被自动释放，避免了内存泄漏。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，智能指针是C++11中一个非常实用的类型，它可以自动管理内存的生命周期，减少程序员手动管理内存的工作量，并且可以避免常见的内存错误。"}]},{"type":"element","tag":"h3","props":{"id":"auto"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自动类型推导"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当与"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"const"}]},{"type":"text","value":"结合使用时"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当类型不为引用时，auto 的推导结果将不保留表达式的 const 属性；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当类型为引用时，auto 的推导结果将保留表达式的 const 属性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"auto的限制"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 auto 的时候必须对变量进行初始化"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto 不能在函数的参数中使用"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这个很容易理解，我们在定义函数的时候只是对参数进行了声明，指明了参数的类型，但并没有给它赋值，只有在实际调用函数的时候才会给参数赋值；而\nauto 要求必须对变量进行初始化，所以这是矛盾的。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto 不能作用于类的非静态成员变量（也就是没有 static 关键字修饰的成员变量）中"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"decltype"}]},{"type":"text","value":"定义，如下就可以写成"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"decltype(T().begin()) m_it;"}]}]}]},{"type":"element","tag":"code","props":{"code":"template <typename T>\nclass A {\nprivate:\n    typename T::iterator m_it;\n}       \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"iterator"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" m_it;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}       "}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto 关键字不能定义数组"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto 不能作用于模板参数"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"auto常用"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 auto 定义迭代器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto 用于泛型编程"}]}]},{"type":"element","tag":"h3","props":{"id":"using"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"using"}]},{"type":"text","value":"定义别名（替代"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typedef"}]},{"type":"text","value":"）"}]},{"type":"element","tag":"h3","props":{"id":"支持函数模板的默认模板参数"},"children":[{"type":"text","value":"支持函数模板的默认模板参数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"函数模板是C++中一种常见的技术，它允许定义一个函数，接受任意类型的参数。例如，下面是一个简单的函数模板示例："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\ntemplate<typename T>\nvoid print(T value) {\n  std::cout << value << std::endl;\n}\n\nint main() {\n  print(5);\n  print(\"hello world\");\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" value "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个名为print的函数模板，它接受一个模板参数T，表示函数接受任意类型的参数。在函数体内，我们可以像使用普通类型一样使用这个模板参数T。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11标准引入了一种新的语法，允许为函数模板定义默认模板参数。例如，下面是一个使用默认模板参数的函数模板示例："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n\ntemplate<typename T = int>\nvoid print(T value) {\n  std::cout << value << std::endl;\n}\n\nint main() {\n  print(5);\n  print(\"hello world\");\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" int>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" value "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们为函数模板print定义了一个默认模板参数T = int，表示如果调用函数时没有指定模板参数，就会使用默认的int类型作为模板参数。因此，在上面的程序中，调用函数print时，第一次调用会自动使用默认的模板参数int，并将实际参数5赋值给函数的形式参数value。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"默认模板参数的作用是简化函数模板的调用，减少程序员的工作量。例如，我们可以通过使用默认模板参数，定义一个通用的排序函数，支持任意类型的数组排序，并且不需要显式地指定模板参数："}]},{"type":"element","tag":"code","props":{"code":"#include <algorithm>\n\ntemplate<typename T>\nvoid sort(T* array, int size) {\n  std::sort(array, array + size);\n}\n\nint main() {\n  int array[] = {5, 3, 2, 4, 1};\n  sort(array, 5);\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b4b021"},"children":[{"type":"text","value":"<algorithm>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"array"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e68728"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"(array, array "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" size);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" array[] "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5f3120"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"(array, "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bb75a9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c3ecea"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfffbd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个名为sort的函数模板，它接受一个类型为T的数组和数组的长度作为参数。在函数体内，我们使用了C++标准库中的std::sort函数，将数组进行排序。因为我们没有为函数模板指定模板参数，所以编译器会自动推断出模板参数的类型，并使用默认的模板参数int进行编译。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，支持函数模板的默认模板参数是C++11标准的一项重要特性，它可以简化函数模板的定义和调用，提高程序的可读性和可维护性。"}]},{"type":"element","tag":"h2","props":{"id":"from-stroustrup"},"children":[{"type":"text","value":"from stroustrup"}]},{"type":"element","tag":"h3","props":{"id":"c11-features"},"children":[{"type":"text","value":"C++11 features"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11 feels like a new language -- stroustrup"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.stroustrup.com/hopl20main-p5-p-bfc9cd4--final.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"page29"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11 introduced a bewildering number of language features, including:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"memory model - an efficient low level-model of modern hardware as a foundation for concurrency"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto and decltype - avoiding redundant repetition of type names"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"range-for - simple linear traversal of ranges"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"move semantics and rvalue references - minimizing copying of data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"uniform initialization - an (almost) completely general syntax and semantics for initializing objects of all kinds and\ntypes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"nullptr - a name for the null pointer"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"constexpr functions - compile-time evaluated functions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"user-defined literals - literals for user-defined types"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"raw string literals - literals where escape characters are not needed, mostly for regular expressions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attributes - associating essentially arbitrary information with a name"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lambdas - unnamed function objects"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"variadic templates - templates that can handle an arbitrary number of arguments of arbitrary types"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"template aliases - the ability to rename a template and to bind some template arguments for the new name"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"noexcept - a way of ensuring that an exception isn’t thrown from a function"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"override and final - explicit syntax for managing large class hierarchies"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"static_assert - compile-time assertions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"long long - a longer integer type"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"default member initializers - give a data member a default value that can be superseded by initialization in a\nconstructor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"enum classes - strongly typed enumerations with scoped enumerators"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And here is a list of the major standard-library components:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unique_ptr and shared_ptr - resource-management pointers relying on RAII"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"memory model and atomic variables"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"thread, mutex, condition_variable, etc. - type-safe and portable support for basic system- level concurrency"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"future, promise, and packaged_task, etc. - slightly higher-level concurrency"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"tuple - unnamed simple composite types"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"type traits - testable properties of types for use in metaprogramming"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"regular expression matching"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"random numbers - with many generators (engines) and distributions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Time - time_point and duration"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unordered_map, etc. - hash tables"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"forward_list - a singly-linked list"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"array - a fixed-constant-sized array that knows its size"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"emplace operations - construct objects right within a container to avoid copying"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exception_ptr - enables transfer of exceptions between threads"}]}]},{"type":"element","tag":"h3","props":{"id":"c17-features"},"children":[{"type":"text","value":"C++17 features"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++17 had about 21 new language features (depending on how you count), including:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Constructor template argument deduction - simplify object definitions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Deduction guides - an explicit notation for resolving constructor template argument deduction ambiguities"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Structured bindings - simplify notation and eliminate a source of uninitialized variables"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"inline variables - simplify the use of statically allocated variables in header-only libraries"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Fold expressions - simplify some uses of variadic templates"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Explicit test in conditions - a bit like conditions in for-statements"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Guaranteed copy elision - eliminate many redundant copy operations"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Stricter expression evaluation order - prevents some subtle order-of-evaluation mistakes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto as a template argument type - type deduction for value template arguments"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Standard attributes to catch common mistakes - [[maybe_unused]], [[nodiscard]], and [[fallthrough]]"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Hexadecimal floating-point literals"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Constant expression if - simplify compile-time evaluated code"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The C++17 standard-library added about 13 new features plus many minor modifications:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"optional, variant, and any - standard-library types for expressing alternatives"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"shared_mutex and shared_lock (reader-writer locks) and scoped_lock"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"parallel STL - multi-threaded and/or vectorized versions of standard-library algorithms"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"file system - the ability to portably manipulate file-system paths and directories"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"string_view - a non-owning reference to an immutable sequence of characters"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mathematical special functions - including Laguerre and Legendre polynomials, beta func- tions, Riemann zeta function"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ad4a3f{color:#6E7781}\n.ct-c3ecea{color:#0550AE}\n.ct-e68728{color:#953800}\n.ct-5f3120{color:#8250DF}\n.ct-b4b021{color:#0A3069}\n.ct-bfffbd{color:#24292F}\n.ct-bb75a9{color:#CF222E}\n.dark .ct-bb75a9{color:#FF7B72}\n.dark .ct-bfffbd{color:#C9D1D9}\n.dark .ct-b4b021{color:#A5D6FF}\n.dark .ct-5f3120{color:#D2A8FF}\n.dark .ct-e68728{color:#FFA657}\n.dark .ct-c3ecea{color:#79C0FF}\n.dark .ct-ad4a3f{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"c-11-有什么新特性","depth":2,"text":"C++ 11 有什么新特性","children":[{"id":"线程库","depth":3,"text":"线程库"},{"id":"智能指针","depth":3,"text":"智能指针"},{"id":"auto","depth":3,"text":"auto"},{"id":"using","depth":3,"text":"using"},{"id":"支持函数模板的默认模板参数","depth":3,"text":"支持函数模板的默认模板参数"}]},{"id":"from-stroustrup","depth":2,"text":"from stroustrup","children":[{"id":"c11-features","depth":3,"text":"C++11 features"},{"id":"c17-features","depth":3,"text":"C++17 features"}]}]}},"_type":"markdown","_id":"content:1.cpp:feature.md","_source":"content","_file":"1.cpp/feature.md","_extension":"md"},{"_path":"/cpp/lib/_dir","_dir":"lib","_draft":false,"_partial":true,"_locale":"","title":"C/C++ lib","icon":"vscode-icons:folder-type-library-opened","_id":"content:1.cpp:lib:_dir.yml","_type":"yaml","_source":"content","_file":"1.cpp/lib/_dir.yml","_extension":"yml"},{"_path":"/cpp/lib/actor","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"actor","description":"Actor 模型是一种编程模型，用于构建分布式系统。它的基本思想是每个 Actor 都是一个并发单元，它可以独立地接收和处理消息，并且可以与其它 Actor 通信。Actor 模型通过提供一种机制来管理 Actor 的并发和通信，使系统变得更加可靠和容错。","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"actor"},"children":[{"type":"text","value":"actor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 模型是一种编程模型，用于构建分布式系统。它的基本思想是每个 Actor 都是一个并发单元，它可以独立地接收和处理消息，并且可以与其它 Actor 通信。Actor 模型通过提供一种机制来管理 Actor 的并发和通信，使系统变得更加可靠和容错。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 模型的一个重要特点是消息传递。在 Actor 模型中，Actor 之间通信的唯一方式就是通过消息传递。每个Actor 都有自己的消息队列，它可以接收和处理来自其它 Actor 的消息。当 Actor 收到消息时，它可以根据消息的内容执行相应的操作，并可能发送一条新的消息给其它 Actor。这种消息传递的方式使得 Actor 之间的通信变得非常简单，并且能够保证消息的可靠性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 模型在分布式系统中应用广泛，它能够帮助开发人员构建高性能、可扩展和容错的系统。Actor 模型提供了一种非常有效的方式来管理复杂的并发和通信，使得系统的开发变得更加容易。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 框架是一种基于Actor 模型的编程框架，它提供了一套用于构建 Actor 模型应用的工具和库。Actor 框架的目的是简化分布式系统的开发过程，并为开发人员提供一种统一的、简单的方式来编写和管理 Actor 之间的通信。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 框架通常包含如下功能："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Actor 生命周期管理：Actor 框架管理Actor 的生命周期，包括创建、销毁和调度。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"消息传递：Actor 框架提供了一种机制来管理Actor 之间的消息传递，保证消息的可靠性和安全性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"并发控制：Actor 框架管理Actor 的并发执行，避免竞争条件的发生。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"异常处理：Actor 框架提供了机制来处理Actor 内部的异常和错误，保证Actor 的可靠性和容错性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Actor 框架的具体实现方式可能会有所不同，但基本功能是相同的。使用Actor 框架可以让你更加专注于应用逻辑的开发，而无需担心底层的细节问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Actor 框架是一种基于Actor 模型的编程框架，可以帮助开发人员构建分布式系统。它提供了一套统一的工具和库，使得开发人员能够更加方便地使用Actor 模型来编写应用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常见的Actor 框架包括"},{"type":"element","tag":"a","props":{"href":"#akka"},"children":[{"type":"text","value":"Akka"}]},{"type":"text","value":"、"},{"type":"element","tag":"a","props":{"href":"#erlang-otp"},"children":[{"type":"text","value":"Erlang OTP"}]},{"type":"text","value":" 等。"}]},{"type":"element","tag":"h2","props":{"id":"akka"},"children":[{"type":"text","value":"Akka"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Akka 是一种基于Actor 模型的编程框架，用于构建分布式系统。它是一种高性能、可靠和容错的编程模型，可以帮助开发人员更加方便地构建分布式系统。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Akka 提供了一种统一的、简单的方式来编写和管理Actor 之间的通信。它能够管理Actor 的生命周期，并且能够保证消息的可靠性和安全性。Akka 还提供了一种机制来管理Actor 的并发执行，避免竞争条件的发生。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Akka 的目标是提供一种高性能、可靠和容错的编程模型，让开发人员能够更加专注于应用逻辑的开发。它支持多种语言，包括Java、Scala、Kotlin 和Python 等。Akka 还有丰富的文档和示例代码，可以帮助开发人员快速上手。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Akka 是一种基于Actor 模型的编程框架，用于构建分布式系统。它提供了一种统一的、简单的方式来编写和管理Actor 之间的通信，能够帮助开发人员更加方便地构建分布式系统。"}]},{"type":"element","tag":"h2","props":{"id":"erlang-otp"},"children":[{"type":"text","value":"Erlang OTP"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Erlang OTP 是一种高性能、容错性强的并发编程框架，用于构建分布式系统。它基于Actor 模型，提供了一种统一的、简单的方式来编写和管理Actor 之间的通信。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Erlang OTP 提供了一种高效的机制来管理Actor 的并发执行，避免竞争条件的发生。它还提供了一种机制来处理Actor 内部的异常和错误，保证Actor 的可靠性和容错性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Erlang OTP 支持多种平台，包括Linux、Windows 和Mac OS 等。它还有丰富的文档和示例代码，可以帮助开发人员快速上手。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Erlang OTP 是一种高性能、容错性强的并发编程框架，用于构建分布式系统。它基于Actor 模型，提供了一种统一的、简单的方式来编写和管理Actor 之间的通信。 Erlang OTP 能够帮助开发人员更加方便地构建分布式系统，并提高系统的性能和可靠性。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"akka","depth":2,"text":"Akka"},{"id":"erlang-otp","depth":2,"text":"Erlang OTP"}]}},"_type":"markdown","_id":"content:1.cpp:lib:actor.md","_source":"content","_file":"1.cpp/lib/actor.md","_extension":"md"},{"_path":"/cpp/lib/asan","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"内存检测","description":"内存检测valgrind --tool=memcheck --leak-check=full --show-reachable=yes --trace-children=yes","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"内存检测"},"children":[{"type":"text","value":"内存检测"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内存检测"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"valgrind --tool=memcheck --leak-check=full --show-reachable=yes --trace-children=yes"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"valgrind --tool=memcheck --leak-check=full --show-reachable=yes --log-file=/home/oracle/works/nextpage2/bin/leak.log ./netaudit"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AddressSanitizer"}]},{"type":"text","value":":\n编译代码时用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-fsanitize=address"}]},{"type":"text","value":"就能打开AddressSanitizer工具，为了在检测到内存错误时打印出您的程序调用栈，需要在编译时加上选项"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-fno-omit-frame-pointer"}]},{"type":"text","value":"选项，同时为了得出更清晰的调用栈信息，请用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O1"}]},{"type":"text","value":"选项编译程序。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum install libasan"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://mirror.centos.org/centos/7/os/x86_64/Packages/libasan-4.8.5-44.el7.x86_64.rpm","rel":["nofollow"]},"children":[{"type":"text","value":"http://mirror.centos.org/centos/7/os/x86_64/Packages/libasan-4.8.5-44.el7.x86_64.rpm"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux下内存检测工具："},{"type":"element","tag":"a","props":{"href":"#asan"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asan"}]}]}]},{"type":"element","tag":"h2","props":{"id":"asan"},"children":[{"type":"text","value":"asan"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ASAN（Address-Sanitizier）早先是LLVM中的特性，后被加入GCC 4.8，在GCC 4.9后加入对ARM平台的支持。因此GCC\n4.8以上版本使用ASAN时不需要安装第三方库，通过在编译时指定编译CFLAGS即可打开开关。"}]}]},{"type":"element","tag":"h3","props":{"id":"编译选项"},"children":[{"type":"text","value":"编译选项"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Gcc编译选项"},{"type":"element","tag":"code","props":{"code":"# -fsanitize=address：开启内存越界检测\n# -fsanitize-recover=address：一般后台程序为保证稳定性，不能遇到错误就简单退出，而是继续运行，采用该选项支持内存出错之后程序继续运行，需要叠加设置ASAN_OPTIONS=halt_on_error=0才会生效；若未设置此选项，则内存出错即报错退出\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -fsanitize=address：开启内存越界检测"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -fsanitize-recover=address：一般后台程序为保证稳定性，不能遇到错误就简单退出，而是继续运行，采用该选项支持内存出错之后程序继续运行，需要叠加设置ASAN_OPTIONS=halt_on_error=0才会生效；若未设置此选项，则内存出错即报错退出"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ASAN_CFLAGS += -fsanitize=address -fsanitize-recover=address"}]},{"type":"element","tag":"code","props":{"code":"# -fno-stack-protector：去使能栈溢出保护\n# -fno-omit-frame-pointer：去使能栈溢出保护\n# -fno-var-tracking：默认选项为-fvar-tracking，会导致运行非常慢\n# -g1：表示最小调试信息，通常debug版本用-g即-g2\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -fno-stack-protector：去使能栈溢出保护"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -fno-omit-frame-pointer：去使能栈溢出保护"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -fno-var-tracking：默认选项为-fvar-tracking，会导致运行非常慢"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# -g1：表示最小调试信息，通常debug版本用-g即-g2"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ASAN_CFLAGS += -fno-stack-protector -fno-omit-frame-pointer -fno-var-tracking -g1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ld链接选项\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ASAN_LDFLAGS += -fsanitize=address -g1"}]},{"type":"text","value":"\n如果使用gcc链接，此处可忽略。"}]}]},{"type":"element","tag":"h3","props":{"id":"asan运行选项"},"children":[{"type":"text","value":"ASAN运行选项"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ASAN_OPTIONS设置\nASAN_OPTIONS是Address-Sanitizier的运行选项环境变量。"},{"type":"element","tag":"code","props":{"code":"# halt_on_error=0：检测内存错误后继续运行\n# detect_leaks=1:使能内存泄露检测\n# malloc_context_size=15：内存错误发生时，显示的调用栈层数为15\n# log_path=/home/xos/asan.log:内存检查问题日志存放文件路径\n# suppressions=$SUPP_FILE:屏蔽打印某些内存错误\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# halt_on_error=0：检测内存错误后继续运行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# detect_leaks=1:使能内存泄露检测"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# malloc_context_size=15：内存错误发生时，显示的调用栈层数为15"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# log_path=/home/xos/asan.log:内存检查问题日志存放文件路径"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# suppressions=$SUPP_FILE:屏蔽打印某些内存错误"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export ASAN_OPTIONS=halt_on_error=0:use_sigaltstack=0:detect_leaks=1:malloc_context_size=15:log_path=/home/xos/asan.log:suppressions=$SUPP_FILE"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"除了上述常用选项，以下还有一些选项可根据实际需要添加："},{"type":"element","tag":"code","props":{"code":"# detect_stack_use_after_return=1：检查访问指向已被释放的栈空间\n# handle_segv=1：处理段错误；也可以添加handle_sigill=1处理SIGILL信号\n# quarantine_size=4194304:内存cache可缓存free内存大小4M\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# detect_stack_use_after_return=1：检查访问指向已被释放的栈空间"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# handle_segv=1：处理段错误；也可以添加handle_sigill=1处理SIGILL信号"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# quarantine_size=4194304:内存cache可缓存free内存大小4M"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ASAN_OPTIONS=${ASAN_OPTIONS}:verbosity=0:handle_segv=1:allow_user_segv_handler=1:detect_stack_use_after_return=1:fast_unwind_on_fatal=1:fast_unwind_on_check=1:fast_unwind_on_malloc=1:quarantine_size=4194304"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"LSAN_OPTIONS设置"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nLSAN_OPTIONS是LeakSanitizier运行选项的环境变量，而LeakSanitizier是ASAN的内存泄漏检测模块，常用运行选项有："},{"type":"element","tag":"code","props":{"code":"# exitcode=0：设置内存泄露退出码为0，默认情况内存泄露退出码0x16\n# use_unaligned=4：4字节对齐\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# exitcode=0：设置内存泄露退出码为0，默认情况内存泄露退出码0x16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"# use_unaligned=4：4字节对齐"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export LSAN_OPTIONS=exitcode=0:use_unaligned=4"}]}]}]},{"type":"element","tag":"h3","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实际开发环境中，可能存在gcc版本低，使用asan做内存检查时，需要链接libasan.so库的情况。其次，平台软件通常都会内部实现一套内存操作接口，为使用asan工具，需要替换成glibc提供的接口。此时，可以通过LD_PRELOAD环境变量解决这类问题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export LD_PRELOAD= libasan.so.2:libprelib.so #vos_malloc --> malloc"}]}]},{"type":"element","tag":"h3","props":{"id":"sample"},"children":[{"type":"text","value":"sample"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"libasan, or \"Address Sanitizer\", is a runtime memory error detector. It is typically used as a compiler instrumentation option, so that it can catch memory errors (e.g. buffer overflows, out-of-bounds accesses, etc.) as the program is running. Here is an example of how to use libasan in C++ code:"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <string.h>\n\nint main()\n{\n  // Allocate some memory and initialize it with a string\n  char *str = new char[5];\n  strcpy(str, \"hello\");\n\n  // Overwrite the end of the allocated buffer\n  str[5] = '!';  // <-- this will cause a buffer overflow\n\n  std::cout << str << std::endl;\n\n  // Clean up memory\n  delete [] str;\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"<string.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5dd017"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"  // Allocate some memory and initialize it with a string"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"str "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5dd017"},"children":[{"type":"text","value":"strcpy"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"(str, "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"  // Overwrite the end of the allocated buffer"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  str["}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"'!'"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"  // <-- this will cause a buffer overflow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" str "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"  // Clean up memory"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"delete []"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" str;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To compile this code with libasan, you would use the -fsanitize=address flag with the compiler, like this:"}]},{"type":"element","tag":"code","props":{"code":"g++ -fsanitize=address my_program.cpp -o my_program\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"g++"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"-fsanitize=address"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"my_program.cpp"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"my_program"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When you run the resulting program, libasan will detect the buffer overflow and report an error, like this:"}]},{"type":"element","tag":"code","props":{"code":"./my_program\n\n==12345==ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7ffd3c3c976c at pc 0x0000004022c3 bp 0x7ffd3c3c95c0 sp 0x7ffd3c3c95b8\nWRITE of size 1 at 0x7ffd3c3c976c thread T0\n    #0 0x4022c2 in main /path/to/my_program.cpp:11\n    #1 0x7f1b9fb9792f in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310\n    #2 0x4020c8 in _start (/path/to/my_program+0x4020c8)\n\nAddress 0x7ffd3c3c976c is located in stack of thread T0 at offset 44 in frame\n    #0 0x402262 in main /path/to/my_program.cpp:5\n\nThis frame has 1 object(s):\n    [32, 44) 'str' <== Memory access at offset 44 overflows this variable\nHINT: this may be a false positive if your program uses some custom stack unwind mechanism, swapcontext or vfork\n      (longjmp and C++ exceptions *are* supported)\nSUMMARY: AddressSanitizer: stack-buffer-overflow /path/to/my_program.cpp:11 in main\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"/my_program"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"==12345==ERROR:"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"AddressSanitizer:"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"stack-buffer-overflow"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"7ffd3c3c976c"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"pc"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"0000004022c3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"bp"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"7ffd3c3c95c0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"7ffd3c3c95b8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"WRITE"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"7ffd3c3c976c"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"T0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"#0 0x4022c2 in main /path/to/my_program.cpp:11"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"#1 0x7f1b9fb9792f in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"#2 0x4020c8 in _start (/path/to/my_program+0x4020c8)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"7ffd3c3c976c"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"is"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"located"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"stack"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"T0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"offset"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"44"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"frame"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e41d0a"},"children":[{"type":"text","value":"#0 0x402262 in main /path/to/my_program.cpp:5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"This"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b42885"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"    ["}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"32"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"44"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-002c7e"},"children":[{"type":"text","value":"'str'"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"<=="}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" Memory access at offset "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"44"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" overflows this variable"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"HINT: this may be a "}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" positive if your program uses some custom stack unwind mechanism, swapcontext or vfork"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"      (longjmp and C++ exceptions "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"are"}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" supported)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":"SUMMARY: AddressSanitizer: stack-buffer-overflow /path/to/my_program.cpp:"}]},{"type":"element","tag":"span","props":{"class":"ct-7a5e5c"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd3c5a"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-fbc56f"},"children":[{"type":"text","value":" main"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see, libasan detected the buffer overflow and provided some information about where the error occurred and how it happened. This can be very useful for finding and fixing memory errors in your code."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b42885{color:#953800}\n.ct-7a5e5c{color:#0550AE}\n.ct-5dd017{color:#8250DF}\n.ct-002c7e{color:#0A3069}\n.ct-fbc56f{color:#24292F}\n.ct-dd3c5a{color:#CF222E}\n.ct-e41d0a{color:#6E7781}\n.dark .ct-e41d0a{color:#8B949E}\n.dark .ct-dd3c5a{color:#FF7B72}\n.dark .ct-fbc56f{color:#C9D1D9}\n.dark .ct-002c7e{color:#A5D6FF}\n.dark .ct-5dd017{color:#D2A8FF}\n.dark .ct-7a5e5c{color:#79C0FF}\n.dark .ct-b42885{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"asan","depth":2,"text":"asan","children":[{"id":"编译选项","depth":3,"text":"编译选项"},{"id":"asan运行选项","depth":3,"text":"ASAN运行选项"},{"id":"总结","depth":3,"text":"总结"},{"id":"sample","depth":3,"text":"sample"}]}]}},"_type":"markdown","_id":"content:1.cpp:lib:asan.md","_source":"content","_file":"1.cpp/lib/asan.md","_extension":"md"},{"_path":"/cpp/lib/bert","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"BERT","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"bert"},"children":[{"type":"text","value":"BERT"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./doc/web_page/bert-principles"},"children":[{"type":"text","value":"一文读懂BERT(原理篇)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./doc/web_page/theillustratedtransformer"},"children":[{"type":"text","value":"The Illustrated Transformer"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zhuanlan.zhihu.com/p/303080210","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"https://img.shields.io/badge/-由浅入深transformer-F08080","alt":"由浅入深transformer"},"children":[]},{"type":"text","value":" "}]},{"type":"element","tag":"a","props":{"href":"https://zhuanlan.zhihu.com/p/68446772","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"https://img.shields.io/badge/-Bert时代的创新（应用篇）：Bert在NLP各领域的应用进展-DB7093","alt":"Bert时代的创新（应用篇）：Bert在NLP各领域的应用进展"},"children":[]},{"type":"text","value":" "}]},{"type":"element","tag":"a","props":{"href":"https://zhuanlan.zhihu.com/p/48612853","target":"_blank"},"children":[{"type":"element","tag":"img","props":{"src":"https://img.shields.io/badge/-词向量之BERT-DDA0DD","alt":"词向量之BERT"},"children":[]},{"type":"text","value":" "}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:lib:bert.md","_source":"content","_file":"1.cpp/lib/bert.md","_extension":"md"},{"_path":"/cpp/lib/epoll","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"epoll","description":"epoll 但不止 epoll","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"epoll"},"children":[{"type":"text","value":"epoll"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"epoll 但不止 epoll"}]},{"type":"element","tag":"h2","props":{"id":"select"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux SELECT 是一个系统调用，它可以让程序同时监控多个文件描述符，并等待其中任意一个可用于读、写或异常操作。这种机制可以让程序在多个文件之间高效切换，并有效地利用 CPU 时间。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SELECT 系统调用的一般形式如下："}]},{"type":"element","tag":"code","props":{"code":"int select(int nfds, fd_set *readfds, fd_set *writefds,\n           fd_set *exceptfds, struct timeval *timeout);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba8848"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"nfds"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"fd_set"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"readfds"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"fd_set"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"writefds"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":"           "}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"fd_set"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"exceptfds"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"timeval"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-45bbf7"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-31c3e0"},"children":[{"type":"text","value":"timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-b9639a"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"它接受五个参数："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"nfds 是要监控的文件描述符的最大值加 1。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"readfds 是一个指向可读文件描述符集合的指针，在监控期间，如果任意一个描述符可读，SELECT 就会返回。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"writefds 是一个指向可写文件描述符集合的指针，在监控期间，如果任意一个描述符可写，SELECT 就会返回。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exceptfds 是一个指向异常文件描述符集合的指针，在监控期间，如果任意一个描述符有异常，SELECT 就会返回。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"timeout 是一个指向 timeval 结构的指针，用于指定 SELECT 的超时时间。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SELECT 返回值是可用文件描述符的数量。如果在超时时间内没有可用文件描述符，它会返回 0。如果出错，它会返回 -1。"}]},{"type":"element","tag":"h3","props":{"id":"常用用法"},"children":[{"type":"text","value":"常用用法"}]},{"type":"element","tag":"h4","props":{"id":"简单的聊天室"},"children":[{"type":"text","value":"简单的聊天室"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 SELECT 来实现一个简单的聊天室，它能够同时与多个客户端进行交互。在这个例子中，你可以将 readfds 设置为所有客户端的文件描述符集合，然后在超时时间内不断调用 SELECT，如果发现有客户端发送了消息，就从对应的文件描述符中读取消息并转发给其他客户端。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，你也可以使用 SELECT 实现一个多任务的 Web 服务器，它能够同时处理多个客户端的请求。在这个例子中，你可以将 readfds 设置为监听套接字的文件描述符集合，然后在超时时间内不断调用 SELECT，如果发现有新的客户端连接，就接受连接并处理客户端的请求。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Linux SELECT 是一个非常有用的系统调用，它能够帮助程序员实现高效的多任务处理。"}]},{"type":"element","tag":"h4","props":{"id":"实现多任务处理"},"children":[{"type":"text","value":"实现多任务处理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你可以使用 SELECT 实现一个多线程服务器，它能够同时处理多个客户端的请求。在这个例子中，你可以将 readfds 设置为监听套接字的文件描述符集合，然后在超时时间内不断调用 SELECT，如果发现有新的客户端连接，就接受连接并在新的线程中处理客户端的请求。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，你也可以使用 SELECT 实现一个多进程服务器，它能够通过多个进程同时处理多个客户端的请求。在这个例子中，你可以将 readfds 设置为监听套接字的文件描述符集合，然后在超时时间内不断调用 SELECT，如果发现有新的客户端连接，就接受连接并在新的进程中处理客户端的请求。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，SELECT 可以作为一种高效的多任务处理方式，它能够帮助你在 Linux 系统中实现高性能的服务器应用程序。"}]},{"type":"element","tag":"h3","props":{"id":"技术细节和注意事项"},"children":[{"type":"text","value":"技术细节和注意事项"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，在调用 SELECT 时，你需要清空文件描述符集合，然后再添加需要监控的文件描述符。这样做的原因是，SELECT 会修改文件描述符集合，并在返回时将可用文件描述符添加到集合中。如果你没有清空集合，那么 SELECT 可能会返回之前添加的无效文件描述符。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，在调用 SELECT 时，你还需要注意文件描述符集合的大小。它的大小应该是 nfds 的值加 1，否则 SELECT 可能会出错。例如，如果 nfds 的值为 5，那么文件描述符集合的大小应该是 6，因为它从 0 开始编号。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，在使用 SELECT 时，你需要注意文件描述符集合的清空和大小，这样可以避免一些常见的错误。"}]},{"type":"element","tag":"h3","props":{"id":"select-和其他系统调用的区别"},"children":[{"type":"text","value":"SELECT 和其他系统调用的区别"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SELECT 和其他系统调用的区别在于它们的实现方式和性能。SELECT 是 Linux 内核中最常用的系统调用之一，它能够实现多文件监控和高效的多任务处理。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先，SELECT 的实现方式与其他系统调用不同。它使用位图来表示文件描述符集合，因此它能够处理较大的文件描述符集合。而其他系统调用，例如 POLL 和 EPOLL，则使用数组来表示文件描述符集合，因此它们能够处理更多的文件描述符，但是对于大的文件描述符集合，它们的性能可能会下降。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其次，SELECT 的性能也与其他系统调用不同。在处理大量的文件描述符时，SELECT 的性能会比 POLL 和 EPOLL 差。这是因为 SELECT 需要在内核空间和用户空间之间进行多次数据拷贝，这会带来额外的开销。而 POLL 和 EPOLL 只需要在内核空间和用户空间之间进行一次数据拷贝，因此它们的性能会更优。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，SELECT 还有一些限制，它不能处理超过 1024 个文件描述符。如果需要处理更多的文件描述符，就需要使用其他系统"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了 SELECT，Linux 还提供了其他系统调用来实现多文件监控和多任务处理。例如，POLL 和 EPOLL 都是用于实现多文件监控的系统调用，它们的实现方式和性能都优于 SELECT。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"POLL 是 SELECT 的一个改进版本，它使用数组来表示文件描述符集合，因此能够处理更多的文件描述符。它的实现方式比 SELECT 简单，性能也更优。但是它也有一些限制，它不能处理超过 4096 个文件描述符。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"EPOLL 是 POLL 的一个改进版本，它的实现方式和性能都比 POLL 更优。它使用哈希表来维护文件描述符集合，因此能够处理更多的文件描述符，并且在处理大量的文件描述符时，它的性能表现更优。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，SELECT、POLL 和 EPOLL 都是用于实现多文件监控和高效的多任务处理的系统调用，它们的实现方式和性能"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了 SELECT、POLL 和 EPOLL，Linux 还提供了其他系统调用来实现多文件监控和多任务处理。例如，KQUEUE 和 IO_URING 都是 Linux 专有的系统调用，它们能够提供更加高效和先进的多文件监控功能。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"KQUEUE 是一种基于事件驱动的系统调用，它能够支持多种不同类型的事件，包括文件描述符事件、信号事件和定时事件等。它的实现方式比 SELECT、POLL 和 EPOLL 更加复杂，但是它的性能也更优，特别是在处理大量的事件时。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"IO_URING 是 Linux 5.1 版本中引入的新系统调用，它提供了一种全新的方式来实现多文件监控和高效的多任务处理。它使用了一种称为“提交队列”的机制来解决 SELECT、POLL 和 EPOLL 的瓶颈，并且能够支持更多的文件描述符和更多类型的事件。它的实现方式和性能都优于其他系统调用，是目前 Linux 系统中最先进的多"}]},{"type":"element","tag":"h2","props":{"id":"poll"},"children":[{"type":"text","value":"poll"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"它可以让程序在多个文件句柄上等待事件的发生。它的作用类似于 select 函数，但是 poll 函数通常更快，并且可以处理更多的文件句柄。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"poll 函数通过一个数组来监视多个文件句柄，每个文件句柄都有一个相应的结构体来存储关于它的信息。程序可以通过调用 poll 函数来监测文件句柄上是否有事件发生，例如是否有数据可读或可写。如果有事件发生，poll 函数就会返回一个非零值，并且会更新相应的结构体来表示事件的类型。程序可以通过检查这些信息来处理事件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 poll 函数的好处在于它可以让程序同时监测多个文件句柄，而不需要对每个文件句柄进行单独的处理。这样可以提高程序的效率，并且可以更方便地处理多个文件句柄上的事件。"}]},{"type":"element","tag":"h2","props":{"id":"epoll-1"},"children":[{"type":"text","value":"epoll"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 是一种高效的 I/O 多路复用技术。它允许程序监控多个文件描述符（file descriptor），当这些文件描述符就绪时，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 会通知程序进行相应的读写操作。这样就可以避免程序在等待某个文件描述符就绪时长时间地占用 CPU，提高了程序的效率。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 的工作方式与其它 I/O 多路复用技术，如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poll"}]},{"type":"text","value":" 类似。首先，程序将要监控的文件描述符添加到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 实例中，然后调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 等待文件描述符就绪。当 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 返回时，它会将就绪的文件描述符以数组的形式返回，程序再根据文件描述符的就绪状态进行相应的读写操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同之处在于，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poll"}]},{"type":"text","value":" 的实现方式略有不同，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 具有更高的效率，但它的监控文件描述符的数量受限，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poll"}]},{"type":"text","value":" 的效率较低，但可以监控更多的文件描述符。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poll"}]},{"type":"text","value":" 相比，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 具有更高的效率。它的内部实现与内核交互的方式更加高效，并且 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 可以监控的文件描述符数量不受限制，因此能够处理大量文件描述符的情况。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 是一种在 Linux 系统中用于提高程序效率的 I/O 多路复用技术，它可以帮助程序在处理大量的文件描述符时获得更好的性能。相比 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poll"}]},{"type":"text","value":"，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 的效率更高，并且可以监控的文件描述符数量没有限制。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你想使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":"，首先你需要调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_create"}]},{"type":"text","value":" 函数来创建一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 实例。接着，你可以通过调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_ctl"}]},{"type":"text","value":" 把需要监控的文件描述符添加到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 实例中。在这之后，你可以调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 等待文件描述符就绪。当 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 返回时，它会返回就绪的文件描述符数组，你可以根据文件描述符的就绪状态进行相应的读写操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 的流程如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_create"}]},{"type":"text","value":" 创建一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 实例。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_ctl"}]},{"type":"text","value":" 把要监控的文件描述符添加到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":" 实例中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 等待文件描述符就绪。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"text","value":" 返回时，处理就绪的文件描述符。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"epoll"}]},{"type":"text","value":"，你的程序可以在处理大量文件描述符时获得更好的效率。它是在 Linux 系统中常用的 I/O 多路复用技术，值得你去了解和使用。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-31c3e0{color:#953800}\n.ct-ba8848{color:#8250DF}\n.ct-b9639a{color:#24292F}\n.ct-45bbf7{color:#CF222E}\n.dark .ct-45bbf7{color:#FF7B72}\n.dark .ct-b9639a{color:#C9D1D9}\n.dark .ct-ba8848{color:#D2A8FF}\n.dark .ct-31c3e0{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"select","depth":2,"text":"select","children":[{"id":"常用用法","depth":3,"text":"常用用法"},{"id":"技术细节和注意事项","depth":3,"text":"技术细节和注意事项"},{"id":"select-和其他系统调用的区别","depth":3,"text":"SELECT 和其他系统调用的区别"}]},{"id":"poll","depth":2,"text":"poll"},{"id":"epoll-1","depth":2,"text":"epoll"}]}},"_type":"markdown","_id":"content:1.cpp:lib:epoll.md","_source":"content","_file":"1.cpp/lib/epoll.md","_extension":"md"},{"_path":"/cpp/lib/rapidjson","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"RapidJSON","description":"RapidJSON是一个C++的JSON解析器及生成器。","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rapidjson"},"children":[{"type":"text","value":"RapidJSON"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RapidJSON"}]},{"type":"text","value":"是一个C++的JSON解析器及生成器。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解析一个JSON字符串至一个document (DOM)，对DOM作出简单修改，最终把DOM转换（stringify）至JSON字符串。"}]},{"type":"element","tag":"code","props":{"code":"#include \"rapidjson/document.h\"\n#include \"rapidjson/writer.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include <iostream>\nusing namespace rapidjson;\nint main() {\n    // 1. 把JSON解析至DOM。\n    const char* json = \"{\\\"project\\\":\\\"rapidjson\\\",\\\"stars\\\":10}\";\n    Document d;\n    d.Parse(json);\n    // 2. 利用DOM作出修改。\n    Value& s = d[\"stars\"];\n    s.SetInt(s.GetInt() + 1);\n    // 3. 把DOM转换（stringify）成JSON。\n    StringBuffer buffer;\n    Writer<StringBuffer> writer(buffer);\n    d.Accept(writer);\n    // Output {\"project\":\"rapidjson\",\"stars\":11}\n    std::cout << buffer.GetString() << std::endl;\n    return 0;\n}\n//对json里的数据遍历：\nfor (rapidjson::SizeType i = 0; i < doc.Size(); ++i)\n{}\nconst rapidjson::Value &gameObject = doc[i];\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"\"rapidjson/document.h\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"\"rapidjson/writer.h\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"\"rapidjson/stringbuffer.h\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"using"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1c1e"},"children":[{"type":"text","value":"rapidjson"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-85dc87"},"children":[{"type":"text","value":"    // 1. 把JSON解析至DOM。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" json "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"\"{"}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"project"}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"rapidjson"}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"stars"}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":":10}\""}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    Document d;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    d."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"Parse"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"(json);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-85dc87"},"children":[{"type":"text","value":"    // 2. 利用DOM作出修改。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    Value"}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" s "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" d["}]},{"type":"element","tag":"span","props":{"class":"ct-ea970d"},"children":[{"type":"text","value":"\"stars\""}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    s."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"SetInt"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"(s."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"GetInt"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-85dc87"},"children":[{"type":"text","value":"    // 3. 把DOM转换（stringify）成JSON。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    StringBuffer buffer;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    Writer"}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"StringBuffer"}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"writer"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"(buffer);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    d."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"Accept"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"(writer);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-85dc87"},"children":[{"type":"text","value":"    // Output {\"project\":\"rapidjson\",\"stars\":11}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1c1e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" buffer."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"GetString"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1c1e"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-85dc87"},"children":[{"type":"text","value":"//对json里的数据遍历："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3f1c1e"},"children":[{"type":"text","value":"rapidjson"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"::SizeType i "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-72a3d9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" doc."}]},{"type":"element","tag":"span","props":{"class":"ct-36623b"},"children":[{"type":"text","value":"Size"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"i)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"{}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1c1e"},"children":[{"type":"text","value":"rapidjson"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"::Value "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":"gameObject "}]},{"type":"element","tag":"span","props":{"class":"ct-c5db07"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ad1832"},"children":[{"type":"text","value":" doc[i];"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-72a3d9{color:#0550AE}\n.ct-85dc87{color:#6E7781}\n.ct-36623b{color:#8250DF}\n.ct-3f1c1e{color:#953800}\n.ct-ea970d{color:#0A3069}\n.ct-ad1832{color:#24292F}\n.ct-c5db07{color:#CF222E}\n.dark .ct-c5db07{color:#FF7B72}\n.dark .ct-ad1832{color:#C9D1D9}\n.dark .ct-ea970d{color:#A5D6FF}\n.dark .ct-3f1c1e{color:#FFA657}\n.dark .ct-36623b{color:#D2A8FF}\n.dark .ct-85dc87{color:#8B949E}\n.dark .ct-72a3d9{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:lib:RapidJSON.md","_source":"content","_file":"1.cpp/lib/RapidJSON.md","_extension":"md"},{"_path":"/cpp/lib/reactor","_dir":"lib","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Reactor","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"reactor"},"children":[{"type":"text","value":"Reactor"}]},{"type":"element","tag":"h2","props":{"id":"sample"},"children":[{"type":"text","value":"sample"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <vector>\n#include <unordered_map>\n#include <functional>\n\nclass Reactor\n{\npublic:\n    Reactor() = default;\n    ~Reactor() = default;\n\n    // 注册事件处理函数\n    void register_handler(int event, std::function<void(int)> handler)\n    {\n        m_handlers[event] = handler;\n    }\n\n    // 分发事件\n    void dispatch(int event, int fd)\n    {\n        auto it = m_handlers.find(event);\n        if (it != m_handlers.end())\n            it->second(fd);\n    }\n\nprivate:\n    // 事件处理函数列表\n    std::unordered_map<int, std::function<void(int)>> m_handlers;\n};\n\nint main()\n{\n    // 创建Reactor对象\n    Reactor reactor;\n    // 注册事件处理函数\n    reactor.register_handler(1, [](int fd) { \n        std::cout << \"Event 1 triggered on fd \" << fd << std::endl; \n    });\n    reactor.register_handler(2, [](int fd) { \n        std::cout << \"Event 2 triggered on fd \" << fd << std::endl; \n    });\n\n    // 分发事件\n    reactor.dispatch(1, 5);\n    reactor.dispatch(2, 8);\n    reactor.dispatch(3, 9); // 无法处理的事件\n\n    return 0;\n}\n\n/* 输出结果:\nEvent 1 triggered on fd 5\nEvent 2 triggered on fd 8\n*/\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<unordered_map>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<functional>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"Reactor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"Reactor"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"~Reactor"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 注册事件处理函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"register_handler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")> "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        m_handlers[event] "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" handler;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 分发事件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" it "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" m_handlers."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(event);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" (it "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" m_handlers."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            it->"}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 事件处理函数列表"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::unordered_map"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::function"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" m_handlers;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 创建Reactor对象"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    Reactor reactor;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 注册事件处理函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"register_handler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", []("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"Event 1 triggered on fd \""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::endl; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"register_handler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", []("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"Event 2 triggered on fd \""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::endl; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"    // 分发事件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":" // 无法处理的事件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"/* 输出结果:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"Event 1 triggered on fd 5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"Event 2 triggered on fd 8"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-63bec8"},"children":[{"type":"text","value":"*/"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"2"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <vector>\n#include <map>\n#include <sys/epoll.h>\n#include <unistd.h>\n#include <fcntl.h>\n\nconst int MAX_EVENT_NUMBER = 1024;\n\nclass EventHandler;\n\nclass Reactor\n{\npublic:\n    Reactor()\n    {\n        epollfd = epoll_create1(0);\n    }\n    void registerHandler(int fd, EventHandler *eh)\n    {\n        struct epoll_event event;\n        event.data.ptr = eh;\n        event.events = eh->getEvents();\n        epoll_ctl(epollfd, EPOLL_CTL_ADD, fd, &event);\n        fd2eh[fd] = eh;\n    }\n\n    void removeHandler(int fd)\n    {\n        epoll_ctl(epollfd, EPOLL_CTL_DEL, fd, nullptr);\n        fd2eh.erase(fd);\n    }\n\n    void handleEvents()\n    {\n        int n = epoll_wait(epollfd, events, MAX_EVENT_NUMBER, -1);\n        for (int i = 0; i < n; i++)\n        {\n            EventHandler *eh = static_cast<EventHandler *>(events[i].data.ptr);\n            eh->handleEvents(events[i].events);\n        }\n    }\n\nprivate:\n    int epollfd;\n    std::map<int, EventHandler *> fd2eh;\n    struct epoll_event events[MAX_EVENT_NUMBER];\n};\n\nclass EventHandler\n{\npublic:\n    virtual int getFd() = 0;\n    virtual int getEvents() = 0;\n    virtual void handleEvents(int events) = 0;\n};\n\nclass IOEventHandler : public EventHandler\n{\npublic:\n    IOEventHandler(int fd)\n    {\n        this->fd = fd;\n    }\n    int getFd()\n    {\n        return fd;\n    }\n\n    int getEvents()\n    {\n        return events;\n    }\n\n    void handleEvents(int events)\n    {\n        if (events & EPOLLIN)\n        {\n            handleRead();\n        }\n        if (events & EPOLLOUT)\n        {\n            handleWrite();\n        }\n        if (events & EPOLLERR)\n        {\n            handleError();\n        }\n    }\n\nprivate:\n    int fd;\n    int events;\n    void handleRead()\n    {\n        std::cout << \"handleRead\" << std::endl;\n    }\n\n    void handleWrite()\n    {\n        std::cout << \"handleWrite\" << std::endl;\n    }\n\n    void handleError()\n    {\n        std::cout << \"handleError\" << std::endl;\n    }\n};\n\nint main()\n{\n    Reactor reactor;\n    int fd = open(\"test.txt\", O_RDWR | O_NONBLOCK);\n    IOEventHandler *ioeh = new IOEventHandler(fd);\n    reactor.registerHandler(fd, ioeh);\n    while (true)\n    {\n        reactor.handleEvents();\n    }\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<map>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<sys/epoll.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<unistd.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"<fcntl.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" MAX_EVENT_NUMBER "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"EventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"Reactor"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"Reactor"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        epollfd "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"epoll_create1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"registerHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"EventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"eh"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"epoll_event"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" event;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        event.data.ptr "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" eh;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        event.events "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" eh->"}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"getEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"epoll_ctl"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(epollfd, EPOLL_CTL_ADD, fd, "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"event);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        fd2eh[fd] "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" eh;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"removeHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"epoll_ctl"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(epollfd, EPOLL_CTL_DEL, fd, "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        fd2eh."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"erase"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" n "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"epoll_wait"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(epollfd, events, MAX_EVENT_NUMBER, "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" n; i"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            EventHandler "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"eh "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"static_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"EventHandler "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(events[i].data.ptr);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            eh->"}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(events[i].events);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" epollfd;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::map"}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", EventHandler "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd2eh;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"epoll_event"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" events[MAX_EVENT_NUMBER];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"EventHandler"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"getFd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"getEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"events"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"IOEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"EventHandler"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"IOEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"fd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"->fd "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"getFd"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"getEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" events;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"events"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" (events "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" EPOLLIN)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleRead"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" (events "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" EPOLLOUT)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleWrite"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" (events "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" EPOLLERR)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleError"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" events;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleRead"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"handleRead\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleWrite"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"handleWrite\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleError"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"handleError\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3432cc"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    Reactor reactor;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" fd "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e7d396"},"children":[{"type":"text","value":"\"test.txt\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":", O_RDWR "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" O_NONBLOCK);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    IOEventHandler "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"ioeh "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"IOEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"registerHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"(fd, ioeh);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"        reactor."}]},{"type":"element","tag":"span","props":{"class":"ct-361e99"},"children":[{"type":"text","value":"handleEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-760ca9"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401c64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fbdc11"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里没有考虑多线程情况，如果在多线程环境下使用该实现，需要对Reactor类进行线程同步处理。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，这里的代码只是简单实现了Reactor模式的基本功能，实际项目中还可能需要支持的功能包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"超时处理：epoll_wait函数可以指定超时时间，如果超时时间到了但没有事件发生，则返回0，可以通过这种方式实现超时处理。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定时器处理：可以通过封装一个Timer类来实现定时器功能，定时器到期后可以触发相应的回调函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关闭处理：可以通过在Reactor中添加一个标志位来判断是否需要关闭，并在handleEvents函数中进行判断。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-401c64{color:#0550AE}\n.ct-63bec8{color:#6E7781}\n.ct-361e99{color:#8250DF}\n.ct-3432cc{color:#953800}\n.ct-e7d396{color:#0A3069}\n.ct-fbdc11{color:#24292F}\n.ct-760ca9{color:#CF222E}\n.dark .ct-760ca9{color:#FF7B72}\n.dark .ct-fbdc11{color:#C9D1D9}\n.dark .ct-e7d396{color:#A5D6FF}\n.dark .ct-3432cc{color:#FFA657}\n.dark .ct-361e99{color:#D2A8FF}\n.dark .ct-63bec8{color:#8B949E}\n.dark .ct-401c64{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sample","depth":2,"text":"sample"},{"id":"2","depth":2,"text":"2"}]}},"_type":"markdown","_id":"content:1.cpp:lib:reactor.md","_source":"content","_file":"1.cpp/lib/reactor.md","_extension":"md"},{"_path":"/cpp/printf","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"printf","description":"You can also use cin and cout instead of scanf and printf; however, if you are taking a million numbers as input and printing a million lines, it is faster to use scanf and printf.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"printf"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use cin and cout instead of scanf and printf; however, if you are taking a million numbers as input and printing a million lines, it is faster to use scanf and printf."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"格式控制符"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%c"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"输出一个单一的字符"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%hd、%d、%ld"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十进制、有符号的形式输出 short、int、long 类型的整数"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%hu、%u、%lu"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十进制、无符号的形式输出 short、int、long 类型的整数"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%ho、%o、%lo"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以八进制、不带前缀、无符号的形式输出 short、int、long 类型的整数"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%#ho、%#o、%#lo"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以八进制、带前缀、无符号的形式输出 short、int、long 类型的整数"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%hx、%x、%lx %hX、%X、%lX"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十六进制、不带前缀、无符号的形式输出 short、int、long 类型的整数。如果 x 小写，那么输出的十六进制数字也小写；如果 X 大写，那么输出的十六进制数字也大写。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%#hx、%#x、%#lx %#hX、%#X、%#lX"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十六进制、带前缀、无符号的形式输出 short、int、long 类型的整数。如果 x 小写，那么输出的十六进制数字和前缀都小写；如果 X 大写，那么输出的十六进制数字和前缀都大写。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%f、%lf"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十进制的形式输出 float、double 类型的小数"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%e、%le %E、%lE"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以指数的形式输出 float、double 类型的小数。如果 e 小写，那么输出结果中的 e 也小写；如果 E 大写，那么输出结果中的 E 也大写。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%g、%lg %G、%lG"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"以十进制和指数中较短的形式输出 float、double 类型的小数，并且小数部分的最后不会添加多余的 0。如果 g 小写，那么当以指数形式输出时 e 也小写；如果 G 大写，那么当以指数形式输出时 E 也大写。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"输出一个字符串"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:printf.md","_source":"content","_file":"1.cpp/printf.md","_extension":"md"},{"_path":"/cpp/qa","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"遇到的问题速查","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"遇到的问题速查"},"children":[{"type":"text","value":"遇到的问题速查"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"代码过程遇到的一些问题速查表"}]}]},{"type":"element","tag":"h2","props":{"id":"version-glibcxx_3429-not-found"},"children":[{"type":"text","value":"version `GLIBCXX_3.4.29' not found"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看报错 libc 的情况"}]},{"type":"element","tag":"code","props":{"code":"strings /your_path/libstdc++.so.6 | grep GLIBC\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-348c1a"},"children":[{"type":"text","value":"strings"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"/your_path/libstdc++.so."}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-348c1a"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"GLIBC"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"发现确实没有 version `GLIBCXX_3.4.29’"}]},{"type":"element","tag":"code","props":{"code":"find / -name libstdc++.so.6\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-348c1a"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"-name"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"libstdc++.so."}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"6"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在找到的列表里，逐个寻找 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GLIBCXX_3.4.29"}]},{"type":"text","value":"，找到后，将此 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"libstdc++.so.6"}]},{"type":"text","value":" 替换到之前错误路径下"}]},{"type":"element","tag":"h2","props":{"id":"os-error-code-4-interrupted-system-call"},"children":[{"type":"text","value":"OS error code 4: Interrupted system call"}]},{"type":"element","tag":"h2","props":{"id":"error-invalid-storage-class-for-function"},"children":[{"type":"text","value":"error: invalid storage class for function"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"报错的函数的前面的那一个函数{}不配对"}]},{"type":"element","tag":"h2","props":{"id":"地址消毒器"},"children":[{"type":"text","value":"地址消毒器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为什么必须是下面这个顺序？暂时还不晓得"}]},{"type":"element","tag":"code","props":{"code":"set_target_properties (app PROPERTIES LINK_FLAGS \"-fsanitize=address\")\nset_target_properties (app PROPERTIES LINK_FLAGS \"-static\")\nset_target_properties (app PROPERTIES LINK_FLAGS \"-lpthread\")\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-fsanitize=address\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-static\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-lpthread\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原本是这样的"}]},{"type":"element","tag":"code","props":{"code":"set_target_properties (app PROPERTIES LINK_FLAGS \"-static\")\nset_target_properties (app PROPERTIES LINK_FLAGS \"-lpthread\")\nset_target_properties (app PROPERTIES LINK_FLAGS \"-fsanitize=address\")\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-static\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-lpthread\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bd7fb"},"children":[{"type":"text","value":"set_target_properties"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" (app PROPERTIES "}]},{"type":"element","tag":"span","props":{"class":"ct-237b21"},"children":[{"type":"text","value":"LINK_FLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c65b23"},"children":[{"type":"text","value":"\"-fsanitize=address\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d02c3"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抛出错误"}]},{"type":"element","tag":"code","props":{"code":"undefined reference to symbol 'pthread_join@@GLIBC_2.0'\n//lib/i386-linux-gnu/libpthread.so.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n","language":"txt","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"undefined reference to symbol 'pthread_join@@GLIBC_2.0'\n//lib/i386-linux-gnu/libpthread.so.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"segfault-at-11-ip-00007f24b21adcee-sp-00007fff7379ded0-error-4-in"},"children":[{"type":"text","value":"segfault at 11 ip 00007f24b21adcee sp 00007fff7379ded0 error 4 in"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/2549214/interpreting-segfault-messages","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"addr2line -e yourSegfaultingProgram 00007f9bebcca90d"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"address"}]},{"type":"text","value":" (after the at) - the location in memory the code is trying to access (it's likely that 10 and 11 are offsets from a pointer we expect to be set to a valid value but which is instead pointing to 0)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ip"}]},{"type":"text","value":" - instruction pointer, ie. where the code which is trying to do this lives"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sp"}]},{"type":"text","value":" - stack pointer"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error"}]},{"type":"text","value":" - An error code for page faults; see below for what this means on x86 ("},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"link"}]},{"type":"text","value":")."}]}]},{"type":"element","tag":"code","props":{"code":"/*\n * Page fault error code bits:\n *\n *   bit 0 ==    0: no page found       1: protection fault\n *   bit 1 ==    0: read access         1: write access\n *   bit 2 ==    0: kernel-mode access  1: user-mode access\n *   bit 3 ==                           1: use of reserved bit detected\n *   bit 4 ==                           1: fault was an instruction fetch\n *   bit 5 ==                           1: protection keys block access\n *   bit 15 ==                          1: SGX MMU page-fault\n */\n","language":"h","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/*\n * Page fault error code bits:\n *\n *   bit 0 ==    0: no page found       1: protection fault\n *   bit 1 ==    0: read access         1: write access\n *   bit 2 ==    0: kernel-mode access  1: user-mode access\n *   bit 3 ==                           1: use of reserved bit detected\n *   bit 4 ==                           1: fault was an instruction fetch\n *   bit 5 ==                           1: protection keys block access\n *   bit 15 ==                          1: SGX MMU page-fault\n */"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-2bd7fb{color:#CF222E}\n.ct-237b21{color:#0550AE}\n.ct-c65b23{color:#0A3069}\n.ct-7d02c3{color:#24292F}\n.ct-348c1a{color:#953800}\n.dark .ct-348c1a{color:#FFA657}\n.dark .ct-7d02c3{color:#C9D1D9}\n.dark .ct-c65b23{color:#A5D6FF}\n.dark .ct-237b21{color:#79C0FF}\n.dark .ct-2bd7fb{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"version-glibcxx_3429-not-found","depth":2,"text":"version `GLIBCXX_3.4.29' not found"},{"id":"os-error-code-4-interrupted-system-call","depth":2,"text":"OS error code 4: Interrupted system call"},{"id":"error-invalid-storage-class-for-function","depth":2,"text":"error: invalid storage class for function"},{"id":"地址消毒器","depth":2,"text":"地址消毒器"},{"id":"segfault-at-11-ip-00007f24b21adcee-sp-00007fff7379ded0-error-4-in","depth":2,"text":"segfault at 11 ip 00007f24b21adcee sp 00007fff7379ded0 error 4 in"}]}},"_type":"markdown","_id":"content:1.cpp:qa.md","_source":"content","_file":"1.cpp/qa.md","_extension":"md"},{"_path":"/cpp/style","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"代码风格","description":"Google 开源项目风格指南Google C++ Style Guide","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"代码风格"},"children":[{"type":"text","value":"代码风格"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/contents/","rel":["nofollow"]},"children":[{"type":"text","value":"Google 开源项目风格指南"}]},{"type":"element","tag":"a","props":{"href":"https://google.github.io/styleguide/cppguide.html","rel":["nofollow"]},"children":[{"type":"text","value":"Google C++ Style Guide"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:style.md","_source":"content","_file":"1.cpp/style.md","_extension":"md"},{"_path":"/cpp/thread-mutex","_dir":"cpp","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"线程 锁","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"线程-锁"},"children":[{"type":"text","value":"线程 锁"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:thread-mutex:0.index.md","_source":"content","_file":"1.cpp/thread-mutex/0.index.md","_extension":"md"},{"_path":"/cpp/thread-mutex/4-easy-tips-on-using-threads-and-mutexes-in-cpp","_dir":"thread-mutex","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"4 Easy Tips for Using Threads and Mutexes in C++","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"4-easy-tips-for-using-threads-and-mutexes-in-c"},"children":[{"type":"text","value":"4 Easy Tips for Using Threads and Mutexes in C++"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://betterprogramming.pub/4-easy-tips-on-using-threads-and-mutexes-in-c-566eb2927152","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++ is a great programming language that’s generally associated with fast performance, custom memory management, and pointers. However, some of the most important and less-talked-about components of the language are threads and mutexes. Perhaps one of the most powerful features of C++ is possessing a wide range of control and precision over the execution of multiple concurrent threads and sharing resources safely between those threads. The web browser you are viewing this on right now uses multiple threads to facilitate multiple actions or displays simultaneously."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this article, I will go over four tips for using threads and mutexes in C++. The interfaces discussed here are those defined in the C++11 standard of the language. Prior to C++11, threads were not formally defined in the language and only OS-specific thread interfaces such as posix threads could be used."}]},{"type":"element","tag":"h2","props":{"id":"1-threads-arent-disposable-you-have-to-join-them-back-together"},"children":[{"type":"text","value":"1. Threads Aren’t Disposable — You Have to Join Them Back Together"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A common mistake made by those new to multithreading is believing that the function passed to a new thread being created is similar to just calling another function. It’s not. Let’s take a look at the seemingly benign program below:"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n\nvoid doStuff()\n{\n  int x = 5;\n  while(x--)\n       std::cout << \"Doing stuff\\n\";\n}\n\nint main() {\n  std::thread t1(&doStuff);\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"doStuff"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(x"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\"Doing stuff"}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"doStuff);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You might think, “This code just works and prints out a few messages.” Wrong. It actually crashes!"}]},{"type":"element","tag":"code","props":{"code":"terminate called without an active exception\nexited, aborted\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"terminate called without an active exception\nexited, aborted"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the printout above, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"terminate"}]},{"type":"text","value":" is a reference to the C++ "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::terminate()"}]},{"type":"text","value":" function that is called by the runtime for several dangerous situations. In this situation, we are starting a thread of execution, but we aren’t joining it. You have to join threads you start to keep a program synchronized and to maintain the order of scheduling and execution of tasks. Adding "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"t1.join();"}]},{"type":"text","value":" to this program makes it work as expected."}]},{"type":"element","tag":"h2","props":{"id":"2-use-a-flag-to-signal-to-threads-when-they-should-shut-down"},"children":[{"type":"text","value":"2. Use a Flag to Signal to Threads When They Should Shut Down"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Another potential issue with spawning multiple threads is when a thread repeats the same function or loop of events infinitely. Many threads are implemented with a role in mind, and throughout the course of the program, they generally repeat that list of tasks over and over again. You cannot directly "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"join()"}]},{"type":"text","value":" a thread that’s in an infinite loop because the call to join will cause the parent thread to simply wait forever. Joining is only intended for a thread that can reach a terminal, finite point of ending work."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To properly shut down such threads, you will need a global flag — ideally a boolean — that is checked by the threads to determine if they should continue running or not. Since C++11, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::atomic<bool>"}]},{"type":"text","value":"variables at the global scope are considered thread-safe to access and modify. In this case, only the parent main thread can modify the boolean, and the spawned threads only read the value. Thus, example code for that can be written below:"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n#include <chrono>\n#include <atomic>\n\nstatic std::atomic<bool> KEEP_GOING;\n\nvoid doStuff()\n{\n  while(true) {\n      if (!KEEP_GOING.load())\n          break;\n      std::cout << \"Doing stuff\\n\";\n  }\n}\n\n\nint main() {\n  KEEP_GOING.store(true);\n  std::thread t1(&doStuff);\n  std::thread t2(&doStuff);\n  std::this_thread::sleep_for(std::chrono::milliseconds(100));\n  KEEP_GOING.store(false);\n  t1.join();\n  t2.join();\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<chrono>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<atomic>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<bool>"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" KEEP_GOING;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"doStuff"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\"Doing stuff"}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"doStuff);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"doStuff);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"milliseconds"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  t1."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  t2."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The statement "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::this_thread::sleep_for(std::chrono::milliseconds(100))"}]},{"type":"text","value":" is added to show that when running the program, the spawned thread does some initial work but then ends its execution via reading that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"KEEP_GOING"}]},{"type":"text","value":" has been set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":". Unlike processes, threads do not have a built-in signaling mechanism to stop running. So patterns of design like this are critical for thread shutdown."}]},{"type":"element","tag":"h2","props":{"id":"3-use-a-mutex-when-threads-are-accessing-shared-resources-and-data"},"children":[{"type":"text","value":"3. Use a mutex When Threads Are Accessing Shared Resources and Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In many multithreaded programs and designs, threads will need to read, write, and exchange data with other threads. Threads can share any resource that is not local to each thread. So variables and objects allocated on a thread’s stack won’t be accessible to other threads. Global objects, or pointers to objects passed into a thread’s initial “main” function, can be accessed by multiple threads. However, to have a fully functioning, bug-free program, you need to ensure threads share resources safely. If one thread reads a resource, like an array or chunk of memory, while another one is writing to it, that’s going to result in corrupted data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are many tools and techniques that can be used to achieve safe resource sharing, but the most straightforward tool to accomplish this is a mutex. A mutex is an object with a hardware- and system-specific implementation that allows a thread to acquire a “lock.” While the thread holds the mutex, other threads who attempt to acquire the mutex will halt or block the acquisition call. This means other threads cannot proceed to lock the mutex until the thread holding it currently unlocks it. The C++11 standard defines a cross-platform type called "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::mutex"}]},{"type":"text","value":" that can be locked or unlocked by different threads. It’s as simple as doing:"}]},{"type":"element","tag":"code","props":{"code":"static std::mutex mtx; // global scope\n{ /*Some scope of execution with a shared resource*/\n    mtx.lock();\n    // Some actions\n    mtx.unlock();\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::mutex mtx;"}]},{"type":"element","tag":"span","props":{"class":"ct-bd53eb"},"children":[{"type":"text","value":" // global scope"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-bd53eb"},"children":[{"type":"text","value":" /*Some scope of execution with a shared resource*/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    mtx."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd53eb"},"children":[{"type":"text","value":"    // Some actions"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    mtx."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Although that code does lock and unlock a mutex, directly calling methods on the mutex — such as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lock"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unlock"}]},{"type":"text","value":" methods — is generally not recommended. That’s because as soon as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".unlock()"}]},{"type":"text","value":" is called, any thread waiting on that mutex will be given access to that portion of code between the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lock"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unlock"}]},{"type":"text","value":" statements. Additionally, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" statements before the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".unlock()"}]},{"type":"text","value":" statement will cause the mutex to stay locked forever, which is a very dangerous situation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The most common way to utilize a mutex is using an RAII style object that’s constructed at the top of a scope and destroyed at the end. For C++11, the standard library provides something called "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::lock_guard"}]},{"type":"text","value":". In C++17, there’s an even better class called "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::scoped_lock"}]},{"type":"text","value":", which is an RAII object that can lock multiple mutexes at once in a scope. The advantage of using an RAII scoped approach to mutex locking is the unlock is handled when the scope is finished, so you don’t have to worry about the order of your statements or having to reach an explicit call to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".unlock()"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this example, two different threads will read and write values from an array, and that array will be guarded by a mutex. One thread will have the role of a writer, whereas the other one will have the role of the reader. The threads will be controlled via a global flag, as before. Let’s take a look at the full code:"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n#include <chrono>\n#include <mutex>\n#include <atomic>\n#include <string.h>\n\nstatic std::atomic<bool> KEEP_GOING;\n\nstruct Point {\n    long x;\n    long y;\n};\n\ntemplate<class T, size_t arraySize>\nclass SharedArray {\npublic:\n    void get(size_t index, T* out) const {\n        std::lock_guard<std::mutex> lockit(_mtx);\n        *out = _items[index];\n    }\n\n    void set(size_t index, const T& value) {\n        std::lock_guard<std::mutex> lockit(_mtx);\n        _items[index] = value;\n    }\n\n    void clean() { memset(_items, 0, sizeof(_items)); }\nprivate:\n   T _items[arraySize];\n   mutable std::mutex _mtx;\n};\n\n#define SHARED_ARRAY_SIZE 10\nstatic SharedArray<Point, SHARED_ARRAY_SIZE> SHARED_ARRAY;\n\nvoid doWrites()\n{\n  Point p;\n  p.x = 0;\n  p.y = 0;\n  while(true) {\n      if (!KEEP_GOING.load())\n          break;\n      for (size_t i = 0 ; i < SHARED_ARRAY_SIZE; ++i){\n          SHARED_ARRAY.set(i, p);\n          ++p.x;\n          ++p.y;\n      }\n      std::this_thread::sleep_for(std::chrono::milliseconds(500));\n  }\n}\n\nvoid doReads()\n{\n    while(true) {\n      if(!KEEP_GOING.load())\n        break;\n      for (size_t i = 0 ; i < SHARED_ARRAY_SIZE; ++i){\n          Point r;\n          SHARED_ARRAY.get(i, &r);\n          std::cout << \"x=\" << r.x << \" y=\" << r.y << \"\\n\";\n      }\n      std::this_thread::sleep_for(std::chrono::milliseconds(500));   \n  }\n}\n\nint main() {\n  KEEP_GOING.store(true);\n  SHARED_ARRAY.clean();\n  std::thread writer(&doWrites);\n  std::thread reader(&doReads);\n  std::this_thread::sleep_for(std::chrono::seconds(5));\n  KEEP_GOING.store(false);\n  writer.join();\n  reader.join();\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<chrono>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<mutex>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<atomic>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<string.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<bool>"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" KEEP_GOING;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"Point"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"long"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"long"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" y;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"arraySize"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"SharedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"out"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::lock_guard"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"lockit"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(_mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"out "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" _items[index];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::lock_guard"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"lockit"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(_mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"        _items[index] "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" value;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"clean"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() { "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"memset"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(_items, "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(_items)); }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"   T _items[arraySize];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"mutable"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::mutex _mtx;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#define"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"SHARED_ARRAY_SIZE"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" 10"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" SharedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"Point, SHARED_ARRAY_SIZE"}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" SHARED_ARRAY;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"doWrites"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  Point p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  p.x "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  p.y "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ; i "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" SHARED_ARRAY_SIZE; "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"i){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          SHARED_ARRAY."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(i, p);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"p.x;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"p.y;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"milliseconds"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"doReads"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" ; i "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" SHARED_ARRAY_SIZE; "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"i){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          Point r;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          SHARED_ARRAY."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"(i, "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"r);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\"x=\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" r.x "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\" y=\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" r.y "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"milliseconds"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"));   "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  SHARED_ARRAY."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"clean"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"writer"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"doWrites);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"reader"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"doReads);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  KEEP_GOING."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  writer."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  reader."}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first thing you might notice is the passing by value of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" objects. Typically in C++, you would pass by reference when accessing an element of a vector or array. However, as soon as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"any"}]},{"type":"text","value":" function with a lock guard at the top of its scope returns, that mutex is unlocked. You cannot safely return a pointer or reference to a resource that is shared by multiple threads directly. That’s because acquiring a pointer has no guarantee about blocking other threads from changing the value it points to. That’s only controlled by a mutex."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the example above, you will likely notice several "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sleep_for"}]},{"type":"text","value":" calls. These aren’t required to make the code work, but using them and altering their periods can help visualize threads doing work, going to sleep, then waking up again. If you run this program and decrease the sleep period for just the writer thread, you might see a pattern like the following:"}]},{"type":"element","tag":"code","props":{"code":"x=55 y=55\nx=56 y=56\nx=57 y=57\nx=58 y=58\nx=59 y=59\nx=80 y=80\nx=81 y=81\nx=82 y=82\nx=83 y=83\nx=84 y=84\nx=85 y=85\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"x=55 y=55\nx=56 y=56\nx=57 y=57\nx=58 y=58\nx=59 y=59\nx=80 y=80\nx=81 y=81\nx=82 y=82\nx=83 y=83\nx=84 y=84\nx=85 y=85"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There’s a skip in the printouts! But this is not a bug. If the reader thread sleeps for a longer period of time than the writer thread, that means the writer thread will have the time to do work, while the reader thread is sleeping. This means by the time the reader thread wakes up, the values in the array are advanced past the point to which it last read them, rendering its observation no longer sequential. When the two sleep periods are equal, you shouldn’t see this happening."}]},{"type":"element","tag":"h2","props":{"id":"4-beware-of-the-hardwares-limit-on-concurrent-threads"},"children":[{"type":"text","value":"4. Beware of the Hardware’s Limit on Concurrent Threads"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On any CPU, there is a limit to the number of threads that can run concurrently. Although complex C++ programs may have hundreds of threads, they are certainly not all running at the exact same time. Running literally means executing machine instructions at the current moment. Thus, programs that require many threads design them to work in such a manner where the work is not precisely simultaneous at all times but rather distributed to maximize throughput and performance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a concept, the number of concurrent threads on a platform is determined by the number of cores of the CPU. For example, I am currently using a laptop with a 2.7 GHz quad-core Intel Core i7 processor. Thus, I have four cores, and up to four threads can run concurrently. Machines used to run servers, such as those in cloud computing products, can typically possess a higher number of cores than your personal computer."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++11 provides a static interface to check the number of possible concurrent threads, such as in the example below:"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n\nint main() {\n  std::cout << \"The number of concurrent threads is \" << std::thread::hardware_concurrency() << \"\\n\";\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\"The number of concurrent threads is \""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-5c996a"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-64b053"},"children":[{"type":"text","value":"hardware_concurrency"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-0138b8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-333223"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-b2a055"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-77654e"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And in my case, as expected, the result is:"}]},{"type":"element","tag":"code","props":{"code":"The number of concurrent threads is 4\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"The number of concurrent threads is 4"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This value is typically useful when implementing a thread pool, a design where threads continuously run a loop to check a resource such as a queue for jobs to perform. In a thread pool, you typically will not see a benefit from using more than the number of concurrent threads the hardware supports. In general, checking the hardware concurrency limit is a form of hardware-focused design."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are many components of modern C++, like atomic variables and memory fences, that provide optimizations for multithreaded programs, but only for particular hardware architectures."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-bd53eb{color:#6E7781}\n.ct-5c996a{color:#953800}\n.ct-333223{color:#0550AE}\n.ct-64b053{color:#8250DF}\n.ct-b2a055{color:#0A3069}\n.ct-77654e{color:#24292F}\n.ct-0138b8{color:#CF222E}\n.dark .ct-0138b8{color:#FF7B72}\n.dark .ct-77654e{color:#C9D1D9}\n.dark .ct-b2a055{color:#A5D6FF}\n.dark .ct-64b053{color:#D2A8FF}\n.dark .ct-333223{color:#79C0FF}\n.dark .ct-5c996a{color:#FFA657}\n.dark .ct-bd53eb{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"1-threads-arent-disposable-you-have-to-join-them-back-together","depth":2,"text":"1. Threads Aren’t Disposable — You Have to Join Them Back Together"},{"id":"2-use-a-flag-to-signal-to-threads-when-they-should-shut-down","depth":2,"text":"2. Use a Flag to Signal to Threads When They Should Shut Down"},{"id":"3-use-a-mutex-when-threads-are-accessing-shared-resources-and-data","depth":2,"text":"3. Use a mutex When Threads Are Accessing Shared Resources and Data"},{"id":"4-beware-of-the-hardwares-limit-on-concurrent-threads","depth":2,"text":"4. Beware of the Hardware’s Limit on Concurrent Threads"}]}},"_type":"markdown","_id":"content:1.cpp:thread-mutex:4-easy-tips-on-using-threads-and-mutexes-in-cpp.md","_source":"content","_file":"1.cpp/thread-mutex/4-easy-tips-on-using-threads-and-mutexes-in-cpp.md","_extension":"md"},{"_path":"/cpp/thread-mutex/mutex","_dir":"thread-mutex","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"各种锁","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"各种锁"},"children":[{"type":"text","value":"各种锁"}]},{"type":"element","tag":"h2","props":{"id":"mutex"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在多线程程序中，线程之间会共享访问同一个内存空间。这种共享访问可能导致各种问题，例如竞争条件、数据不一致等。为了解决这些问题，我们可以使用互斥量（mutex）进行同步。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"互斥量是指一种特殊的线程同步对象，它可以保证同一时刻只有一个线程能够访问某个共享资源。在C++标准库中，互斥量类型是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::mutex"}]},{"type":"text","value":"。使用互斥量的基本流程如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在需要同步的代码段之前，锁定互斥量，这个过程称为加锁。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"执行需要同步的代码段。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在需要同步的代码段之后，解锁互斥量，这个过程称为解锁。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，下面是一个使用互斥量的示例程序："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <mutex>\n#include <thread>\n\nstd::mutex mutex;\nint value = 0;\n\nvoid increment() {\n  mutex.lock();\n  ++value;\n  mutex.unlock();\n}\n\nint main() {\n  std::thread t1(increment);\n  std::thread t2(increment);\n  t1.join();\n  t2.join();\n  std::cout << value << std::endl;\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29ea49"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29ea49"},"children":[{"type":"text","value":"<mutex>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29ea49"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8c39bb"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"::mutex mutex;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" value "}]},{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9e523a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"increment"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  mutex."}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"value;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  mutex."}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c39bb"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"t1"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"(increment);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c39bb"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"t2"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"(increment);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  t1."}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  t2."}]},{"type":"element","tag":"span","props":{"class":"ct-4ecbd0"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8c39bb"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" value "}]},{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8c39bb"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ae3036"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9e523a"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0870e8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们定义了一个全局变量value和一个函数increment，它会将value加一。然后我们创建了两个线程，分别执行函数increment。由于两个线程会同时执行这个函数，所以在函数内部，我们使用互斥量mutex进行加锁和解锁，以保证在任何时刻，只有一个线程能够访问value。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个程序中，我们使用了互斥量的两个方法：lock和unlock。lock方法用于加锁，如果互斥量当前没有被锁定，那么调用这个方法会锁定互斥量，并立即返回；如果互斥量当前已经被锁定，那么调用这个方法会阻塞线程，直到互斥量被解锁为止。unlock方法用于解锁，如果互斥量当前已经被锁定，那么调用这个方法会解锁互斥量，并立即返回；如果互斥量当前没有被锁定，那么调用这个方法会抛出一个异常。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，互斥量是多线程程序中一种重要的同步工具，它可以保证同一时刻只有一个线程能够访问某个共享资源。使用互斥量的流程是：首先在需要同步的代码段之前，锁定互斥量；然后执行需要同步的代码段；最后在需要同步的代码段之后，解锁互斥量。"}]},{"type":"element","tag":"h2","props":{"id":"一般在c-开发中-都会使用哪些锁-请就实际开发角度举例-在什么样的情况下使用适合使用什么类型的锁"},"children":[{"type":"text","value":"一般在c++ 开发中, 都会使用哪些锁? 请就实际开发角度举例, 在什么样的情况下使用适合使用什么类型的锁"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一些常见的锁类型包括："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"互斥锁：互斥锁是一种锁，用于确保任何时候只有一个线程（或进程）能够访问共享资源。这种锁通常用于多个线程需要访问共享资源，但是该资源在任何时候只能由一个线程使用的情况。例如，可以使用互斥锁来同步对共享文件或数据库的访问。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读写锁：读写锁允许多个线程同时读取共享资源，但在任何时候只允许一个线程写入资源。当共享资源被读取的次数多于写入的次数时，这种锁非常有用，因为它允许多个线程同时读取资源，从而提高性能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"信号量：信号量是一种锁，用于控制对有限数量共享资源的访问。例如，可以使用信号量来限制同时访问共享数据库连接池的线程数量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"自旋锁：自旋锁是一种锁，用于在尝试获取锁的线程预计会很快释放锁的情况下。在这种情况下，自旋锁会“自旋”（即不断检查）来查看锁是否可用，而不是睡眠并等待锁被释放。在某些情况下，这可以提高性能，但如果线程释放锁的时间过长，也可能导致性能问题。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说，在特定情况下使用哪种锁取决于应用程序的具体要求和限制。一般来说，选择最适合应用程序特定需求的锁类型，可以确保高效和正确地同步访问共享资源。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4ecbd0{color:#8250DF}\n.ct-9e523a{color:#0550AE}\n.ct-8c39bb{color:#953800}\n.ct-29ea49{color:#0A3069}\n.ct-0870e8{color:#24292F}\n.ct-ae3036{color:#CF222E}\n.dark .ct-ae3036{color:#FF7B72}\n.dark .ct-0870e8{color:#C9D1D9}\n.dark .ct-29ea49{color:#A5D6FF}\n.dark .ct-8c39bb{color:#FFA657}\n.dark .ct-9e523a{color:#79C0FF}\n.dark .ct-4ecbd0{color:#D2A8FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mutex","depth":2,"text":"mutex"},{"id":"一般在c-开发中-都会使用哪些锁-请就实际开发角度举例-在什么样的情况下使用适合使用什么类型的锁","depth":2,"text":"一般在c++ 开发中, 都会使用哪些锁? 请就实际开发角度举例, 在什么样的情况下使用适合使用什么类型的锁"}]}},"_type":"markdown","_id":"content:1.cpp:thread-mutex:mutex.md","_source":"content","_file":"1.cpp/thread-mutex/mutex.md","_extension":"md"},{"_path":"/cpp/thread-mutex/thread","_dir":"thread-mutex","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Thread","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"thread"},"children":[{"type":"text","value":"Thread"}]},{"type":"element","tag":"h2","props":{"id":"在c标准中提供了-stdthread-stdasync-stdpackage_task-stdpromise等模块以支持异步开发-在实际开发中一般使用那种呢-还是直接使用pthread"},"children":[{"type":"text","value":"在c++标准中提供了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":"等模块以支持异步开发, 在实际开发中一般使用那种呢, 还是直接使用pthread?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实际开发中，使用哪种方法取决于应用程序的具体需求和限制。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":" 是一个用于在c++程序中创建和管理线程的标准库类。使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":"可以方便地在c++程序中创建线程，并且可以使用c++标准库的同步原语（如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::mutex"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable"}]},{"type":"text","value":"）来管理线程间的同步。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":" 是一个用于在c++程序中执行异步操作的函数。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":"可以在后台执行指定的任务，并返回一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象，可以用来获取任务的结果。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":" 是一个c++标准库类，用于封装异步任务。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":" 可以用来封装任意可调用对象（如函数、lambda表达式等），然后可以在以后执行这个任务。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":" 是一个c++标准库类，用于在线程之间传递结果值。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":" 可以用来向一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象写入结果值，以便在其他线程中获取该值。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实际开发中，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":" 等方法的选择取决于应用程序的具体需求和限制。例如，如果需要创建多个线程来执行异步任务，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::mutex"}]},{"type":"text","value":" 等同步原语来管理线程。如果需要在后台执行异步任务，并获取结果，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":"。如果需要在以后执行异步任务，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":" 封装任务，并在需要时执行。如果需要在线程之间传递结果值，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，c++标准库中还提供了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread::id"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread::native_handle"}]},{"type":"text","value":" 等类型，可以用来标识和操作线程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果需要，也可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pthread"}]},{"type":"text","value":"库来创建和管理线程。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pthread"}]},{"type":"text","value":"库是一个跨平台的库，用于在Linux、macOS和其他操作系统上创建和管理线程。使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pthread"}]},{"type":"text","value":"库需要在c++程序中包含头文件"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include <pthread.h>"}]},{"type":"text","value":"，并使用pthread库提供的函数和数据类型来创建和管理线程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说，在实际开发中，可以根据应用程序的具体需求和限制，选择使用c++标准库中提供的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::thread"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::package_task"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":" 等方法，或者使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pthread"}]},{"type":"text","value":"库来创建和管理线程。使用c++标准库提供的方法可以保证程序的可移植性和可读性，同时也提供了丰富的同步原语和容器类型，可以方便地管理线程和数据。使用pthread库则可以提供更多的低级别控制，并可以在更多的平台上使用。"}]},{"type":"element","tag":"h2","props":{"id":"在多线程开发中-有没有什么好的编程模式或程序设计方法-能够尽可能的避免锁带来的性能消耗和死锁问题"},"children":[{"type":"text","value":"在多线程开发中, 有没有什么好的编程模式或程序设计方法, 能够尽可能的避免锁带来的性能消耗和死锁问题?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在多线程开发中, 一种常见的编程模式是使用锁的升级。在这种模式中, 在初始状态下, 线程以读写锁的形式访问共享资源。如果线程需要写入共享资源, 它会升级读写锁为互斥锁, 以保证其他线程不能访问共享资源。这样做可以避免许多线程同时写入共享资源, 从而减少锁竞争。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一种常用的方法是使用无锁算法。这些算法通常通过原子操作和内存屏障来保证线程安全, 而无需使用锁。由于这些算法不使用锁, 它们通常比使用锁的算法更快, 并且不会导致死锁问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说, 最好的方法是根据具体情况来选择编程模式和程序设计方法, 以避免锁带来的性能消耗和死锁问题。"}]},{"type":"element","tag":"h2","props":{"id":"线程安全"},"children":[{"type":"text","value":"线程安全"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于全局变量/局部变量/静态变量的线程安全问题"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"在c标准中提供了-stdthread-stdasync-stdpackage_task-stdpromise等模块以支持异步开发-在实际开发中一般使用那种呢-还是直接使用pthread","depth":2,"text":"在c++标准中提供了 std::thread, std::async, std::package_task, std::promise等模块以支持异步开发, 在实际开发中一般使用那种呢, 还是直接使用pthread?"},{"id":"在多线程开发中-有没有什么好的编程模式或程序设计方法-能够尽可能的避免锁带来的性能消耗和死锁问题","depth":2,"text":"在多线程开发中, 有没有什么好的编程模式或程序设计方法, 能够尽可能的避免锁带来的性能消耗和死锁问题?"},{"id":"线程安全","depth":2,"text":"线程安全"}]}},"_type":"markdown","_id":"content:1.cpp:thread-mutex:thread.md","_source":"content","_file":"1.cpp/thread-mutex/thread.md","_extension":"md"},{"_path":"/cpp/thread-mutex/threads-and-mutexes","_dir":"thread-mutex","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Threads and Mutexes","description":"from stanford edu CS110 Lecture 10: Threads and Mutexes","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"threads-and-mutexes"},"children":[{"type":"text","value":"Threads and Mutexes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"from "},{"type":"element","tag":"a","props":{"href":"https://web.stanford.edu/class/archive/cs/cs110/cs110.1204/static/lectures/10-threads-and-mutexes.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"stanford"}]},{"type":"text","value":" edu "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CS110 Lecture 10: Threads and Mutexes"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CS110 Lecture 10: Threads and Mutexes"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Principles of Computer Systems"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWinter 2020\nStanford University\nComputer Science Department"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Instructors"}]},{"type":"text","value":": Chris Gregg and Nick Troccoli"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CS110 Topic 3"}]},{"type":"text","value":": How can we have concurrency within a single process?"}]},{"type":"element","tag":"h2","props":{"id":"learning-about-processes"},"children":[{"type":"text","value":"Learning About Processes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/stanford/process.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"todays-learning-goals"},"children":[{"type":"text","value":"Today's Learning Goals"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Discover some of the pitfalls of threads sharing the same virtual address space"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Learn how locks can help us limit access to shared resources"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Get practice using condition variables to wait for signals from other threads"}]}]},{"type":"element","tag":"h2","props":{"id":"plan-for-today"},"children":[{"type":"text","value":"Plan For Today"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Recap:"}]},{"type":"text","value":" Threads in C++"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Races When Accessing Shared Data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Introducing Mutexes"}]}]},{"type":"element","tag":"h3","props":{"id":"recap-threads-in-c"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Recap:"}]},{"type":"text","value":" Threads in C++"}]},{"type":"element","tag":"h4","props":{"id":"threads"},"children":[{"type":"text","value":"Threads"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"thread"}]},{"type":"text","value":" is an independent execution sequence within a single process."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Most common: assign each thread to execute a single function in parallel"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Each thread operates within the same process, so they "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"share global data"}]},{"type":"text","value":"(!) (text, data, and heap segments)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"They each have their own stack (e.g. for calls within a single thread)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Execution alternates between threads as it does for processes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Many similarities between threads and processes; in fact, threads are often called "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"lightweight processes"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h4","props":{"id":"threads-vs-processes"},"children":[{"type":"text","value":"Threads vs. Processes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Processes:"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"isolate virtual address spaces (good: security and stability, bad: harder to share info)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"can run external programs easily (fork-exec) (good)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"harder to coordinate multiple tasks within the same program (bad)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Threads:"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"share virtual address space (bad: security and stability, good: easier to share info)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"can't run external programs easily (bad)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"easier to coordinate multiple tasks within the same program (good)"}]}]},{"type":"element","tag":"h4","props":{"id":"c-thread"},"children":[{"type":"text","value":"C++ "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"thread"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A thread object can be spawned to run the specified function with the given arguments."}]},{"type":"element","tag":"code","props":{"code":"thread myThread(myFunc, arg1, arg2, ...);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"myThread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"arg1"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"arg2"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", ...);"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**myFunc:**the function the thread should execute asynchronously"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**args:**a list of arguments (any length, or none) to pass to the function upon execution"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Once initialized with this constructor, the thread may execute at any time!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To pass objects by reference to a thread, use the **ref()**function:"}]},{"type":"element","tag":"code","props":{"code":"void myFunc(int& x, int& y) {...}\n\nthread myThread(myFunc, ref(arg1), ref(arg2));\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {...}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"myThread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(arg1), "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(arg2));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can make an array of threads as follows:"}]},{"type":"element","tag":"code","props":{"code":"// declare array of empty thread handles \nthread friends[5]; \n\n// Spawn threads\nfor (size_t i = 0; i < 5; i++) {\n    friends[i] = thread(myFunc, arg1, arg2); \n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// declare array of empty thread handles "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"thread friends["}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"]; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// Spawn threads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    friends[i] "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(myFunc, arg1, arg2); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can also initialize an array of threads as follows (note the loop by reference):"}]},{"type":"element","tag":"code","props":{"code":"thread friends[5]; \nfor (thread& currFriend : friends) {\n    currFriend = thread(myFunc, arg1, arg2); \n}  \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"thread friends["}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"]; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" (thread"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" currFriend : friends) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    currFriend "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(myFunc, arg1, arg2); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}  "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To wait on a thread to finish, use the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":".join()"}]},{"type":"text","value":" method:"}]},{"type":"element","tag":"code","props":{"code":"thread myThread(myFunc, arg1, arg2); \n\n... // do some work\n\n// Wait for thread to finish (blocks) \nmyThread.join();\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"myThread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"arg1"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"arg2"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":" // do some work"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// Wait for thread to finish (blocks) "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"myThread."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For multiple threads, we must wait on a specific thread one at a time:"}]},{"type":"element","tag":"code","props":{"code":"thread friends[5]; \n// spawn here\n// now we wait for each to finish \nfor (size_t i = 0; i < 5; i++) { \n    friends[i].join(); \n} \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"thread friends["}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"]; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// spawn here"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// now we wait for each to finish "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    friends[i]."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"} "}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"thread-safety"},"children":[{"type":"text","value":"Thread Safety"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"thread-safe"}]},{"type":"text","value":"function is one that will always execute correctly, even when called concurrently from multiple threads."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"printf"}]},{"type":"text","value":"is thread-safe, but **operator<<**is "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":". This means e.g. "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"cout"}]},{"type":"text","value":" statements could get interleaved!"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To avoid this, use "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"oslock"}]},{"type":"text","value":"and "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"osunlock"}]},{"type":"text","value":"(custom CS110 functions - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"#include \"ostreamlock.h\""}]},{"type":"text","value":") around streams. They ensure at most one thread has permission to write into a stream at any one time."}]}]},{"type":"element","tag":"code","props":{"code":"cout << oslock <<  \"Hello, world!\" <<  endl << osunlock;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Hello, world!\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"  endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock;"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"threads-share-memory"},"children":[{"type":"text","value":"Threads Share Memory"}]},{"type":"element","tag":"code","props":{"code":"static void greeting(size_t& i) {\n    cout << oslock << \"Hello, world! I am thread \" << i << endl << osunlock; \n}\n\nstatic const size_t kNumFriends = 6;\nint main(int argc, char *argv[]) {\n    cout << \"Let's hear from \" << kNumFriends << \" threads.\" << endl;\n\n    thread friends[kNumFriends]; // declare array of empty thread handles\n\n    // Spawn threads\n    for (size_t i = 0; i < kNumFriends; i++) {\n        friends[i] = thread(greeting, ref(i));\n    }\n\n    // Wait for threads\n    for (size_t i = 0; i < kNumFriends; i++) {\n    friends[i].join();\n    }\n\n    cout << \"Everyone's said hello!\" << endl;\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Hello, world! I am thread \""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" kNumFriends "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"argc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"argv"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"[]) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Let's hear from \""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" kNumFriends "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" threads.\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    thread friends[kNumFriends];"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":" // declare array of empty thread handles"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"    // Spawn threads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" kNumFriends; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        friends[i] "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(greeting, "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(i));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"    // Wait for threads"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" kNumFriends; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    friends[i]."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Everyone's said hello!\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Output"}]},{"type":"element","tag":"code","props":{"code":"$ ./friends\nLet's hear from 6 threads.\nHello, world! I am thread 2 \nHello, world! I am thread 2 \nHello, world! I am thread 3 \nHello, world! I am thread 5 \nHello, world! I am thread 5 \nHello, world! I am thread 6 \nEveryone's said hello!\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"./friends"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Let's"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"hear"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"threads."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Hello,"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"world!"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"am"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"Everyone's"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"said"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"hello!"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"for ( size_t i =  0; i < kNumFriends; i++) {\n    friends[i].join();    \n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" kNumFriends; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    friends[i]."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();    "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/stanford/threads_share_memory.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Solution"}]},{"type":"text","value":": pass a copy of i (not by reference) so it does not change."}]},{"type":"element","tag":"h3","props":{"id":"races-when-accessing-shared-data"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Races When Accessing Shared Data"}]}]},{"type":"element","tag":"h4","props":{"id":"thread-level-parallelism"},"children":[{"type":"text","value":"Thread-Level Parallelism"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Threads allow a process to parallelize a problem across multiple cores"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Consider a scenario where we want to process 250 images and have 10 cores"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Simulation"}]},{"type":"text","value":": let each thread help process images until none are left"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Let's jump to a demo to see how this works"}]}]},{"type":"element","tag":"code","props":{"code":"int main(int argc, const char *argv[]) { \n    thread processors[10]; \n    size_t remainingImages = 250; \n    for (size_t i = 0; i < 10; i++)     \n        processors[i] = thread(process, 101 + i, ref(remainingImages));   \n    for (thread& proc: processors) proc.join();\n    cout << \"Images done!\" << endl; \n    return 0; \n}\n","filename":"images.cc","language":"cpp","meta":"[images.cc]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"argc"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"argv"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"[]) { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    thread processors["}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"]; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"250"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":")     "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        processors[i] "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"thread"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(process, "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"101"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" i, "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(remainingImages));   "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" (thread"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" proc: processors) proc."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Images done!\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There is a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"race condition"}]},{"type":"text","value":" here!"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**Problem:**threads could interrupt each other in between lines 2 and 3."},{"type":"element","tag":"code","props":{"code":"static  void process(size_t id, size_t& remainingImages) { \n    while (remainingImages >  0) {  \n        sleep_for( 500 );   // simulate \"processing image\" \n        remainingImages--;\n        // ...    \n    }\n    //... \n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" (remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"( "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" );"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"   // simulate \"processing image\" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"        // ...    "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"    //... "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**Why is this?**It's because "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages > 0"}]},{"type":"text","value":" test and "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages--"}]},{"type":"text","value":" aren't atomic"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Atomicity: externally, the code has either executed or not; external observers do not see any intermediate states mid-execution"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If a thread evaluates "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages > 0"}]},{"type":"text","value":"to be "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"and commits to processing an image, another thread could come in and claim that same image before this thread processes it."}]}]},{"type":"element","tag":"h4","props":{"id":"why-test-and-decrement-is-really-not-thread-safe"},"children":[{"type":"text","value":"Why Test and Decrement Is REALLY NOT Thread-Safe"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ statements aren't inherently atomic. Virtually all C++ statements—even ones as simple as "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages--"}]},{"type":"text","value":"—compile to multiple assembly code instructions."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Assembly code instructions are atomic, but C++ statements are not."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"g++"}]},{"type":"text","value":" on the myths compiles "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages--"}]},{"type":"text","value":" to five assembly code instructions, as with:"},{"type":"element","tag":"code","props":{"code":"0x0000000000401a9b <+36>:   mov    -0x20(%rbp),%rax\n0x0000000000401a9f <+40>:   mov    (%rax),%eax\n0x0000000000401aa1 <+42>:   lea    -0x1(%rax),%edx\n0x0000000000401aa4 <+45>:   mov    -0x20(%rbp),%rax\n0x0000000000401aa8 <+49>:   mov    %edx,(%rax)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0x0000000000401a9b <+36>:   mov    -0x20(%rbp),%rax\n0x0000000000401a9f <+40>:   mov    (%rax),%eax\n0x0000000000401aa1 <+42>:   lea    -0x1(%rax),%edx\n0x0000000000401aa4 <+45>:   mov    -0x20(%rbp),%rax\n0x0000000000401aa8 <+49>:   mov    %edx,(%rax)"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The first two lines drill through the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages"}]},{"type":"text","value":" reference to load a copy of the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages"}]},{"type":"text","value":" held on "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"main"}]},{"type":"text","value":"'s stack. The third line decrements that copy, and the last two write the decremented copy back to the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages"}]},{"type":"text","value":" variable held on "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"main"}]},{"type":"text","value":"'s stack."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The ALU operates on registers, but registers are private to a core, so the variable needs to be loaded from and stored to memory."},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Each thread makes a local copy of the variable before operating on it"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What if multiple threads all load the variable at the same time: they all think there's only 128 images remaining and process 128 at the same time"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"introducing-mutexes"},"children":[{"type":"text","value":"Introducing Mutexes"}]},{"type":"element","tag":"h4","props":{"id":"mutex"},"children":[{"type":"text","value":"Mutex"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A mutex is a variable type that represents something like a \"locked door\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/stanford/locked_door.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"lock"}]},{"type":"text","value":"the door:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"if it's unlocked, you go through the door and lock it"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"if it's locked, you "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wait for it to unlock first"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you most recently locked the door, you can "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"unlock"}]},{"type":"text","value":"the door:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"door is now unlocked, another may go in now"}]}]},{"type":"element","tag":"h4","props":{"id":"mutex-mutual-exclusion"},"children":[{"type":"text","value":"Mutex - Mutual Exclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A mutex is a type used to enforce "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"mutual exclusion"}]},{"type":"text","value":", i.e., a critical section"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mutexes are often called locks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To be very precise, mutexes are one kind of lock, there are others (read/write locks, reentrant locks, etc.), but we can just call them locks in this course, usually \"lock\" means \"mutex\""}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When a thread locks a mutex"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If the lock is unlocked the thread takes the lock and continues execution"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If the lock is locked, the thread blocks and waits until the lock is unlocked"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If multiple threads are waiting for a lock they all wait until lock is unlocked, one receives lock"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When a thread unlocks a mutex"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It continues normally; one waiting thread (if any) takes the lock and is scheduled to run"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is a subset of the C++ mutex abstraction: nicely simple! How can we use this in our buggy program?"}]},{"type":"element","tag":"code","props":{"code":"class mutex {\npublic:\n    mutex();        // constructs the mutex to be in an unlocked state\n    void lock();    // acquires the lock on the mutex, blocking until it's unlocked\n    void unlock();  // releases the lock and wakes up another threads trying to lock it\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"        // constructs the mutex to be in an unlocked state"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"    // acquires the lock on the mutex, blocking until it's unlocked"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"  // releases the lock and wakes up another threads trying to lock it"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"critical-sections-with-mutexes"},"children":[{"type":"text","value":"Critical Sections With Mutexes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"main"}]},{"type":"text","value":" instantiates a mutex, which it passes (by reference!) to invocations of "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"process."}]},{"type":"text","value":"\nThe "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"process"}]},{"type":"text","value":" code uses this lock to protect "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages"}]},{"type":"text","value":".\nNote we need to unlock on line 5 -- in complex code forgetting this is an easy bug"}]},{"type":"element","tag":"code","props":{"code":"static void process ( size_t id, size_t & remainingImages, mutex& counterLock) {\n    while ( true ) {\n        counterLock.lock();\n        if (remainingImages == 0) {\n            counterLock.unlock(); \n            break;\n        }\n        processImage(remainingImages);\n        remainingImages--;\n        cout << oslock << \"Thread#\" << id << \" processed an image (\" << remainingImages 11   << \" remain).\" << endl << osunlock;\n        counterLock.unlock();\n    }\n    cout << oslock << \"Thread#\" << id << \" sees no remaining images and exits.\" << endl << osunlock;\n}\n\n// Create single mutex in main, pass by reference\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"counterLock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" (remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"processImage"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(remainingImages);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Thread#\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" id "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" processed an image (\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" remain).\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Thread#\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" id "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" sees no remaining images and exits.\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"// Create single mutex in main, pass by reference"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"critical-sections-can-be-bottlenecks"},"children":[{"type":"text","value":"Critical Sections Can Be Bottlenecks"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The way we've set it up, only one thread agent can process an image at a time!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can do better: serialize deciding which image to process and parallelize the actual processing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Keep your critical sections as small as possible!"}]},{"type":"element","tag":"code","props":{"code":"static void process ( size _t id, size _t & remainingImages, mutex& counterLock) { \n    while ( true ) {\n        size _t myImage; \n        \n        counterLock.lock();   // Start of critical section \n        if (remainingImages == 0) { \n            counterLock.unlock(); // Rather keep it here, easier to check \n            break;\n        } else { \n            myImage = remainingImages; \n            remainingImages--; \n            counterLock.unlock(); // end of critical section \n            \n            processImage(myImage); \n            cout << oslock << \"Thread#\" << id << \" processed an image (\" << remainingImages 16   << \" remain).\" << endl << osunlock; \n        } \n    } \n    cout << oslock << \"Thread#\" << id << \" sees no remaining images and exits.\" << endl << osunlock; \n} \n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"_t"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8adf5e"},"children":[{"type":"text","value":"counterLock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ( "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" ) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        size _t myImage; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":"   // Start of critical section "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" (remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":") { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":" // Rather keep it here, easier to check "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" { "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            myImage "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" remainingImages; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            remainingImages"}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            counterLock."}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-8580cb"},"children":[{"type":"text","value":" // end of critical section "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-60ed24"},"children":[{"type":"text","value":"processImage"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"(myImage); "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"            cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Thread#\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" id "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" processed an image (\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" remainingImages "}]},{"type":"element","tag":"span","props":{"class":"ct-594fbd"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" remain).\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"        } "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    } "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"    cout "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" oslock "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\"Thread#\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" id "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5ee84"},"children":[{"type":"text","value":"\" sees no remaining images and exits.\""}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" endl "}]},{"type":"element","tag":"span","props":{"class":"ct-10afc3"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":" osunlock; "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd378a"},"children":[{"type":"text","value":"} "}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"problems-that-might-arise"},"children":[{"type":"text","value":"Problems That Might Arise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What if "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"processImage"}]},{"type":"text","value":" can return an error?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"E.g., what if we need to distinguish allocating an image and processing it"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A thread can grab the image by decrementing "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remainingImages"}]},{"type":"text","value":" but if it fails there's no way for another thread to retry"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Because these are threads, if one thread has a SEGV the whole process will fail"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A more complex approach might be to maintain an actual queue of images and allow threads (in a critical section) to push things back into the queue"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What if image processing times are "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"highly"}]},{"type":"text","value":" variable (e.g, one image takes 100x as long as the others)?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Might scan images to estimate execution time and try more intelligent scheduling"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What if there's a bug in your code, such that sometimes processImage randomly enters an infinite loop?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Need a way to reissue an image to an idle thread"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"An infinite loop of course shouldn't occur, but when we get to networks sometimes execution time can vary by 100x for reasons outside our control"}]}]},{"type":"element","tag":"h4","props":{"id":"some-types-of-mutexes"},"children":[{"type":"text","value":"Some Types of Mutexes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Standard "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mutex"}]},{"type":"text","value":": what we've seen"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If a thread holding the lock tries to re-lock it, deadlock"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"recursive_mutex"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A thread can lock the mutex multiple times, and needs to unlock it the same number of times to release it to other threads"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"timed_mutex"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A thread can "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"try_lock_for"}]},{"type":"text","value":" / "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"try_lock_until"}]},{"type":"text","value":": if time elapses, don't take lock"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Deadlocks if same thread tries to lock multiple times, like standard mutex"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this class, we'll focus on just regular "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mutex"}]}]},{"type":"element","tag":"h4","props":{"id":"how-do-mutexes-work"},"children":[{"type":"text","value":"How Do Mutexes Work?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Something we've seen a few times is that you can't read and write a variable atomically"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"But a mutex does so! If the lock is unlocked, lock it"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How does this work with caches?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Each core has its own cache"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Writes are typically write-back (write to higher cache level when line is evicted), not write-through (always write to main memory) for performance"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Caches are "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"coherent"}]},{"type":"text","value":" -- if one core writes to a cache line that is also in another core's cache, the other core's cache line is invalidated: this can become a performance problem"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hardware provides atomic memory operations, such as compare and swap"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cas old, new, addr"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If addr == old, set addr to new"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use this as a single bit to see if the lock is held and if not, take it"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If the lock is held already, then enqueue yourself (in a thread safe way) and tell kernel to sleep you"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When a node unlocks, it clears the bit and wakes up a thread"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f5ee84{color:#0A3069}\n.ct-594fbd{color:#0550AE}\n.ct-8580cb{color:#6E7781}\n.ct-10afc3{color:#CF222E}\n.ct-60ed24{color:#8250DF}\n.ct-cd378a{color:#24292F}\n.ct-8adf5e{color:#953800}\n.dark .ct-8adf5e{color:#FFA657}\n.dark .ct-cd378a{color:#C9D1D9}\n.dark .ct-60ed24{color:#D2A8FF}\n.dark .ct-10afc3{color:#FF7B72}\n.dark .ct-8580cb{color:#8B949E}\n.dark .ct-594fbd{color:#79C0FF}\n.dark .ct-f5ee84{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"learning-about-processes","depth":2,"text":"Learning About Processes"},{"id":"todays-learning-goals","depth":2,"text":"Today's Learning Goals"},{"id":"plan-for-today","depth":2,"text":"Plan For Today","children":[{"id":"recap-threads-in-c","depth":3,"text":"Recap: Threads in C++"},{"id":"races-when-accessing-shared-data","depth":3,"text":"Races When Accessing Shared Data"},{"id":"introducing-mutexes","depth":3,"text":"Introducing Mutexes"}]}]}},"_type":"markdown","_id":"content:1.cpp:thread-mutex:threads-and-mutexes.md","_source":"content","_file":"1.cpp/thread-mutex/threads-and-mutexes.md","_extension":"md"},{"_path":"/cpp/tips/_dir","_dir":"tips","_draft":false,"_partial":true,"_locale":"","title":"Clue","icon":"ic:twotone-tips-and-updates","_id":"content:1.cpp:tips:_dir.yml","_type":"yaml","_source":"content","_file":"1.cpp/tips/_dir.yml","_extension":"yml"},{"_path":"/cpp/tips/base","_dir":"tips","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"base","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"base"},"children":[{"type":"text","value":"base"}]},{"type":"element","tag":"h2","props":{"id":"读书笔记"},"children":[{"type":"text","value":"读书笔记"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不要在头文件使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"using"}]},{"type":"text","value":"，防止多个引用造成命名冲突"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vector"}]},{"type":"text","value":"能够高效增长，不要在初始化的时候指定"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vector"}]},{"type":"text","value":"大小，除非所有值都一样"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"class"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"1","src":"/code/cpp_class.png"},"children":[]}]}]},{"type":"element","tag":"h2","props":{"id":"count"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要某元素总个数时，使用count"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于只需要知道包含特定元素的数量的应用来说，这是最简单的方式。如果count返回0，则表示不存在该元素。"}]},{"type":"element","tag":"code","props":{"code":"if (count(v.begin(), v.end(), key))\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), key))"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"find"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"仅判断是否存在某元素，使用find"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"find会在查找到指定值后立即返回，所以它一般比count更快（因为count总是要遍历整个容器）。"}]},{"type":"element","tag":"code","props":{"code":"if (std::find(v.begin(), v.end(), key) != v.end())\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), key) "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"())"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"find_if-any_of"},"children":[{"type":"text","value":"find_if any_of"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"支持复杂条件的查找时，使用any_of(仅知道是否存在)/find_if(返回了第一个元素的迭代器)"}]}]},{"type":"element","tag":"h3","props":{"id":"stdfind_if"},"children":[{"type":"text","value":"std::find_if"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"它也能完成任务，但有点大材小用了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"find_if需要一个判别式。如果查找的值需要满足特定的条件时，比如查找小于3且大于1的值时，适合该方式。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果有多个值符合条件，则返回查找到符合条件的第一个值的迭代器。"}]},{"type":"element","tag":"code","props":{"code":"if (std::find_if(v.begin(), v.end(), [] (int i) { return i < 3 && i > 1 } ) != v.end())\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"find_if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), [] ("}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":") { "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dbfeb"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dbfeb"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" } ) "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"())"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"stdany_of"},"children":[{"type":"text","value":"std::any_of"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"与find_if类似，但它返回bool值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果判断式返回true，则它也返回true。否则返回false。"}]},{"type":"element","tag":"code","props":{"code":"if (std::any_of(v.begin(), v.end(), [] (int i) { return i < 3 && i > 1 } ))\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"any_of"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), [] ("}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":") { "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dbfeb"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dbfeb"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" } ))"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"扩展：std::none_of，是any_of的反面。也就是，当判断式是false时它返回true，否则返回flase。"}]},{"type":"element","tag":"h2","props":{"id":"binary_search"},"children":[{"type":"text","value":"binary_search"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于已经排序的vector，使用 binary_search"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作为磨刀不误砍柴工的一种方式，可以对vector先排序，再查找，就可以使用二分查找了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"二分查找的时间效率为O(logn)。"}]},{"type":"element","tag":"code","props":{"code":"sort(v.begin(), v.end());\nif (std::binary_search(v.begin(), v.end(), key))\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-242f75"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d21fa7"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"binary_search"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), v."}]},{"type":"element","tag":"span","props":{"class":"ct-7fb192"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-75d91b"},"children":[{"type":"text","value":"(), key))"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1dbfeb{color:#0550AE}\n.ct-d21fa7{color:#953800}\n.ct-7fb192{color:#8250DF}\n.ct-75d91b{color:#24292F}\n.ct-242f75{color:#CF222E}\n.dark .ct-242f75{color:#FF7B72}\n.dark .ct-75d91b{color:#C9D1D9}\n.dark .ct-7fb192{color:#D2A8FF}\n.dark .ct-d21fa7{color:#FFA657}\n.dark .ct-1dbfeb{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"读书笔记","depth":2,"text":"读书笔记"},{"id":"count","depth":2,"text":"count"},{"id":"find","depth":2,"text":"find"},{"id":"find_if-any_of","depth":2,"text":"find_if any_of","children":[{"id":"stdfind_if","depth":3,"text":"std::find_if"},{"id":"stdany_of","depth":3,"text":"std::any_of"}]},{"id":"binary_search","depth":2,"text":"binary_search"}]}},"_type":"markdown","_id":"content:1.cpp:tips:base.md","_source":"content","_file":"1.cpp/tips/base.md","_extension":"md"},{"_path":"/cpp/tips/check-os","_dir":"tips","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"check OS with a preprocessor directive","description":"To check the operating system using a preprocessor directive, you can use the #ifdef and #ifndef directives, along with the appropriate macro for the operating system you want to check for. For example, to check if the operating system is Linux, you can use the following code:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"check-os-with-a-preprocessor-directive"},"children":[{"type":"text","value":"check OS with a preprocessor directive"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To check the operating system using a preprocessor directive, you can use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#ifdef"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#ifndef"}]},{"type":"text","value":" directives, along with the appropriate macro for the operating system you want to check for. For example, to check if the operating system is Linux, you can use the following code:"}]},{"type":"element","tag":"code","props":{"code":"#ifdef __linux__\n// code for Linux operating system\n#endif\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#ifdef"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-86ae57"},"children":[{"type":"text","value":"__linux__"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdc32b"},"children":[{"type":"text","value":"// code for Linux operating system"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#endif"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Similarly, to check if the operating system is Windows, you can use the following code:"}]},{"type":"element","tag":"code","props":{"code":"#ifdef _WIN32\n// code for Windows operating system\n#endif\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#ifdef"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aaade0"},"children":[{"type":"text","value":"_WIN32"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdc32b"},"children":[{"type":"text","value":"// code for Windows operating system"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#endif"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These preprocessor directives check if the specified macro is defined, and if it is, the code inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#ifdef"}]},{"type":"text","value":" block will be compiled. Otherwise, it will be ignored. You can use this technique to check for any operating system and include the appropriate code for that operating system in your program."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To check if the operating system is macOS, you can use the following code:"}]},{"type":"element","tag":"code","props":{"code":"#ifdef __APPLE__\n// code for macOS operating system\n#endif\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#ifdef"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aaade0"},"children":[{"type":"text","value":"__APPLE__"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdc32b"},"children":[{"type":"text","value":"// code for macOS operating system"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#endif"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This code uses the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__APPLE__"}]},{"type":"text","value":" macro, which is defined by the compiler when compiling for macOS. You can use this code to include the appropriate code for macOS in your program."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__APPLE__"}]},{"type":"text","value":" macro will also be defined when compiling for iOS, so if you want to check specifically for macOS and not iOS, you can use the following code instead:"}]},{"type":"element","tag":"code","props":{"code":"#if defined(__APPLE__) && defined(__MACH__)\n// code for macOS operating system\n#endif\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#if"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"defined"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-86ae57"},"children":[{"type":"text","value":"__APPLE__"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"defined"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-86ae57"},"children":[{"type":"text","value":"__MACH__"}]},{"type":"element","tag":"span","props":{"class":"ct-b55dbc"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdc32b"},"children":[{"type":"text","value":"// code for macOS operating system"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fc9974"},"children":[{"type":"text","value":"#endif"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This code checks if both the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__APPLE__"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__MACH__"}]},{"type":"text","value":" macros are defined, which indicates that the program is being compiled for macOS."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-aaade0{color:#953800}\n.ct-bdc32b{color:#6E7781}\n.ct-86ae57{color:#8250DF}\n.ct-b55dbc{color:#24292F}\n.ct-fc9974{color:#CF222E}\n.dark .ct-fc9974{color:#FF7B72}\n.dark .ct-b55dbc{color:#C9D1D9}\n.dark .ct-86ae57{color:#D2A8FF}\n.dark .ct-bdc32b{color:#8B949E}\n.dark .ct-aaade0{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.cpp:tips:check-os.md","_source":"content","_file":"1.cpp/tips/check-os.md","_extension":"md"},{"_path":"/cpp/tips/tip","_dir":"tips","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"一些要点","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"一些要点"},"children":[{"type":"text","value":"一些要点"}]},{"type":"element","tag":"h2","props":{"id":"二维动态数组的申请和删除"},"children":[{"type":"text","value":"二维动态数组的申请和删除"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先是如何申请二维的数组，这里我们先申请一个指针数组，然后令指针数组中的每一个元素都指向一个数组，这样二维数组就成了："}]},{"type":"element","tag":"code","props":{"code":"size_t row, col;\n//输入row和col的数值\nint **MathTable = new int*[row];\nfor (int i = 0; i < row; i++)\n  MathTable[i] = new int[col];\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row, col;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//输入row和col的数值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"**"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"MathTable "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[row];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row; i"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MathTable[i] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[col];"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后是释放空间的过程："}]},{"type":"element","tag":"code","props":{"code":"//code\nfor (int i = 0; i < row; i++)\n  delete[] MathTable[i];\ndelete[]MathTable;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//code"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row; i"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"delete[]"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" MathTable[i];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[]MathTable;"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"符合new和delete配对的原则，怎么new出来就怎么delete掉。"}]},{"type":"element","tag":"h2","props":{"id":"为什么要内存对齐"},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/lgouc/article/details/82354710","rel":["nofollow"]},"children":[{"type":"text","value":"为什么要内存对齐"}]}]},{"type":"element","tag":"h2","props":{"id":"将程序跳转到指定内存地址"},"children":[{"type":"text","value":"将程序跳转到指定内存地址"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要对绝对地址0x100000赋值，我们可以用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(unsigned int*)0x100000 = 1234;"}]},{"type":"text","value":"那么要是想让程序跳转到绝对地址是0x100000去执行，应该怎么做？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((void (*)( ))0x100000 ) ( );"}]},{"type":"text","value":"\n首先要将0x100000强制转换成函数指针,即:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(void (*)())0x100000"}]},{"type":"text","value":"\n然后再调用它:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((void (*)())0x100000)();"}]},{"type":"text","value":"\n用typedef可以看得更直观些:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typedef void(*)() voidFuncPtr;"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((voidFuncPtr)0x100000)();"}]}]},{"type":"element","tag":"h2","props":{"id":"如何实现仿函数为什么需要通过继承自unary_function-或者-binary_function来实现仿函数"},"children":[{"type":"text","value":"如何实现仿函数？为什么需要通过继承自unary_function 或者 binary_function来实现仿函数？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"function object就是重载了函数调用操作符 operator()的一个struct或者class\n所有内置一元仿函数均继承自unary_function，所有内置二元仿函数均继承自binary_function\n继承自unary_function和binary_function的仿函数可以成为“可配接“的仿函数。可配接的仿函数，能够与其他STL组件更”和谐“地协同工作。"}]},{"type":"element","tag":"h2","props":{"id":"什么是字节对齐为什么要采用这种机制"},"children":[{"type":"text","value":"什么是字节对齐，为什么要采用这种机制？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字节对齐是指将数据按字节的边界对齐到指定的地址，使得数据在内存中的存储位置更加合理。通常来说，对齐的字节数是 2 的整数次幂，比如 1、2、4 或 8 字节。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"采用字节对齐机制的原因有以下几个："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高内存访问效率。如果数据不对齐，那么当 CPU 读取数据时，它可能需要进行多次内存访问，从而降低内存访问效率。而如果数据对齐，那么 CPU 就可以在一次内存访问中读取整个数据，从而提高内存访问效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"减少内存空间的浪费。如果数据不对，那么可能会出现内存碎片，即某些内存空间无法被使用。而如果数据对齐，那么可以避免内存碎片的产生，从而减少内存的浪费。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高软件的可移植性。由于不同的 CPU 架构有不同的字长和对齐规则，如果软件不进行字节对齐，那么在不同的 CPU 架构下可能会出现问题。而如果进行字节对齐，那么软件就可以在不同的 CPU 架构下运行，从而提高软件的可移植性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，字节对齐是一种有用的机制，它能够提高内存访问效率、减少内存空间的浪费以及提高软件的可移植性。不同的编程语言和编译器都会提供字节对齐的机制，开发人员可以根据需要来选择是否使用这种机制。"}]},{"type":"element","tag":"h2","props":{"id":"两种常用的实现隐式类类型转换的方式是什么如何避免隐式类型转换"},"children":[{"type":"text","value":"两种常用的实现隐式类类型转换的方式是什么？如何避免隐式类型转换？"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用单参数的构造函数或N个参数中有N-1个是默认参数的构造函数，"},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n    A(string s);\n    A(string s, int a = 0);\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"使用operator what_you_want_to_convert_type() const"},{"type":"element","tag":"code","props":{"code":"class A {\n public:\n     operator char *() const {\n         return data;//当从其他类型转换到char*时自动调用\n     }\n \n private:\n     char *data;\n };\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"operator"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"         "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" data;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//当从其他类型转换到char*时自动调用"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"data;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" };"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在单参数的构造函数或N个参数中有N-1个是默认参数的构造函数声明之前加上explicit。"}]}]},{"type":"element","tag":"h2","props":{"id":"面向对象的设计原则"},"children":[{"type":"text","value":"面向对象的设计原则"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"面向对象设计是指使用继承和抽象来创建可重用的类和对象的方法。面向对象设计原则的目的是提高软件系统的质量和灵活性。常见的面向对象设计原则包括单一职责原则、开放封闭原则、里氏替换原则、接口隔离原则、依赖反转原则等。"}]},{"type":"element","tag":"h2","props":{"id":"函数调用的具体实现"},"children":[{"type":"text","value":"函数调用的具体实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"函数调用的具体实现取决于编程语言和使用的计算机体系结构。但是，一般来说，在进行函数调用时，首先会在函数的调用点保存当前的执行上下文，然后将控制权转移到函数的定义体开头执行。在函数执行完毕后，会恢复之前保存的执行上下文，并将控制权返回到调用点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了实现函数调用，计算机系统通常会使用一个栈来保存执行上下文。每当进行函数调用时，就会将当前的执行上下文压入栈中，并在函数执行完毕后弹出栈顶元素。这样，在函数调用过程中，栈中保存的就是当前函数调用的堆栈跟踪信息。"}]},{"type":"element","tag":"h2","props":{"id":"构造函数可以调用虚函数吗语法上通过吗语义上可以通过吗"},"children":[{"type":"text","value":"构造函数可以调用虚函数吗？语法上通过吗？语义上可以通过吗？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不能，语法上通过，语义上有问题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"对象内的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"成分会在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"自身构造之前构造完毕。因此，在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"\n的构造函数中执行的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"virtual"}]},{"type":"text","value":"函数将会是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"\n的版本，决不会是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"的版本。 即使目前确实正在构造"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h2","props":{"id":"拷贝构造函数作用及用途什么时候需要自定义拷贝构造函数"},"children":[{"type":"text","value":"拷贝构造函数作用及用途？什么时候需要自定义拷贝构造函数？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在C++中，有下面三种对象需要拷贝的情况："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象以值传递的方式传入函数体"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象以值传递的方式从函数返回"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象需要通过另外一个对象进行初始化 以上的情况就需要拷贝构造函数的调用。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当类中的数据成员需要动态分配存储空间时，不可以依赖"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default copy constructor"}]},{"type":"text","value":"。当"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default copy constructor"}]},{"type":"text","value":"\n被因编译器需要而合成时，将执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default memberwise copy"}]},{"type":"text","value":"语义。\n此时如果类中有动态分配的存储空间时，将会发生惨重的灾情。 在需要时（包括这种对象要赋值、这种对象作为函数参数要传递、函数返回值为这种对象等情况），要考虑到自定义拷贝构造函数。"}]}]},{"type":"element","tag":"h2","props":{"id":"如果在构造函数和析构函数中抛出异常会发生什么什么是栈展开"},"children":[{"type":"text","value":"如果在构造函数和析构函数中抛出异常会发生什么？什么是栈展开？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构造函数抛异常：不会发生资源泄漏。假设在operator new()\n时抛出异常，那么将会因异常而结束此次调用，内存分配失败，不可能存在内存泄露。假设在别处(operator new() )\n执行之后抛出异常，此时析构函数调用，已构造的对象将得以正确释放，且自动调用operator delete()释放内存 析构函数抛异常：\n可以抛出异常，但该异常必须留在析构函数；若析构函数因异常退出，情况会很糟糕(all\nkinds of bad things are likely to happen)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可能使得已分配的对象未能正常析构，造成内存泄露；"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"例如在对像数组的析构时，如果对象的析构函数抛出异常，释放代码将引发未定义行为。考虑一个对象数组的中间部分在析构时抛出异常，它无法传播，因为传播的话将使得后续部分不能正常释放；它也无法吸收，因为这违反了”异常中立“原则(\n异常中立，就是指任何底层的异常都会抛出到上层，也就相当于是异常透明的)。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"抛出异常时，将暂停当前函数的执行，开始查找匹配的catch子句。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n首先检查throw本身是否在try块内部如果是，检查与该try相关的catch子句，看是否可以处理该异常。如果不能处理，就退出当前函数，并且释放当前函数的内存并销毁局部对象，继续到上层的调用函数中查找，直到找到一个可以处理该异常的catch。"}]}]},{"type":"element","tag":"h2","props":{"id":"virtual函数能声明为内联吗为什么"},"children":[{"type":"text","value":"virtual函数能声明为内联吗？为什么？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通常情况下是不能的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原因：inline是编译期决定，他意味着在执行前就将调用动作替换为被调用函数的本体； virtual是运行期决定，他意味着直道运行期才决定调用哪个函数。\n这两者之间通常是冲突的。\n然而也有特例，就是当编译阶段就已经知道调用虚函数的指针为多态指针。这里就不再赘述了。"}]}]},{"type":"element","tag":"h2","props":{"id":"基类的析构函数不是虚函数会带来什么问题"},"children":[{"type":"text","value":"基类的析构函数不是虚函数，会带来什么问题？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"派生类的析构函数用不上，会造成资源的泄漏。"}]},{"type":"element","tag":"h2","props":{"id":"子类析构时要调用父类的析构函数吗"},"children":[{"type":"text","value":"子类析构时要调用父类的析构函数吗"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"析构函数调用的次序是先派生类的析构后基类的析构，也就是说在基类的的析构调用的时候,派生类的信息已经全部销毁了。定义一个对象时先调用基类的构造函数、然后调用派生类的构造函数；析构的时候恰好相反：先调用派生类的析构函数、然后调用基类的析构函数。"}]},{"type":"element","tag":"h2","props":{"id":"哪些类型的对象不可以作为union的成员为什么有这种限制"},"children":[{"type":"text","value":"哪些类型的对象不可以作为union的成员？为什么有这种限制？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"标准规定，凡是具有"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial constructor"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial destructor"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial copy constructor"}]},{"type":"text","value":"\n、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial assignment operator"}]},{"type":"text","value":"的class对象都不能作为union的成员。 即是说，这个class的以上四种成员必须均经由编译器合成且该class无虚函数和虚基类。\n有这种限制是为了兼容C。"}]},{"type":"element","tag":"h2","props":{"id":"c中的转化机制各适用于什么环境dynamic_cast转换失败时会出现什么情况"},"children":[{"type":"text","value":"C++中的转化机制？各适用于什么环境？dynamic_cast转换失败时，会出现什么情况？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对指针，返回NULL.对引用，抛出bad_cast异常more Effective C++ C++引入了4种类型转化操作符（cast\noperator）：static_cast，const_cast，dynamic_cast和reinterpret_cast，使用方法与C语言中略有不同："}]},{"type":"element","tag":"code","props":{"code":"(type)expression; //这是C语言的\n","language":"c","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(type)expression;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":" //这是C语言的"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后引入C++的："}]},{"type":"element","tag":"code","props":{"code":"static_cast<type>(expression);//这是C++的\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"static_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(expression);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//这是C++的"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后看一下各自的适用范围："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"static_cast：static_cast基本上拥有与C旧式转型相同的威力和意义，以及相同的限制。但是，该类型转换操作符不能移除常量性，因为有一个专门的操作符用来移除常量性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"const_cast：用来改变表达式中的常量性（constness）或者易变形（volatileness），只能用于此功能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"dynamic_cast：将指向基类basic class object的pointer或者reference转型为指向派生类derived（或这sibling base）class\nobject的pointer或者reference中，并且可以获知是否转型成功：如果转型失败，当转型对象是指针的时候会返回一个null指针；当转型对象是reference会抛出一个异常exception。dynamic_cast无法应用在缺乏虚函数的类型上，也不能改变类型的常量性。\n此外，dynamic_cast还有一个用途就是找出被对象占用的内存的起始点。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"reinterpret_cast：这个操作符的转换结果几乎总是和编译器平台相关，所以不具有移植性。reinterpret_cast的最常用用途是转换“函数指针”类型，如下："},{"type":"element","tag":"code","props":{"code":"typedef void (*FuncPtr)();\nint doSomething();\nint main() {\n    FuncPtr funcPtrArray[10];\n    funcPtrArray[0] = reinterpret_cast<FuncPtr>(&doSomething);\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"typedef"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (*FuncPtr)();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    FuncPtr funcPtrArray["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    funcPtrArray["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"reinterpret_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"FuncPtr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"doSomething);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"通过reinterpret_cast强迫编译器了，并成功的将不同的类型的函数&doSomething转换为需要的类型。不过这个操作符进行的转换动作不具有移植性（C++不保证所有的函数指针都能以此方式重新呈现），某些情况下这样的转型可能会导致不正确的结果，所以这种操作不到万不得已不要使用。"}]}]},{"type":"element","tag":"h2","props":{"id":"为什么函数参数的入栈的顺序是从右往左"},"children":[{"type":"text","value":"为什么函数参数的入栈的顺序是从右往左"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为好多函数是不定参数个数的，比如最常用的printf，所以需要参数的入栈顺序是从右往左。"}]},{"type":"element","tag":"h2","props":{"id":"有哪几种强制类型转换以及使用场景"},"children":[{"type":"text","value":"有哪几种强制类型转换以及使用场景"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态类型转换（static_cast）：该类型转换是最常用的强制类型转换方式，它支持转换基本数据类型、指针、引用和枚举类型。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动态类型转换（dynamic_cast）：该类型转换主要用于转换基类指针或引用到派生类指针或引用，并在运行时检查转换是否成功。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常量类型转换（const_cast）：该类型转换可以用来去除或添加对象的常量属性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"向上转型（reinterpret_cast）：该类型转换可以用来进行位域转换，或将任意类型的指针转换为任意其它类型的指针。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用场景方面，C++ 中的强制类型转换主要用于两类情况："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换不同类型的数据：在 C++ 中，数据的类型是严格检查的，因此如果需要进行类型不同的数据运算，就必须先进行强制类型转换。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换基类指针或引用到派生类指针或引用：在 C++ 中，继承关系中的类之间可以相互转换，但是这种转换需要使用动态类型转换进行。例如，假设有一个基类 Base 和一个派生类 Derived，那么可以使用动态类型转换将基类指针转换为派生类指针，从而调用派生类中特有的成员函数。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的例子："}]},{"type":"element","tag":"code","props":{"code":"class Base {\npublic:\n  virtual void doSomething() {\n    // 在基类中实现的通用操作\n  }\n};\n\nclass Derived : public Base {\npublic:\n  void doSomething() {\n    // 在派生类中重写的 doSomething 操作\n  }\n\n  void doSomethingElse() {\n    // 派生类中独有的操作\n  }\n};\n\nint main() {\n  Base* b = new Base();\n  b->doSomething();  // 调用基类中的 doSomething 操作\n\n  Derived* d = dynamic_cast<Derived*>(b);\n  d->doSomething();  // 调用派生类中重写的 doSomething 操作\n  d->doSomethingElse();  // 调用派生类中独有的 doSomethingElse 操作\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在基类中实现的通用操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 派生类中独有的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Base"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用基类中的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"dynamic_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中独有的 doSomethingElse 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们首先定义了一个基类 Base 和一个派生类 Derived。然后在 main 函数中，我们先创建了一个基类指针 b，并通过该指针调用了基类中的 doSomething 操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接着，我们使用动态类型转换将 b 转换为派生类指针 d，并通过 d 调用了派生类中重写的 doSomething 操作和独有的 doSomethingElse"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们通过动态类型转换将基类指针转换为派生类指针，从而实现了基类指针向派生类指针的转换。但是，这种转换并不是没有风险的。如果指针 b 实际指向的对象并不是一个派生类的对象，那么动态类型转换将会失败，从而导致程序崩溃。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了避免这种情况的发生，在进行动态类型转换时，可以使用特殊的语法来检查转换是否成功。例如，可以改写上面的例子如下："}]},{"type":"element","tag":"code","props":{"code":"class Base {\npublic:\n  virtual void doSomething() {\n    // 在基类中实现的通用操作\n  }\n};\n\nclass Derived : public Base {\npublic:\n  void doSomething() {\n    // 在派生类中重写的 doSomething 操作\n  }\n\n  void doSomethingElse() {\n    // 派生类中独有的操作\n  }\n};\n\nint main() {\n  Base* b = new Base();\n  b->doSomething();  // 调用基类中的 doSomething 操作\n\n  Derived* d = dynamic_cast<Derived*>(b);\n  if (d != nullptr) {\n    d->doSomething();  // 调用派生类中重写的 doSomething 操作\n    d->doSomethingElse();  // 调用派生类中独有的 doSomethingElse 操作\n  } else {\n    // 如果转换失败，则不执行任何操作\n  }\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在基类中实现的通用操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 派生类中独有的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Base"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用基类中的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"dynamic_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中独有的 doSomethingElse 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 如果转换失败，则不执行任何操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们通过检查 d 是否为 nullptr 来判断动态类型转换是否成功。如果转换成功，则 d 指向一个派生类对象，否则 d 指向 nullptr。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在进行动态类型转换时，检查转换是否成功是一个很好的实跃。它可以帮助我们避免对于非法对象进行操作，从而保证程序的正确性和安全性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了动态类型转换之外，C++ 还支持其他类型的强制类型转换，如静态类型转换、常量类型转换、向上转型等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，假设有一个名为 A 的类，它包含一个整型成员 a。如果我们想要将 a 的值转换为浮点型，那么可以使用静态类型转换："}]},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n  int a;\n};\n\nint main() {\n  A obj;\n  obj.a = 10;\n\n  float f = static_cast<float>(obj.a);  // 将 a 的值转换为浮点型\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.a "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" f "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"static_cast<float>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(obj.a);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 a 的值转换为浮点型"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，假设有一个名为 B 的类，它包含一个指向 A 类的指针成员 b。如果我们想要将 b 转换为指向 A 类的常量指针，那么可以使用常量类型转换："}]},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n  int a;\n};\n\nclass B {\npublic:\n  A* b;\n};\n\nint main() {\n  A obj;\n  obj.a = 10;\n\n  B b;\n  b.b = &obj;\n\n  const A* p = const_cast<const A*>(b.b);  // 将 b 转换为指向 A 类的常量指针\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.a "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  B b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b.b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" p "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const_cast<const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b.b);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 b 转换为指向 A 类的常量指针"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后，假设有一个名为 C 的类，它包含一个指针成员 c，该指针指向一个指针。如果我们想要将 c 转换为指向一个整型的指针，那么可以使用向上转型："}]},{"type":"element","tag":"code","props":{"code":"class C {\npublic:\n  void** c;\n};\n\nint main() {\n  int i = 10;\n\n  C obj;\n  obj.c = reinterpret_cast<void**>(&i);  // 将 c 转换为指向整型的指针\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void**"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" c;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  C obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.c "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"reinterpret_cast<void**>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"i);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 c 转换为指向整型的指针"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面是一些简单的例子，它们演示了 C++ 中常用的几种强制类型转换方式。总体来说，强制类型转换是一种有用的工具，它可以帮助我们更方便地进行数据类型转换。不过，我们在使用它们时也需要格外小心，避免破坏数据类型的约定，从而保证程序的正确性和安全性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，在 C++ 中，我们也可以使用类型擦除来实现类型的转换。类型擦除是指将泛型类型转换为一种通用类型，从而实现类型的转换。例如，假设有一个泛型类型 T，那么我们可以将它转换为 void 类型，从而实现类型擦除："}]},{"type":"element","tag":"code","props":{"code":"template<typename T>\nclass MyClass {\npublic:\n  void doSomething(T t) {\n    // 在 MyClass 中实现的操作\n  }\n};\n\nint main() {\n  MyClass<int> obj1;\n  obj1.doSomething(10);\n\n  MyClass<float> obj2;\n  obj2.doSomething(3.14);\n\n  MyClass<void> obj3;\n  obj3.doSomething(nullptr);  // 类型擦除\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在 MyClass 中实现的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj1;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj1."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<float>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj2."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"3.14"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<void>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj3;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj3."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 类型擦除"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们定义了一个泛型类 MyClass，然后在 main 函数中创建了三个 MyClass 对象，分别表示 int、float 和 void 类型。然后，我们通过类型擦除，将"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MyClass<void>"}]},{"type":"text","value":"对象转换为 void 类型，并调用它的 doSomething 操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，在 C++ 中，强制类型转换和类型擦除是两种实现类型转换的重要方式。它们都有各自的优缺点，适用于不同的场景。因此，我们在使用它们时，需要根据具体的情况，仔细斟酌选择合适的方式。"}]},{"type":"element","tag":"h2","props":{"id":"如何避免循环依赖"},"children":[{"type":"text","value":"如何避免循环依赖"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"循环依赖是指两个或多个模块之间相互依赖，导致它们无法正确加载的情况。解决循环依赖的一种方法是使用抽象类来提供一个公共接口，并让这些模块实现该接口。这样，模块之间就只依赖于这个抽象类，而不是相互依赖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一种方法是使用构造函数来注入依赖。这种方法的思想是将每个模块的依赖作为它的构造函数的参数，然后在每个模块中创建它所依赖的模块的实例。这样，模块之间就不存在直接的依赖关系，只存在通过构造函数传递的间接依赖关系。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一种方法是使用服务定位器模式。该模式涉及到一个中央注册表，所有模块都向该注册表注册自己，然后在需要时从注册表中获取所需的模块实例。这样，模块之间就只存在对注册表的依赖，而不是相互依赖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，避免循环依赖的方法有很多，具体应用哪种方法取决于您的项目的具体情况。"}]},{"type":"element","tag":"h2","props":{"id":"unique_ptr中stdmove作用"},"children":[{"type":"text","value":"unique_ptr中std::move()作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"std::move 是一个 C++ 标准库函数，用于将一个对象的所有权从一个对象转移到另一个对象。它通常用于将一个对象的所有权从一个 std::unique_ptr 对象转移到另一个 std::unique_ptr 对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"举个例子，假设有一个 std::unique_ptr 对象 ptr1，它指向一个动态分配的整型变量，值为 10："}]},{"type":"element","tag":"code","props":{"code":"std::unique_ptr<int> ptr1(new int(10));\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"ptr1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您想将 ptr1 的所有权转移到另一个 std::unique_ptr 对象 ptr2 中，可以使用 std::move 函数，如下所示："}]},{"type":"element","tag":"code","props":{"code":"std::unique_ptr<int> ptr2 = std::move(ptr1);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ptr2 "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(ptr1);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这种情况下，ptr1 和 ptr2 将指向同一个整型变量，值为 10。不过，由于 std::move 函数将 ptr1 的所有权转移到了 ptr2 中，因此 ptr1 将不再持有任何所有权，所以 ptr1 将变为空指针。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，std::move 函数用于将对象的所有权从一个对象转移到另一个对象，它通常用于 std::unique_ptr 对象之间的所有权转移。"}]},{"type":"element","tag":"h2","props":{"id":"main函数执行以前还会执行什么代码之后呢"},"children":[{"type":"text","value":"main函数执行以前，还会执行什么代码？之后呢？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"全局对象的构造函数会在main函数之前执行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在主函数之前，编译器会执行一些初始化代码，例如初始化全局变量。主函数执行完成后，如果程序中还有其他函数正在运行，那么这些函数会继续执行。一旦所有函数都执行完毕，程序就会结束。"}]},{"type":"element","tag":"h2","props":{"id":"c是不是类型安全的"},"children":[{"type":"text","value":"C++是不是类型安全的？"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不是。两个不同类型的指针之间可以强制转换（用reinterpret cast)。C#是类型安全的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++是类型安全的编程语言。类型安全是指在编译时对类型的检查，以确保变量的值和它的类型相匹配。这样可以防止在运行时出现错误，比如将一个整型值赋给一个字符型变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了C++，Java、C#和Haskell等语言也是类型安全的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++ 是一种强类型语言，它对类型有严格的检查，并且支持类型转换。这些特性都可以被看作是类型安全的特征。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 C++ 中，不同类型的指针可以互相转换，但是这种转换是非常危险的，因为它可能导致程序运行时出现错误。例如，如果将一个整型指针转换成字符型指针，程序可能会在使用该指针时崩溃。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，在 C++ 中，指针类型的转换可能会绕过类型安全检查，并导致程序出现错误。但是，在大多数情况下，C++ 仍然是一种类型安全的语言，因为它对类型的检查非常严格。如果您的代码涉及指针类型的转换，我建议您格外小心，确保转换是安全的。"}]},{"type":"element","tag":"h2","props":{"id":"有哪几种情况只能用initialization-list而不能用assignment"},"children":[{"type":"text","value":"有哪几种情况只能用initialization list而不能用assignment?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当类中含const、reference成员变量；基类的构造函数都需要初始化表。"}]},{"type":"element","tag":"h2","props":{"id":"list-和-set"},"children":[{"type":"text","value":"List 和 Set"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"List 可以存放相同元素 Set 不可存放相同元素"}]},{"type":"element","tag":"h2","props":{"id":"写一个http网络服务器该如何写"},"children":[{"type":"text","value":"写一个http网络服务器，该如何写"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"包含必要的头文件，例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<iostream>"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<string>"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::string"}]},{"type":"text","value":" 类型定义一个字符串，用来存储 HTTP 响应。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cout"}]},{"type":"text","value":" 向标准输出流中输出 HTTP 响应字符串。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cin"}]},{"type":"text","value":" 从标准输入流中读取 HTTP 请求，并将其存储在一个字符串中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用字符串函数解析 HTTP 请求，从中提取 URL 和其他必要的信息。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据请求的 URL 来选择如何响应请求。例如，如果 URL 指向一个文件，可以读取文件内容并将其作为响应的正文返回。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构造一个 HTTP 响应字符串，并使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cout"}]},{"type":"text","value":" 将其输出到标准输出流中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了完成这个项目，您可能需要了解以下技术："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网络编程：您需要了解如何使用 C++ 库来编写网络应用程序，例如如何使用套接字来连接客户端和服务器。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 协议：您需要了解 HTTP 协议的工作原理，包括请求和响应的格式以及如何处理常见的 HTTP 方法（例如 GET 和 POST）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多线程编程：为了实现高性能的服务器，您可能需要使用多线程来处理多个请求。您需要了解如何使用 C++ 标准库中的线程类来创建和管理多个线程。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实现这个项目时，您可能需要先完成以下步骤："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个新的 C++ 项目，并包含必要的头文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 C++ 标准库中的网络编程库，创建一个新的套接字，并将其绑定到一个特定的端口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编写一个函数，用来接收客户端的连接。在这个函数中，您需要创建一个新的线程来处理客户端的请求。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在新线程中，编写代码来读取客户端发送的 HTTP 请求，并解析其中的 URL。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下是一个简单的例子，它展示了如何创建一个网络服务器，并使用多线程来处理客户端请求。"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <string>\n#include <thread>\n#include <cstdio>\n#include <cstring>\n#include <cerrno>\n#include <unistd.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n\n// 定义服务器的 IP 地址和端口号\nconstexpr char SERVER_IP[] = \"127.0.0.1\";\nconstexpr int SERVER_PORT = 8080;\n\n// 定义缓冲区的大小\nconstexpr size_t BUFFER_SIZE = 1024;\n\n// 定义 HTTP 响应字符串\nconstexpr char HTTP_RESPONSE[] = \"HTTP/1.1 200 OK\\r\\n\\r\\n\";\n\n// 定义处理客户端请求的函数\nvoid handle_client(int client_fd) {\n  // 创建缓冲区\n  char buffer[BUFFER_SIZE];\n\n  // 读取客户端发送的请求\n  ssize_t n = read(client_fd, buffer, sizeof(buffer));\n  if (n <= 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return;\n  }\n\n  // 解析请求中的 URL\n  std::string request(buffer, n);\n  // (省略)\n\n  // 构造 HTTP 响应字符串\n  std::string response = HTTP_RESPONSE;\n  // (省略)\n\n  // 向客户端发送响应\n  n = write(client_fd, response.c_str(), response.size());\n  if (n <= 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return;\n  }\n\n  // 关闭客户端的连接\n  close(client_fd);\n}\n\nint main(int argc, char* argv[]) {\n  // 解析命令行参数\n  int opt;\n  bool server_running = true;\n  while ((opt = getopt(argc, argv, \"h\")) != -1) {\n    switch (opt) {\n      case 'h':\n        // 打印帮助信息\n        print_usage(argv[0]);\n        return 0;\n      default:\n        std::cerr << \"Error: Invalid option \" << opt << std::endl;\n        print_usage(argv[0]);\n        return 1;\n    }\n  }\n\n  // 创建一个新的套接字\n  int sock_fd = socket(AF_INET, SOCK_STREAM, 0);\n  if (sock_fd < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 填充服务器的地址信息\n  sockaddr_in server_addr;\n  std::memset(&server_addr, 0, sizeof(server_addr));\n  server_addr.sin_family = AF_INET;\n  server_addr.sin_port = htons(SERVER_PORT);\n  inet_pton(AF_INET, SERVER_IP, &server_addr.sin_addr);\n\n  // 绑定套接字\n  if (bind(sock_fd, (sockaddr*)&server_addr, sizeof(server_addr)) < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 开始监听\n  if (listen(sock_fd, SOMAXCONN) < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 注册信号处理器\n  signal(SIGINT, [](int){ server_running = false; });\n\n  // 使用死循环来接收客户端的连接\n  while (server_running) {\n    // 接收客户端的连接\n    sockaddr_in client_addr;\n    socklen_t client_addr_len = sizeof(client_addr);\n    int client_fd = accept(sock_fd, (sockaddr*)&client_addr, &client_addr_len);\n    if (client_fd < 0) {\n      std::cerr << \"Error: \" << strerror(errno) << std::endl;\n      continue;\n    }\n\n    // 为客户端创建一个新的线程来处理请求\n    std::thread client_thread(handle_client, client_fd);\n    client_thread.detach();\n  }\n\n  // 关闭套接字\n  close(sock_fd);\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<string>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cstdio>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cstring>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cerrno>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<unistd.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<sys/socket.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<netinet/in.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<arpa/inet.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义服务器的 IP 地址和端口号"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" SERVER_IP[] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"127.0.0.1\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" SERVER_PORT "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"8080"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义缓冲区的大小"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" BUFFER_SIZE "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义 HTTP 响应字符串"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" HTTP_RESPONSE[] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"HTTP/1.1 200 OK"}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"\\r\\n\\r\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义处理客户端请求的函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"handle_client"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"client_fd"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 创建缓冲区"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" buffer[BUFFER_SIZE];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 读取客户端发送的请求"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"ssize_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"read"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd, buffer, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(buffer));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 解析请求中的 URL"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::string "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(buffer, n);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // (省略)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 构造 HTTP 响应字符串"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::string response "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" HTTP_RESPONSE;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // (省略)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 向客户端发送响应"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"write"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd, response."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"c_str"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(), response."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 关闭客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"argc"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"argv"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[]) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 解析命令行参数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" opt;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" server_running "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ((opt "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"getopt"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argc, argv, "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"h\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"switch"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (opt) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"'h'"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"        // 打印帮助信息"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"print_usage"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argv["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: Invalid option \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" opt "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"print_usage"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argv["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 创建一个新的套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" sock_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"socket"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(AF_INET, SOCK_STREAM, "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (sock_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 填充服务器的地址信息"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  sockaddr_in server_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"memset"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(server_addr));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  server_addr.sin_family "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" AF_INET;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  server_addr.sin_port "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"htons"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(SERVER_PORT);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"inet_pton"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(AF_INET, SERVER_IP, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr.sin_addr);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 绑定套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, (sockaddr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(server_addr)) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 开始监听"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, SOMAXCONN) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 注册信号处理器"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"signal"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(SIGINT, []("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"){ server_running "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 使用死循环来接收客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (server_running) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 接收客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    sockaddr_in client_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"socklen_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" client_addr_len "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_addr);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" client_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"accept"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, (sockaddr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"client_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"client_addr_len);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (client_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"continue"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 为客户端创建一个新的线程来处理请求"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"client_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(handle_client, client_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    client_thread."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"detach"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 关闭套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了上述的步骤之外，您还可以考虑以下优化："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设置套接字的选项，例如 SO_REUSEADDR 和 SO_REUSEPORT，以提高服务器的性能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 epoll 或 select 等 I/O 多路复用技术来支持多个客户端的并发访问。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用线程池来管理线程，而不是每次创建一个新的线程。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用缓存来存储客户端请求的内容，以提高服务器的响应速度。"}]}]},{"type":"element","tag":"h2","props":{"id":"谈一谈-c-的-this"},"children":[{"type":"text","value":"谈一谈 c++ 的 this"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zintrulcre.vip/posts/cpp/closure-and-anonymous-function/","rel":["nofollow"]},"children":[{"type":"text","value":"匿名函数"}]}]},{"type":"element","tag":"h2","props":{"id":"不同类型的语言有什么差异"},"children":[{"type":"text","value":"不同类型的语言有什么差异"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自然语言"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同类型的语言有很多差异，包括它们的语法、词汇和发音方式。例如，拉丁语和汉语是两种非常不同的语言，它们的语法和词汇都大不相同。拉丁语是一种重音语言，它的词语通常是以重读音节结尾的，而汉语则是一种声调语言，词语的意思取决于它的声调。此外，拉丁语和汉语在语音方面也有很大差异，拉丁语的语音比较清脆，而汉语的语音则比较柔和。总之，不同类型的语言在许多方面都有所不同，包括它们的语法、词汇和发音方式。"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这些差异主要体现在它们的语法、语义、功能和性能方面。例如，C++和Python是两种非常不同的编程语言。C++是一种类型严格的语言，它的语法比较严谨，需要程序员明确地指定每一个变量的类型，而Python是一种类型动态的语言，它的语法比较灵活，不需要程序员指定变量的类型。此外，C++在性能方面比Python要优秀得多，因为它是一种编译型语言，在运行时会被编译成机器代码，而Python则是一种解释型语言，它的代码在运行时会被解释器逐行执行。总之，不同类型的编程语言在语法、语义、功能和性能方面都有所不同，程序员可以根据自己的需要选择合适的语言来开发自己的程序。"}]},{"type":"element","tag":"h2","props":{"id":"如何优化冒泡排序"},"children":[{"type":"text","value":"如何优化冒泡排序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"冒泡排序是一种简单但不够高效的排序算法。为了优化冒泡排序，我们可以采用以下技术："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每次冒泡时，将最大值移动到数组末尾，并逐渐缩小冒泡范围。这样，每次冒泡时只需要比较一部分数组元素，可以大大减少冒泡次数，提高排序效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在每次冒泡时，记录最后一次交换的位置。这个位置之后的元素都已经有序，因此可以在下一次冒泡时跳过这些元素，减少无用的比较次数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在冒泡过程中，如果发现某一轮冒泡没有发生任何交换，那么说明数组已经有序，可以提前结束排序。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过以上技术，我们可以大大优化冒泡排序的性能，使它能够更快地完成排序任务。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5443f4{color:#0A3069}\n.ct-ac4102{color:#8250DF}\n.ct-d03a5c{color:#953800}\n.ct-64eb61{color:#0550AE}\n.ct-e9bc0d{color:#6E7781}\n.ct-0036ff{color:#24292F}\n.ct-68d151{color:#CF222E}\n.dark .ct-68d151{color:#FF7B72}\n.dark .ct-0036ff{color:#C9D1D9}\n.dark .ct-e9bc0d{color:#8B949E}\n.dark .ct-64eb61{color:#79C0FF}\n.dark .ct-d03a5c{color:#FFA657}\n.dark .ct-ac4102{color:#D2A8FF}\n.dark .ct-5443f4{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"二维动态数组的申请和删除","depth":2,"text":"二维动态数组的申请和删除"},{"id":"为什么要内存对齐","depth":2,"text":"为什么要内存对齐"},{"id":"将程序跳转到指定内存地址","depth":2,"text":"将程序跳转到指定内存地址"},{"id":"如何实现仿函数为什么需要通过继承自unary_function-或者-binary_function来实现仿函数","depth":2,"text":"如何实现仿函数？为什么需要通过继承自unary_function 或者 binary_function来实现仿函数？"},{"id":"什么是字节对齐为什么要采用这种机制","depth":2,"text":"什么是字节对齐，为什么要采用这种机制？"},{"id":"两种常用的实现隐式类类型转换的方式是什么如何避免隐式类型转换","depth":2,"text":"两种常用的实现隐式类类型转换的方式是什么？如何避免隐式类型转换？"},{"id":"面向对象的设计原则","depth":2,"text":"面向对象的设计原则"},{"id":"函数调用的具体实现","depth":2,"text":"函数调用的具体实现"},{"id":"构造函数可以调用虚函数吗语法上通过吗语义上可以通过吗","depth":2,"text":"构造函数可以调用虚函数吗？语法上通过吗？语义上可以通过吗？"},{"id":"拷贝构造函数作用及用途什么时候需要自定义拷贝构造函数","depth":2,"text":"拷贝构造函数作用及用途？什么时候需要自定义拷贝构造函数？"},{"id":"如果在构造函数和析构函数中抛出异常会发生什么什么是栈展开","depth":2,"text":"如果在构造函数和析构函数中抛出异常会发生什么？什么是栈展开？"},{"id":"virtual函数能声明为内联吗为什么","depth":2,"text":"virtual函数能声明为内联吗？为什么？"},{"id":"基类的析构函数不是虚函数会带来什么问题","depth":2,"text":"基类的析构函数不是虚函数，会带来什么问题？"},{"id":"子类析构时要调用父类的析构函数吗","depth":2,"text":"子类析构时要调用父类的析构函数吗"},{"id":"哪些类型的对象不可以作为union的成员为什么有这种限制","depth":2,"text":"哪些类型的对象不可以作为union的成员？为什么有这种限制？"},{"id":"c中的转化机制各适用于什么环境dynamic_cast转换失败时会出现什么情况","depth":2,"text":"C++中的转化机制？各适用于什么环境？dynamic_cast转换失败时，会出现什么情况？"},{"id":"为什么函数参数的入栈的顺序是从右往左","depth":2,"text":"为什么函数参数的入栈的顺序是从右往左"},{"id":"有哪几种强制类型转换以及使用场景","depth":2,"text":"有哪几种强制类型转换以及使用场景"},{"id":"如何避免循环依赖","depth":2,"text":"如何避免循环依赖"},{"id":"unique_ptr中stdmove作用","depth":2,"text":"unique_ptr中std::move()作用"},{"id":"main函数执行以前还会执行什么代码之后呢","depth":2,"text":"main函数执行以前，还会执行什么代码？之后呢？"},{"id":"c是不是类型安全的","depth":2,"text":"C++是不是类型安全的？"},{"id":"有哪几种情况只能用initialization-list而不能用assignment","depth":2,"text":"有哪几种情况只能用initialization list而不能用assignment?"},{"id":"list-和-set","depth":2,"text":"List 和 Set"},{"id":"写一个http网络服务器该如何写","depth":2,"text":"写一个http网络服务器，该如何写"},{"id":"谈一谈-c-的-this","depth":2,"text":"谈一谈 c++ 的 this"},{"id":"不同类型的语言有什么差异","depth":2,"text":"不同类型的语言有什么差异"},{"id":"如何优化冒泡排序","depth":2,"text":"如何优化冒泡排序"}]}},"_type":"markdown","_id":"content:1.cpp:tips:tip.md","_source":"content","_file":"1.cpp/tips/tip.md","_extension":"md"},{"_path":"/algorithm/_dir","_dir":"algorithm","_draft":false,"_partial":true,"_locale":"","title":"DSA","icon":"ion:calculator-sharp","_id":"content:2.algorithm:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/_dir.yml","_extension":"yml"},{"_path":"/algorithm","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"算法与数据结构","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"算法与数据结构"},"children":[{"type":"text","value":"算法与数据结构"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo 暂时未分类"}]}]},{"type":"element","tag":"h2","props":{"id":"综述"},"children":[{"type":"text","value":"综述"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"集合结构 Collection structures"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"线性结构 Linear structures"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"树形结构 Tree structures"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"图形结构 Graph structures"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"各类数据结构之间存在着一定的联系和差异，通常根据数据结构的特点和应用场景来进行分类。例如，线性结构可以用来存储和维护一组有序的数据，而树形结构则更适合用来表示层次关系或者实现查找和排序等操作。散列表和哈希表则是特殊的数据结构，可以实现快速插入、删除和查找操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are certain connections and differences between the different types of data structures. They are typically classified based on the characteristics and application scenarios of the data structure. For example, linear structures can be used to store and maintain a set of ordered data, while tree structures are more suitable for representing hierarchical relationships or implementing operations such as search and sort. Hash tables and hash maps are special data structures that can achieve fast insertion, deletion, and search operations."}]},{"type":"element","tag":"h2","props":{"id":"practice"},"children":[{"type":"text","value":"practice"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./leetcode"},"children":[{"type":"text","value":"LeetCode"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./complexity"},"children":[{"type":"text","value":"复杂度"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./qa"},"children":[{"type":"text","value":"QA"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"综述","depth":2,"text":"综述"},{"id":"practice","depth":2,"text":"practice"}]}},"_type":"markdown","_id":"content:2.algorithm:0.index.md","_source":"content","_file":"2.algorithm/0.index.md","_extension":"md"},{"_path":"/algorithm/complexity","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"复杂度","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"复杂度"},"children":[{"type":"text","value":"复杂度"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"查找"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"插入"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"删除"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"数组"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(1)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"有序数组"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"链表"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(1)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"有序链表"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"二叉树最坏"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(n)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"二叉树一般"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"平衡树"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(logn)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"哈希表"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(1)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(1)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"o(1)"}]}]}]}]},{"type":"element","tag":"table","props":{"style":"text-align: center"},"children":[{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"类别"}]},{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"排序方法"}]},{"type":"element","tag":"td","props":{"colSpan":"3"},"children":[{"type":"text","value":"时间复杂度"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"空间复杂度"}]},{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"稳定性"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"平均情况"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"最好情况"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"最坏情况"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"辅助存储"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"插入排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"直接插入"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Shell排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^1.3)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"不稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"选择排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"直接选择"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"不稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"堆排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"不稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"rowSpan":2},"children":[{"type":"text","value":"交换排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"冒泡排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(1)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"快速排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n^2)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"不稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"colSpan":"2"},"children":[{"type":"text","value":"归并排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(nlog2n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"稳定"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"colSpan":"2"},"children":[{"type":"text","value":"基数排序"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(d(r+n))"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(d(n+rd))"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(d(r+n))"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O(rd+n)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"稳定"}]}]}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基数排序的复杂度中，r代表关键字的基数，d代表长度，n代表关键字的个数"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:1.complexity.md","_source":"content","_file":"2.algorithm/1.complexity.md","_extension":"md"},{"_path":"/algorithm/leetcode/_dir","_dir":"leetcode","_draft":false,"_partial":true,"_locale":"","title":"LeetCode","icon":"simple-icons:leetcode","_id":"content:2.algorithm:2.leetcode:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/2.leetcode/_dir.yml","_extension":"yml"},{"_path":"/algorithm/leetcode","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"LeetCode","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"leetcode"},"children":[{"type":"text","value":"LeetCode"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多数元素 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"169"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://raw.githubusercontent.com/DrAugus/cpp/master/src/leetcode/169.cpp","rel":["nofollow"]},"children":[{"type":"text","value":"sol"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"按序打印 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1114"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"./lc-1114"},"children":[{"type":"text","value":"参考"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://raw.githubusercontent.com/DrAugus/cpp/master/src/leetcode/1114.cpp","rel":["nofollow"]},"children":[{"type":"text","value":"sol"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"爬楼梯 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"70"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"路径总和 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/path-sum/","rel":["nofollow"]},"children":[{"type":"text","value":"112"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Rand7()"}]},{"type":"text","value":" 实现 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Rand10()"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/implement-rand10-using-rand7/","rel":["nofollow"]},"children":[{"type":"text","value":"470"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"字符串解码 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/decode-string/","rel":["nofollow"]},"children":[{"type":"text","value":"394"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不同路径 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/unique-paths/","rel":["nofollow"]},"children":[{"type":"text","value":"62"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/unique-paths-ii/","rel":["nofollow"]},"children":[{"type":"text","value":"63"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/unique-paths-iii/","rel":["nofollow"]},"children":[{"type":"text","value":"980"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对角线遍历 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/diagonal-traverse/","rel":["nofollow"]},"children":[{"type":"text","value":"498"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有效的括号 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/valid-parentheses/","rel":["nofollow"]},"children":[{"type":"text","value":"678"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"青蛙跳台阶问题 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/qing-wa-tiao-tai-jie-wen-ti-lcof/","rel":["nofollow"]},"children":[{"type":"text","value":"剑指 Offer 10 II."}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"x 的平方根 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/sqrtx/","rel":["nofollow"]},"children":[{"type":"text","value":"69"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"旋转图像 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/rotate-image/","rel":["nofollow"]},"children":[{"type":"text","value":"48"}]}]}]},{"type":"element","tag":"h3","props":{"id":"子序列"},"children":[{"type":"text","value":"子序列"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最长公共子序列 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/longest-common-subsequence/","rel":["nofollow"]},"children":[{"type":"text","value":"1143"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最长上升子序列 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/longest-increasing-subsequence/","rel":["nofollow"]},"children":[{"type":"text","value":"300"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最大子序和 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/maximum-subarray/","rel":["nofollow"]},"children":[{"type":"text","value":"53"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最长和谐子序列 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/longest-harmonious-subsequence/comments/","rel":["nofollow"]},"children":[{"type":"text","value":"594"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最小覆盖子串 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/minimum-window-substring/","rel":["nofollow"]},"children":[{"type":"text","value":"76"}]}]}]},{"type":"element","tag":"h3","props":{"id":"二叉树"},"children":[{"type":"text","value":"二叉树"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉树的最近公共祖先 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/","rel":["nofollow"]},"children":[{"type":"text","value":"236"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从前序与中序遍历序列构造二叉树 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/","rel":["nofollow"]},"children":[{"type":"text","value":"105"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉树的锯齿形层次遍历 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/","rel":["nofollow"]},"children":[{"type":"text","value":"103"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉树的中序、后序遍历 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/","rel":["nofollow"]},"children":[{"type":"text","value":"106"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"翻转二叉树 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/invert-binary-tree/solution/fan-zhuan-er-cha-shu-by-leetcode/","rel":["nofollow"]},"children":[{"type":"text","value":"226"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉树的层序遍历 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/binary-tree-level-order-traversal/","rel":["nofollow"]},"children":[{"type":"text","value":"102"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/solution/","rel":["nofollow"]},"children":[{"type":"text","value":"107"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉搜索树的第k大节点 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/","rel":["nofollow"]},"children":[{"type":"text","value":"剑指 Offer 54"}]}]}]},{"type":"element","tag":"h3","props":{"id":"栈和队列"},"children":[{"type":"text","value":"栈和队列"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用栈实现队列 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/implement-queue-using-stacks/solution/","rel":["nofollow"]},"children":[{"type":"text","value":"232"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用队列实现栈 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/implement-stack-using-queues/","rel":["nofollow"]},"children":[{"type":"text","value":"225"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最大栈 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/max-stack/solution/716-zui-da-zhan-by-klb/","rel":["nofollow"]},"children":[{"type":"text","value":"716"}]}]}]},{"type":"element","tag":"h3","props":{"id":"数组"},"children":[{"type":"text","value":"数组"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"旋转数组 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/rotate-array/","rel":["nofollow"]},"children":[{"type":"text","value":"189"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数组中的第 K 个最大元素 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/kth-largest-element-in-an-array/","rel":["nofollow"]},"children":[{"type":"text","value":"215"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"合并两个有序数组 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/merge-sorted-array/","rel":["nofollow"]},"children":[{"type":"text","value":"88"}]}]}]},{"type":"element","tag":"h3","props":{"id":"链表"},"children":[{"type":"text","value":"链表"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"链表倒数第K个数 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/kth-node-from-end-of-list-lcci/","rel":["nofollow"]},"children":[{"type":"text","value":"面试题02.02"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"删除排序链表中的重复元素 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/","rel":["nofollow"]},"children":[{"type":"text","value":"83"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/","rel":["nofollow"]},"children":[{"type":"text","value":"82"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"删除链表的倒数第N个节点 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/","rel":["nofollow"]},"children":[{"type":"text","value":"19"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"环形链表 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/linked-list-cycle/","rel":["nofollow"]},"children":[{"type":"text","value":"141"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"合并两个有序链表 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/merge-two-sorted-lists/","rel":["nofollow"]},"children":[{"type":"text","value":"21"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"反转链表 "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/fan-zhuan-lian-biao-lcof/","rel":["nofollow"]},"children":[{"type":"text","value":"剑指Offer24"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://leetcode-cn.com/problems/reverse-linked-list-ii/","rel":["nofollow"]},"children":[{"type":"text","value":"92"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"子序列","depth":3,"text":"子序列"},{"id":"二叉树","depth":3,"text":"二叉树"},{"id":"栈和队列","depth":3,"text":"栈和队列"},{"id":"数组","depth":3,"text":"数组"},{"id":"链表","depth":3,"text":"链表"}]}},"_type":"markdown","_id":"content:2.algorithm:2.leetcode:0.index.md","_source":"content","_file":"2.algorithm/2.leetcode/0.index.md","_extension":"md"},{"_path":"/algorithm/leetcode/lc-1114","_dir":"leetcode","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"LC1114 解题方案","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"lc1114-解题方案"},"children":[{"type":"text","value":"LC1114 解题方案"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://leetcode.cn/problems/print-in-order/solution/c-hu-chi-suo-tiao-jian-bian-liang-xin-hao-liang-yi/","rel":["nofollow"]},"children":[{"type":"text","value":"参考"}]}]}]},{"type":"element","tag":"h2","props":{"id":"互斥锁"},"children":[{"type":"element","tag":"a","props":{"href":"../cpp/mutex"},"children":[{"type":"text","value":"互斥锁"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"互斥锁是用来防止多个线程同时访问共享资源对象的机制，在同一时间只有一个线程可以拥有一个特定的锁对象，\n其他线程如果尝试获取锁会阻塞直到锁资源被释放或直接返回失败。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mutex 对象本身是不保护任何数据的，我们只是通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mutex"}]},{"type":"text","value":" 的机制来保护数据被同时访问，\n所以最好使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lock_guard"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unique_lock"}]},{"type":"text","value":" 提供的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RAII"}]},{"type":"text","value":" 机制来管理 mutex 对象，\n而不是直接操作 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mutex"}]},{"type":"text","value":" 对象。其中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lock_guard"}]},{"type":"text","value":" 只拥有构造和析构函数，用来实现 RAII 机制；\n而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unique_lock"}]},{"type":"text","value":" 是一个完整的 mutex 所有权包装器，封装了所有 mutex 的函数："}]},{"type":"element","tag":"code","props":{"code":"class Foo {\n    mutex mtx_1, mtx_2;\n    unique_lock<mutex> lock_1, lock_2;\npublic:\n    Foo() : lock_1(mtx_1, try_to_lock), lock_2(mtx_2, try_to_lock) {\n    }\n\n    void first(function<void()> printFirst) {\n        printFirst();\n        lock_1.unlock();\n    }\n\n    void second(function<void()> printSecond) {\n        lock_guard<mutex> guard(mtx_1);\n        printSecond();\n        lock_2.unlock();\n    }\n\n    void third(function<void()> printThird) {\n        lock_guard<mutex> guard(mtx_2);\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    mutex mtx_1, mtx_2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" lock_1, lock_2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"() : "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"lock_1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx_1, try_to_lock), "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"lock_2"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx_2, try_to_lock) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        lock_1."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        lock_guard"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"guard"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx_1);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        lock_2."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"unlock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        lock_guard"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"guard"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx_2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"条件变量"},"children":[{"type":"text","value":"条件变量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"条件变量一般和互斥锁搭配使用，互斥锁用于上锁，条件变量用于在多线程环境中等待特定事件发生。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"针对这道题我们可以分别在 first 和 second 执行完之后修改特定变量的值（例如修改成员变量 k 为特定值），然后通知条件变量，唤醒下一个函数继续执行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable"}]},{"type":"text","value":" 是一种用来同时阻塞多个线程的同步原语（synchronization primitive），"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable"}]},{"type":"text","value":" 必须和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::unique_lock"}]},{"type":"text","value":" 搭配使用："}]},{"type":"element","tag":"code","props":{"code":"class Foo {\n    condition_variable cv;\n    mutex mtx;\n    int k = 0;\npublic:\n    void first(function<void()> printFirst) {\n        printFirst();\n        k = 1;\n        cv.notify_all();    // 通知其他所有在等待唤醒队列中的线程\n    }\n\n    void second(function<void()> printSecond) {\n        unique_lock<mutex> lock(mtx);   // lock mtx\n        cv.wait(lock, [this](){ return k == 1; });  // unlock mtx，并阻塞等待唤醒通知，需要满足 k == 1 才能继续运行\n        printSecond();\n        k = 2;\n        cv.notify_one();    // 随机通知一个（unspecified）在等待唤醒队列中的线程\n    }\n\n    void third(function<void()> printThird) {\n        unique_lock<mutex> lock(mtx);   // lock mtx\n        cv.wait(lock, [this](){ return k == 2; });  // unlock mtx，并阻塞等待唤醒通知，需要满足 k == 2 才能继续运行\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    condition_variable cv;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    mutex mtx;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" k "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        k "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        cv."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"notify_all"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"    // 通知其他所有在等待唤醒队列中的线程"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx);"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"   // lock mtx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        cv."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(lock, ["}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"](){ "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" k "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"; });"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"  // unlock mtx，并阻塞等待唤醒通知，需要满足 k == 1 才能继续运行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        k "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        cv."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"notify_one"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"    // 随机通知一个（unspecified）在等待唤醒队列中的线程"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(mtx);"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"   // lock mtx"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        cv."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(lock, ["}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"](){ "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" k "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"; });"}]},{"type":"element","tag":"span","props":{"class":"ct-2eb74c"},"children":[{"type":"text","value":"  // unlock mtx，并阻塞等待唤醒通知，需要满足 k == 2 才能继续运行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable::wait"}]},{"type":"text","value":" 函数会执行三个操作：\n先将当前线程加入到等待唤醒队列，然后 unlock mutex 对象，最后阻塞当前线程。\n它有两种重载形式，第一种只接收一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::mutex"}]},{"type":"text","value":" 对象，\n此时线程一旦接受到唤醒信号（通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable::notify_one"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::condition_variable::notify_all"}]},{"type":"text","value":" 进行唤醒），\n则无条件立即被唤醒，并重新 lock mutex；\n第二种重载形式还会接收一个条件（一般是 variable 或者 std::function），即只有当满足这个条件时，当前线程才能被唤醒，\n它在 gcc 中的实现也很简单，只是在第一种重载形式之外加了一个 while 循环来保证只有在满足给定条件后才被唤醒，否则重新调用 wait 函数："}]},{"type":"element","tag":"code","props":{"code":"template<typename _Predicate>\nvoid wait(unique_lock<mutex>& __lock, _Predicate __p)\n{\n    while (!__p())\n        wait(__lock);\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"_Predicate"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"__lock"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"_Predicate"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"__p"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"__p"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"(__lock);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"信号量"},"children":[{"type":"text","value":"信号量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"信号量是用来实现对共享资源的同步访问的机制，其使用方法和条件变量类似，都是通过主动等待和主动唤醒来实现的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"c++ 标准库中并没有信号量的实现和封装，可以用 c 语言提供的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<sempahore.h>"}]},{"type":"text","value":" 库来解题 ："}]},{"type":"element","tag":"code","props":{"code":"#include <semaphore.h>\n\nclass Foo {\nprivate:\n    sem_t sem_1, sem_2;\n\npublic:\n    Foo() {\n        sem_init(&sem_1, 0, 0), sem_init(&sem_2, 0, 0);\n    }\n\n    void first(function<void()> printFirst) {\n        printFirst();\n        sem_post(&sem_1);\n    }\n\n    void second(function<void()> printSecond) {\n        sem_wait(&sem_1);\n        printSecond();\n        sem_post(&sem_2);\n    }\n\n    void third(function<void()> printThird) {\n        sem_wait(&sem_2);\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8697ca"},"children":[{"type":"text","value":"<semaphore.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"sem_t"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" sem_1, sem_2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_init"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_1, "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_init"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_2, "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_post"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_1);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_1);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_post"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sem_wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"sem_2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"异步操作"},"children":[{"type":"text","value":"异步操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"异步操作是一种，在不需要等待被调用方返回结果之前，就让操作继续进行下去的方法。针对这道题可以使用基于 future/promise 的异步编程模型。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"future 和 promise 起源于函数式编程，其目的是将值（future）和计算方式（promise）分离，使得 promise 可以异步地修改 future，从而提高代码的可读性，并减少通信延迟。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 是用来获取异步操作结果的模板类；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::packaged_task"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::async"}]},{"type":"text","value":" 都可以进行异步操作，\n并拥有一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象，用来存储它们所进行的异步操作返回或设置的值（或异常），\n这个值会在将来的某一个时间点，通过某种机制被修改后，保存在其对应的 std::future 对象中："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise"}]},{"type":"text","value":"，可以通过调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::promise::set_value"}]},{"type":"text","value":" 来设置值并通知 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象："}]},{"type":"element","tag":"code","props":{"code":"class Foo {\n    promise<void> pro1, pro2;\n\npublic:\n    void first(function<void()> printFirst) {\n        printFirst();\n        pro1.set_value();\n    }\n\n    void second(function<void()> printSecond) {\n        pro1.get_future().wait();\n        printSecond();\n        pro2.set_value();\n    }\n\n    void third(function<void()> printThird) {\n        pro2.get_future().wait();\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    promise"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<void>"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" pro1, pro2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pro1."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"set_value"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pro1."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"get_future"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pro2."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"set_value"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pro2."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"get_future"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future<T>::wait"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future<T>::get"}]},{"type":"text","value":" 都会阻塞地等待拥有它的 promise 对象返回其所存储的值，\n后者还会获取 T 类型的对象；这道题只需要利用到异步通信的机制，所以并没有返回任何实际的值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::packaged_task"}]},{"type":"text","value":" 是一个拥有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象的 functor，将一系列操作进行了封装，\n在运行结束之后会将返回值保存在其所拥有的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future<T>"}]},{"type":"text","value":" 对象中；同样地，在这道题中只需要利用到其函数运行结束之后通知 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::future"}]},{"type":"text","value":" 对象的机制："}]},{"type":"element","tag":"code","props":{"code":"class Foo {\n    function<void()> task = []() {};\n    packaged_task<void()> pt_1{ task }, pt_2{ task };\n\npublic:\n    void first(function<void()> printFirst) {\n        printFirst();\n        pt_1();\n    }\n\n    void second(function<void()> printSecond) {\n        pt_1.get_future().wait();\n        printSecond();\n        pt_2();\n    }\n\n    void third(function<void()> printThird) {\n        pt_2.get_future().wait();\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    function"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" task "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" []() {};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    packaged_task"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" pt_1{ task }, pt_2{ task };"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"pt_1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pt_1."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"get_future"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"pt_2"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        pt_2."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"get_future"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"原子操作"},"children":[{"type":"element","tag":"a","props":{"href":"../cpp/atomic"},"children":[{"type":"text","value":"原子操作"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们平时进行的数据修改都是非原子操作，如果多个线程同时以非原子操作的方式修改同一个对象可能会发生数据争用， 从而导致未定义行为；\n而原子操作能够保证多个线程顺序访问，不会导致数据争用，其执行时没有任何其它线程能够修改相同的原子对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"针对这道题，我们可以让 second 和 third 函数等待原子变量被修改为某个值后再执行，然后分别在 first 和 second 函数中来修改这个原子变量。"}]},{"type":"element","tag":"code","props":{"code":"class Foo {\n    std::atomic<bool> a{ false };\n    std::atomic<bool> b{ false };\npublic:\n    void first(function<void()> printFirst) {\n        printFirst();\n        a = true;\n    }\n\n    void second(function<void()> printSecond) {\n        while (!a)\n            this_thread::sleep_for(chrono::milliseconds(1));\n        printSecond();\n        b = true;\n    }\n\n    void third(function<void()> printThird) {\n        while (!b)\n            this_thread::sleep_for(chrono::milliseconds(1));\n        printThird();\n    }\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"Foo"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<bool>"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" a{ "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" };"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"<bool>"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" b{ "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" };"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printFirst"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        a "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"second"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"a)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"milliseconds"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printSecond"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        b "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"third"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"()> "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a754d8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"b)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"this_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"sleep_for"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e31d1a"},"children":[{"type":"text","value":"chrono"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"milliseconds"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa63a1"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b98fd4"},"children":[{"type":"text","value":"printThird"}]},{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49aedb"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"值得注意的是，原子操作的实现跟处理器和操作系统内核相关，因此 c++ 标准并没有规定 atomic 的实现是否是无锁的（lock-free），\n只规定了需要提供一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"is_lock_free()"}]},{"type":"text","value":" 来查询当前编译器对 atomic 的实现是否是无锁的。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8697ca{color:#0A3069}\n.ct-2eb74c{color:#6E7781}\n.ct-aa63a1{color:#0550AE}\n.ct-b98fd4{color:#8250DF}\n.ct-e31d1a{color:#953800}\n.ct-49aedb{color:#24292F}\n.ct-a754d8{color:#CF222E}\n.dark .ct-a754d8{color:#FF7B72}\n.dark .ct-49aedb{color:#C9D1D9}\n.dark .ct-e31d1a{color:#FFA657}\n.dark .ct-b98fd4{color:#D2A8FF}\n.dark .ct-aa63a1{color:#79C0FF}\n.dark .ct-2eb74c{color:#8B949E}\n.dark .ct-8697ca{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"互斥锁","depth":2,"text":"互斥锁"},{"id":"条件变量","depth":2,"text":"条件变量"},{"id":"信号量","depth":2,"text":"信号量"},{"id":"异步操作","depth":2,"text":"异步操作"},{"id":"原子操作","depth":2,"text":"原子操作"}]}},"_type":"markdown","_id":"content:2.algorithm:2.leetcode:lc-1114.md","_source":"content","_file":"2.algorithm/2.leetcode/lc-1114.md","_extension":"md"},{"_path":"/algorithm/collection/_dir","_dir":"collection","_draft":false,"_partial":true,"_locale":"","title":"Collection","icon":"carbon:data-collection","_id":"content:2.algorithm:5.collection:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/5.collection/_dir.yml","_extension":"yml"},{"_path":"/algorithm/collection","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"集合结构","description":"Collection structures","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"集合结构"},"children":[{"type":"text","value":"集合结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Collection structures"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:5.collection:0.index.md","_source":"content","_file":"2.algorithm/5.collection/0.index.md","_extension":"md"},{"_path":"/algorithm/collection/hash","_dir":"collection","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Hash Table","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"hash-table"},"children":[{"type":"text","value":"Hash Table"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:5.collection:hash.md","_source":"content","_file":"2.algorithm/5.collection/hash.md","_extension":"md"},{"_path":"/algorithm/collection/qa","_dir":"collection","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:5.collection:qa.md","_source":"content","_file":"2.algorithm/5.collection/qa.md","_extension":"md"},{"_path":"/algorithm/linear/_dir","_dir":"linear","_draft":false,"_partial":true,"_locale":"","title":"Linear","icon":"material-symbols:linear-scale","_id":"content:2.algorithm:6.linear:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/6.linear/_dir.yml","_extension":"yml"},{"_path":"/algorithm/linear","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"线性结构","description":"Linear structures","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"线性结构"},"children":[{"type":"text","value":"线性结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linear structures"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:0.index.md","_source":"content","_file":"2.algorithm/6.linear/0.index.md","_extension":"md"},{"_path":"/algorithm/linear/array","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"array","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"array"},"children":[{"type":"text","value":"array"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:array.md","_source":"content","_file":"2.algorithm/6.linear/array.md","_extension":"md"},{"_path":"/algorithm/linear/heap","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"heap","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"heap"},"children":[{"type":"text","value":"heap"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:heap.md","_source":"content","_file":"2.algorithm/6.linear/heap.md","_extension":"md"},{"_path":"/algorithm/linear/linked-list","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Linked list","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linked-list"},"children":[{"type":"text","value":"Linked list"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:linked-list.md","_source":"content","_file":"2.algorithm/6.linear/linked-list.md","_extension":"md"},{"_path":"/algorithm/linear/qa","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h2","props":{"id":"有序链表插入的时间复杂度是多少"},"children":[{"type":"text","value":"有序链表插入的时间复杂度是多少？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在有序链表中插入一个元素的时间复杂度通常是 O(n)。这是因为，在有序链表中插入一个元素需要遍历链表，直到找到插入位置。因此，插入的时间复杂度与链表的长度成正比。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在平均情况下，插入一个元素需要遍历链表的一半，因此平均时间复杂度为 O(n)。但是，在最坏情况下，插入元素需要遍历整个链表，此时的时间复杂度为 O(n)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说，插入操作的时间复杂度为 O(n)，具体取决于链表的长度以及插入元素的位置。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"有序链表插入的时间复杂度是多少","depth":2,"text":"有序链表插入的时间复杂度是多少？"}]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:qa.md","_source":"content","_file":"2.algorithm/6.linear/qa.md","_extension":"md"},{"_path":"/algorithm/linear/queue","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"queue","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"queue"},"children":[{"type":"text","value":"queue"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:queue.md","_source":"content","_file":"2.algorithm/6.linear/queue.md","_extension":"md"},{"_path":"/algorithm/linear/stack","_dir":"linear","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"stack","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"stack"},"children":[{"type":"text","value":"stack"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:6.linear:stack.md","_source":"content","_file":"2.algorithm/6.linear/stack.md","_extension":"md"},{"_path":"/algorithm/tree/_dir","_dir":"tree","_draft":false,"_partial":true,"_locale":"","title":"Tree","icon":"carbon:tree-view","_id":"content:2.algorithm:7.tree:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/7.tree/_dir.yml","_extension":"yml"},{"_path":"/algorithm/tree","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"树形结构","description":"Tree structures","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"树形结构"},"children":[{"type":"text","value":"树形结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tree structures"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:0.index.md","_source":"content","_file":"2.algorithm/7.tree/0.index.md","_extension":"md"},{"_path":"/algorithm/tree/b-tree","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"B tree","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"b-tree"},"children":[{"type":"text","value":"B tree"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:b-tree.md","_source":"content","_file":"2.algorithm/7.tree/b-tree.md","_extension":"md"},{"_path":"/algorithm/tree/balanced-tree","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Balanced Tree","description":"平衡树","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"balanced-tree"},"children":[{"type":"text","value":"Balanced Tree"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"平衡树"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:balanced-tree.md","_source":"content","_file":"2.algorithm/7.tree/balanced-tree.md","_extension":"md"},{"_path":"/algorithm/tree/qa","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h2","props":{"id":"avl-树和红黑树有什么区别"},"children":[{"type":"text","value":"AVL 树和红黑树有什么区别？"}]},{"type":"element","tag":"h2","props":{"id":"红黑树是怎么实现平衡的它的优点是什么"},"children":[{"type":"text","value":"红黑树是怎么实现平衡的？它的优点是什么？"}]},{"type":"element","tag":"h2","props":{"id":"二叉搜索树和平衡二叉树红黑树的区别"},"children":[{"type":"text","value":"二叉搜索树和平衡二叉树，红黑树的区别"}]},{"type":"element","tag":"h2","props":{"id":"红黑树删除数据是怎么调整的"},"children":[{"type":"text","value":"红黑树删除数据是怎么调整的"}]},{"type":"element","tag":"h2","props":{"id":"什么时候要用到红黑树"},"children":[{"type":"text","value":"什么时候要用到红黑树"}]},{"type":"element","tag":"h2","props":{"id":"红黑树二叉树b树各种树的区别"},"children":[{"type":"text","value":"红黑树、二叉树、B树，各种树的区别"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"avl-树和红黑树有什么区别","depth":2,"text":"AVL 树和红黑树有什么区别？"},{"id":"红黑树是怎么实现平衡的它的优点是什么","depth":2,"text":"红黑树是怎么实现平衡的？它的优点是什么？"},{"id":"二叉搜索树和平衡二叉树红黑树的区别","depth":2,"text":"二叉搜索树和平衡二叉树，红黑树的区别"},{"id":"红黑树删除数据是怎么调整的","depth":2,"text":"红黑树删除数据是怎么调整的"},{"id":"什么时候要用到红黑树","depth":2,"text":"什么时候要用到红黑树"},{"id":"红黑树二叉树b树各种树的区别","depth":2,"text":"红黑树、二叉树、B树，各种树的区别"}]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:qa.md","_source":"content","_file":"2.algorithm/7.tree/qa.md","_extension":"md"},{"_path":"/algorithm/tree/rb-tree","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Rb tree","description":"红黑树","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rb-tree"},"children":[{"type":"text","value":"Rb tree"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"红黑树"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:rb-tree.md","_source":"content","_file":"2.algorithm/7.tree/rb-tree.md","_extension":"md"},{"_path":"/algorithm/tree/trie","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Trie","description":"字典树","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"trie"},"children":[{"type":"text","value":"Trie"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字典树"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:trie.md","_source":"content","_file":"2.algorithm/7.tree/trie.md","_extension":"md"},{"_path":"/algorithm/tree/union-find","_dir":"tree","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Union-find","description":"并查集","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"union-find"},"children":[{"type":"text","value":"Union-find"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"并查集"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:7.tree:union-find.md","_source":"content","_file":"2.algorithm/7.tree/union-find.md","_extension":"md"},{"_path":"/algorithm/graph/_dir","_dir":"graph","_draft":false,"_partial":true,"_locale":"","title":"Graph","icon":"ph:graph","_id":"content:2.algorithm:8.graph:_dir.yml","_type":"yaml","_source":"content","_file":"2.algorithm/8.graph/_dir.yml","_extension":"yml"},{"_path":"/algorithm/graph","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"图形结构","description":"Graph structures","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"图形结构"},"children":[{"type":"text","value":"图形结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Graph structures"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:8.graph:0.index.md","_source":"content","_file":"2.algorithm/8.graph/0.index.md","_extension":"md"},{"_path":"/algorithm/graph/qa","_dir":"graph","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:8.graph:qa.md","_source":"content","_file":"2.algorithm/8.graph/qa.md","_extension":"md"},{"_path":"/algorithm/qa","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h2","props":{"id":"实现-lru-算法实现带有过期时间的-lru-算法简述-lru-算法及其实现方式"},"children":[{"type":"text","value":"实现 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LRU"}]},{"type":"text","value":" 算法，实现带有过期时间的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LRU"}]},{"type":"text","value":" 算法，简述 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LRU"}]},{"type":"text","value":" 算法及其实现方式"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.bookstack.cn/read/fucking-algorithm/%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E7%B3%BB%E5%88%97-LRU%E7%AE%97%E6%B3%95.md","rel":["nofollow"]},"children":[{"type":"text","value":"如何实现LRU算法"}]}]}]},{"type":"element","tag":"h2","props":{"id":"什么是排序算法中的稳定性"},"children":[{"type":"text","value":"什么是排序算法中的稳定性？"}]},{"type":"element","tag":"h2","props":{"id":"实现快速排序"},"children":[{"type":"text","value":"实现快速排序"}]},{"type":"element","tag":"h3","props":{"id":"使用递归及非递归两种方式实现快速排序"},"children":[{"type":"text","value":"使用递归及非递归两种方式实现快速排序"}]},{"type":"element","tag":"h3","props":{"id":"快速排序的空间复杂度是多少时间复杂度的最好最坏的情况是多少有哪些优化方案"},"children":[{"type":"text","value":"快速排序的空间复杂度是多少？时间复杂度的最好最坏的情况是多少，有哪些优化方案"}]},{"type":"element","tag":"h2","props":{"id":"如何从一个数组输出随机数组洗牌算法"},"children":[{"type":"text","value":"如何从一个数组输出随机数组（洗牌算法）"}]},{"type":"element","tag":"h2","props":{"id":"手写无锁队列"},"children":[{"type":"text","value":"手写无锁队列"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以使用原子操作和内存屏障来保证线程安全"}]},{"type":"element","tag":"h2","props":{"id":"如何实现大数运算"},"children":[{"type":"text","value":"如何实现大数运算"}]},{"type":"element","tag":"h2","props":{"id":"给定一个包含-40亿-个无符号整数的大型文件使用最多-1g-内存对此文件进行排序"},"children":[{"type":"text","value":"给定一个包含 40亿 个无符号整数的大型文件，使用最多 1G 内存，对此文件进行排序"}]},{"type":"element","tag":"h2","props":{"id":"10亿个数中如何高效地找到最大的一个数以及最大的第-k-个数"},"children":[{"type":"text","value":"10亿个数中如何高效地找到最大的一个数以及最大的第 K 个数"}]},{"type":"element","tag":"h2","props":{"id":"两个-10g-大小包含-url-数据的文件最多使用-1g-内存将这两个文件合并并找到相同的-url"},"children":[{"type":"text","value":"两个 10G 大小包含 URL 数据的文件，最多使用 1G 内存，将这两个文件合并，并找到相同的 URL"}]},{"type":"element","tag":"h2","props":{"id":"给定-100g-的-url-磁盘数据使用最多-1g-内存统计出现频率最高的-top-k-个-url"},"children":[{"type":"text","value":"给定 100G 的 URL 磁盘数据，使用最多 1G 内存，统计出现频率最高的 Top K 个 URL"}]},{"type":"element","tag":"h2","props":{"id":"10亿条数据包括-id上线时间下线时间请绘制每一秒在线人数的曲线图"},"children":[{"type":"text","value":"10亿条数据包括 id，上线时间，下线时间，请绘制每一秒在线人数的曲线图"}]},{"type":"element","tag":"h2","props":{"id":"两个文件包含无序的数字数字的大小范围是0500w左右如何求两个文件中的重复的数据"},"children":[{"type":"text","value":"两个文件包含无序的数字，数字的大小范围是0500w左右。如何求两个文件中的重复的数据？"}]},{"type":"element","tag":"h2","props":{"id":"1000-台机器每台机器-1000个-文件每个文件存储了-10亿个-整数如何找到其中最小的-1000个-值"},"children":[{"type":"text","value":"1000 台机器，每台机器 1000个 文件，每个文件存储了 10亿个 整数，如何找到其中最小的 1000个 值？"}]},{"type":"element","tag":"h2","props":{"id":"如何随机生成不重复的-10个100-以内的数字"},"children":[{"type":"text","value":"如何随机生成不重复的 10个100 以内的数字？"}]},{"type":"element","tag":"h2","props":{"id":"如何通过一个不均匀的硬币得到公平的结果"},"children":[{"type":"text","value":"如何通过一个不均匀的硬币得到公平的结果？"}]},{"type":"element","tag":"h2","props":{"id":"常用的限流算法有哪些简述令牌桶算法原理"},"children":[{"type":"text","value":"常用的限流算法有哪些？简述令牌桶算法原理"}]},{"type":"element","tag":"h2","props":{"id":"简述布隆过滤器原理及其使用场景"},"children":[{"type":"text","value":"简述布隆过滤器原理及其使用场景"}]},{"type":"element","tag":"h2","props":{"id":"hash-表常见操作的时间复杂度是多少遇到-hash-冲突是如何解决的"},"children":[{"type":"text","value":"Hash 表常见操作的时间复杂度是多少？遇到 Hash 冲突是如何解决的？"}]},{"type":"element","tag":"h2","props":{"id":"什么是跳表"},"children":[{"type":"text","value":"什么是跳表"}]},{"type":"element","tag":"h2","props":{"id":"一个两层的跳表查询时可以降低倒多大的复杂度"},"children":[{"type":"text","value":"一个两层的跳表查询时可以降低倒多大的复杂度"}]},{"type":"element","tag":"h2","props":{"id":"如何计算循环链表的长度"},"children":[{"type":"text","value":"如何计算循环链表的长度"}]},{"type":"element","tag":"h2","props":{"id":"求字符串最长不重复字串不能用任何数据结构"},"children":[{"type":"text","value":"求字符串最长不重复字串，不能用任何数据结构"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"实现-lru-算法实现带有过期时间的-lru-算法简述-lru-算法及其实现方式","depth":2,"text":"实现 LRU 算法，实现带有过期时间的 LRU 算法，简述 LRU 算法及其实现方式"},{"id":"什么是排序算法中的稳定性","depth":2,"text":"什么是排序算法中的稳定性？"},{"id":"实现快速排序","depth":2,"text":"实现快速排序","children":[{"id":"使用递归及非递归两种方式实现快速排序","depth":3,"text":"使用递归及非递归两种方式实现快速排序"},{"id":"快速排序的空间复杂度是多少时间复杂度的最好最坏的情况是多少有哪些优化方案","depth":3,"text":"快速排序的空间复杂度是多少？时间复杂度的最好最坏的情况是多少，有哪些优化方案"}]},{"id":"如何从一个数组输出随机数组洗牌算法","depth":2,"text":"如何从一个数组输出随机数组（洗牌算法）"},{"id":"手写无锁队列","depth":2,"text":"手写无锁队列"},{"id":"如何实现大数运算","depth":2,"text":"如何实现大数运算"},{"id":"给定一个包含-40亿-个无符号整数的大型文件使用最多-1g-内存对此文件进行排序","depth":2,"text":"给定一个包含 40亿 个无符号整数的大型文件，使用最多 1G 内存，对此文件进行排序"},{"id":"10亿个数中如何高效地找到最大的一个数以及最大的第-k-个数","depth":2,"text":"10亿个数中如何高效地找到最大的一个数以及最大的第 K 个数"},{"id":"两个-10g-大小包含-url-数据的文件最多使用-1g-内存将这两个文件合并并找到相同的-url","depth":2,"text":"两个 10G 大小包含 URL 数据的文件，最多使用 1G 内存，将这两个文件合并，并找到相同的 URL"},{"id":"给定-100g-的-url-磁盘数据使用最多-1g-内存统计出现频率最高的-top-k-个-url","depth":2,"text":"给定 100G 的 URL 磁盘数据，使用最多 1G 内存，统计出现频率最高的 Top K 个 URL"},{"id":"10亿条数据包括-id上线时间下线时间请绘制每一秒在线人数的曲线图","depth":2,"text":"10亿条数据包括 id，上线时间，下线时间，请绘制每一秒在线人数的曲线图"},{"id":"两个文件包含无序的数字数字的大小范围是0500w左右如何求两个文件中的重复的数据","depth":2,"text":"两个文件包含无序的数字，数字的大小范围是0500w左右。如何求两个文件中的重复的数据？"},{"id":"1000-台机器每台机器-1000个-文件每个文件存储了-10亿个-整数如何找到其中最小的-1000个-值","depth":2,"text":"1000 台机器，每台机器 1000个 文件，每个文件存储了 10亿个 整数，如何找到其中最小的 1000个 值？"},{"id":"如何随机生成不重复的-10个100-以内的数字","depth":2,"text":"如何随机生成不重复的 10个100 以内的数字？"},{"id":"如何通过一个不均匀的硬币得到公平的结果","depth":2,"text":"如何通过一个不均匀的硬币得到公平的结果？"},{"id":"常用的限流算法有哪些简述令牌桶算法原理","depth":2,"text":"常用的限流算法有哪些？简述令牌桶算法原理"},{"id":"简述布隆过滤器原理及其使用场景","depth":2,"text":"简述布隆过滤器原理及其使用场景"},{"id":"hash-表常见操作的时间复杂度是多少遇到-hash-冲突是如何解决的","depth":2,"text":"Hash 表常见操作的时间复杂度是多少？遇到 Hash 冲突是如何解决的？"},{"id":"什么是跳表","depth":2,"text":"什么是跳表"},{"id":"一个两层的跳表查询时可以降低倒多大的复杂度","depth":2,"text":"一个两层的跳表查询时可以降低倒多大的复杂度"},{"id":"如何计算循环链表的长度","depth":2,"text":"如何计算循环链表的长度"},{"id":"求字符串最长不重复字串不能用任何数据结构","depth":2,"text":"求字符串最长不重复字串，不能用任何数据结构"}]}},"_type":"markdown","_id":"content:2.algorithm:qa.md","_source":"content","_file":"2.algorithm/qa.md","_extension":"md"},{"_path":"/algorithm/recursion","_dir":"algorithm","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Recursion","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"recursion"},"children":[{"type":"text","value":"Recursion"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The developer should be very careful with recursion as it can be quite easy to slip into writing a function which never terminates, or one that uses excess amounts of memory or processor power. However, when written correctly recursion can be a very efficient and mathematically-elegant approach to programming."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.algorithm:recursion.md","_source":"content","_file":"2.algorithm/recursion.md","_extension":"md"},{"_path":"/code/_dir","_dir":"code","_draft":false,"_partial":true,"_locale":"","title":"CODE","icon":"mdi:code-tags-check","_id":"content:3.code:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/_dir.yml","_extension":"yml"},{"_path":"/code","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"今天码了 🐎","description":"","icon":"fxemoji:horseracing","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"DrAugus's Github chart","src":"https://ghchart.rshah.org/draugus"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:0.index.md","_source":"content","_file":"3.code/0.index.md","_extension":"md"},{"_path":"/code/future/_dir","_dir":"future","_draft":false,"_partial":true,"_locale":"","title":"未来路线计划","icon":"flat-color-icons:todo-list","_id":"content:3.code:1.future:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/1.future/_dir.yml","_extension":"yml"},{"_path":"/code/future/future","_dir":"future","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Future and Goal","description":"Qualifications\nYou should also bring the following:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"future-and-goal"},"children":[{"type":"text","value":"Future and Goal"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Qualifications"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nYou should also bring the following:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Bachelor’s degree in Computer Science or similar program; Master’s degree is preferred."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Minimum 1 year of software development experience with real world knowledge of data structures, algorithms, operation\nsystems, and other fundamental concepts."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Strong C++ skills in client or server-side development."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Familiarity with SQL, RDBMS, JNI, JDBC or web services is a good plus."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Strong debugging, analytical, and problem-solving skills."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Good communication in English, team-oriented individual, energetic, strong learning ability, result and delivery\noriented."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:1.future:future.md","_source":"content","_file":"3.code/1.future/future.md","_extension":"md"},{"_path":"/code/future/practice","_dir":"future","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"题库每日","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"题库每日"},"children":[{"type":"text","value":"题库每日"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.hackerrank.com/dashboard","rel":["nofollow"]},"children":[{"type":"text","value":"hacker rank"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"?"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:1.future:practice.md","_source":"content","_file":"3.code/1.future/practice.md","_extension":"md"},{"_path":"/code/future/prepare","_dir":"future","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Prepare","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"prepare"},"children":[{"type":"text","value":"Prepare"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What are you preparing to do"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"web service"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据结构 算法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作系统"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此优先考虑使用组合而不是继承。"}]}]},{"type":"element","tag":"h2","props":{"id":"题库每日"},"children":[{"type":"element","tag":"a","props":{"href":"./practice"},"children":[{"type":"text","value":"题库每日"}]}]},{"type":"element","tag":"h2","props":{"id":"hang-in-there"},"children":[{"type":"text","value":"Hang in There"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://raw.githubusercontent.com/DrAugus/cpp/master/src/leetcode/700.cpp","rel":["nofollow"]},"children":[{"type":"text","value":"BST查找树中是否有指定元素"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://raw.githubusercontent.com/DrAugus/cpp/master/src/leetcode/20.cpp","rel":["nofollow"]},"children":[{"type":"text","value":"括号匹配"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"十个桶的hash表，key%10，142存放在哪里"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"搜索排序的时间复杂度"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"合并有序/无序的两个数组时间复杂度"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"排序算法的稳定性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先序、中序、后序遍历"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"In a binary tree that has K nodes having two children and L leaves, show the relation between K and L"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B-Trees are used commonly for ?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"影响哈希表查找的效率有哪些"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Big(O) notation"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A Priority-Queue is implemented as a Max-Heap. 最小堆、最大堆的插入"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双向链表什么时候比单链表效率更高"}]}]},{"type":"element","tag":"h2","props":{"id":"其他"},"children":[{"type":"text","value":"其他"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"../interview/cpp/concept#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B8%8E%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E7%BC%96%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB"},"children":[{"type":"text","value":"解释面向对象语言"}]},{"type":"text","value":"，"},{"type":"element","tag":"a","props":{"href":"../interview/cpp/c_cpp_diff"},"children":[{"type":"text","value":"C和C++的区别"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"各种排序"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数组中找重复值"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Git常用命令、简单解释一下Git原理、怎么理解git是一个分布式系统"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CI/CD的Job"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"zookeeper介绍一下 (从CAP 数据一致性等分布式问题出发 介绍了基本原理和应用场景)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主节点崩溃了, 集群会发生什么"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"讲一下HTTP协议,为什么说是无状态的, POST/GET请求的区别, 1.X 和 2.0区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"../interview/paxos"},"children":[{"type":"text","value":"paxos"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"举一个会出现StackOverflow错误的情况,并说说为什么(递归...)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何处理网页的大量请求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何处理并发造成的数据不一致问题，加锁，锁的类型有哪些"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何不采用加锁处理并发问题"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何查找一个同学的课程平均成绩并排序，每个同学选择的课程可能不一样，不使用冗余字段"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果课程成绩具有权重，如何设计表，如何进行平均成绩排序"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何设计一个OJ系统\n就刚才设计的OJ系统，设计出对应数据库表的关系\n如何处理高并发情况下，用户提交代码造成系统卡死问题"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"把1000个球放入10盒子后，保证给任意1——1000任意一个数n，能找到对应几个盒子中的个数的和sum等于n"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"访问一个网页的具体流程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解释LSTM"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"给定一个天平，一个2g的砝码和一个7g的砝码，以及若干盐，求如何在三次以内称到50g的盐"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"给定链表和整数k，链表的每k个数逆序，如链表为1->2->3->4->5->null, k=3,结果得到3->2->1->5->4-null(\n编程界面没有像leetcod一样给出链表的结构定义和后台没有测试用例，需要自己写链表结构定义和测试过程，测试用例自己想)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"给定一个有序的数组，和一个整数k，求数组里和为k的所有数对"}]}]},{"type":"element","tag":"h2","props":{"id":"c"},"children":[{"type":"text","value":"C++"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"c++的基础知识"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"c++11特性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"../interview/design-pattern"},"children":[{"type":"text","value":"设计模式"}]},{"type":"text","value":",单例、适配器模式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"内存管理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C/C++的段错误是什么"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"写一个c++的类 实现一个string类，然后支持拷贝构造和移动构造和支持vector容器，用智能指针"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多态"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"死锁"}]}]},{"type":"element","tag":"h2","props":{"id":"算法"},"children":[{"type":"text","value":"算法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"递归二叉树"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://raw.githubusercontent.com/DrAugus/cpp/master/src/leetcode/20.cpp","rel":["nofollow"]},"children":[{"type":"text","value":"括号匹配"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"树状数组"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"图表设计合理性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"反转链表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆的插入删除具体过程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"图算法（最短路、最小生成树）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"跳表、数组链表的优缺点"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一道dfs，一道dp，一道字符串处理，写完了指着代码一个个问变量分别在jvm中的什么区域，引出提问jvm内存区域，垃圾回收算法.\n然后dfs问了复杂度,\ndp问了最优子结构这些基本概念,字符串问了StringBuilder和StringBuffer的区别."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一维二分查找，手写代码"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二维二分查找，讲解思路，计算时间复杂度，如何将时间复杂度将到O(n)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"给出BST，然后给出number，返回number是否在BST"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"二叉树的按层求和，递归和迭代"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"给定数组，求两个数的最大差值，要求，大数在小数后面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HashMap和HashTable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ArrayList和Vector"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"GC"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"垃圾回收算法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编写代码求股票最大利润（假如一个数组中存储了一个股票，第i个元素表示第i天的股票价格，只允许一次买入和一次卖出，请提供一个算法，计算出通过卖出和买入可以得到的最大利润）"}]}]},{"type":"element","tag":"h2","props":{"id":"操作系统"},"children":[{"type":"text","value":"操作系统"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"为什么要分段分页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"虚拟内存原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"银行家算法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程和线程的区别"}]}]},{"type":"element","tag":"h2","props":{"id":"前端"},"children":[{"type":"text","value":"前端"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"跨域问题"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TypeScript中Interface和Type的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TypeScript中的类型断言"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"事件捕获"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"事件冒泡"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Async函数以及得到的返回值，如果Aysnc return new Promise那返回值是什么"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"let和const的区别，const常量为啥是不可以改变的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对this的理解，This在不同的情况下代表什么"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"浏览器缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Cookie，session，localStorage，sessionStorage的区别和使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Css盒模型，如果Width是100，Border是1，padding是10，在浏览器上的width是多少（很简单的问题但是太久没看忘记了哈哈哈）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Relative和absolute的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"React单向数据流"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Hook在什么情况下不能使用，为什么"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"SetState为啥不能立即看到改变"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"React中的key有什么作用"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"非受控组件和受控组件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"高阶组件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"类组件和函数组件的区别"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"题库每日","depth":2,"text":"题库每日"},{"id":"hang-in-there","depth":2,"text":"Hang in There"},{"id":"其他","depth":2,"text":"其他"},{"id":"c","depth":2,"text":"C++"},{"id":"算法","depth":2,"text":"算法"},{"id":"操作系统","depth":2,"text":"操作系统"},{"id":"前端","depth":2,"text":"前端"}]}},"_type":"markdown","_id":"content:3.code:1.future:prepare.md","_source":"content","_file":"3.code/1.future/prepare.md","_extension":"md"},{"_path":"/code/config-env","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"配环境","description":"","icon":"vscode-icons:file-type-dependencies","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"配环境"},"children":[{"type":"text","value":"配环境"}]},{"type":"element","tag":"h2","props":{"id":"ubuntu"},"children":[{"type":"text","value":"Ubuntu"}]},{"type":"element","tag":"code","props":{"code":"sudo apt install git cmake python3 python3-pip\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fabf1b"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"cmake"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"class":"ct-e63bff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3a7296"},"children":[{"type":"text","value":"python3-pip"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"cue"},"children":[{"type":"text","value":"cue"}]},{"type":"element","tag":"h3","props":{"id":"githubcom-slowly"},"children":[{"type":"text","value":"github.com slowly"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ipaddress"}]},{"type":"text","value":" 来获得"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github.com"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github.global.ssl.fastly.net"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"codeload.github.com"}]},{"type":"text","value":"这三个域名的服务器公网IP地址"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim /etc/hosts"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"添加如下内容"}]},{"type":"element","tag":"code","props":{"code":"140.82.114.4    github.com\n199.232.5.194   github.global.ssl.fastly.net\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"140.82.114.4    github.com\n199.232.5.194   github.global.ssl.fastly.net"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"text","value":"INSTALL"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"APP"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"MAC"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"WIN"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GitHub Desktop"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://central.github.com/deployments/desktop/desktop/latest/darwin","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://central.github.com/deployments/desktop/desktop/latest/win32","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Git"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://git-scm.com/download/mac","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/git-for-windows/git/releases/download/v2.37.1.windows.1/Git-2.37.1-64-bit.exe","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"VS Code"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Python"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://www.python.org/ftp/python/3.10.7/python-3.10.7-macos11.pkg","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://www.python.org/ftp/python/3.10.5/python-3.10.5-amd64.exe","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Git LFS"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"cmake"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]},{"type":"element","tag":"td","props":{"align":"center"},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"Clash"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/yichengchen/clashX/releases/download/1.72.0/ClashX.dmg","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/Fndroid/clash_for_windows_pkg/releases/download/0.19.25/Clash.for.Windows-0.19.25-arm64-win.7z","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3a7296{color:#0A3069}\n.ct-e63bff{color:#24292F}\n.ct-fabf1b{color:#953800}\n.dark .ct-fabf1b{color:#FFA657}\n.dark .ct-e63bff{color:#C9D1D9}\n.dark .ct-3a7296{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ubuntu","depth":2,"text":"Ubuntu"},{"id":"cue","depth":2,"text":"cue","children":[{"id":"githubcom-slowly","depth":3,"text":"github.com slowly"}]},{"id":"install","depth":2,"text":"INSTALL"}]}},"_type":"markdown","_id":"content:3.code:config-env.md","_source":"content","_file":"3.code/config-env.md","_extension":"md"},{"_path":"/code/db/_dir","_dir":"db","_draft":false,"_partial":true,"_locale":"","title":"Database","icon":"flat-color-icons:accept-database","_id":"content:3.code:db:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/db/_dir.yml","_extension":"yml"},{"_path":"/code/db/database","_dir":"db","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"数据库","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"数据库"},"children":[{"type":"text","value":"数据库"}]},{"type":"element","tag":"h2","props":{"id":"未分类"},"children":[{"type":"text","value":"未分类"}]},{"type":"element","tag":"h3","props":{"id":"mysql-有什么调优的方式"},"children":[{"type":"text","value":"MySQL 有什么调优的方式？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MySQL 是一种常用的关系型数据库管理系统，它可以帮助我们高效地管理和存储大量的数据。为了提高 MySQL 的性能，我们可以采取以下调优技术："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优化 SQL 语句。首先，我们要确保 SQL 语句的语法正确，避免出现语法错误。其次，我们要注意 SQL 语句的可读性和可维护性，尽量使用简洁、易懂的语句。最后，我们要尽可能地优化 SQL 语句的执行计划，以提高查询效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优化数据库结构。我们要根据数据库的实际情况，合理地设计数据库结构，包括表的字段和索引的设置。这样，可以提高数据的存储效率和查询效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优化数据库的配置。MySQL 有很多参数可以通过配置文件进行调整，包括内存缓存的大小、缓存更新策略、连接池大小等。我们要根据数据库的实际情况，合理地调整这些参数，以提高数据库的性能。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，通过上述方式，我们可以有效地调优 MySQL，提高数据库的性能和稳定性。"}]},{"type":"element","tag":"h3","props":{"id":"简述-mysql-的主从同步机制如果同步失败会怎么样"},"children":[{"type":"text","value":"简述 MySQL 的主从同步机制，如果同步失败会怎么样？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MySQL 的主从同步是指在一个 MySQL 集群中，主服务器上的数据会同步到从服务器上。这样做的好处是可以分摊数据库的访问压力，提高系统的可用性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主从同步的实现过程是这样的：主服务器会将所有的写操作（比如 INSERT、UPDATE 和 DELETE）记录到二进制日志中，然后通过网络将日志传输到从服务器上。从服务器收到日志后，会按照日志中的记录执行相同的写操作，从而将主服务器上的数据同步到从服务器上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果同步失败，主服务器会继续记录写操作到二进制日志中，从服务器则会停止接收新的日志。如果从服务器故障并且无法恢复，可能会导致主服务器上的数据不完整。此时，可以通过将另一台从服务器作为新的主服务器来恢复集群的正常工作。"}]},{"type":"element","tag":"h3","props":{"id":"什么是-sql-注入攻击如何防止这类攻击"},"children":[{"type":"text","value":"什么是 SQL 注入攻击？如何防止这类攻击？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SQL 注入攻击是指攻击者通过构造恶意的 SQL 语句，利用网站的 SQL 查询漏洞来访问或操作数据库。这类攻击一般是通过网站的输入字段（比如登录表单）来发起的。\n举个例子，假如一个网站的登录页面的 SQL 语句是这样的："}]},{"type":"element","tag":"code","props":{"code":"SELECT * FROM users WHERE username='$username' AND password='$password';\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" users "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"WHERE"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" username"}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"'$username'"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"AND"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"password="}]},{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"'$password'"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果攻击者在登录表单中输入了这样的内容："}]},{"type":"element","tag":"code","props":{"code":"username: admin'--\npassword: anything\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8842c3"},"children":[{"type":"text","value":"username:"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"admin'--"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"password: anything"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么实际执行的 SQL 语句就会变成这样："}]},{"type":"element","tag":"code","props":{"code":"SELECT * FROM users WHERE username='admin'--' AND password='anything';\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" users "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"WHERE"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" username"}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"'admin'"}]},{"type":"element","tag":"span","props":{"class":"ct-794616"},"children":[{"type":"text","value":"--' AND password='anything';"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个语句中的 -- 是 SQL 中的注释符，它会让 SQL 引擎忽略剩下的部分，因此上面的语句实际执行时就变成了："}]},{"type":"element","tag":"code","props":{"code":"SELECT * FROM users WHERE username='admin';\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" users "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"WHERE"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" username"}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92bb97"},"children":[{"type":"text","value":"'admin'"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，攻击者就可以通过绕过了网站的登录验证，访问到数据库中的数据。\n防止 SQL 注入攻击的一个重要措施是对用户输入的数据进行过滤和验证。可以使用正则表达式或其他手段来检查用户输入的数据是否符合预期的格式，并对不符合要求的输入进行过滤。\n另外，还可以使用参数化查询语句来避免 SQL 注入攻击。参数化查询语句是指在执行 SQL 查询时，将用户输入的数据作为参数传入查询语句，而不是直接将用户输入的数据拼接到 SQL 语句中。这样做的好处是可以避免用户输入的数据被当做 SQL 语句的一部分而导致查询失败，也可以有效地防止 SQL 注入攻击。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比如说，上面提到的登录 SQL 语句可以用参数化查询的方式来写："}]},{"type":"element","tag":"code","props":{"code":"SELECT * FROM users WHERE username=? AND password=?;\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" users "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"WHERE"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" username"}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":"? "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"AND"}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-903bce"},"children":[{"type":"text","value":"password="}]},{"type":"element","tag":"span","props":{"class":"ct-a5ad1f"},"children":[{"type":"text","value":"?;"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在执行这条语句时，可以将用户输入的用户名和密码作为参数传入，这样就可以避免将用户输入的数据直接拼接到 SQL 语句中，从而防止 SQL 注入攻击。"}]},{"type":"element","tag":"h3","props":{"id":"简述数据库中的-acid-分别是什么"},"children":[{"type":"text","value":"简述数据库中的 ACID 分别是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ACID 是一组用于评估数据库事务的属性。它的每个字母代表一个特定的属性："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A：原子性（Atomicity）。数据库事务是一个不可分割的操作，要么全部完成，要么完全不执行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C：一致性（Consistency）。数据库事务执行前后，数据库的完整性约束不能被破坏。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"I：隔离性（Isolation）。当多个事务并发执行时，数据库事务之间不会相互影响。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"D：持久性（Durability）。一旦事务完成，它所做的更改就会永久保存到数据库中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ACID 特性保证了数据库事务的正确性和可靠性。它们是数据库设计的基础，也是分布式系统中的重要概念。"}]},{"type":"element","tag":"h3","props":{"id":"如何解决缓存与数据库不一致的问题"},"children":[{"type":"text","value":"如何解决缓存与数据库不一致的问题？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"缓存与数据库不一致是指，缓存中的数据与数据库中的数据不一致。这种情况可能会导致系统运行不正常，甚至出现严重的错误。因此，我们需要采取一些措施来解决这个问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常见的解决方案有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据库锁定。在修改数据库数据时，可以锁定数据库，禁止其它线程或进程对数据库进行操作。这样，就可以保证修改数据库数据的原子性和一致性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"缓存预热。在启动系统时，可以将数据库中的数据预先加载到缓存中。这样，缓存和数据库的数据就能保持一致，并且可以避免缓存空的情况。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据库双写。在修改数据库数据时，不仅修改数据库，还同时修改缓存。这样，就可以保证缓存和数据库的数据总是一致的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据版本控制。在修改数据库数据时，可以给数据库记录添加一个版本号。当从缓存获取数据时，可以同时获取数据的版本号。如果缓存中的版本号比数据库中的版本号旧，则说明缓存中的数据已经过期，需要从数据库中重新获取。这样，就可以保证缓存中的数据总是最新的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，还有一些其它的解决方案，比如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据库触发器。在修改数据库数据时，可以设置一个触发器，触发器会在数据库数据发生变化时自动更新缓存中的数据。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据同步服务。可以设计一个服务，用于定期同步数据库和缓存中的数据。当数据库数据发生变化时，这个服务会检测到变化，并将新的数据同步到缓存中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，解决缓存与数据库不一致的问题，需要采用多种手段，并且要根据具体情况来选择合适的解决方案。"}]},{"type":"element","tag":"h3","props":{"id":"数据库的读写分离的作用是什么如何实现"},"children":[{"type":"text","value":"数据库的读写分离的作用是什么？如何实现？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数据库的读写分离是指，将数据库的读操作和写操作分离到不同的服务器上。这样做的目的是为了提高数据库的性能和可用性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体而言，读写分离的作用有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高数据库的性能。将读操作和写操作分离到不同的服务器上，可以避免某一个服务器的性能瓶颈，并且可以更好地利用服务器的计算能力。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高数据库的可用性。将读操作和写操作分离到不同的服务器上，可以在写操作出现故障时，通过读操作服务器继续对外提供服务，从而提高数据库的可用性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高数据库的安全性。将读操作和写操作分离到不同的服务器上，可以降低恶意操作对数据库的危害，并且可以更好地管理数据库的安全性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"读写分离的实现方式有很多种，比如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主从复制。主从复制是一种常用的读写分离技术。在主从复制中，将数据库分成主库和多个从库。主库用于处理写操作，从库用于处理读操作。当主库中的数据发生变化时，会自动同步到从库中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"负载均衡。负载均衡是一种常用的读写分离技术。在负载均衡中，将数据库读写操作分配到多个服务器上，并通过负载均衡器来决定请求应该转发到哪个服务器上处理。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"代理服务器。代理服务器是一种常用的读写分离技术。在代理服务器中，数据库的读写操作都是由代理服务器来完成的。代理服务器根据操作的类型，决定将操作转发到专门的读服务器或写服务器上。这样，就可以将读写操作分离到不同的服务器上，从而实现读写分离。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，读写分离是一种常用的数据库优化技术，它可以提高数据库的性能和可用性。读写分离的实现方式有很多种，可以根据实际情况来选择合适的方案。"}]},{"type":"element","tag":"h3","props":{"id":"mysql-为什么使用-b-树来作索引对比-b-树它的优点和缺点是什么"},"children":[{"type":"text","value":"MySQL 为什么使用 B+ 树来作索引，对比 B 树它的优点和缺点是什么？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MySQL 之所以使用 B+ 树作为索引，是因为 B+ 树在查询效率和空间利用方面都有很好的表现。与 B 树相比，B+ 树的优点在于："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树中所有的叶节点都包含了实际的数据记录，这使得数据顺序存储，并且所有的数据都可以顺序访问，可以有效地进行范围查询。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树中不同于 B 树的是，它所有的非叶子节点都不包含实际的数据记录，只用来存储索引。这样可以节省空间，并且也方便了查询。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树还支持更高的并发度，因为它的查询过程中不会涉及到对叶子节点的修改，这样就避免了锁竞争问题。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然而，B+ 树也有一些缺点："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树的插入和删除操作比 B 树慢，因为它需要维护更多的指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树需要更多的空间，因为它有更多的指针。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B+ 树的高度比 B 树要高，这会影响查询的效率。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总的来说，B+ 树的优点远大于它的缺点，因此被广泛用于数据库系统中。"}]},{"type":"element","tag":"h3","props":{"id":"数据库的事务隔离级别有哪些各有哪些优缺点"},"children":[{"type":"text","value":"数据库的事务隔离级别有哪些？各有哪些优缺点？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数据库的事务隔离级别是指事务之间的隔离程度。常见的事务隔离级别有四种："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读未提交（Read Uncommitted）：这是最低的隔离级别，它允许一个事务读取另一个事务未提交的数据。这样就可能会出现脏读、不可重复读和幻读等问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读提交（Read Committed）：这是比较常用的隔离级别，它保证了一个事务只能读取另一个事务已经提交的数据。这样就可以避免脏读的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可重复读（Repeatable Read）：这是一个比较高的隔离级别，它保证了一个事务在整个过程中读取的数据都是一致的，即使在它未提交之前，另一个事务也不能修改它读取的数据。这样就可以避免不可重复读和幻读的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"串行化（Serializable）：这是最高的隔离级别，它完全串行化了事务的执行，即一个事务必须等待另一个事务结束后才能执行。这样可以避免任何并发问题。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于每一种事务隔离级别，都有它的优缺点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读未提交的优点是提高了并发度，因为一个事务可以在不等待另一个事务提交的情况下执行。但它的缺点是可能会出现脏读、不可重复读和幻读等问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读提交的优点是可以避免脏读，同时还可以提高并发度。它的缺点是可能会出现不可重复读和幻读的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可重复读的优点是可以避免不可重复读和幻读，同时还可以提高并发度。它的缺点是由于事务严格地串行执行，可能会导致性能下降。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"串行化的优点是可以避免任何并发问题，保证了数据的完整性。它的缺点是由于事务严格地串行执行，会导致性能下降，并发度较低。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说，在选择事务隔离级别时，需要根据实际情况进行权衡，并且需要考虑数据的完整性和性能之间的平衡。"}]},{"type":"element","tag":"h3","props":{"id":"什么是数据库事务mysql-为什么会使用-innodb-作为默认选项"},"children":[{"type":"text","value":"什么是数据库事务，MySQL 为什么会使用 InnoDB 作为默认选项"}]},{"type":"element","tag":"h3","props":{"id":"简述脏读和幻读的发生场景innodb-是如何解决幻读的"},"children":[{"type":"text","value":"简述脏读和幻读的发生场景，InnoDB 是如何解决幻读的？"}]},{"type":"element","tag":"h3","props":{"id":"简述一致性哈希算法的实现方式及原理"},"children":[{"type":"text","value":"简述一致性哈希算法的实现方式及原理"}]},{"type":"element","tag":"h3","props":{"id":"简述-mysql-的间隙锁"},"children":[{"type":"text","value":"简述 MySQL 的间隙锁"}]},{"type":"element","tag":"h2","props":{"id":"redis"},"children":[{"type":"text","value":"Redis"}]},{"type":"element","tag":"h3","props":{"id":"redis-有几种数据结构zset-是如何实现的"},"children":[{"type":"text","value":"Redis 有几种数据结构？Zset 是如何实现的？"}]},{"type":"element","tag":"h3","props":{"id":"简述-redis-持久化中-rdb-以及-aof-方案的优缺点"},"children":[{"type":"text","value":"简述 Redis 持久化中 rdb 以及 aof 方案的优缺点"}]},{"type":"element","tag":"h3","props":{"id":"redis-如何实现延时队列分布式锁的实现原理"},"children":[{"type":"text","value":"Redis 如何实现延时队列，分布式锁的实现原理"}]},{"type":"element","tag":"h3","props":{"id":"简述-redis-中如何防止缓存雪崩和缓存击穿"},"children":[{"type":"text","value":"简述 Redis 中如何防止缓存雪崩和缓存击穿"}]},{"type":"element","tag":"h3","props":{"id":"简述-redis-中跳表的应用以及优缺点"},"children":[{"type":"text","value":"简述 Redis 中跳表的应用以及优缺点"}]},{"type":"element","tag":"h3","props":{"id":"redis的缓存淘汰策略有哪些"},"children":[{"type":"text","value":"Redis的缓存淘汰策略有哪些？"}]},{"type":"element","tag":"h3","props":{"id":"为什么-redis-在单线程下能如此快"},"children":[{"type":"text","value":"为什么 Redis 在单线程下能如此快？"}]},{"type":"element","tag":"h2","props":{"id":"索引"},"children":[{"type":"text","value":"索引"}]},{"type":"element","tag":"h3","props":{"id":"数据库索引的实现原理是什么"},"children":[{"type":"text","value":"数据库索引的实现原理是什么？"}]},{"type":"element","tag":"h3","props":{"id":"聚簇索引和非聚簇索引有什么区别什么情况用聚集索引"},"children":[{"type":"text","value":"聚簇索引和非聚簇索引有什么区别？什么情况用聚集索引？"}]},{"type":"element","tag":"h3","props":{"id":"唯一索引与普通索引的区别是什么使用索引会有哪些优缺点"},"children":[{"type":"text","value":"唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？"}]},{"type":"element","tag":"h3","props":{"id":"mysql-的索引什么情况下会失效"},"children":[{"type":"text","value":"MySQL 的索引什么情况下会失效？"}]},{"type":"element","tag":"h3","props":{"id":"数据库索引的叶子结点为什么是有序链表"},"children":[{"type":"text","value":"数据库索引的叶子结点为什么是有序链表？"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-794616{color:#6E7781}\n.ct-8842c3{color:#953800}\n.ct-92bb97{color:#0A3069}\n.ct-a5ad1f{color:#24292F}\n.ct-903bce{color:#CF222E}\n.dark .ct-903bce{color:#FF7B72}\n.dark .ct-a5ad1f{color:#C9D1D9}\n.dark .ct-92bb97{color:#A5D6FF}\n.dark .ct-8842c3{color:#FFA657}\n.dark .ct-794616{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"未分类","depth":2,"text":"未分类","children":[{"id":"mysql-有什么调优的方式","depth":3,"text":"MySQL 有什么调优的方式？"},{"id":"简述-mysql-的主从同步机制如果同步失败会怎么样","depth":3,"text":"简述 MySQL 的主从同步机制，如果同步失败会怎么样？"},{"id":"什么是-sql-注入攻击如何防止这类攻击","depth":3,"text":"什么是 SQL 注入攻击？如何防止这类攻击？"},{"id":"简述数据库中的-acid-分别是什么","depth":3,"text":"简述数据库中的 ACID 分别是什么？"},{"id":"如何解决缓存与数据库不一致的问题","depth":3,"text":"如何解决缓存与数据库不一致的问题？"},{"id":"数据库的读写分离的作用是什么如何实现","depth":3,"text":"数据库的读写分离的作用是什么？如何实现？"},{"id":"mysql-为什么使用-b-树来作索引对比-b-树它的优点和缺点是什么","depth":3,"text":"MySQL 为什么使用 B+ 树来作索引，对比 B 树它的优点和缺点是什么？"},{"id":"数据库的事务隔离级别有哪些各有哪些优缺点","depth":3,"text":"数据库的事务隔离级别有哪些？各有哪些优缺点？"},{"id":"什么是数据库事务mysql-为什么会使用-innodb-作为默认选项","depth":3,"text":"什么是数据库事务，MySQL 为什么会使用 InnoDB 作为默认选项"},{"id":"简述脏读和幻读的发生场景innodb-是如何解决幻读的","depth":3,"text":"简述脏读和幻读的发生场景，InnoDB 是如何解决幻读的？"},{"id":"简述一致性哈希算法的实现方式及原理","depth":3,"text":"简述一致性哈希算法的实现方式及原理"},{"id":"简述-mysql-的间隙锁","depth":3,"text":"简述 MySQL 的间隙锁"}]},{"id":"redis","depth":2,"text":"Redis","children":[{"id":"redis-有几种数据结构zset-是如何实现的","depth":3,"text":"Redis 有几种数据结构？Zset 是如何实现的？"},{"id":"简述-redis-持久化中-rdb-以及-aof-方案的优缺点","depth":3,"text":"简述 Redis 持久化中 rdb 以及 aof 方案的优缺点"},{"id":"redis-如何实现延时队列分布式锁的实现原理","depth":3,"text":"Redis 如何实现延时队列，分布式锁的实现原理"},{"id":"简述-redis-中如何防止缓存雪崩和缓存击穿","depth":3,"text":"简述 Redis 中如何防止缓存雪崩和缓存击穿"},{"id":"简述-redis-中跳表的应用以及优缺点","depth":3,"text":"简述 Redis 中跳表的应用以及优缺点"},{"id":"redis的缓存淘汰策略有哪些","depth":3,"text":"Redis的缓存淘汰策略有哪些？"},{"id":"为什么-redis-在单线程下能如此快","depth":3,"text":"为什么 Redis 在单线程下能如此快？"}]},{"id":"索引","depth":2,"text":"索引","children":[{"id":"数据库索引的实现原理是什么","depth":3,"text":"数据库索引的实现原理是什么？"},{"id":"聚簇索引和非聚簇索引有什么区别什么情况用聚集索引","depth":3,"text":"聚簇索引和非聚簇索引有什么区别？什么情况用聚集索引？"},{"id":"唯一索引与普通索引的区别是什么使用索引会有哪些优缺点","depth":3,"text":"唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？"},{"id":"mysql-的索引什么情况下会失效","depth":3,"text":"MySQL 的索引什么情况下会失效？"},{"id":"数据库索引的叶子结点为什么是有序链表","depth":3,"text":"数据库索引的叶子结点为什么是有序链表？"}]}]}},"_type":"markdown","_id":"content:3.code:db:database.md","_source":"content","_file":"3.code/db/database.md","_extension":"md"},{"_path":"/code/db/db2","_dir":"db","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"DB2","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"db2"},"children":[{"type":"text","value":"DB2"}]},{"type":"element","tag":"h2","props":{"id":"db2跨库操作失败"},"children":[{"type":"text","value":"DB2跨库操作失败"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用命令"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ALTER TABLESPACE MAXDATA EXTEND ( ALL 500 )"}]},{"type":"text","value":"，但是之后还是会出现同样的报错"},{"type":"element","tag":"a","props":{"href":"https://www.toolbox.com/tech/data-management/question/exception-when-importing-using-the-move-command-050911/","rel":["nofollow"]},"children":[{"type":"text","value":"参考的这个"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"db2跨库操作失败","depth":2,"text":"DB2跨库操作失败"}]}},"_type":"markdown","_id":"content:3.code:db:db2.md","_source":"content","_file":"3.code/db/db2.md","_extension":"md"},{"_path":"/code/db/mongodb","_dir":"db","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"mongoDB使用记录","description":"","date":"2021-08-19T10:23:13.000Z","category":["编程"],"tag":["mongoDB"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mongodb使用记录"},"children":[{"type":"text","value":"mongoDB使用记录"}]},{"type":"element","tag":"h2","props":{"id":"切换数据库"},"children":[{"type":"text","value":"切换数据库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"use test_augus"}]},{"type":"text","value":"如果数据库不存在会自动创建 test_augus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show dbs"}]},{"type":"text","value":" 查看所有数据库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"新建数据库必须插入数据才会显示在列表中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_augus.insert({\"name\":\"augus\"})"}]}]},{"type":"element","tag":"h2","props":{"id":"user-op"},"children":[{"type":"text","value":"user op"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show users"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.createUser({user: \"ssss\",pwd: \"oracle\", roles: [ { role: \"root\", db: \"admin\" } ]})"}]}]},{"type":"element","tag":"h2","props":{"id":"find"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db[\"test_sensitive_0\"].find()"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_sensitive_0.find().count();"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_sensitive_0.find()"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.getSiblingDB(\"test_ddl\").getCollection(\"test_xyz\").find({ })"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.getCollection(\"test_xyz\").find({}).limit(88)"}]}]},{"type":"element","tag":"h2","props":{"id":"distinct"},"children":[{"type":"text","value":"distinct"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db[\"test_sensitive_0\"].distinct('name')"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_xyz.distinct(\"name\",{\"age\":20})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.revokeRolesFromUser( \"mongoTestAdmin\", [ { role: \"read\", db: \"admin\" }, \"readWrite\" ], { w: \"majority\" } )"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.updateUser( \"root\",{pwd: \"oracle\", roles: [ { role: \"read\", db: \"test1\" } ]})"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.updateUser('root',{pwd:'633636',roles:[{role:'read',db:'springbucks'}]})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_sensitive_0.updateOne( { type: \"book\", item : \"journal\" }, { $set : { qty: 10 } }, { upsert :true } )"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.changeUserPassword(\"root\",\"gag\");"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.dropUser(\"ssss\")"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_xyz.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : 1}}}])"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_xyz.insertOne({_id:\"faf\",id:\"af\",age:\"21\",gender:\"male\",name:\"gag\"})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_sensitive_0.updateOne( { type: \"book\", item : \"journal\" }, { $set : { qty: 10 } }, { upsert :true } )"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_sensitive_0.deleteOne({'name':'James'})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_xyz.insert( { _id: 14, type: \"misc\", item: \"card\", qty: 15 } )"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show collections"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.createCollection(\"afafaff\", { capped : true, size : 5242880, max : 5000 } )"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.log.drop()"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.createView(   \"firstView\",  \"demo113\",  [ { $project: { \"Name\": \"$Details.Name\", Subject: 1 } } ])"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.test_xyz.createIndex({'age':22})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.log.drop()"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show dbs db"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"use augus_drop db.augus_drop.insertOne({_id:1,name:\"test\"})"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.dropDatabase()"}]}]},{"type":"element","tag":"code","props":{"code":"use test1 db.createRole(\n{ role: \"afafa\", privileges: [\n{ resource: { cluster: true }, actions: [ \"addShard\" ] }, { resource: { db: \"config\", collection: \"\" }, actions: [ \"find\", \"update\", \"insert\", \"remove\" ] }, { resource: { db: \"users\", collection: \"usersCollection\" }, actions: [ \"update\", \"insert\", \"remove\" ] }, { resource: { db: \"\", collection: \"\" }, actions: [ \"find\" ] }\n], roles: [\n{ role: \"read\", db: \"test1\" }\n]\n}, { w: \"majority\" , wtimeout: 5000 }\n)\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" test1 "}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"db"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"createRole"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"role"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"afafa\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":", privileges: ["}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"resource"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": { cluster: true }, actions: [ \"addShard\" ] }, { "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"resource"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": { db: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"config\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }, actions: [ \"find\", \"update\", \"insert\", \"remove\" ] }, { "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"resource"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": { db: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"users\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"usersCollection\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }, actions: [ \"update\", \"insert\", \"remove\" ] }, { "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"resource"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": { db: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }, actions: [ \"find\" ] }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"], roles: ["}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-7a67f9"},"children":[{"type":"text","value":"role"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"read\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":", db: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"test1\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"}, { w: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"majority\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" , wtimeout: "}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"5000"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"use test db.dropRole( \"readWrite\" )"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.createRole()"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"use admin db.createRole({role:\"mongostatMangeRole1\",privileges:[{resource:{cluster:true},actions:[\"serverStatus\"]}]})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.createRole({role:\"bigRole1\",privileges:[{resource:{anyResource:true},actions:[\"anyAction\"]}],roles:[]})"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.dropRole(\"bigRole1\")"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"db.grantRolesToUser(\"mongoTestAdmin\", [{role:\"readWrite\", db:\"admin\"}])"}]}]},{"type":"element","tag":"code","props":{"code":"db.grantRolesToRole(\n\"mongoTestAdmin\",\n[ \"write\" ],\n)\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"db"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"grantRolesToRole"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"mongoTestAdmin\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"[ \"write\" ],"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"db.grantRolesToRole(\n\"mongoTestAdmin\",\n[ \"productsReader\" ], { w: \"majority\" , wtimeout: 5000 }\n)\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"db"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"grantRolesToRole"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"mongoTestAdmin\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":"[ \"productsReader\" ], { w: "}]},{"type":"element","tag":"span","props":{"class":"ct-6743e0"},"children":[{"type":"text","value":"\"majority\""}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" , wtimeout: "}]},{"type":"element","tag":"span","props":{"class":"ct-b6a9c0"},"children":[{"type":"text","value":"5000"}]},{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a699d"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6743e0{color:#0A3069}\n.ct-b6a9c0{color:#0550AE}\n.ct-8a699d{color:#24292F}\n.ct-7a67f9{color:#CF222E}\n.dark .ct-7a67f9{color:#FF7B72}\n.dark .ct-8a699d{color:#C9D1D9}\n.dark .ct-b6a9c0{color:#79C0FF}\n.dark .ct-6743e0{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"切换数据库","depth":2,"text":"切换数据库"},{"id":"user-op","depth":2,"text":"user op"},{"id":"find","depth":2,"text":"find"},{"id":"distinct","depth":2,"text":"distinct"}]}},"_type":"markdown","_id":"content:3.code:db:mongoDB.md","_source":"content","_file":"3.code/db/mongoDB.md","_extension":"md"},{"_path":"/code/db/odps","_dir":"db","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"ODPS","description":"参考文档","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"odps"},"children":[{"type":"text","value":"ODPS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://help.aliyun.com/document_detail/281088.htm?spm=a2c4g.11186623.0.0.39405b78gVdDqA#task-2095600","rel":["nofollow"]},"children":[{"type":"text","value":"参考文档"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:db:odps.md","_source":"content","_file":"3.code/db/odps.md","_extension":"md"},{"_path":"/code/db/sql","_dir":"db","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"SQL","description":"","icon":"vscode-icons:file-type-plsql","body":{"type":"root","children":[{"type":"element","tag":"h3","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.runoob.com/sql/sql-insert-into-select.html","title":"more info","target":"_blank"},"children":[{"type":"text","value":"SQL INSERT INTO SELECT 语法"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从一个表中复制所有的列插入到另一个已存在的表中："},{"type":"element","tag":"code","props":{"code":"INSERT INTO table2 SELECT * FROM table1;\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"INSERT INTO"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table2 "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table1;"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只复制希望的列插入到另一个已存在的表中："},{"type":"element","tag":"code","props":{"code":"INSERT INTO table2 (column_name(s)) SELECT column_name(s) FROM table1;\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"INSERT INTO"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table2 (column_name(s)) "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"SELECT"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" column_name(s) "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table1;"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"复制表结构及其数据："},{"type":"element","tag":"code","props":{"code":"create table table_name_new as select * from table_name_old\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"table"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b34d49"},"children":[{"type":"text","value":"table_name_new"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_old"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只复制表结构："},{"type":"element","tag":"code","props":{"code":"create table table_name_new as select * from table_name_old where 1=2;\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"table"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b34d49"},"children":[{"type":"text","value":"table_name_new"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_old "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b21ac"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7b21ac"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"或者："},{"type":"element","tag":"code","props":{"code":"create table table_name_new like table_name_old\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"table"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b34d49"},"children":[{"type":"text","value":"table_name_new"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"like"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_old"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只复制表数据："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果两个表结构一样："},{"type":"element","tag":"code","props":{"code":"insert into table_name_new select * from table_name_old\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"insert into"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_new "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_old"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果两个表结构不一样："},{"type":"element","tag":"code","props":{"code":"insert into table_name_new(column1,column2...) select column1,column2... from table_name_old\n","language":"sql","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"insert into"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_new(column1,column2...) "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" column1,column2... "}]},{"type":"element","tag":"span","props":{"class":"ct-82a6be"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-90cb9e"},"children":[{"type":"text","value":" table_name_old"}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7b21ac{color:#0550AE}\n.ct-b34d49{color:#8250DF}\n.ct-90cb9e{color:#24292F}\n.ct-82a6be{color:#CF222E}\n.dark .ct-82a6be{color:#FF7B72}\n.dark .ct-90cb9e{color:#C9D1D9}\n.dark .ct-b34d49{color:#D2A8FF}\n.dark .ct-7b21ac{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"depth":3,"text":"SQL INSERT INTO SELECT 语法"}]}},"_type":"markdown","_id":"content:3.code:db:sql.md","_source":"content","_file":"3.code/db/sql.md","_extension":"md"},{"_path":"/code/distributed/_dir","_dir":"distributed","_draft":false,"_partial":true,"_locale":"","title":"分布式","icon":"icon-park-twotone:distribute-horizontally","_id":"content:3.code:distributed:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/distributed/_dir.yml","_extension":"yml"},{"_path":"/code/distributed/kafka/_dir","_dir":"kafka","_draft":false,"_partial":true,"_locale":"","title":"Kafka","icon":"logos:kafka-icon","_id":"content:3.code:distributed:kafka:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/distributed/kafka/_dir.yml","_extension":"yml"},{"_path":"/code/distributed/kafka/refer","_dir":"kafka","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"refer","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"refer"},"children":[{"type":"text","value":"refer"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/sujing/p/10960832.html","rel":["nofollow"]},"children":[{"type":"text","value":"ref"}]}]}]},{"type":"element","tag":"h2","props":{"id":"为什么需要消息队列"},"children":[{"type":"text","value":"为什么需要消息队列"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解耦"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"异步"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"削峰"}]}]},{"type":"element","tag":"h2","props":{"id":"消息队列通信的模式"},"children":[{"type":"text","value":"消息队列通信的模式"}]},{"type":"element","tag":"h3","props":{"id":"点对点模式"},"children":[{"type":"text","value":"点对点模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"p2p","src":"/kafka-p2p.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上图所示，点对点模式通常是基于拉取或者轮询的消息传送模型，这个模型的特点是发送到队列的消息被一个且只有一个消费者进行处理。生产者将消息放入消息队列后，由消费者主动的去拉取消息进行消费。点对点模型的的优点是消费者拉取消息的频率可以由自己控制。但是消息队列是否有消息需要消费，在消费者端无法感知，所以在消费者端需要额外的线程去监控。"}]},{"type":"element","tag":"h3","props":{"id":"发布订阅模式"},"children":[{"type":"text","value":"发布订阅模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"ps","src":"/kafka-publish-subscribe.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上图所示，发布订阅模式是一个基于消息送的消息传送模型，改模型可以有多种不同的订阅者。生产者将消息放入消息队列后，队列会将消息推送给订阅过该类消息的消费者（类似微信公众号）。由于是消费者被动接收推送，所以无需感知消息队列是否有待消费的消息！但是consumer1、consumer2、consumer3由于机器性能不一样，所以处理消息的能力也会不一样，但消息队列却无法感知消费者消费的速度！所以推送的速度成了发布订阅模模式的一个问题！假设三个消费者处理速度分别是8M/s、5M/s、2M/s，如果队列推送的速度为5M/s，则consumer3无法承受！如果队列推送的速度为2M/s，则consumer1、consumer2会出现资源的极大浪费！"}]},{"type":"element","tag":"h2","props":{"id":"kafka"},"children":[{"type":"text","value":"Kafka"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kafka是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据，具有高性能、持久化、多副本备份、横向扩展能力………"}]},{"type":"element","tag":"h3","props":{"id":"基础架构及术语"},"children":[{"type":"text","value":"基础架构及术语"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka","src":"/kafka.png"},"children":[]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Producer"}]},{"type":"text","value":"：Producer即生产者，消息的产生者，是消息的入口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"kafka cluster"}]},{"type":"text","value":"："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Broker"}]},{"type":"text","value":"：Broker是kafka实例，每个服务器上有一个或多个kafka的实例，我们姑且认为每个broker对应一台服务器。每个kafka集群内的broker都有一个不重复的编号，如图中的broker-0、broker-1等……"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Topic"}]},{"type":"text","value":"：消息的主题，可以理解为消息的分类，kafka的数据就保存在topic。在每个broker上都可以创建多个topic。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Partition"}]},{"type":"text","value":"：Topic的分区，每个topic可以有多个分区，分区的作用是做负载，提高kafka的吞吐量。同一个topic在不同的分区的数据是不重复的，partition的表现形式就是一个一个的文件夹！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Replication"}]},{"type":"text","value":":每一个分区都有多个副本，副本的作用是做备胎。当主分区（Leader）故障的时候会选择一个备胎（Follower）上位，成为Leader。在kafka中默认副本的最大数量是10个，且副本的数量不能大于Broker的数量，follower和leader绝对是在不同的机器，同一机器对同一个分区也只可能存放一个副本（包括自己）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Message"}]},{"type":"text","value":"：每一条发送的消息主体。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Consumer"}]},{"type":"text","value":"：消费者，即消息的消费方，是消息的出口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Consumer Group"}]},{"type":"text","value":"：我们可以将多个消费组组成一个消费者组，在kafka的设计中同一个分区的数据只能被消费者组中的某一个消费者消费。同一个消费者组的消费者可以消费同一个topic的不同分区的数据，这也是为了提高kafka的吞吐量！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Zookeeper"}]},{"type":"text","value":"：kafka集群依赖zookeeper来保存集群的的元信息，来保证系统的可用性。"}]}]},{"type":"element","tag":"h3","props":{"id":"工作流程分析"},"children":[{"type":"text","value":"工作流程分析"}]},{"type":"element","tag":"h4","props":{"id":"发送数据"},"children":[{"type":"text","value":"发送数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们看上面的架构图中，producer就是生产者，是数据的入口。注意看图中的红色箭头，Producer在写入数据的时候永远的找leader，不会直接将数据写入follower！那leader怎么找呢？写入的流程又是什么样的呢？我们看下图："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka-cluster","src":"/kafka-cluster.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"发送的流程就在图中已经说明了，就不单独在文字列出来了！需要注意的一点是，消息写入leader后，follower是主动的去leader进行同步的！producer采用push模式将数据发布到broker，每条消息追加到分区中，顺序写入磁盘，所以保证同一分区内的数据是有序的！写入示意图如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka-send","src":"/kafka-send.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面说到数据会写入到不同的分区，那kafka为什么要做分区呢？相信大家应该也能猜到，分区的主要目的是："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"方便扩展。因为一个topic可以有多个partition，所以我们可以通过扩展机器去轻松的应对日益增长的数据量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高并发。以partition为读写单位，可以多个消费者同时消费数据，提高了消息的处理效率。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"熟悉负载均衡的朋友应该知道，当我们向某个服务器发送请求的时候，服务端可能会对请求做一个负载，将流量分发到不同的服务器，那在kafka中，如果某个topic有多个partition，producer又怎么知道该将数据发往哪个partition呢？kafka中有几个原则："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"partition在写入的时候可以指定需要写入的partition，如果有指定，则写入对应的partition。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果没有指定partition，但是设置了数据的key，则会根据key的值hash出一个partition。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果既没指定partition，又没有设置key，则会轮询选出一个partition。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"保证消息不丢失是一个消息队列中间件的基本保证，那producer在向kafka写入消息的时候，怎么保证消息不丢失呢？其实上面的写入流程图中有描述出来，那就是通过ACK应答机制！在生产者向队列写入数据的时候可以设置参数来确定是否确认kafka接收到数据，这个参数可设置的值为0、1、all。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0代表producer往集群发送数据不需要等到集群的返回，不确保消息发送成功。安全性最低但是效率最高。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1代表producer往集群发送数据只要leader应答就可以发送下一条，只确保leader发送成功。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"all代表producer往集群发送数据需要所有的follower都完成从leader的同步才会发送下一条，确保leader发送成功和所有的副本都完成备份。安全性最高，但是效率最低。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后要注意的是，如果往不存在的topic写数据，能不能写入成功呢？kafka会自动创建topic，分区和副本的数量根据默认配置都是1。"}]},{"type":"element","tag":"h4","props":{"id":"保存数据"},"children":[{"type":"text","value":"保存数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Producer将数据写入kafka后，集群就需要对数据进行保存了！kafka将数据保存在磁盘，可能在我们的一般的认知里，写入磁盘是比较耗时的操作，不适合这种高并发的组件。Kafka初始会单独开辟一块磁盘空间，顺序写入数据（效率比随机写入高）。"}]},{"type":"element","tag":"h5","props":{"id":"partition-结构"},"children":[{"type":"text","value":"Partition 结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前面说过了每个topic都可以分为一个或多个partition，如果你觉得topic比较抽象，那partition就是比较具体的东西了！Partition在服务器上的表现形式就是一个一个的文件夹，每个partition的文件夹下面会有多组segment文件，每组segment文件又包含.index文件、.log文件、.timeindex文件（早期版本中没有）三个文件， log文件就实际是存储message的地方，而index和timeindex文件为索引文件，用于检索消息。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka-partition","src":"/kafka-partition.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上图，这个partition有三组segment文件，每个log文件的大小是一样的，但是存储的message数量是不一定相等的（每条的message大小不一致）。文件的命名是以该segment最小offset来命名的，如000.index存储offset为0~368795的消息，kafka就是利用分段+索引的方式来解决查找效率的问题。"}]},{"type":"element","tag":"h5","props":{"id":"message结构"},"children":[{"type":"text","value":"Message结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面说到log文件就实际是存储message的地方，我们在producer往kafka写入的也是一条一条的message，那存储在log中的message是什么样子的呢？消息主要包含消息体、消息大小、offset、压缩类型……等等！我们重点需要知道的是下面三个："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"offset：offset是一个占8byte的有序id号，它可以唯一确定每条消息在parition内的位置！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"消息大小：消息大小占用4byte，用于描述消息的大小。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"消息体：消息体存放的是实际的消息数据（被压缩过），占用的空间根据具体的消息而不一样。"}]}]},{"type":"element","tag":"h5","props":{"id":"存储策略"},"children":[{"type":"text","value":"存储策略"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"无论消息是否被消费，kafka都会保存所有的消息。那对于旧数据有什么删除策略呢？"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基于时间，默认配置是168小时（7天）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基于大小，默认配置是1073741824。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要注意的是，kafka读取特定消息的时间复杂度是O(1)，所以这里删除过期的文件并不会提高kafka的性能！"}]},{"type":"element","tag":"h4","props":{"id":"消费数据"},"children":[{"type":"text","value":"消费数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"消息存储在log文件后，消费者就可以进行消费了。与生产消息相同的是，消费者在拉取消息的时候也是找leader去拉取。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多个消费者可以组成一个消费者组（consumer group），每个消费者组都有一个组id！同一个消费组者的消费者可以消费同一topic下不同分区的数据，但是不会组内多个消费者消费同一分区的数据！！！是不是有点绕。我们看下图："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka-consumer-group","src":"/kafka-consumer-group.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"图示是消费者组内的消费者小于partition数量的情况，所以会出现某个消费者消费多个partition数据的情况，消费的速度也就不及只处理一个partition的消费者的处理速度！如果是消费者组的消费者多于partition的数量，那会不会出现多个消费者消费同一个partition的数据呢？上面已经提到过不会出现这种情况！多出来的消费者不消费任何partition的数据。所以在实际的应用中，建议消费者组的consumer的数量与partition的数量一致！"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在保存数据的小节里面，我们聊到了partition划分为多组segment，每个segment又包含.log、.index、.timeindex文件，存放的每条message包含offset、消息大小、消息体……我们多次提到segment和offset，查找消息的时候是怎么利用segment+offset配合查找的呢？假如现在需要查找一个offset为368801的message是什么样的过程呢？我们先看看下面的图："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"kafka-find-offset","src":"/kafka-find-offset.png"},"children":[]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先找到offset的368801message所在的segment文件（利用二分法查找），这里找到的就是在第二个segment文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"打开找到的segment中的.index文件（也就是368796.index文件，该文件起始偏移量为368796+1，我们要查找的offset为368801的message在该index内的偏移量为368796+5=368801，所以这里要查找的相对offset为5）。由于该文件采用的是稀疏索引的方式存储着相对offset及对应message物理偏移量的关系，所以直接找相对offset为5的索引找不到，这里同样利用二分法查找相对offset小于或者等于指定的相对offset的索引条目中最大的那个相对offset，所以找到的是相对offset为4的这个索引。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据找到的相对offset为4的索引确定message存储的物理偏移位置为256。打开数据文件，从位置为256的那个地方开始顺序扫描直到找到offset为368801的那条Message。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这套机制是建立在offset为有序的基础上，利用segment+有序offset+稀疏索引+二分查找+顺序查找等多种手段来高效的查找数据！至此，消费者就能拿到需要处理的数据进行处理了。那每个消费者又是怎么记录自己消费的位置呢？在早期的版本中，消费者将消费到的offset维护zookeeper中，consumer每间隔一段时间上报一次，这里容易导致重复消费，且性能不好！在新的版本中消费者消费到的offset已经直接维护在kafk集群的__consumer_offsets这个topic中！"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"为什么需要消息队列","depth":2,"text":"为什么需要消息队列"},{"id":"消息队列通信的模式","depth":2,"text":"消息队列通信的模式","children":[{"id":"点对点模式","depth":3,"text":"点对点模式"},{"id":"发布订阅模式","depth":3,"text":"发布订阅模式"}]},{"id":"kafka","depth":2,"text":"Kafka","children":[{"id":"基础架构及术语","depth":3,"text":"基础架构及术语"},{"id":"工作流程分析","depth":3,"text":"工作流程分析"}]}]}},"_type":"markdown","_id":"content:3.code:distributed:kafka:refer.md","_source":"content","_file":"3.code/distributed/kafka/refer.md","_extension":"md"},{"_path":"/code/distributed/paxos","_dir":"distributed","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"PAXOS","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"paxos"},"children":[{"type":"text","value":"PAXOS"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总结自"},{"type":"element","tag":"a","props":{"href":"https://blog.openacid.com/algo/paxos/","rel":["nofollow"]},"children":[{"type":"text","value":"paxos"}]}]}]},{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"h3","props":{"id":"是什么"},"children":[{"type":"text","value":"是什么"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在分布式系统中保证多副本数据强一致的算法."}]},{"type":"element","tag":"h3","props":{"id":"有什么用"},"children":[{"type":"text","value":"有什么用"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有paxos的一堆机器, 叫做分布式;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有paxos协同的一堆机器, 叫分布式系统."}]}]},{"type":"element","tag":"h2","props":{"id":"分布式系统要解决的问题"},"children":[{"type":"text","value":"分布式系统要解决的问题"}]},{"type":"element","tag":"h3","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多个节点一起完成一件事情。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n分布式中唯一的问题：对某事保持一致。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nPaxos：分布式系统的核心算法。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"paxos的工作, 就是把一堆运行的机器协同起来, 让多个机器成为一个整体系统. 在这个系统中, 每个机器都必须让系统中的状态达成一致,\n例如三副本集群如果一个机器上上传了一张图片, 那么另外2台机器上也必须复制这张图片过来, 整个系统才处于一个一致的状态."}]},{"type":"element","tag":"h3","props":{"id":"问题"},"children":[{"type":"text","value":"问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"分布式系统的一致性问题最终都归结为分布式存储的一致性. 像aws的对象存储可靠性要求是9~13个9. 而这么高的可靠性都是建立在可靠性没那么高的硬件上的."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对系统的需求：持久性要达到 99.99999999%"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们可以用的基础设施："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"磁盘: 4%年损坏率"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"服务器宕机时间：0.1%或者更长"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"IDC间丢包率：5% ~ 30%"}]}]},{"type":"element","tag":"h3","props":{"id":"解决方案"},"children":[{"type":"text","value":"解决方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"几乎所有的分布式存储(甚至单机系统, 参考EC第一篇:"},{"type":"element","tag":"a","props":{"href":"https://blog.openacid.com/storage/ec-1","rel":["nofollow"]},"children":[{"type":"text","value":"原理"}]},{"type":"text","value":", EC第二篇:"},{"type":"element","tag":"a","props":{"href":"https://blog.openacid.com/storage/ec-2","rel":["nofollow"]},"children":[{"type":"text","value":"实现"}]},{"type":"text","value":", EC第三篇:"},{"type":"element","tag":"a","props":{"href":"https://blog.openacid.com/storage/ec-3","rel":["nofollow"]},"children":[{"type":"text","value":"极限"}]},{"type":"text","value":")\n都必须用某种冗余的方式在廉价硬件的基础上搭建高可靠的存储. 而冗余的基础就是多副本策略, 一份数据存多份. 多副本保证了可靠性,\n而副本之间的一致, 就需要paxos这类分布式一致性算法来保证."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(可能的解决方案)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n多副本：x<n个副本损坏不会丢失数据"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n多副本的数据丢失风险："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 副本：~ 0.63%"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 副本：~ 0.00395%"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 副本：< 0.000001%"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"n 副本：~ x^n //x单副本损坏率"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如何实施复制？"}]},{"type":"element","tag":"h2","props":{"id":"不太完美的复制策略"},"children":[{"type":"text","value":"不太完美的复制策略"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"复制算法"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主从异步复制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主从同步复制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主从半同步复制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多数派写(读)"}]}]},{"type":"element","tag":"h3","props":{"id":"主从异步复制"},"children":[{"type":"text","value":"主从异步复制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"主从异步复制"}]},{"type":"text","value":"是最简单的策略之一, 它很容易实现, 但存在一个问题: 客户端收到一个数据已经安全(OK)的信息, 跟数据真正安全(\n数据复制到全部的机器上)在时间上有一个空隙, 这段时间负责接收客户端请求的那个机器(master)如果被闪电击中或被陨石砸到或被打扫卫生的大姐踢断了电源,\n那数据就可能会丢失. 因此它不是一个可靠的复制策略(使用主从异步复制要求你必须相信宇宙中不存在闪电陨石和扫地大姐)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如Mysql的binlog的复制"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主接到写请求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主写入本磁盘"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主应答ok"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主复制数据到从库"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果磁盘在复制前损坏：数据丢失"}]},{"type":"element","tag":"code","props":{"code":"autonumber\nClient ->> Master: \nMaster ->> Client: \nNote over Master: Disk Failure\nMaster-->>Slave.1: \nSlave.1-->>Master: \nMaster-->>Slave.2: \nSlave.2-->>Master: \n","language":"sequence","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"autonumber\nClient ->> Master: \nMaster ->> Client: \nNote over Master: Disk Failure\nMaster-->>Slave.1: \nSlave.1-->>Master: \nMaster-->>Slave.2: \nSlave.2-->>Master: "}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"主从同步复制"},"children":[{"type":"text","value":"主从同步复制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"跟主从异步复制相比, "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"主从同步复制"}]},{"type":"text","value":"提供了完整的可靠性: 直到数据真的安全的复制到全部的机器上之后, master才告知客户端数据已经安全."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但主从同步复制有个致命的缺点就是整个系统中有任何一个机器宕机, 写入就进行不下去了. 相当于系统的可用性随着副本数量指数降低."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主接到写请求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主复制日志到从库"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从库此时阻塞"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端一直在等待ok，直到所有从库返回"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个失联节点造成整个系统不可用。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有数据丢失"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可用性降低"}]}]},{"type":"element","tag":"code","props":{"code":"autonumber\nClient ->> Master: \nMaster->>Slave.1: \nMaster->>Slave.2: \nSlave.1-->>Master: \nSlave.2-->>Master: BLOCK\nMaster -->> Client: \n","language":"sequence","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"autonumber\nClient ->> Master: \nMaster->>Slave.1: \nMaster->>Slave.2: \nSlave.1-->>Master: \nSlave.2-->>Master: BLOCK\nMaster -->> Client: "}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"半同步复制"},"children":[{"type":"text","value":"半同步复制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在同步和异步之间, 做一个折中, 看起来是一个不错的方案. 这就是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"半同步复制"}]},{"type":"text","value":". 它要求master在应答客户端之前必须把数据复制到足够多的机器上,\n但不需要是全部. 这样副本数够多可以提供比较高的可靠性; 1台机器宕机也不会让整个系统停止写入."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是它还是不完美, 例如数据a复制到slave-1, 但没有到达slave-2; 数据b复制达到了slave-2但没有到达slave-1,\n这时如果master挂掉了需要从某个slave恢复出数据, 任何一个slave都不能提供完整的数据. 所以在整个系统中, 数据存在某种不一致."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主接到写请求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主复制日志到从库"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从库此时阻塞"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果1<=x<=n个从库返回ok，则客户端ok"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"高可靠性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"高可用性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可能任何从库都不完整"}]}]},{"type":"element","tag":"code","props":{"code":"autonumber\nClient ->> Master: \nMaster->>Slave.1: \nMaster->>Slave.2: \nSlave.1->>Master: \nMaster ->> Client: \nSlave.2-->>Master: \n","language":"sequence","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"autonumber\nClient ->> Master: \nMaster->>Slave.1: \nMaster->>Slave.2: \nSlave.1->>Master: \nMaster ->> Client: \nSlave.2-->>Master: "}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"多数派读写"},"children":[{"type":"text","value":"多数派读写"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了解决半同步复制中数据不一致的问题, 可以将这个复制策略再做一改进: "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"多数派读写"}]},{"type":"text","value":": 每条数据必须写入到半数以上的机器上.\n每次读取数据都必须检查半数以上的机器上是否有这条数据."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这种策略下, 数据可靠性足够, 宕机容忍足够, 任一机器故障也能读到全部数据."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dynamo/Cassandra"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端写入$W>=\\frac{N}{2}+1$个节点"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不需要主"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"$W + R > N ;R>=\\frac{N}{2}+1$"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"容忍最多$\\frac{N-1}{2}$个节点损坏"}]},{"type":"element","tag":"code","props":{"code":"autonumber\nClient ->> Node.1: \nClient ->> Node.2: \nClient ->> Node.3: \nNode.1->>Client: \nNode.2->>Client: \nNode.3-->>Client: \n","language":"sequence","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"autonumber\nClient ->> Node.1: \nClient ->> Node.2: \nClient ->> Node.3: \nNode.1->>Client: \nNode.2->>Client: \nNode.3-->>Client: "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多数派读写的策略也有个但是, 就是对于一条数据的更新时, 会产生不一致的状态. 例如:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"node-1, node-2都写入了a=x,\n下一次更新时node-2, node-3写入了a=y.\n这时, 一个要进行读取a的客户端如果联系到了node-1和node-2, 它将看到2条不同的数据."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了不产生歧义, 多数派读写还必须给每笔写入增加一个全局递增的时间戳. 更大时间戳的记录如果被看见, 就应该忽略小时间戳的记录.\n这样在读取过程中, 客户端就会看到a=x₁, a=y₂ 这2条数据, 通过比较时间戳1和2, 发现y是更新的数据, 所以忽略a=x₁.\n这样保证多次更新一条数据不产生歧义."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"后写入优胜"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最后一次写入覆盖先前写入"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"所有写入操作需要一个全局顺序，时间戳"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"高可靠性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"高可用性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据完整性有保证"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"是的, 但是又来了. 这种带时间戳的多数派读写依然有问题. 就是在客户端没有完成一次完整的多数派写的时候: 例如, 上面的例子中写入,\na=x₁写入了node-1和node-2, a=y₂时只有node-3 写成功了, 然后客户端进程就挂掉了, 留下系统中的状态如下:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"node-1: a=x₁"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nnode-2: a=x₁"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nnode-3: a=y₂"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这时另一个读取的客户端来了,"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果它联系到node-1和node-2, 那它得到的结果是a=x₁."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果它联系到node-2和node-3, 那它得到的结果是a=y₂."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"整个系统对外部提供的信息仍然是不一致的."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"paxos中通过2次原本并不严谨的多数派读写, 实现了严谨的强一致consensus算法."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"W + R > N"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一致性："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最终一致性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"事务性："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"非原子更新"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"脏读"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更新丢失问题"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Concurrency_control","rel":["nofollow"]},"children":[{"type":"text","value":"https://en.wikipedia.org/wiki/Concurrency_control"}]}]},{"type":"element","tag":"h2","props":{"id":"从多数派读写到paxos的推导"},"children":[{"type":"text","value":"从多数派读写到paxos的推导"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个假想存储服务"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个有3个存储节点的存储服务集群"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用多数派读写的策略"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只存储一个变量"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]},{"type":"text","value":"的每次更新对应有多个版本："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i1"}]},{"type":"text","value":","},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i2"}]},{"type":"text","value":","},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i3"}]},{"type":"text","value":"..."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这个存储系统支持3个命令"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"get"}]},{"type":"text","value":"：读最新的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set<n>"}]},{"type":"text","value":"：设置下个版本的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]},{"type":"text","value":"的值为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<n>"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"inc<n>"}]},{"type":"text","value":"：对"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]},{"type":"text","value":"加"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<n>"}]},{"type":"text","value":"，也生成1个新版本"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"命令实现"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set"}]},{"type":"text","value":"：直接对应多数派写"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"inc"}]},{"type":"text","value":"：(最简单的事务型操作)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image","src":"https://user-images.githubusercontent.com/34206897/180978809-4ba6957c-be2d-4b9d-a9d6-e2a12175c48e.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"问题: 如果有2个并发的客户端进程同时做这个inc的操作, 在多数派读写的实现中, 必然会产生一个Y客户端覆盖X客户端的问题.\n从而产生了数据更新点的丢失."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而paxos就是为了解决这类问题提出的, 它需要让Y能检测到这种并发冲突, 进而采取措施避免更新丢失"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1c9a7e01b88e4cdc9cf99061d5a78ed","src":"https://user-images.githubusercontent.com/34206897/180979165-328339f6-6d24-4b02-a114-012bab93dd7d.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"提取一下上面提到的问题: 让Y去更新的时候不能直接更新i₂, 而是应该能检测到i₂的存在, 进而将自己的结果保存在下一个版本i₃中,\n再写回系统中."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而这个问题可以转化成: i的每个版本只能被写入一次, 不允许修改. 如果系统设计能满足这个要求, 那么X和Y的inc操作就都可以正确被执行了."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"于是我们的问题就转化成一个更简单, 更基础的问题: 如何确定一个值(例如iⱼ)已经被写入了."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直观来看, 解决方法也很简单, 在X或Y写之前先做一次多数派读, 以便确认是否有其他客户端进程已经在写了, 如果有, 则放弃."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言","children":[{"id":"是什么","depth":3,"text":"是什么"},{"id":"有什么用","depth":3,"text":"有什么用"}]},{"id":"分布式系统要解决的问题","depth":2,"text":"分布式系统要解决的问题","children":[{"id":"背景","depth":3,"text":"背景"},{"id":"问题","depth":3,"text":"问题"},{"id":"解决方案","depth":3,"text":"解决方案"}]},{"id":"不太完美的复制策略","depth":2,"text":"不太完美的复制策略","children":[{"id":"主从异步复制","depth":3,"text":"主从异步复制"},{"id":"主从同步复制","depth":3,"text":"主从同步复制"},{"id":"半同步复制","depth":3,"text":"半同步复制"},{"id":"多数派读写","depth":3,"text":"多数派读写"}]},{"id":"从多数派读写到paxos的推导","depth":2,"text":"从多数派读写到paxos的推导"}]}},"_type":"markdown","_id":"content:3.code:distributed:paxos.md","_source":"content","_file":"3.code/distributed/paxos.md","_extension":"md"},{"_path":"/code/distributed/raft","_dir":"distributed","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Raft论文","description":"","index":false,"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"abstract"},"children":[{"type":"text","value":"Abstract"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"分布式一致性是构建容错系统的基础，它使得一些机器可以构成集群工作，并容许其中一些节点失效。不幸的是，最通用的一致性算法--"},{"type":"element","tag":"a","props":{"href":"./paxos"},"children":[{"type":"text","value":"Paxos"}]},{"type":"text","value":"，被普遍认为是难以理解和正确实现的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这篇论文提出了一个新的一致性算法--Raft，它就是为易于理解而设计的。Raft首先会选举出一台机器作为Leader，然后让系统所有的决定都由Leader来处理，这两步操作是相当独立的，相比于Paxos形成了一个更好的结构，Paxos的各个组件是很难分离的。Raft通过投票和随机超时来选举Leader，选举保证Leader存有所有必要的信息，因此数据只能从Leader流向其他节点。相比于其他基于Leader的算法，这使得行为流程更简单。一旦Leader被选举出来，就由它来管理复制日志。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft也更适合于在工程上实现。它在实际部署中表现良好，它解决了部署完整系统所需要的一切，包括怎样管理客户端的交互、怎样管理集群成员关系、如何压缩日志等。为了可以改变集群成员，Raft允许增加和删除集群中的节点，并且保证集群在这个过程中可以不中断服务。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们相信Raft优于Paxos和其他的一致性算法。许多实现都可以证明，它的leader选举算法适合于各种各样的环境，并有着和Multi-Paxos同样的性能。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n可以在这个可视化网站上查看动态的Raft，方便理解："},{"type":"element","tag":"a","props":{"href":"https://raft.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"可视化Raft"}]}]},{"type":"element","tag":"h2","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在的数据中心和应用都运行在高动态的环境中，可以通过增加或减少机器来进行横向扩展和收缩。机器和网络经常会面临故障，每年大约2-4%的磁盘驱动损坏，机器也经常宕机，而且在现代的数据中心中每天都会有数十条网络连接中断。因此系统在正常操作的时候可以处理机器加入或离开集群的情况，必须能够在很短时间内响应这些变化，对用户不造成影响。在当前系统中，这是一个主要的挑战。故障处理、协作、服务发现、配置管理在这种动态环境中都是很难做的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n幸运的是分布式一致性可以帮助我们处理这些挑战。一致性允许一些机器组成一个集群工作，可以容忍其中一些节点失效。在一个一致性的集群中，节点失效可以被正确的处理，保证系统的高可用，其他一些系统组件可以以一致性集群作为基础来实现容错。因此分布式一致性协议在构建高可用的大规模软件系统中起着重要的作用。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n许多分布式一致性系统的实现都依赖于Paxos算法，在过去的二十年里，Paxos算法在分布式一致性领域处于主导地位，大部分的实现要么基于Paxos，要么会受它的影响，而且Paxos也是教授学生一致性的主要算法。然而Paxos太难以理解，尽管已经做了很多努力来使它看起来简单一点。而且为了支撑实际系统，它的架构需要作出复杂的改变，而且需要作出许多原文没有提到的扩展，难以工程实现。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n因此我着手来实现一个更易理解并且易于实现的算法，称为Raft。在设计Raft算法的过程中，我使用了一些技术来提高算法的可理解性，包括：分解(分为Leader选举、日志复制、安全)和减少状态空间。我们也解决了在构建一个完整的分布式系统中会遇到的问题。我们仔细的设计了每一个过程，使得它易于理解和实现。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们也做了一个Raft的开源实现，称为LogCabin在第十章中会有更多的描述。"}]},{"type":"element","tag":"h2","props":{"id":"motivation"},"children":[{"type":"text","value":"Motivation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一致性是容错系统中的基本问题，在许多提供高可用和一致性要求高的环境中会遇到这种问题，一致性算法通常用在一致的大规模存储系统中。"}]},{"type":"element","tag":"h3","props":{"id":"1replicated-state-machine"},"children":[{"type":"text","value":"1、Replicated State Machine"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一致性算法通常会在Replicated State Machine的上下文中来描述，即多个机器拥有状态的多份copy，并能在一些机器故障时不中断的提供服务。replicated state machine用于解决分布式系统中的各种容错问题。replicated state machine的一些例子比如Chubby和Zookeeper，提供了少量数据的KV存储，除了基本的Put/Get操作之外，还加入了CAS等操作用于安全的处理并发问题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nReplicated state machine通常使用replicated log来实现，如图：\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/0.png"},"children":[]},{"type":"text","value":"\n每一个server都有一个日志保存了一系列的指令，state machine会顺序执行这些指令。每一个日志都以相同顺序保存着相同的指令，因此每一个state machine处理相同的指令，state machine是一样的，所以最终会达到相同的状态及输出。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n保证replicated log的一致是一致性算法的任务。server中的一致性模块接收客户端传来的指令并添加到自己的日志中，它也可以和其他server中的一致性模块沟通来确保每一条log都能有相同的内容和顺序，即使其中一些server宕机。 一旦指令被正确复制，就可以称作committed。每一个server中的状态机按日志顺序处理committed指令，并将输出返回客户端。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"实际系统中的一致性算法通常有如下特性："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在任何情况下能够确保安全(不返回错误的结果)，包括网络延迟、分区、丢包、重复、失序"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只要大多数节点可以正常工作和通信就能够保证完整的可用性。因此，一个典型的拥有5台机器的集群可以容忍两台机器的故障。当server恢复后可以读取持久化的状态并重新加入集群中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不依赖于时间来确保日志的一致。错误的时钟和极端的消息延迟会导致不可用，因此它是异步的方式来保证安全性，消息以任意的速度来执行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通常情况下，只要大多数节点对对RPC调用进行了响应就可看作命令执行完成，一小部分速度慢的server也不会拖慢整个系统的性能。"}]}]},{"type":"element","tag":"h3","props":{"id":"2replicated-state-machine的常用场景"},"children":[{"type":"text","value":"2、Replicated state machine的常用场景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Replicated state machine可以以各种方式来使用，这一节会讨论它的各种使用模式。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n通常会使用三或五台机器来部署一个replicated state machine集群，其他的server可以使用状态机来协调他们的活动，如图，这些系统通常使用replicated state machine来提供group membership、配置管理、锁等。比如一个具体的例子，replicated state machine可以提供一个容错的工作队列，其他server可以利用它来协调任务分配。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/1.png"},"children":[]},{"type":"text","value":"\n一个更简化的场景如图b，一个server作为leader，管理其他的server，leader将一些重要的数据存储在一致性系统中，如果leader故障，会从其他server竞争选出新的leader，一旦成功就可以继续使用一致性系统中的数据继续操作。许多大规模的存储系统都是这么做的，如GFS、HDFS等。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n有时候以会用来复制超大的数据，如图2.3，大规模存储系统中，将数据分散到集群的多个server上，将数据划分成许多replicated state machine，使用two-phase commit protocol来管理一致性。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/2.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"basic-raft-algorithm"},"children":[{"type":"text","value":"Basic Raft Algorithm"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一章会讲述Raft算法。我们尽可能简单的设计Raft算法，第一部分描述了我们的设计思路，接下来的部分描述算法本身以及一些示例来帮助我们更好的理解。"}]},{"type":"element","tag":"h3","props":{"id":"1designing-for-understandability"},"children":[{"type":"text","value":"1、Designing for understandability"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在设计Raft算法的时候有几个目标：它必须可以支持实现一个完整的系统，需要极大的减少开发者的设计工作；它必须在任何条件下都能保证安全和可用性；必须效率足够高。但是我们最重要的目标也是最大的挑战---可理解性，它必须能够让更多的人可以理解，而且便于工程实现。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们使用了两种技术来简化我们的算法。第一个就是众所周知的问题分解方法，在任何可能的地方将问题划分成几块来解决，可以独立的分析和理解，比如我们在Raft中我们设计了Leader选举、日志复制、和安全三部分。我们的第二个方法就是通过减少状态数来简化状态空间，尽可能消除系统中的不确定性，比如Raft限制log的使用方式来减少这种不确定性，当然有时候引入一些不确定性也会便于我们的理解，我们会使用随机化来简化Leader的选举过程。"}]},{"type":"element","tag":"h3","props":{"id":"2raft简介"},"children":[{"type":"text","value":"2、Raft简介"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft是一个管理replicated log的算法，图3.1总结了算法的核心内容便于参考，图3.2列出来了算法的一些关键特性，图中的内容我们会在后面的文章中详细的进行分析。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft首先选举出一个server作为Leader，然后赋予它管理日志的全部责任。Leader从客户端接收日志条目，复制给其他server，并告诉他们什么时候可以安全的将日志条目应用到自己的状态机上。拥有一个Leader可以简化replicated log的管理。例如，leader可以决定将新的日志条目放在什么位置，而无需询问其他节点，数据总是简单的从leader流向其他节点。Leader可能失败或者断开连接，这种情况下会选出一个新的leader。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n通过leader，Raft将一致性问题分解成三个相当独立的子问题："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Leader Election：当集群启动或者leader失效时必须选出一个新的leader。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Log Replication：leader必须接收客户端提交的日志，并将其复制到集群中的其他节点，强制其他节点的日志与leader一样。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Safety：最关键的安全点就是图3.2中的State Machine Safety Property。如果任何一个server已经在它的状态机apply了一条日志，其他的server不可能在相同的index处apply其他不同的日志条目。后面将会讲述raft如何实现这一点。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/raft/3.png"},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/4.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"3raft基础"},"children":[{"type":"text","value":"3、Raft基础"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个Raft集群会包含数个server，5是一个典型值，可以容忍两个节点失效。在任何时候每个server都会处于Leader、Candidate、Follower三种状态中的一种。在正常情况下会只有一个leader，其他节点都是follower，follower是消极的，他们不会主动发出请求而仅仅对来自leader和candidate的请求作出回应。leader处理所有来自客户端的请求(如果客户端访问follower，会把请求重定向到leader)。Candidate状态用来选举出一个leader。如图：\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/5.png"},"children":[]},{"type":"text","value":"\nRaft将时间划分为任意长度的term，用连续整数编号。每一个term都从选举开始，一个或多个candidate想要成为leader，如果一个candidate赢得选举，它将会在剩余的term中作为leader。在一些情况下选票可能会被瓜分，导致没有leader产生，这个term将会以没有leader结束，一个新的term将会很快产生。Raft确保每个term至多有一个leader。Term在Raft中起到了逻辑时钟的作用，它可以帮助server检测过期信息比如过期的leader。每一个server都存储有current term字段，会自动随时间增加。当server间通信的时候，会交换current term，如果一个节点的current term比另一个小，它会自动将其更新为较大者。如果candidate或者leader发现了自己的term过期了，它会立刻转为follower状态。如果一个节点收到了一个含有过期的term的请求，它会拒绝该请求。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/6.png"},"children":[]},{"type":"text","value":"\nRaft节点之间通过RPC进行通信，基本的一致性算法仅仅需要两种RPC。RequestVote RPC由candidate在选举过程中发出，AppendEntries RPC由leader发出，用于复制日志和提供心跳。每一个请求类型都有对应的response，Raft假定request和response都可能会丢失，因此要求请求者有超时重试的能力。为了性能，RPC请求会并行发出，而且不保证RPC的到达顺序。"}]},{"type":"element","tag":"h3","props":{"id":"4leader-election"},"children":[{"type":"text","value":"4、Leader election"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft使用心跳机制来触发leader选举。当server启动的时候是处于follower状态，当它可以收到来自leader或者candidate的有效RPC请求时就会保持follower的状态。Leader发送周期性的心跳(不含日志的AppendEntries RPC)给所有的follower来确保自己的权威。如果一个follower一段时间(称为election timeout)没有收到消息，它就会假定leader失效并开始新的选举。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n为了开始新一轮选举，follower会提高自己当前的term并转为candidate状态。它会先给自己投一票然后并行向集群中的其他server发出RequestVote RPC，candidate会保持这个状态，直到下面三种事情之一发生："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"赢得选举。当candidate收到了集群中相同term的多数节点的赞成票时就会选举成功，每一个server在给定的term内至多只能投票给一个candidate，先到先得。收到多数节点的选票可以确保在一个term内至多只能有一个leader选出。一旦一个candidate赢得选举，它就会成为leader。它之后会发送心跳消息来建立自己的权威，并阻止新的选举。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"另一个server被确定为leader。在等待投票的过程中，candidate可能收到来自其他server的AppendEntries RPC，声明它才是leader。如果RPC中的term大于等于candidate的current term，candidate就会认为这个leader是合法的并转为follower状态。如果RPC中的term比自己当前的小，将会拒绝这个请求并保持candidate状态。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有获胜者产生，等待选举超时。candidate没有选举成功或者失败，如果许多follower同时变成candidate，选票就会被瓜分，形不成多数派。这种情况发生时，candidate将会超时并触发新一轮的选举，提高term并发送新的RequestVote RPC。然而如果不采取其他措施的话，选票将可能会被再次瓜分。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft使用随机选举超时来确保选票被瓜分的情况很少出现而且出现了也可以被很快解决。election timeout的值会在一个固定区间内随机的选取(比如150-300ms)。这使得在大部分情况下仅有一个server会超时，它将会在其他节点超时前赢得选举并发送心跳。candidate在发起选举前也会重置自己的随机election timeout，也可以帮助减少新的选举轮次内选票瓜分的情况。"}]},{"type":"element","tag":"h3","props":{"id":"5log-replication"},"children":[{"type":"text","value":"5、Log Replication"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一旦一个leader被选举出来，它开始为客户端请求服务。每一个客户端请求都包含着一个待状态机执行的命令，leader会将这个命令作为新的一条日志追加到自己的日志中，然后并行向其他server发出AppendEntries RPC来复制日志。当日志被安全的复制之后，leader可以将日志apply到自己的状态机，并将执行结果返回给客户端。如果follower宕机或运行很慢，甚至丢包，leader会无限的重试RPC(即使已经将结果报告给了客户端)，直到所有的follower最终都存储了相同的日志。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n日志按下图的方式进行组织，每一条日志储存了一条命令和leader接收到该指令时的term序号。日志中的term序号可以用来检测不一致的情况，每一条日志也拥有一个整数索引用于定位。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/7.png"},"children":[]},{"type":"text","value":"\nleader会决定何时apply一条日志是安全的，这被称为committed。Raft确保committed日志是持久化的并最终被所有的状态机执行。一旦leader把日志复制到了大多数节点上，就会committed，这也意味着在此之前的所有日志都被commit了，包括之前其他leader创建的日志。图3.6展示了一些在leader改变后执行这些规则可能产生的一些情况，它也表明了commit的定义是安全的。leader会追踪已经committed的最高的日志索引，并将这个索引放入之后的AppendEntries RPC，以便于其他节点可以最终发现，一旦一个follower意识到一条日志被committed了，它就会将其apply到自己的状态机。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft日志机制可以保证不同server上的日志具有很高的一致性。这不仅仅简化了系统和增强了可预测性，而且这也是确保安全的一个重要组件，Raft通过下列特性构建了图3.2中描述的Log Matching Property："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果不同日志中的两条记录有相同的index和term，他们会存有相同的命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果不同日志中的两条记录有相同的index和term，那么他们之前的记录也是完全相同的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"leader在给定的index和term处至多只会创建一条记录，并且新的记录不会改变之前的位置，因此可以确保第一条。第二条是通过AppendEntries的一致性检查实现的。当发送AppendEntries RPC的时候，leader会将之前最新日志的term和index包含在其中， 如果follower没有在自己的日志中找到相同的index和term，它就会拒绝这条请求。累加效果，因此只要AppendEntries RPC返回成功，leader就会知道follower的日志直到最新的这条都和自己一样。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在正常操作中，leader和follower的日志是完全一致的，因此AppendEntries的一致性检查不会失败。然而，leader失效可能会造成不一致的情况，这种不一致可能是多次形成的。图3.6展示了一些follower和leader日志不一样的情况。follower可能会缺少一些日志，也可能会比当前leader额外多出一些日志，或者两者兼有，而且可能涉及到几个term。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在Raft中，leader通过强制follower复制自己的日志来解决这种不一致的情况，意味着follower和leader产生冲突的部分日志会以leader为准进行重写。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/8.png"},"children":[]},{"type":"text","value":"\n为了使得follower的日志和leader的日志一致，leader必须找到自己和follower最后一致的日志索引，然后删掉在那之后follower的日志，并将leader在那之后的日志全部发送给follower。所有的这些操作都发生在AppendEntries RPC的一致性检查中。leader持有针对每一个follower的nextIndex索引，代表下一条要发送给对应follower的日志索引。当leader刚上任时，它会初始化所有的nextIndex值为最后一条日志的下一个索引，如图3.6中的11。如果follower的日志和leader的不一致，下一次AppendEntries的一致性检查就会失败。在遭到拒绝后， leader就会降低该follower的nextIndex并进行重试。最终nextIndex会到达leader和follower一致的位置。这条AppendEntries RPC会执行成功，并覆盖follower在这之后原有的日志，之后follower的日志会保持和leader一致，直到这个term结束。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果leader发现自己的日志和follower是完全匹配的，leader就可以发送不带有日志数据的AppendEntries(心跳)来节省带宽。一旦matchIndex追上了nextIndex，leader应当开始发送日志数据。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n当然上面的寻找index的过程可以优化减少AppendEntries RPC。例如，当拒绝AppendEntries请求时，follower可以返回发生冲突的entry所在的term以及该term的第一个index，通过这些信息，leader可以直接跳过这个term中的全部index。另外leader可以使用二分搜索来查找和follower第一个不同的日志。实际上，这些优化不是很必要的，因为故障不很频繁，而且不太可能有太多不一致的日志。Leader从不需要重写或者删除自己的日志。"}]},{"type":"element","tag":"h3","props":{"id":"6safety"},"children":[{"type":"text","value":"6、Safety"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前面的章节讲述了raft如何进行leader选举和复制日志，然而到目前为止所描述的这些机制是不能充分确保每一个状态机都以相同的顺序执行相同的指令。例如，在leader提交了几条日志的过程中，某个follower始终不可用，之后该follower被选举为leader并重写了原来leader的这些日志，结果导致不同的状态机可能执行了不同的命令。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这一小节将会通过给选举过程增加一些限制来完成Raft算法，这个限制可以确保leader在给定的term都含有全部已提交的日志。通过选举限制使得日志提交的规则更加精确。"}]},{"type":"element","tag":"h4","props":{"id":"election-restriction"},"children":[{"type":"text","value":"Election restriction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在任何基于leader的一致性算法中，leader必须最终存有全部committed日志。在一些一致性算法（如Viewstamped Replication），节点 即使不包含全部committed日志也会被选举为leader，这些算法通过其他的机制来定位缺失的日志，并将其转移给新的leader。然而这增加了系统的复杂度，raft使用了更加简单的方法来确保所有committed的日志存在于每个新选举出来的leader，不需要转移日志。因此日志只需要从leader流向follower即可，而且不需要重写自己的日志。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft使用投票过程来确保选举成为leader的candidate一定包含全部committed的日志。Candidate必须联系大部分节点以赢得选举，也就意味着每一个committed日志至少存在于其中一个节点上(复制超过一半节点才会commit)，如果candidate的日志至少和这一大部分节点的日志一样新，它就会含有全部已提交的日志。RequestVote RPC实现了这一限制："},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"RPC请求包含着candidate的日志信息，其他节点如果发现自己的日志比candidate的日志更新，就回拒绝该请求。"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft通过比较最后一条日志的index和term来决定谁更新一些。如果term不一致则拥有更大的term日志更新，如果term一样，则index更大的日志更新。"}]},{"type":"element","tag":"h4","props":{"id":"committing-entries-from-previous-terms"},"children":[{"type":"text","value":"Committing entries from previous terms"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果一条日志成功复制到大多数节点上，leader就知道可以commit了。如果leader在commit之前崩溃了，新的leader将会尝试完成复制这条日志。然而一个leader不可能立刻推导出之前term的entry已经commit了。图3.7展示了这样的情景，已经复制到大多数节点的日志可能会被覆盖。为了消除这种可能，Raft不会通过计算已经复制的数目来提交以前term的日志，它只会提交当前term中的日志。一旦当前term的日志committed，那么之前的term也会被间接提交。这样做更简单。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/9.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"7follower-and-candidate-crashes"},"children":[{"type":"text","value":"7、Follower and candidate crashes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Follower和candidate的崩溃处理相比于leader简单许多，而且可以用相同的方式处理。如果follower或者candidate崩溃，之后发给他们的RPC请求会失败。Raft会进行无限重试，如果重启了，RPC请求将会执行成功。如果server完成了RPC请求，但是响应丢失了，Leader也会重新发送RPC请求，节点收到重复请求是没有影响的，比如收到了重复的log entry，它会忽略这些日志。"}]},{"type":"element","tag":"h3","props":{"id":"8persisted-state-and-server-restarts"},"children":[{"type":"text","value":"8、Persisted state and server restarts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft server必须将一些必要的数据持久化以便重启后数据不丢失。首先需要持久化它当前的term和投出的选票，这可以防止节点在一个term内投出两次选票。每一个server也需要在commit前持久化最新的日志，可以防止committed日志丢失。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n其他的变量是可以丢失的，因为可以重新产生。一个例子就是commitIndex，在重启的时候可以安全的重置为0.即使每一个server都在相同的时候重启，commitIndex也仅仅是短暂的落后于它的真实值。一旦leader被选举出来并提交新的entry，它的commitIndex就会很快的提高上来，并立刻传播给其他的server。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n对于状态机来说，它可以是持久化的也可以是易失的，易失性的状态机在重启后必须重新apply它的日志，而持久化的状态机已经apply过了，为了避免重复apply，它需要持久化保存最后apply的index。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果一个server丢失了全部的持久化的状态，这时候它不能以之前的身份安全的加入到集群中。这个节点可以当作一个新的节点，通过触发集群的membership change来加入集群。如果大部分集群节点都丢失了持久化的数据，这时候就需要集群管理员出马人工干预了。"}]},{"type":"element","tag":"h3","props":{"id":"9timing-and-availability"},"children":[{"type":"text","value":"9、Timing and availability"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们对Raft安全性的一项要求是它不依赖于精确的时间。然而，可用性(系统在规定时间内响应客户端)却不可避免的依赖于时间。Leader选举是Raft对时间最敏感的部分。当满足下面的式子时，raft可以选出并保持一个稳定的leader："},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"broadcastTime << electionTimeout << MTBF"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"broadcastTime代表节点并行向其他所有节点并行发送RPC请求并获得响应的平均时间；electionTimeout是选举超时；MTBF是单个节点两次宕机间隔的平均时间。broadcastTime应当远小于electionTimeout，从而leader可以依靠心跳来阻止follower发起选举；给electionTimeout引入随机性可以避免选票瓜分；electionTimeout应远小于MTBF，从而使得系统可以平稳工作。当leader宕机时，系统将仅会在electionTimeout的时间内不可用。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nbroadcastTime和MTBF都受到底层系统的影响，但是electionTimeout是我们必须谨慎选择的。Raft的RPC请求一般会需要持久化存储，因此broadcastTime一般需要0.5-20ms，依赖于持久化技术。因此electionTimeout最好选择在10-500ms之间。典型的MTBF值一般是几个月，它很容易就满足要求。"}]},{"type":"element","tag":"h3","props":{"id":"10leadership-transfer-extension"},"children":[{"type":"text","value":"10、Leadership transfer extension"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一节描述了Raft的一个可选扩展，它允许一个节点转移自己的leader权给其他节点，在下面两种情况下会很有用："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有时候leader需要主动下线。比如，它可能需要重启或者移出集群。当它下线的时候，集群在electionTimeout的时间内处于闲置状态，直到有一台机器成为leader，这种不可用的情况可以通过主动转移leader权来避免。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在一些情况下，其他的节点可能更适合于担当leader。比如Raft的leader节点承担了全部的客户端负载，当负载很高时会影响系统的性能，这时候leader可以周期性的检查集群中的follower是否有更适合成为leader的，然后将领导权转移给他。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了转移领导权，当前leader会把自己的日志发送给目标节点，然后目标节点提前触发一轮选举。当前leader确保了目标节点拥有全部committed日志。下面是详细步骤："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当前leader停止接收客户端请求"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当前leader通过复制日志将目标节点的日志更新为和自己完全一样"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当前leader发送一个TimeoutNow请求给目标节点。这个请求会使得目标节点立刻触发超时并开启新一轮选举。它有极大可能在其他节点超时之前赢得选举，它的下一条消息将会包含新的term编号，导致leader自动下线。leader转移完成。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果转移失败，之前的leader必须中断转移过程，并重新开始接收客户端的请求。"}]},{"type":"element","tag":"h2","props":{"id":"cluster-membership-changes"},"children":[{"type":"text","value":"Cluster membership changes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"到目前为止我们都假定集群的配置信息（如server列表）是不变的，实际上有时候需要改变集群的配置，比如某台server宕机时将其替换或者增加follower，这可以通过两种方式来进行手动操作："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以使集群下线一段时间来更新配置文件，然后重启集群。这会使得在配置更新期间集群不可用。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个新的server可以通过询问待下线节点的地址来进行替换。管理员必须确保被替换掉的节点不会再回来，否则系统将会丧失安全性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的方法都有很大的缺点，而且一旦引入手动操作，将会增加操作的风险。为了避免这些问题，我们决定引入自动更新配置机制到Raft算法中。Raft允许集群在配置更新的时候可以继续工作，并且仅仅给基本的Raft算法增加一些扩展就可以实现。图4.1总结了会用到的RPC，将会在后面的章节中进行讨论。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/10.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"1safety"},"children":[{"type":"text","value":"1、Safety"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"保证配置更新期间的安全性是面临的第一个挑战，必须确保在同一个term中不会有两个leader被选举出来。如果直接更新配置，增加或者删除集群中的servers，直接将集群从旧的配置更新到新的配置是不安全的，可能会出现两个leader。不可能一次性自动的完成所有节点的转换，因此可以在转换期间将集群划分为两个独立的部分，如图4.2。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n大部分配置更新的算法都引入了额外的机制来解决问题，这也是Raft一开始所做的，但是后来找到了一种更好的方法，我们对配置更新的操作进行了限制：集群在某一时刻只能添加或删除一台机器。复杂的多台机器的配置更新可以通过逐个执行上述操作来实现。这一章的大部分内容都在讲述单节点更新方法，它更容易理解。本章第三节描述了我们原来的操作，它带来了额外的复杂性。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/11.png"},"children":[]},{"type":"text","value":"\n当向集群添加或移除一个节点时，如图4.3，老的集群节点形成的多数派和新集群节点形成的多数派，必然会发生重叠，也就是说必然只能形成一个多数派，这个重叠避免了脑裂。因此只添加或删除一个节点时，可以直接更新配置。Raft利用此属性，几乎不需要其他机制即可安全的更改集群成员的身份。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/12.png"},"children":[]},{"type":"text","value":"\n集群配置信息可以作为特殊的log entry来存储和交流，这可以利用Raft复制和持久化日志的现有机制。通过在配置更新和客户端请求之间添加顺序，它也可以允许集群在配置更新的过程中持续为客户端提供服务。\n当leader收到一个让其从现有集群配置(Cold)增加或删除一个节点的请求时，它向其日志中追加一条含有新的配置信息Cnew的entry，并使用正常的Raft机制将其复制给其他节点，一旦该entry被追加到节点的日志中，新的日志就开始生效：Cnew entry会被复制到Cnew Server上，是否大部分节点应用了新配置来决定是否commit。这意味着节点不用等待新配置commit，而是总会使用最新的config。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n**当Cnew被commit之后配置变更完成，此时leader知道大部分的server已经应用了新的配置，**它也知道没有更新配置的server不可能再组成多数派，也就不可能选出leader。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"新配置的commit可以使得下面的三件事继续："}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"leader可以知道成功完成了配置更新"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果新配置要移除一个节点，它就可以下线了。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以开始后续的配置更新。在此之前，重叠的配置更新可能会导致不安全的情况。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上所述，server总是使用日志中的最新配置信息，而不需关注它是否committed。如果只有当新配置committed之后才可以应用到节点，leader将会很难搞清楚什么时候大部分节点使用了新配置。"}]},{"type":"element","tag":"h3","props":{"id":"2availability"},"children":[{"type":"text","value":"2、Availability"}]},{"type":"element","tag":"h4","props":{"id":"1-catching-up-new-servers"},"children":[{"type":"text","value":"（1） Catching up new servers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当一个新的server被添加到集群中时，它通常是没有存储任何日志信息的，它的日志通常需要很长时间才能追上leader的日志进度，这期间集群更容易出现不可用。例如，一个三节点的集群可以容忍单节点失效，然而如果带有空日志的第四个server被添加到这个集群中，并且原来的一个节点出现宕机，这期间集群将不能够commit日志，如图4.4.另一种可能发生的情况是如果多个新节点被连续添加到集群，要想形成多数派的话就需要这些新的节点。在这些情况下，直到新节点的日志追上leader，否则集群会一直不可用。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/13.png"},"children":[]},{"type":"text","value":"\n为了避免这种不可用的情况，Raft在配置更新之前引入了一个额外的阶段，期间新加入的节点不占有投票权，leader会将日志复制给它，但是选举或者commit时统计多数选票都不会计入它。一旦新节点的日志追上来，配置便可以开始更新了（这种机制在其他场景下也会非常有用，比如可以用在向大部分节点复制状态，对于一致性不那么高的只读请求可以通过读取follower节点来实现）。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nleader需要知道新节点什么时候真正的追上了leader的日志，从而可以进行后续的配置更新。如果新节点刚刚添加就开始更新配置可能会导致不可用，我们的目标是将不可用时间保持在election timeout之内，因为正常情况下也会出现election timeout时间的不可用。而且，我们希望尽可能的让新节点的日志接近于leader的日志，最小化不可用时间。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果新节点不可用或者速度太慢不可能追上leader的日志，leader应该终止这个更新。事实上，我们的第一次配置更新的请求需要包含网络端口号，系统可以正确的终止更新并返回错误。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们建议使用下面的算法来确保新节点的日志可以充分追上leader：将对新节点的复制日志过程划分为几轮，如图4.5，每一轮复制从开始到现在的所有日志给新节点，由于在复制日志的过程中，leader会继续接收新的日志，这些新加的日志会在下一轮进行复制，随着不断的进行，每一轮次复制的持续时间会不断缩短，当算法等待几个轮次(比如10)的复制之后，如果最后一轮的持续时间短于election timeout，leader就可以将新节点正式加入集群，否则leader就会中断配置更新并返回错误，调用者之后可以进行重试（下次重新更有可能成功，因为该节点的日志已经部分赶了上来）。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/14.png"},"children":[]},{"type":"text","value":"\n作为日志追上来的第一步，leader必须去发现新节点的日志是空的。对新节点的AppendEntries一致性检查会一直失败，直到nextIndex减为1（之后可以将全部日志传输过去），这个过程可能是影响节点加入性能的主要因素。虽然有各种的方法优化这一过程，但是最简单的方式就是新节点在收到AppendEntriesRPC之后能在response中返回自己的日志长度，从而leader可以快速确定它的nextIndex。"}]},{"type":"element","tag":"h4","props":{"id":"2-removing-the-current-leader"},"children":[{"type":"text","value":"（2） Removing the current leader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果当前leader需要被从集群中移除，它必须在某个时间点下线。一个直接的方法就是使用之前讲过的领导权主动转移的扩展，leader将领导权转移给其他节点，之后可以执行正常的配置更新。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果没有实现这个扩展，我们可以采用另外一种方式。在这种方式中，要被移除的leader会在新配置Cnew被commit之后下线。如果下线早于这个时间点，可能会触发超时并重新成为leader，从而使得下线进程延后。在一个极端场景下，移除两节点集群中的leader，这个leader可能必须再次成为leader，以使得集群可以正常运行，如图4.6。因此leader等到新配置commit之后再下线。这是新配置可以确定在不需要移除的leader参与的情况下正常运行的第一个时间点：因为这允许新配置下的节点可以在他们中选出一个新的leader。在原来leader下线之后，新配置下的一个server会超时触发选举。这个短暂的不可用应该是可以容忍的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/15.png"},"children":[]},{"type":"text","value":"\n这种方法可能会有两个虽然不严重但需要关注的问题。第一，将会有一段时间（正在commit新配置）leader在管理集群，但它却不是集群成员，它复制日志但在统计多数派时却不计入自己。第二，节点可能在不持有最新配置的情况下触发选举，因为在新配置commit之前还需要它，在选举的时候不会统计它的选票，直到它也获得了最新配置。"}]},{"type":"element","tag":"h4","props":{"id":"3-disruptive-servers"},"children":[{"type":"text","value":"（3） Disruptive servers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不处于新配置的节点可能会毁坏整个集群，一旦leader创建了一个新配置，不在新配置中的节点将不会收到心跳信息，因此它可能会超时并开始新的选举，而且它将不会接收到新配置和新配置commit的消息，它也就将不会知道自己被移出集群。它将会以新的term发送RequestVote RPC，并使得其他的leader被迫转为follower。处于新配置下的一个节点最终会成为leader，但是这个待下线节点将会再次超时并形成恶性循环。如果要下线的节点更多，情况将会更严重。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nRaft的解决办法是使用心跳来判断是否有一个有效的leader存在，如果leader可以持续的发送心跳那就认为leader是活跃的。因此节点可以收到心跳时是不可以打断leader的。我们修改一下RequestVote RPC：如果节点在心跳超时之前收到了RequestVote请求，它不会提升自己的term。它可以丢弃该请求或者返回一个拒绝投票的请求，或者推迟这个请求，结果都是相同的。这不会影响正常的选举，这却保证了leader不会被迫下线。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这和前面描述的领导权转移扩展冲突，因为那需要在超时之前就触发选举，即使仍然有leader存在也需要去处理RequestVote请求。可以通过给RequestVote请求加个标志来解决这个冲突。"}]},{"type":"element","tag":"h3","props":{"id":"3availability-argument"},"children":[{"type":"text","value":"3、Availability argument"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一节将会提出一个更复杂的方法来处理针对一次性任意数量节点(添加、删除)的配置更新。例如，两个节点可以一次性加入到一个集群中，或者一个5节点集群的server需要全部替换。当然这个方法会引入额外的复杂性，我们还是建议使用单节点的更新方式，任意数量的同时更改通常只是在论文理论分析中会用，我不认为在实际系统中需要这样做，因为一系列的单节点更改已经足够满足各种各样的情景了。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n为了确保任意数量节点配置更新时的安全性，集群首先需要转移的一个过渡状态称为joint consensus，一旦这个状态被提交，系统之后就可以过渡到新配置。joint consensus结合了新老配置："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"日志被复制到新老配置中的所有节点"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"来自新老配置的server都有可能成为leader"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Agreement需要来自新老配置各自的多数选票。例如，从三节点过渡到9节点时，agreement需要原来三节点配置的2个server和新配置下的5个server的赞成。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"joint consensus允许server各自过渡到新配置而不需要作出安全性的保证，而且允许集群在整个变更过程中持续提供服务。这个方法通过中间日志entry来扩展单节点的配置更新算法。如图4.8所示，当leader收到需要将配置从Cold过渡到Cnew的请求时，它将joint consensus需要的配置Cold,new存为日志entry并通过正常的Raft机制复制。。。。。。。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/16.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"4system-integration"},"children":[{"type":"text","value":"4、System integration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同的Raft实现可能会以不同的方式来实现本章中描述的配置更新机制。比如，AddServer和RemoveServer的RPC方法可能直接由管理员触发，也可能通过脚本来触发一系列的单节点配置更新。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n在一些情况下，比如机器宕机，可能需要自动触发配置更新，这应当在合理的策略下才可以进行。比如，自动移除宕机的节点对集群来说可能是很危险的，因为可能会剩下很少的节点，不能满足系统的持久化和容错要求。一种有效的方式是让那个管理员配置一个要求的集群节点数量，在这个限制下，可以用可用的节点自动代替下线的节点。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n当需要处理多个节点时，更倾向于先增加节点后删除节点。例如，为了替换一个三节点集群中的一台机器，先增后删可以使得系统在任何时候都可以容错一台机器。然而如果先删后增，系统可能会遇到短暂的不可用状态。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n配置更新操作也导致了不同的集群启动方式。在不支持配置更新时，每一个server只需要又一个静态配置文件就可以。在可以动态配置更新的情况下，就不需要这个静态配置文件了，因为系统通过Raft日志来管理配置。但是我们推荐，在集群最开始创建的时候每一个server都有一个配置文件作为它的第一条日志，这个配置仅列出该server自己的信息，它独自组成了它的配置中描述的多数派。其他的server应当初始化时只有0条日志，他们被添加到集群并获取当前配置信息。"}]},{"type":"element","tag":"h2","props":{"id":"log-compaction"},"children":[{"type":"text","value":"Log compaction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft日志会随着不断处理客户端的请求而变大，会占用越来越多的空间而且重放日志也需要更多的时间。如果不采取一些压缩日志的方式，最终会造成一些可用性的问题：机器可能会耗尽空间，或者话花费太多的时间来重启。因此对于实际系统来说日志压缩是必须的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n压缩日志的通常的思路是过期的日志占用了太多无用信息，可以丢弃掉。例如，一个操作set x=2，之后又一个操作set x=3，那么前一个日志就是无用的。一旦日志被committed并apply到状态机，用来到达当前状态的中间状态和操作就是不需要的了，可以被压缩掉。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n与核心Raft算法和成员配置更新不一样，对于不同的系统有不同的日志压缩需要，没有一个放之四海而皆准的方法。这一章的目标是讨论一些日志压缩的方法，在每一个方法中，大部分日志压缩的责任都落在状态机上，raft状态机可以有不同的实现方式，如图5.1所示：\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/17.png"},"children":[]},{"type":"text","value":"\n各种日志压缩方法都有一些通用的概念。首先，每一个server都独自压缩自己的已committed的日志，而不是将日志压缩任务集中在leader，这避免了通过网络传输大量的冗余数据给follower。它也有助于模块化，大部分的日志压缩操作集中于状态机而不是raft本身，这可以使得整个系统的复杂度最小。第四节也会讲述基于leader的日志压缩，但是适合于很小数据量的日志压缩。第二，状态机和raft之间的交互都需要将日志从raft传输到状态机。在apply这些日志entry后，状态机会将这些日志存到磁盘，便于以后恢复系统状态。一旦状态机完成，就会通知raft把这部分日志丢弃掉，在丢弃之前，它必须保留一些描述丢弃掉的日志的状态信息。通常raft会保留丢弃掉的最后一条日志的index和term，从而可以使得AppendEntries的一致性检查继续工作，raft也需要保留丢弃的日志中的最新的配置信息来支持配置更新。第三，一旦raft丢弃了之前的日志，状态机就会担负起另外两种新的责任。如果server重启，在状态机可以apply raft日志之前需要从磁盘加载这些数据，另外状态机也需要产生一个满足一致性的数据镜像，以便于可以将其发送给较慢的follower。当raft监测到AppendEntries中需要发送的next entry已经被丢弃掉了，此时状态机必须提供提供这种镜像以便发送给follower。"}]},{"type":"element","tag":"h3","props":{"id":"1snapshotting-memory-based-state-machines"},"children":[{"type":"text","value":"1、Snapshotting memory-based state machines"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一种snapshot压缩日志的方法适合于状态机数据保存在内存中的场景。这种方法在数据量在几GB或者几十GB的情况下是一个合适的选择，它操作完成很快，因为不需要从磁盘获取数据，它也容易编程实现，因为有丰富的数据结构可以使用并且操作不会被IO阻塞。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n图5.2展示了Raft snapshotting的基本操作。每一个server单独拍摄快照，仅包括自己日志中committed部分。快照的大部分工作涉及到状态机当前状态的序列化，这具体到不同的状态机实现。一旦状态机完成了snapshot，日志就可以被截断。Raft首先会持久化重启所需要的状态，最后一条日志的index、term和所属的config，然后丢弃在此index之前的日志。任何之前的快照也会被丢弃，因为没用了。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/18.png"},"children":[]},{"type":"text","value":"\n如上所述，leader偶尔可能会需要将自己的数据发送给慢follower或者新加入集群的节点。leader通过一个新的RPC--InstallSnapshot来发送最新的快照，如图5.3.当follower收到snapshot，它必须决定如何处理它当前的日志。通常快照会包含follower当前没有的新日志，这种情况下follower只需要全部丢弃。当然如果收到的snapshot数据不如follower自己的新，它会保留在这之后的日志，而把之前的用snapshot覆盖掉。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/19.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"1snapshotting-concurrently"},"children":[{"type":"text","value":"（1）Snapshotting concurrently"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建一个快照可能需要很长时间，包括序列化状态和将数据写入磁盘。例如复制10GB的内存数据可能只需要1秒，但是将其序列化可能需要更长的时间，在写入磁盘的时候每秒大概只能写入500M。因此序列化和写快照必须是和正常操作并发执行的，以免影响可用性。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n幸运的是，copy-on-write技术允许在不影响快照写入的情况下apply新的更新，有两种方式可以实现这一点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以使用不可变的数据结构来构建状态机。因为状态机命令不会原地修改状态，快照任务可以保存对之前状态的引用并将其一致的写入快照。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以使用操作系统的copy-on-write技术。比如在Linux环境下，可以使用fork获得server当前地址空间的完整拷贝。子进程可以写入所有的数据，父进程可以持续处理客户端请求。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"server会需要额外的内存来支持并发快照，这是可以提前计划和管理的。状态机提供流式处理snapshot文件数据的接口是很重要的，从而快照可以不需要完全一次性载入内存。copy-on-write技术也需要额外比例的内存支持。如果在快照的过程中内存耗尽了，server应当停止接收新日志直到完成快照，这会短暂的耗尽可用性，但至少使得server可恢复。最好不要中断快照并重试，因为下次很可能会遇到相同的情况。"}]},{"type":"element","tag":"h4","props":{"id":"2when-to-snapshot"},"children":[{"type":"text","value":"（2）When to snapshot"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server必须决定什么时候进行快照。如果快照进行的太频繁，会浪费磁盘带宽和其他的资源，如果快照太少，将会使得存储空间耗尽的风险增大，也增加了重启后日志重放的耗时。一个简单的策略是当日志达到一个固定的内存使用值的时候进行快照，如果这个值被设置的明显大于snapshot的预期体积大小，则用于快照的磁盘带宽开销将很小，但是这会导致不必要的大的日志体积。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n一个更好的方法是比较快照大小和日志的大小，如果快照比日志小许多倍，那此时进行快照将是值得的。但是在拍摄快照之前计算其体积大小是很困难的，并且为状态机增加了负担，甚至计算快照体积的工作量不亚于直接拍摄快照。压缩快照文件可以节省存储空间和带宽，但是也很难预测压缩后的文件大小。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n幸运的是，我们可以使用上一次快照的体积。一旦当前日志的大小超过了上次快照体积的一定倍数，就需要进行快照了，这个倍数称为expansion factor，是可配置的。expansion factor需要在磁盘带宽和空间使用上寻求平衡，例如，expansion factor为4的时候，快照会占用20%的磁盘带宽，以及6倍的磁盘空间，因为需要数据的一份拷贝（原来的快照+新的快照+4倍大小的日志）。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n快照也会导致CPU使用的剧增，会影响到性能。这可以通过增加额外的硬件来解决，比如额外的磁盘驱动。"}]},{"type":"element","tag":"h4","props":{"id":"3implementation-concerns"},"children":[{"type":"text","value":"（3）Implementation concerns"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一小节将会总结实现快照功能需要的组件并讨论实现时的一些难点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Saving and loading snapshots：保存快照涉及到序列化状态机的状态数据并将其写入到文件中，加载是其逆向过程。我们发现这其实很简单，虽然你将数据从原本的状态序列化成各种类型会有些繁琐。提供一个从状态机到磁盘文件的流式接口是很有用的，可以避免在内存中缓存整个的状态机状态数据，可能也会有助于压缩流并应用校验和。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Transferring snapshots：传输快照涉及到实现leader和follower侧的InstallSnapshot RPC接口。这也是相当简单的，并且可以重用一些从磁盘保存和加载快照的代码。传输的性能通常不是很重要。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Eliminating unsafe log access and discarding log entries：由于丢弃日志操作的存在，我们在访问日志的时候需要注意检查不要越界，当确保可以安全的访问日志的时候，丢弃前面的日志就显得很简单了。"}]}]},{"type":"element","tag":"h3","props":{"id":"2snapshotting-disk-based-state-machines"},"children":[{"type":"text","value":"2、Snapshotting disk-based state machines"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一节讨论针对于使用磁盘的大存储量的状态机，它的特点是总是在磁盘上保存有它的状态，Raft日志中的每一个entry被apply到状态机后都会持久化到磁盘，相当于每次都进行快照。因此一旦一个entry被apply，它就可以丢弃掉了。基于磁盘的状态机的主要问题是持久化数据会导致性能下降，如果没有写入缓冲，对于每条指令它都需要进行一或多次的随机磁盘访问，这可能会限制整体写入性能。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n基于磁盘的状态机也必须可以提供一个一致性的快照以便于可以发送给慢follower。虽然它总是在磁盘上留有快照，但是它在持续修改。因此仍然需要copy-on-write技术来保留一个一致性快照，以便于乐意在长时间内传输它。幸运的是磁盘格式几乎都会被划分成逻辑块，因此实现copy-on-write应当是很简单的。基于磁盘的状态机也可以依赖于系统的支持，比如Linux系统上的LVM可以用来创建整个磁盘分区的快照，并且最近的一些文件系统也支持针对单独的目录进行快照。"}]},{"type":"element","tag":"h3","props":{"id":"3alternativeleader-based-approaches"},"children":[{"type":"text","value":"3、Alternative：leader-based approaches"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基于leader复制的日志压缩方法，会由leader来压缩日志，并将快照发送给follower，这是很浪费资源的。发送这些冗余的数据给每一个follower会浪费网络带宽并减慢日志压缩进程，而对于leader来说，带宽往往是它最重要的资源。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这种方式的一个好处就是不需要一些额外的复制和持久化方法，将其保存在日志中就可以了。如图5.5，leader会将快照通过AppendEntries RPC发送给每一个follower。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/20.png"},"children":[]},{"type":"text","value":"\n这种方式适合于体积很小的快照，用处很少。"}]},{"type":"element","tag":"h2","props":{"id":"client-interaction"},"children":[{"type":"text","value":"Client interaction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这一章讲述客户端是如何与基于Raft的复制状态机交互的。图6.1展示了所用的RPC方法，会在这一章进行详细讲述。\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/21.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"1finding-the-cluster"},"children":[{"type":"text","value":"1、Finding the cluster"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当raft作为一个网络服务，客户端必须能够定位集群的地址。对于拥有固定成员的集群来说，这是简单的，比如他们的网络地址可以作为静态配置文件。然而，找到成员可变的集群的地址是一个挑战。通常有两种方法："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端可以使用网络广播找到所有的集群节点，然而这仅仅在特殊的环境下才可以使用"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端可以通过额外的目录服务来发现集群节点，比如DNS。在外部服务中保存的server列表需要满足一致性。客户端应当总是可以找到所有的集群节点，因此在集群配置发生改变的时候，这个外部服务的server列表应当在应当在配置更新之前进行修改，在集群配置更新完成之后再修改一次，移除那些不在集群中的节点，以便保持一致性。"}]}]},{"type":"element","tag":"h3","props":{"id":"2routing-request-to-leader"},"children":[{"type":"text","value":"2、Routing request to leader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft集群中客户端的请求是由leader处理的，因此客户端需要一种方式来找到leader。当客户端首次启动的时候，它随机选择集群的一个节点连接，如果不是leader，节点会拒绝请求。再次重试的一个简单方式是再次随机选择一个节点，这种简单方式下，如果有n个节点，那么平均会尝试(n+1)/2次，对于规模比较小的集群来说也还可以。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n我们通过简单的优化就可以更快的找到leader。集群中的节点通常知道当前集群中leader的地址，因为AppendEntries包含着leader的信息。当一个非leader节点收到客户端请求时，它可以做下面两件事："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一个选择，也是我们推荐的。节点拒绝该请求，如果知道leader地址，并将leader的地址返回给客户端。这使得客户端下次尝试可以直接连接leader，速度更快。它也需要额外实现很少的代码，因为客户端也需要重联一个不同的节点，当leader失效的时候。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"节点也可以将客户端的请求代理到leader。这可能在某些情况下更简单。比如，当一个客户端只需要读请求的时候，代理请求可以帮助客户端节省管理连接的成本。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Raft必须避免过期的leader信息造成成客户端请求被无限延迟。过期的leader信息可能存在于整个系统："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"leaders：一个leader可能处于leader状态，但是它不是当前的leader，这可能会导致客户端的请求延迟。例如一个leader出现了网络分区，它仍然可以可以和某个客户端进行通信。如果没有额外的机制，它可能会把客户端的请求无限延迟，因为它无法成功提交日志。同时可能在另一个分区里选出一个新的leader，并成功提交客户端的请求。因此当在一个election timeout之内没有成功完成一轮心跳到大部分节点的话，它就应当下线了，这使得客户端可以向其他节点重试请求。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"followers：follower保存着当前leader的信息。当开始一次新的选举或者term更新时，它必须丢弃当前的leader信息，比如可能会导致请求在两个节点之间来回发送，陷入死循环"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clients：如果client丢失了和leader的网络连接，它应当随机选择一个节点进行重试。如果坚持连接它最后一次知道的leader可能会导致不必要的延迟。"}]}]},{"type":"element","tag":"h3","props":{"id":"3implementing-linearizable-semantics"},"children":[{"type":"text","value":"3、Implementing linearizable semantics"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"到目前为止，raft实现了对于客户端的请求至少执行一次的保证，但是可能会对相同的请求重复执行多次。例如，一个客户端向leader提交了一条命令，并且leader将这条命令追加到了自己的日志并提交成功，但是在向客户端返回响应的时候失败了，因为客户端没有收到响应，它会重试这条命令，从而作为新的entry被追加到日志中被提交，这时候请求被重复执行了。即使在没有客户端的参与下命令也可能会被重复执行，比如网络可能产生重复请求。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这个问题不仅仅在raft中存在，大部分的分布式系统都会有这个问题。这种问题可能会造成不正确的返回结果和状态。如图6.2展示了一种情况：一个状态机用于提供锁机制，当客户端的请求没有收到相应的时候它会认为没有获得锁，但是实际上可能已经获得了锁。像increment操作的时候，可能会增加难以预料的值。网络的重排序和客户端并发请求甚至会带来更难以预料的情况。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"","src":"/raft/22.png"},"children":[]},{"type":"text","value":"\n我们的目标是实现一种线性化的语义，从而可以避免上面的问题。在线性化机制下，每一个请求只能执行一次，对于客户端来说这是一种强一致性。为了实现线性化，客户端必须能够过滤出重复请求。基本的思路是server保存客户端操作的执行结果，以便于收到相同请求时可以直接返回避免再次执行。为了实现这一点，每一个客户端会分配一个UID，并且客户端给每一个命令分配一个序号。每一个server对每一个client维护一个session，session可以追溯到最新处理的客户端命令序号，以及对应的响应，如果收到的序号已经被执行过了，可以将响应直接返回。这种方式通常也适合于单客户端的并发访问，client‘s session包含着一系列的(请求序号，响应)对，对于每一个请求，客户端包含着尚未收到响应的最小的序号，并且状态机会丢掉比它更小的所有响应。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n然而，由于空间是有限的，session不可能一直保留，server最后必须关闭session，但是这产生了两个问题：server怎样就何时关闭session达成一致，以及如何处理活跃客户端被频繁关闭session的问题？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nservers必须就何时关闭session达成一致，否则状态机就会出现状态不一致。"}]},{"type":"element","tag":"h3","props":{"id":"4process-read-only-queries-more-efficiently"},"children":[{"type":"text","value":"4、Process read-only queries more efficiently"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只读的客户端命令只会查询复制状态机，不会改变状态。因此，我们自然会问，是否可以绕过日志呢？绕过日志具有吸引人的性能优势，只读请求在许多应用程序中很常见，并且追加日志条目的磁盘写操作是很耗时的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n然而如果没有其他的措施，绕过日志的只读查询会导致返回过期的查询结果。例如，一个leader可能被网络分区了，并且另一个分区的节点可能已经选出了新的leader并提交了日志，如果这个被分区的leader不咨询其他节点就对只读请求返回响应，它会返回过期的结果。线性化要求只读请求返回的结果能够反映的是只读请求触发之后的系统的状态，每一个读请求至少应该返回最新committed的写操作的状态。幸运的是，我们可以实现对只读请求绕过日志并且实现线性化。为了实现这个目标，leader需要采取下列步骤："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"raft让每个leader在其任期刚开始的时候提交一个空的日志条目，只要这个日志被提交了，leader的commitIndex就可以保证是当前term内最大的index。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"leader保存当前的commitIndex为一个readIndex变量，这会用来作为查询操作的版本的下限。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"leader需要确保它没有被不知道的新leader所取代。它会发起新一轮的心跳并等待来自集群大多数节点的响应。一旦这些响应到达，leader就会知道在它发出心跳的时刻不会存在另一个term更大的leader。因此，readIndex就是那时集群中最大的commitIndex。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"leader等待状态机至少前进到readIndex处，这是满足线性化要求的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最后leader向状态机发起查询并将结果返回客户端。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这种方法相比于将只读操作提交到日志要更高效，因为它不需要同步磁盘写操作。为了进一步提高效率，leader可以分摊确认自己是leader的开销，它可以对累计的任意数量的只读操作使用单次心跳。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nFollowers也可以分担只读请求的压力。这将会提高系统的读吞吐量，它也会减少leader的负载压力，使得它可以处理更多的写操作。然而这样也面临着读取过期数据的风险。例如，一个被分区的follower可能很长一段时间内不会收到leader的新日志，甚至是follower可能收到了来自leader的心跳，但是leader已经过期了自己还不知道。为了可以安全的读取，follower可以向刚刚请求当前readIndex的leader发起请求(leader会执行步骤1-3)，follower接下来可以在自己的状态机执行4和5.32"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"abstract","depth":2,"text":"Abstract"},{"id":"introduction","depth":2,"text":"Introduction"},{"id":"motivation","depth":2,"text":"Motivation","children":[{"id":"1replicated-state-machine","depth":3,"text":"1、Replicated State Machine"},{"id":"2replicated-state-machine的常用场景","depth":3,"text":"2、Replicated state machine的常用场景"}]},{"id":"basic-raft-algorithm","depth":2,"text":"Basic Raft Algorithm","children":[{"id":"1designing-for-understandability","depth":3,"text":"1、Designing for understandability"},{"id":"2raft简介","depth":3,"text":"2、Raft简介"},{"id":"3raft基础","depth":3,"text":"3、Raft基础"},{"id":"4leader-election","depth":3,"text":"4、Leader election"},{"id":"5log-replication","depth":3,"text":"5、Log Replication"},{"id":"6safety","depth":3,"text":"6、Safety"},{"id":"7follower-and-candidate-crashes","depth":3,"text":"7、Follower and candidate crashes"},{"id":"8persisted-state-and-server-restarts","depth":3,"text":"8、Persisted state and server restarts"},{"id":"9timing-and-availability","depth":3,"text":"9、Timing and availability"},{"id":"10leadership-transfer-extension","depth":3,"text":"10、Leadership transfer extension"}]},{"id":"cluster-membership-changes","depth":2,"text":"Cluster membership changes","children":[{"id":"1safety","depth":3,"text":"1、Safety"},{"id":"2availability","depth":3,"text":"2、Availability"},{"id":"3availability-argument","depth":3,"text":"3、Availability argument"},{"id":"4system-integration","depth":3,"text":"4、System integration"}]},{"id":"log-compaction","depth":2,"text":"Log compaction","children":[{"id":"1snapshotting-memory-based-state-machines","depth":3,"text":"1、Snapshotting memory-based state machines"},{"id":"2snapshotting-disk-based-state-machines","depth":3,"text":"2、Snapshotting disk-based state machines"},{"id":"3alternativeleader-based-approaches","depth":3,"text":"3、Alternative：leader-based approaches"}]},{"id":"client-interaction","depth":2,"text":"Client interaction","children":[{"id":"1finding-the-cluster","depth":3,"text":"1、Finding the cluster"},{"id":"2routing-request-to-leader","depth":3,"text":"2、Routing request to leader"},{"id":"3implementing-linearizable-semantics","depth":3,"text":"3、Implementing linearizable semantics"},{"id":"4process-read-only-queries-more-efficiently","depth":3,"text":"4、Process read-only queries more efficiently"}]}]}},"_type":"markdown","_id":"content:3.code:distributed:raft.md","_source":"content","_file":"3.code/distributed/raft.md","_extension":"md"},{"_path":"/code/front-end/_dir","_dir":"front-end","_draft":false,"_partial":true,"_locale":"","title":"前端","icon":"logos:vue","_id":"content:3.code:front-end:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/front-end/_dir.yml","_extension":"yml"},{"_path":"/code/front-end/css","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"css","description":"","icon":"vscode-icons:file-type-scss","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"css"},"children":[{"type":"text","value":"css"}]},{"type":"element","tag":"h2","props":{"id":"垂直居中文字"},"children":[{"type":"text","value":"垂直居中文字"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"单行文本"}]},{"type":"element","tag":"code","props":{"code":".foo {\n    width: 300px;\n    height: 100px;\n    margin: 50px auto;\n    border: 1px solid red;\n    line-height: 100px; /*设置line-height与父级元素的height相等*/\n    text-align: center; /*设置文本水平居中*/\n    overflow: hidden; /*防止内容超出容器或者产生自动换行*/\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":".foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"300"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"red"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-65c4db"},"children":[{"type":"text","value":"/*设置line-height与父级元素的height相等*/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-65c4db"},"children":[{"type":"text","value":"/*设置文本水平居中*/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"overflow"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"hidden"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-65c4db"},"children":[{"type":"text","value":"/*防止内容超出容器或者产生自动换行*/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"多行文本"}]},{"type":"element","tag":"code","props":{"code":".foo {\n    width: 300px;\n    margin: 50px auto;\n    border: 1px solid red;\n    text-align: center; /*设置文本水平居中*/\n    padding: 50px 20px;\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":".foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"300"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"border"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"red"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-65c4db"},"children":[{"type":"text","value":"/*设置文本水平居中*/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb09c8"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-2b1588"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e73000"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-65c4db{color:#6E7781}\n.ct-2b1588{color:#CF222E}\n.ct-e73000{color:#24292F}\n.ct-eb09c8{color:#0550AE}\n.dark .ct-eb09c8{color:#79C0FF}\n.dark .ct-e73000{color:#C9D1D9}\n.dark .ct-2b1588{color:#FF7B72}\n.dark .ct-65c4db{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"垂直居中文字","depth":2,"text":"垂直居中文字"}]}},"_type":"markdown","_id":"content:3.code:front-end:css.md","_source":"content","_file":"3.code/front-end/css.md","_extension":"md"},{"_path":"/code/front-end/javascript","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Javascript","description":"","icon":"logos:javascript","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"javascript"},"children":[{"type":"text","value":"Javascript"}]},{"type":"element","tag":"h2","props":{"id":"basin"},"children":[{"type":"text","value":"basin"}]},{"type":"element","tag":"h3","props":{"id":"async-func"},"children":[{"type":"text","value":"async func"}]},{"type":"element","tag":"code","props":{"code":"function resolveAfter2Seconds(x) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(x);\n    }, 2000);\n  });\n}\n\n// 赋值给变量的异步函数表达式\nconst add = async function (x) {\n  const a = await resolveAfter2Seconds(20);\n  const b = await resolveAfter2Seconds(30);\n  return x + a + b;\n};\n\nadd(10).then((v) => {\n  console.log(v); // 4 秒后打印 60\n});\n\n// 用作 IIFE 的异步函数表达式\n(async function (x) {\n  const p1 = resolveAfter2Seconds(20);\n  const p2 = resolveAfter2Seconds(30);\n  return x + (await p1) + (await p2);\n})(10).then((v) => {\n  console.log(v); // 2 秒后打印 60\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolveAfter2Seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(x);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// 赋值给变量的异步函数表达式"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolveAfter2Seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolveAfter2Seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(v); "}]},{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// 4 秒后打印 60"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// 用作 IIFE 的异步函数表达式"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolveAfter2Seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"resolveAfter2Seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" p1) "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" p2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"})("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(v); "}]},{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// 2 秒后打印 60"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"解构赋值"},"children":[{"type":"text","value":"解构赋值"}]},{"type":"element","tag":"code","props":{"code":"const [a, b] = array;\nconst [a, , b] = array;\nconst [a = aDefault, b] = array;\nconst [a, b, ...rest] = array;\nconst [a, , b, ...rest] = array;\nconst [a, b, ...{ pop, push }] = array;\nconst [a, b, ...[c, d]] = array;\n\nconst { a, b } = obj;\nconst { a: a1, b: b1 } = obj;\nconst { a: a1 = aDefault, b = bDefault } = obj;\nconst { a, b, ...rest } = obj;\nconst { a: a1, b: b1, ...rest } = obj;\nconst { [key]: a } = obj;\n\nlet a, b, a1, b1, c, d, rest, pop, push;\n[a, b] = array;\n[a, , b] = array;\n[a = aDefault, b] = array;\n[a, b, ...rest] = array;\n[a, , b, ...rest] = array;\n[a, b, ...{ pop, push }] = array;\n[a, b, ...[c, d]] = array;\n\n({ a, b } = obj); // brackets are required\n({ a: a1, b: b1 } = obj);\n({ a: a1 = aDefault, b = bDefault } = obj);\n({ a, b, ...rest } = obj);\n({ a: a1, b: b1, ...rest } = obj);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", , "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" aDefault, "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"rest"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", , "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"rest"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"pop"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" }] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"d"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"]] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" aDefault, "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" bDefault } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"rest"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"b1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"rest"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" { [key]: "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" a, b, a1, b1, c, d, rest, pop, push;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, b] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, , b] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" aDefault, b] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, b, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"rest] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, , b, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"rest] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, b, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"{ pop, push }] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[a, b, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"[c, d]] "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" array;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"({ a, b } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj); "}]},{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// brackets are required"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"({ a: a1, b: b1 } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"({ a: a1 "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" aDefault, b "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" bDefault } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"({ a, b, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"rest } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"({ a: a1, b: b1, "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"rest } "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" obj);"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"op"},"children":[{"type":"text","value":"op"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~"}]},{"type":"text","value":" 按位非"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"^"}]},{"type":"text","value":" 按位异或"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":","}]},{"type":"text","value":" 逗号运算符，从左到右求值"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"**"}]},{"type":"text","value":" 幂 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"console.log(3 ** 4)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" 如果指定的属性在指定的对象或其原型链中 则返回 true"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"instanceof"}]},{"type":"text","value":" 用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"arr instanceof Array"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"??"}]},{"type":"text","value":" 空值合并运算符(nullish coalescing operator)，当左侧的操作数为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]},{"type":"text","value":" 时，返回其右侧操作数，否则返回左侧操作数。注意，不能与 AND 或 OR 运算符共用。将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"??"}]},{"type":"text","value":" 直接与 AND（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":"）和 OR（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"||"}]},{"type":"text","value":"）运算符组合使用是不可取的。这种情况下会抛出 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SyntaxError"}]},{"type":"text","value":" 。但是，如果使用括号来显式表明运算优先级，是没有问题的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"?."}]},{"type":"text","value":" 可选链运算符(optional chaining)允许读取位于连接对象链深处的属性的值，而不必明确验证链中的每个引用是否有效。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"?."}]},{"type":"text","value":" 运算符的功能类似于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"."}]},{"type":"text","value":" 链式运算符，不同之处在于，在引用为空 ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nullish"}]},{"type":"text","value":" ) ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]},{"type":"text","value":") 的情况下不会引起错误，该表达式短路返回值是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]},{"type":"text","value":"。与函数调用一起使用时，如果给定的函数不存在，则返回 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<<"}]},{"type":"text","value":" 左移(left shift)将第一个操作数向左移动指定位数，左边超出的位数将会被清除，右边将会补零。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":">>"}]},{"type":"text","value":" 右移(right shift)将一个操作数按指定移动的位数向右移动，右边移出位被丢弃，左边移出的空位补符号位（最左边那位）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":">>>"}]},{"type":"text","value":" 无符号右移运算符(unsigned right shift)（零填充右移）将左操作数计算为无符号数，并将该数字的二进制表示形式移位为右操作数指定的位数，取模 32。向右移动的多余位将被丢弃，零位从左移入。其符号位变为 0，因此结果始终为非负数。与其他按位运算符不同，零填充右移返回一个无符号 32 位整数。"}]}]},{"type":"element","tag":"code","props":{"code":"let x = 1;\nx = (x++, x);\nconsole.log(x);\n// Expected output: 2\nx = (2, 3);\nconsole.log(x);\n// Expected output: 3\n\nconst foo = null ?? 'default string';\nconsole.log(foo);\n// Expected output: \"default string\"\n\nconst baz = 0 ?? 42;\nconsole.log(baz);\n// Expected output: 0\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"x "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" (x"}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", x);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(x);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// Expected output: 2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"x "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(x);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// Expected output: 3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3da40c"},"children":[{"type":"text","value":"'default string'"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(foo);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// Expected output: \"default string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"baz"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"42"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(baz);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// Expected output: 0"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"convert-an-array-of-objects-to-a-map"},"children":[{"type":"text","value":"Convert an Array of Objects to a Map"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数组转map"}]},{"type":"element","tag":"code","props":{"code":"const arr = [\n  { key: 'name', value: 'Tom' },\n  { key: 'country', value: 'Chile' },\n]\n\nconst map1 = new Map(\n  arr.map((object) => {\n    return [object.key, object.value]\n  }),\n)\n\n// ️👇️ {'name' => 'Tom', 'country' => 'Chile'}\nconsole.log(map1)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  { key: "}]},{"type":"element","tag":"span","props":{"class":"ct-3da40c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", value: "}]},{"type":"element","tag":"span","props":{"class":"ct-3da40c"},"children":[{"type":"text","value":"'Tom'"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  { key: "}]},{"type":"element","tag":"span","props":{"class":"ct-3da40c"},"children":[{"type":"text","value":"'country'"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":", value: "}]},{"type":"element","tag":"span","props":{"class":"ct-3da40c"},"children":[{"type":"text","value":"'Chile'"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7b32b9"},"children":[{"type":"text","value":"map1"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  arr."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7b8336"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d3f187"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":" [object.key, object.value]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"  }),"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-297190"},"children":[{"type":"text","value":"// ️👇️ {'name' => 'Tom', 'country' => 'Chile'}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-a5100d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-c722a0"},"children":[{"type":"text","value":"(map1)"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"refer"},"children":[{"type":"text","value":"refer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript","rel":["nofollow"]},"children":[{"type":"text","value":"mdn"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3da40c{color:#0A3069}\n.ct-297190{color:#6E7781}\n.ct-7b32b9{color:#0550AE}\n.ct-7b8336{color:#953800}\n.ct-a5100d{color:#8250DF}\n.ct-c722a0{color:#24292F}\n.ct-d3f187{color:#CF222E}\n.dark .ct-d3f187{color:#FF7B72}\n.dark .ct-c722a0{color:#C9D1D9}\n.dark .ct-a5100d{color:#D2A8FF}\n.dark .ct-7b8336{color:#FFA657}\n.dark .ct-7b32b9{color:#79C0FF}\n.dark .ct-297190{color:#8B949E}\n.dark .ct-3da40c{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"basin","depth":2,"text":"basin","children":[{"id":"async-func","depth":3,"text":"async func"},{"id":"解构赋值","depth":3,"text":"解构赋值"},{"id":"op","depth":3,"text":"op"}]},{"id":"sol","depth":2,"text":"sol","children":[{"id":"convert-an-array-of-objects-to-a-map","depth":3,"text":"Convert an Array of Objects to a Map"}]},{"id":"refer","depth":2,"text":"refer"}]}},"_type":"markdown","_id":"content:3.code:front-end:javascript.md","_source":"content","_file":"3.code/front-end/javascript.md","_extension":"md"},{"_path":"/code/front-end/nuxt","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Nuxt","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxt"},"children":[{"type":"text","value":"Nuxt"}]},{"type":"element","tag":"h2","props":{"id":"deployment"},"children":[{"type":"text","value":"deployment"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://nuxtjs.org/deployments/github-pages/","rel":["nofollow"]},"children":[{"type":"text","value":"on GitHub Pages"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"deployment","depth":2,"text":"deployment"}]}},"_type":"markdown","_id":"content:3.code:front-end:nuxt.md","_source":"content","_file":"3.code/front-end/nuxt.md","_extension":"md"},{"_path":"/code/front-end/qa","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"前端","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"前端"},"children":[{"type":"text","value":"前端"}]},{"type":"element","tag":"h2","props":{"id":"未分类"},"children":[{"type":"text","value":"未分类"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述浏览器的缓存机制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 diff 算法的实现机制和使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"readyState 的不同返回值有什么区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述虚拟 dom 实现原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Dom 节点的不同操作方式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"了解 XSS 攻击吗？如何防止 XSS 攻击？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"promise 有哪些状态？简述 promise.all 的实现原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 中 GET 和 POST 区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是替换元素与非替换元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"正则表达式 /w 是什么意思？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是可继承元素和不可继承元素？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述图片的懒加载原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述强缓存与协商缓存的区别和使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Flex 布局的原理和使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"localstorage 与 cookie 的区别是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"async 和 defer 有什么区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"前端如何解决线程安全和进程安全的问题？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述常见异步编程方案 (promise, generator, async) 的原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"computed 和 watch 的区别是什么？"}]}]},{"type":"element","tag":"h2","props":{"id":"vue"},"children":[{"type":"text","value":"VUE"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vue 中双向数据绑定的实现原理是怎样的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Vue 的生命周期"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Vue 和 React 的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vuex 有哪些常用属性？"}]}]},{"type":"element","tag":"h2","props":{"id":"react"},"children":[{"type":"text","value":"REACT"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 React 的生命周期"}]}]},{"type":"element","tag":"h2","props":{"id":"js"},"children":[{"type":"text","value":"JS"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Javascript 原型以及原型链"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Javascript 中的防抖与节流的原理并尝试实现"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Javascript 中 this 的指向有哪些"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对 Javascript 中闭包、函数式语言等概念有清晰的认知"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是闭包，什么是立即执行函数，它的作用是什么？简单说一下闭包的使用场景"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"闭包（closure）指有权访问另一个函数作用域中变量的函数"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"延伸变量作用域范围，读取函数内部的变量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"让这些变量的值始终保持在内存中"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 ES6 的新特性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"箭头函数和普通函数的区别是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"const, let, var 关键字有什么区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Javascript 的数据类型"}]}]},{"type":"element","tag":"h2","props":{"id":"css"},"children":[{"type":"text","value":"CSS"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSS 实现三列布局"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 CSS 盒模型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 CSS 预编译的方式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSS 的选择器优先级是怎样？"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"未分类","depth":2,"text":"未分类"},{"id":"vue","depth":2,"text":"VUE"},{"id":"react","depth":2,"text":"REACT"},{"id":"js","depth":2,"text":"JS"},{"id":"css","depth":2,"text":"CSS"}]}},"_type":"markdown","_id":"content:3.code:front-end:qa.md","_source":"content","_file":"3.code/front-end/qa.md","_extension":"md"},{"_path":"/code/front-end/react-native","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"React Native","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"react-native"},"children":[{"type":"element","tag":"a","props":{"href":"https://reactnative.dev/docs/environment-setup","rel":["nofollow"]},"children":[{"type":"text","value":"React Native"}]}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"invariant-violation-main-has-not-been-registered"},"children":[{"type":"text","value":"Invariant Violation: \"main\" has not been registered"}]},{"type":"element","tag":"code","props":{"code":" ERROR  Invariant Violation: \"main\" has not been registered. This can happen if:\n* Metro (the local dev server) is run from the wrong folder. Check if Metro is running, stop it and restart it in the current project.\n* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":" ERROR  Invariant Violation: \"main\" has not been registered. This can happen if:\n* Metro (the local dev server) is run from the wrong folder. Check if Metro is running, stop it and restart it in the current project.\n* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo"}]},{"type":"element","tag":"h3","props":{"id":"error-unable-to-load-contents-of-file-list-target-support-filespods-xxxpods-xxx-frameworks-debug-input-filesxcfilelist-in-target-xxx"},"children":[{"type":"text","value":"error: Unable to load contents of file list: '/Target Support Files/Pods-xxx/Pods-xxx-frameworks-Debug-input-files.xcfilelist' (in target 'xxx')"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/rocketinsights/Unity-iOS/issues/1#issuecomment-1191972466","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"code","props":{"code":"pod install\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50e87e"},"children":[{"type":"text","value":"pod"}]},{"type":"element","tag":"span","props":{"class":"ct-040a96"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5563a0"},"children":[{"type":"text","value":"install"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"yogakityogakitmodulemap-not-found-react-native"},"children":[{"type":"text","value":"yogakit/yogakit.modulemap' not found React Native"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/facebook/react-native/issues/29605","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/facebook/react-native/issues/29605#issuecomment-695197302","rel":["nofollow"]},"children":[{"type":"text","value":"useful"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Maybe u can open "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"xxx.xcworkspace"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"xxx.xcodeproj"}]}]}]},{"type":"element","tag":"h3","props":{"id":"xxxiosxxxxcodeproj-error-the-linked-library-libpods-xxxa-is-missing-one-or-more-architectures-required-by-this-target-x86_64-in-target-xxx-from-project-xxx"},"children":[{"type":"text","value":"/xxx/ios/xxx.xcodeproj: error: The linked library 'libPods-xxx.a' is missing one or more architectures required by this target: x86_64. (in target 'xxx' from project 'xxx')"}]},{"type":"element","tag":"code","props":{"code":"arch -x86_64 pod install\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50e87e"},"children":[{"type":"text","value":"arch"}]},{"type":"element","tag":"span","props":{"class":"ct-040a96"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d38c6"},"children":[{"type":"text","value":"-x86_64"}]},{"type":"element","tag":"span","props":{"class":"ct-040a96"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5563a0"},"children":[{"type":"text","value":"pod"}]},{"type":"element","tag":"span","props":{"class":"ct-040a96"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5563a0"},"children":[{"type":"text","value":"install"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6d38c6{color:#0550AE}\n.ct-5563a0{color:#0A3069}\n.ct-040a96{color:#24292F}\n.ct-50e87e{color:#953800}\n.dark .ct-50e87e{color:#FFA657}\n.dark .ct-040a96{color:#C9D1D9}\n.dark .ct-5563a0{color:#A5D6FF}\n.dark .ct-6d38c6{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sol","depth":2,"text":"sol","children":[{"id":"invariant-violation-main-has-not-been-registered","depth":3,"text":"Invariant Violation: \"main\" has not been registered"},{"id":"error-unable-to-load-contents-of-file-list-target-support-filespods-xxxpods-xxx-frameworks-debug-input-filesxcfilelist-in-target-xxx","depth":3,"text":"error: Unable to load contents of file list: '/Target Support Files/Pods-xxx/Pods-xxx-frameworks-Debug-input-files.xcfilelist' (in target 'xxx')"},{"id":"yogakityogakitmodulemap-not-found-react-native","depth":3,"text":"yogakit/yogakit.modulemap' not found React Native"},{"id":"xxxiosxxxxcodeproj-error-the-linked-library-libpods-xxxa-is-missing-one-or-more-architectures-required-by-this-target-x86_64-in-target-xxx-from-project-xxx","depth":3,"text":"/xxx/ios/xxx.xcodeproj: error: The linked library 'libPods-xxx.a' is missing one or more architectures required by this target: x86_64. (in target 'xxx' from project 'xxx')"}]}]}},"_type":"markdown","_id":"content:3.code:front-end:react-native.md","_source":"content","_file":"3.code/front-end/react-native.md","_extension":"md"},{"_path":"/code/front-end/sol","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Sol","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"sol"},"children":[{"type":"text","value":"Sol"}]},{"type":"element","tag":"h2","props":{"id":"vue"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"h3","props":{"id":"vue-warn-data-property-option-is-already-defined-in-props"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[Vue warn]: Data property \"option\" is already defined in Props."}]}]},{"type":"element","tag":"code","props":{"code":"data () {\n  return {\n    // Rename the \"option\" property in the data option\n    // to avoid the conflict with the \"option\" prop\n    dataOption: undefined\n  }\n},\nprops: {\n  option: {\n    type: Object,\n    required: true\n  }\n}\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"data () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  return {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    // Rename the \"option\" property in the data option"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    // to avoid the conflict with the \"option\" prop"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    dataOption: undefined"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"},"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"props: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  option: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    type: Object,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    required: true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"xaxis-0-not-found"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"xAxis \"0\" not found"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"refer: "},{"type":"element","tag":"a","props":{"href":"https://github.com/apache/echarts/issues/14071#issuecomment-762582442","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/apache/echarts/issues/14071#issuecomment-762582442"}]}]}]},{"type":"element","tag":"code","props":{"code":"import 'echarts/lib/component/grid';\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"import 'echarts/lib/component/grid';"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"使用-asyncdata-方法在组件中获取-json-数据"},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" 方法在组件中获取 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"JSON"}]},{"type":"text","value":" 数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"asyncData 方法会在服务端渲染和客户端挂载之前被调用，并且它可以访问上下文对象 (context)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，假设你有一个组件，它需要在渲染之前获取 JSON 数据。你可以使用 asyncData 方法来获取数据，然后在服务端或客户端渲染之前将数据传递给组件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个示例："}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div>\n    <h1>{{ title }}</h1>\n    <ul>\n      <li v-for=\"item in items\" :key=\"item.id\">{{ item.name }}</li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'MyComponent',\n  async asyncData ({ app, error }) {\n    try {\n      const response = await app.$axios.$get('/data.json')\n      return {\n        title: response.title,\n        items: response.items\n      }\n    } catch (e) {\n      error({ statusCode: 404, message: 'Data not found' })\n    }\n  }\n}\n</script>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">{{ title }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"ul"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"      <"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-469114"},"children":[{"type":"text","value":"v-for"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"item in items\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-469114"},"children":[{"type":"text","value":":key"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"item.id\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">{{ item.name }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"ul"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"name: "}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"'MyComponent'"}]},{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-65b4d3"},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":" ({ app, error }) "}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-469114"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" app.$axios."}]},{"type":"element","tag":"span","props":{"class":"ct-65b4d3"},"children":[{"type":"text","value":"$get"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"'/data.json'"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"        title: response.title,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"        items: response.items"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" (e) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-65b4d3"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"({ statusCode: "}]},{"type":"element","tag":"span","props":{"class":"ct-469114"},"children":[{"type":"text","value":"404"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":", message: "}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"'Data not found'"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f2e"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-ee060a"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个例子中，我们使用 asyncData 方法获取了来自 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/data.json"}]},{"type":"text","value":" 的 JSON 数据。然后，我们使用返回值将数据传递给组件。"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：asyncData 方法只能在服务端或客户端渲染期间被调用，所以你不能在挂载之后调用它。如果你需要在挂载之后获取数据，你可以使用 created 或 mounted 生命周期钩子来调用 asyncData 方法。"}]}]},{"type":"element","tag":"h2","props":{"id":"nuxt"},"children":[{"type":"text","value":"nuxt"}]},{"type":"element","tag":"h3","props":{"id":"nuxt-use-json"},"children":[{"type":"text","value":"nuxt use json"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/a/55124822/17744936","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"import json from \"~/static/json/sample.json\";"}]},{"type":"text","value":" By prepending "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/static"}]}]},{"type":"element","tag":"h3","props":{"id":"javascript-heap-out-of-memory"},"children":[{"type":"text","value":"JavaScript heap out of memory"}]},{"type":"element","tag":"code","props":{"code":"<--- Last few GCs --->\n\n[18465:0x118040000]    98714 ms: Mark-sweep 2008.7 (2084.7) -> 1993.7 (2085.6) MB, 1529.6 / 0.0 ms  (average mu = 0.159, current mu = 0.066) allocation failure; scavenge might not succeed\n[18465:0x118040000]   100665 ms: Mark-sweep 2010.1 (2085.8) -> 1994.9 (2086.8) MB, 1893.5 / 0.0 ms  (average mu = 0.091, current mu = 0.030) allocation failure; scavenge might not succeed\n\n\n<--- JS stacktrace --->\n\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\n 1: 0x100626c88 node::Abort() [/opt/homebrew/Cellar/node/19.1.0/bin/node]\n 2: 0x100627f54 node::ModifyCodeGenerationFromStrings(v8::Local<v8::Context>, v8::Local<v8::Value>, bool) [/opt/homebrew/Cellar/node/19.1.0/bin/node]\n","language":"log","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<--- Last few GCs --->\n\n[18465:0x118040000]    98714 ms: Mark-sweep 2008.7 (2084.7) -> 1993.7 (2085.6) MB, 1529.6 / 0.0 ms  (average mu = 0.159, current mu = 0.066) allocation failure; scavenge might not succeed\n[18465:0x118040000]   100665 ms: Mark-sweep 2010.1 (2085.8) -> 1994.9 (2086.8) MB, 1893.5 / 0.0 ms  (average mu = 0.091, current mu = 0.030) allocation failure; scavenge might not succeed\n\n\n<--- JS stacktrace --->\n\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\n 1: 0x100626c88 node::Abort() [/opt/homebrew/Cellar/node/19.1.0/bin/node]\n 2: 0x100627f54 node::ModifyCodeGenerationFromStrings(v8::Local<v8::Context>, v8::Local<v8::Value>, bool) [/opt/homebrew/Cellar/node/19.1.0/bin/node]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/53230823/fatal-error-ineffective-mark-compacts-near-heap-limit-allocation-failed-javas","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"code","props":{"code":"export NODE_OPTIONS=\"--max-old-space-size=5120\" # Increase to 5 GB\nexport NODE_OPTIONS=\"--max-old-space-size=6144\" # Increase to 6 GB\nexport NODE_OPTIONS=\"--max-old-space-size=7168\" # Increase to 7 GB\nexport NODE_OPTIONS=\"--max-old-space-size=8192\" # Increase to 8 GB\n\n# and so on...\n\n# formula:\nexport NODE_OPTIONS=\"--max-old-space-size=(X * 1024)\" # Increase to X GB\n\n# Note: it doesn't have to be multiples of 1024.\n# max-old-space-size can be any number of memory megabytes (MB) you have available.\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" NODE_OPTIONS"}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"--max-old-space-size=5120\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Increase to 5 GB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" NODE_OPTIONS"}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"--max-old-space-size=6144\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Increase to 6 GB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" NODE_OPTIONS"}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"--max-old-space-size=7168\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Increase to 7 GB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" NODE_OPTIONS"}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"--max-old-space-size=8192\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Increase to 8 GB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# and so on..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# formula:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" NODE_OPTIONS"}]},{"type":"element","tag":"span","props":{"class":"ct-4264e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d44778"},"children":[{"type":"text","value":"\"--max-old-space-size=(X * 1024)\""}]},{"type":"element","tag":"span","props":{"class":"ct-c3820b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Increase to X GB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# Note: it doesn't have to be multiples of 1024."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-392a3b"},"children":[{"type":"text","value":"# max-old-space-size can be any number of memory megabytes (MB) you have available."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果还是出现这个错误，可能就是代码写错了。之前是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" 这个脚本配置写错了。"}]},{"type":"element","tag":"h3","props":{"id":"nuxt-page-500-this-page-is-temporarily-unavailable"},"children":[{"type":"text","value":"nuxt page 500 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"This page is temporarily unavailable."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"e","src":"/code/nuxt-err1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"del","props":{},"children":[{"type":"text","value":"check commit info, found release 1.2.5 upgrade some deps, while this project's deps didn't upgrade. Essential reason is the deps version are inconsistent."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但好像不是这样的，并不能修复"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n目前看到的是"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt-themes/docus","rel":["nofollow"]},"children":[{"type":"text","value":"仓库"}]},{"type":"text","value":" 在 v1.2.5 发布时，自动出包，抛出500错误。而之前的都是正常的"}]},{"type":"element","tag":"h2","props":{"id":"js-ts"},"children":[{"type":"text","value":"js ts"}]},{"type":"element","tag":"h3","props":{"id":"typeerror-replace-is-not-a-function"},"children":[{"type":"text","value":"TypeError: replace is not a function"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/DrAugus/draugus.github.io/commit/b206c6559b326add98f7773b637abddd18092577#diff-1d790b86c76035cd166c812c35ce19682c15e5ab353eeb8ab75b8bd91156f1c1","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We used the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"toString()"}]},{"type":"text","value":" method to convert the number to a string before calling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"replace()"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-392a3b{color:#6E7781}\n.ct-65b4d3{color:#8250DF}\n.ct-e43f2e{color:#953800}\n.ct-4264e7{color:#CF222E}\n.ct-d44778{color:#0A3069}\n.ct-469114{color:#0550AE}\n.ct-ee060a{color:#116329}\n.ct-c3820b{color:#24292F}\n.dark .ct-c3820b{color:#C9D1D9}\n.dark .ct-ee060a{color:#7EE787}\n.dark .ct-469114{color:#79C0FF}\n.dark .ct-d44778{color:#A5D6FF}\n.dark .ct-4264e7{color:#FF7B72}\n.dark .ct-e43f2e{color:#FFA657}\n.dark .ct-65b4d3{color:#D2A8FF}\n.dark .ct-392a3b{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"vue","depth":2,"text":"Vue","children":[{"id":"vue-warn-data-property-option-is-already-defined-in-props","depth":3,"text":"[Vue warn]: Data property \"option\" is already defined in Props."},{"id":"xaxis-0-not-found","depth":3,"text":"xAxis \"0\" not found"},{"id":"使用-asyncdata-方法在组件中获取-json-数据","depth":3,"text":"使用 asyncData 方法在组件中获取 JSON 数据"}]},{"id":"nuxt","depth":2,"text":"nuxt","children":[{"id":"nuxt-use-json","depth":3,"text":"nuxt use json"},{"id":"javascript-heap-out-of-memory","depth":3,"text":"JavaScript heap out of memory"},{"id":"nuxt-page-500-this-page-is-temporarily-unavailable","depth":3,"text":"nuxt page 500 This page is temporarily unavailable."}]},{"id":"js-ts","depth":2,"text":"js ts","children":[{"id":"typeerror-replace-is-not-a-function","depth":3,"text":"TypeError: replace is not a function"}]}]}},"_type":"markdown","_id":"content:3.code:front-end:sol.md","_source":"content","_file":"3.code/front-end/sol.md","_extension":"md"},{"_path":"/code/front-end/vue","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Vue","description":"","icon":"logos:vue","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vue"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"h2","props":{"id":"vue组件之间相互传值的方式"},"children":[{"type":"text","value":"vue组件之间相互传值的方式"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000022700216","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"综述："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"父子通信： 父向子传递数据是通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"props"}]},{"type":"text","value":"，子向父是通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$emit"}]},{"type":"text","value":"；通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$parent / $children"}]},{"type":"text","value":" 通信；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$ref"}]},{"type":"text","value":" 也可以访问组件实例；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"provide / inject"}]},{"type":"text","value":"\n；"},{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000022708579","rel":["nofollow"]},"children":[{"type":"text","value":"$attrs / $listeners"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"兄弟通信： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Bus"}]},{"type":"text","value":"；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vuex"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"跨级通信： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Bus"}]},{"type":"text","value":"；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vuex"}]},{"type":"text","value":"；"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"provide / inject"}]},{"type":"text","value":" ; "},{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000022708579","rel":["nofollow"]},"children":[{"type":"text","value":"$attrs / $listeners"}]}]}]},{"type":"element","tag":"h3","props":{"id":"父组件向子组件传值"},"children":[{"type":"text","value":"父组件向子组件传值"}]},{"type":"element","tag":"h3","props":{"id":"子组件向父组件传值"},"children":[{"type":"text","value":"子组件向父组件传值"}]},{"type":"element","tag":"h3","props":{"id":"兄弟组件之间传值"},"children":[{"type":"text","value":"兄弟组件之间传值"}]},{"type":"element","tag":"h3","props":{"id":"多层父子组件通信"},"children":[{"type":"text","value":"多层父子组件通信"}]},{"type":"element","tag":"h2","props":{"id":"slot"},"children":[{"type":"text","value":"slot"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://cn.vuejs.org/guide/components/slots.html#scoped-slots","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"code","props":{"code":"<BaseLayout>\n  <template v-slot:header>\n    <!-- header 插槽的内容放这里 -->\n  </template>\n</BaseLayout>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-08e45a"},"children":[{"type":"text","value":"BaseLayout"}]},{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  <template v-slot:header>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"    <!-- header 插槽的内容放这里 -->"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  </template>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-08e45a"},"children":[{"type":"text","value":"BaseLayout"}]},{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<MyComponent>\n  <template #header=\"headerProps\">\n    {{ headerProps }}\n  </template>\n\n  <template #default=\"defaultProps\">\n    {{ defaultProps }}\n  </template>\n\n  <template #footer=\"footerProps\">\n    {{ footerProps }}\n  </template>\n</MyComponent>\n","language":"vue","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-08e45a"},"children":[{"type":"text","value":"MyComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  <template #header=\"headerProps\">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"    {{ headerProps }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  </template>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  <template #default=\"defaultProps\">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"    {{ defaultProps }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  </template>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  <template #footer=\"footerProps\">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"    {{ footerProps }}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"  </template>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-08e45a"},"children":[{"type":"text","value":"MyComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-caf263"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"frameworks"},"children":[{"type":"text","value":"frameworks"}]},{"type":"element","tag":"h3","props":{"id":"vue-ui-frameworks"},"children":[{"type":"text","value":"Vue UI frameworks"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.monocubed.com/blog/vuejs-frameworks/","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://vuetifyjs.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Vuetify"}]},{"type":"text","value":" "},{"type":"element","tag":"icon","props":{"name":"logos:vuetifyjs"},"children":[]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://bootstrap-vue.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Bootstrap Vue"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://quasar.dev/","rel":["nofollow"]},"children":[{"type":"text","value":"Quasar Framework"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://vuematerial.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Vue Material"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Comparing the popularity of the 4 Vue frameworks on "},{"type":"element","tag":"a","props":{"href":"https://npmtrends.com/","rel":["nofollow"]},"children":[{"type":"text","value":"npm trends"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"vue-ui-frame-npm-trends","src":"/vue-ui-frame-npm-trends.png"},"children":[]},{"type":"element","tag":"img","props":{"alt":"vue-ui-frame-npm-stats","src":"/vue-ui-frame-npm-stats.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"static-site-frameworks"},"children":[{"type":"text","value":"Static Site frameworks"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./vuepress"},"children":[{"type":"text","value":"vuepress"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"vitepress"}]}]}]},{"type":"element","tag":"h3","props":{"id":"ssr-frameworks"},"children":[{"type":"text","value":"SSR frameworks"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server-Side Rendering"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"nuxtjs"}]}]}]},{"type":"element","tag":"h2","props":{"id":"about-script"},"children":[{"type":"text","value":"about "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script lang=\"ts\">"}]},{"type":"text","value":" 与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script>"}]},{"type":"text","value":" 与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]},{"type":"text","value":" 的区别"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-08e45a{color:#116329}\n.ct-caf263{color:#24292F}\n.dark .ct-caf263{color:#C9D1D9}\n.dark .ct-08e45a{color:#7EE787}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"vue组件之间相互传值的方式","depth":2,"text":"vue组件之间相互传值的方式","children":[{"id":"父组件向子组件传值","depth":3,"text":"父组件向子组件传值"},{"id":"子组件向父组件传值","depth":3,"text":"子组件向父组件传值"},{"id":"兄弟组件之间传值","depth":3,"text":"兄弟组件之间传值"},{"id":"多层父子组件通信","depth":3,"text":"多层父子组件通信"}]},{"id":"slot","depth":2,"text":"slot"},{"id":"frameworks","depth":2,"text":"frameworks","children":[{"id":"vue-ui-frameworks","depth":3,"text":"Vue UI frameworks"},{"id":"static-site-frameworks","depth":3,"text":"Static Site frameworks"},{"id":"ssr-frameworks","depth":3,"text":"SSR frameworks"}]},{"id":"about-script","depth":2,"text":"about <script>"}]}},"_type":"markdown","_id":"content:3.code:front-end:vue.md","_source":"content","_file":"3.code/front-end/vue.md","_extension":"md"},{"_path":"/code/front-end/vuepress","_dir":"front-end","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"VuePress","description":"","icon":"logos:vue","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vuepress"},"children":[{"type":"text","value":"VuePress"}]},{"type":"element","tag":"h2","props":{"id":"曾用-vuepress-开发所遇到的问题"},"children":[{"type":"text","value":"曾用 VuePress 开发所遇到的问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本地调试无法显示上次更新，及贡献者。"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"启动脚本 加入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--debug"}]}]}]},{"type":"element","tag":"h3","props":{"id":"plugin"},"children":[{"type":"text","value":"plugin"}]},{"type":"element","tag":"h4","props":{"id":"docsearch"},"children":[{"type":"text","value":"docsearch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E8%8E%B7%E5%8F%96%E6%90%9C%E7%B4%A2%E7%B4%A2%E5%BC%95","rel":["nofollow"]},"children":[{"type":"text","value":"获取搜索索引"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docsearch.algolia.com/apply/","rel":["nofollow"]},"children":[{"type":"text","value":"sign up"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy key, id"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"run py to make index, use "},{"type":"element","tag":"a","props":{"href":"https://docsearch.algolia.com/docs/legacy/run-your-own/#run-the-crawl-from-the-docker-image","rel":["nofollow"]},"children":[{"type":"text","value":"docker"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主题通过 "},{"type":"element","tag":"a","props":{"href":"https://v2.vuepress.vuejs.org/zh/reference/plugin/git.html","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@vuepress/plugin-git"}]}]},{"type":"text","value":" 插件在页面底部显示页面的最后更新时间与贡献者，并提供了“编辑此页”按钮的支持。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主题同时根据侧边栏配置提供上一页和下一页的导航按钮。"}]},{"type":"element","tag":"h4","props":{"id":"基于-git-的信息"},"children":[{"type":"text","value":"基于 Git 的信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过内置 "},{"type":"element","tag":"a","props":{"href":"https://v2.vuepress.vuejs.org/zh/reference/plugin/git.html","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@vuepress/plugin-git"}]}]},{"type":"text","value":" 插件，实现了页面创建时间、最后更新时间与贡献者的自动生成。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"插件会通过页面文件最后一次 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" 提交的 UNIX 时间戳 (ms) 来自动生成页面创建时间和最后更新时间，同时根据提交记录生成贡献者。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主题将以合适的日期格式将最后更新时间显示在每一页的底部，同时显示该页面所有贡献者。"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主题会使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Date.toLocaleString(pageLang)"}]},{"type":"text","value":" 自动根据当前语言，本地化最后更新时间的表述文字。"}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用注意事项"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于最后更新时间是基于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" 的, 所以你只能在一个基于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" 的项目中启用它。此外，由于使用的时间戳来自 git commit，因此它将仅在给定页的第一次提交之后显示，并且仅在该页面后续提交更改时更新。"}]}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"开发模式默认禁用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" 插件对性能有严重影响，所以默认情况下"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"主题不会在开发模式下启用"}]},{"type":"text","value":"。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如有需要，请在主题选项中设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plugins.git: true"}]},{"type":"text","value":" 或使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--debug"}]},{"type":"text","value":" 标志运行开发指令。"}]}]},{"type":"element","tag":"h4","props":{"id":"编辑此页链接"},"children":[{"type":"text","value":"编辑此页链接"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你可以通过在主题选项中中设置如下项目，来自动为每个页面生成编辑此页链接:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docsRepo"}]},{"type":"text","value":": 文档仓库地址，默认同主题选项中的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"repo"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docsDir"}]},{"type":"text","value":": 文档在仓库中的目录，默认为根目录"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docsBranch"}]},{"type":"text","value":": 文档存放的分值，默认为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"main\""}]}]}]},{"type":"element","tag":"h4","props":{"id":"显示控制"},"children":[{"type":"text","value":"显示控制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你想要全局禁用这些项目的显示，请在主题选项中中，将以下对应项目设置为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":"。你也可以通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"YAML front matter"}]},{"type":"text","value":" 中设置这些项目来启用/禁用指定页面:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lastUpdated"}]},{"type":"text","value":": 是否显示页面最后更新时间"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"contributors"}]},{"type":"text","value":": 是否显示页面贡献者"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"editLink"}]},{"type":"text","value":": 是否展示编辑此页链接"}]}]},{"type":"element","tag":"h3","props":{"id":"各种奇怪报错"},"children":[{"type":"text","value":"各种奇怪报错"}]},{"type":"element","tag":"h4","props":{"id":"client-版本不一致"},"children":[{"type":"text","value":"client 版本不一致"}]},{"type":"element","tag":"code","props":{"code":"✔ Compiling with vite - done in 58.94s\n✖ Rendering 394 pages - failed in 10.09s\nReferenceError: Cannot access 'clientConfigs' before initialization\n    at file:///Users/apple/Documents/GitHub/draugus.github.io/src/.vuepress/.temp/.server/app.ab084cb7.mjs:3264:17\n    at ModuleJob.run (node:internal/modules/esm/module_job:193:25)\n    at async Promise.all (index 0)\n    at async ESMLoader.import (node:internal/modules/esm/loader:526:24)\n    at async file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/bundler-vite/dist/index.js:420:30\n    at async file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/utils/dist/index.js:98:20\n    at async build (file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/bundler-vite/dist/index.js:408:3)\n    at async CAC.<anonymous> (file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/cli/dist/index.js:228:3)\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n","language":"txt","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"✔ Compiling with vite - done in 58.94s\n✖ Rendering 394 pages - failed in 10.09s\nReferenceError: Cannot access 'clientConfigs' before initialization\n    at file:///Users/apple/Documents/GitHub/draugus.github.io/src/.vuepress/.temp/.server/app.ab084cb7.mjs:3264:17\n    at ModuleJob.run (node:internal/modules/esm/module_job:193:25)\n    at async Promise.all (index 0)\n    at async ESMLoader.import (node:internal/modules/esm/loader:526:24)\n    at async file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/bundler-vite/dist/index.js:420:30\n    at async file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/utils/dist/index.js:98:20\n    at async build (file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/bundler-vite/dist/index.js:408:3)\n    at async CAC.<anonymous> (file:///Users/apple/Documents/GitHub/draugus.github.io/node_modules/@vuepress/cli/dist/index.js:228:3)\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请确保你在使用最新的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vuepress"}]},{"type":"text","value":" V2 版本，因为一些你遇到的 bug 可能已经在新版本中修复。"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"任何以 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@vuepress/plugin-"}]},{"type":"text","value":" 开头的官方插件应该和 VuePress 保持相同版本。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果你使用了其他第三方插件，请确保它兼容你要升级到的 VuePress 版本。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"事实上并不是 版本不同 引起这个错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vue 本身也需要升级 真的是绝了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"算了 不用了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每次升级都需要做大量的修改！主题难用至极！！！弃用主题"}]},{"type":"element","tag":"h4","props":{"id":"cannot-read-properties-of-undefined"},"children":[{"type":"text","value":"Cannot read properties of undefined"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo"}]},{"type":"element","tag":"h4","props":{"id":"dayjs-真的无语"},"children":[{"type":"text","value":"dayjs 真的无语"}]},{"type":"element","tag":"code","props":{"code":"import * as dayjs from 'dayjs'\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66e116"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b3eff"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-66e116"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" dayjs "}]},{"type":"element","tag":"span","props":{"class":"ct-66e116"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-40da91"},"children":[{"type":"text","value":"'dayjs'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"debug模式可以正常启动。build时，抛出异常 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cannot call a namespace ('dayjs')"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeError: dayjs__namespace is not a function"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"改为"}]},{"type":"element","tag":"code","props":{"code":"const dayjs = require('dayjs')\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66e116"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b3eff"},"children":[{"type":"text","value":"dayjs"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-66e116"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be2a83"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-40da91"},"children":[{"type":"text","value":"'dayjs'"}]},{"type":"element","tag":"span","props":{"class":"ct-e16fdd"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"build正常，debug模式直接报错，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ReferenceError: require is not defined"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"最终解决方案换成js"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://github.com/DrAugus/draugus.github.io/commit/c0f38f802693f358570c78730b5a4848d81609d8","rel":["nofollow"]},"children":[{"type":"text","value":"c0f38f8"}]}]},{"type":"element","tag":"h2","props":{"id":"之前的开发历程"},"children":[{"type":"text","value":"之前的开发历程"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220516: 受"},{"type":"element","tag":"a","props":{"href":"https://github.com/DGP-Studio/Snap.Genshin.Docs","rel":["nofollow"]},"children":[{"type":"text","value":"Snap.Genshin.Docs"}]},{"type":"text","value":"启发，模仿，并立项。初步目标为，apple、war、docs "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"2b2be8d"}]},{"type":"text","value":" 进行多语言支持，出于当前学习的语言，进行支持，支持部分页面的 🇩🇪 🇰🇷\n🇫🇷 🇮🇹 🇬🇧 "},{"type":"element","tag":"del","props":{},"children":[{"type":"text","value":"当然现在已经除了主页全都不支持了"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"5b17fd9"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220517: 构建踩坑 修复 采用 ACCESS_TOKEN 在GitHub配置 Secrets。feat giscus, can't work at that time"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220519: feat accident memory"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220520: try bors, failed. feat ivanka by "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"zbl"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220521: feat trip"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220523: feat taylor by "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"zbl"}]},{"type":"text","value":" 。giscus AVALIABLE"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220524: try geojson, failed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220526: feat markdown plugin, markdown-it-katex"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220531: feat blog"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220601: new "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"theme"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"2e4478b"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220602: genshin migrate "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"2d2b54f"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220622: 调整博客filter "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"d282e56"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220629: feat google analysis "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"2c1bf23"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220701: fix _ file "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"github-community"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"8b69956"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220704: feat "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"heti"}]},{"type":"text","value":" 赫蹏 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ad71f7b"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220711: feat "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"modal"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000022700216","rel":["nofollow"]},"children":[{"type":"text","value":"组件传值"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"dbf37f6"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"20220712: feat genshin "},{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/5072136/javascript-filter-for-objects","rel":["nofollow"]},"children":[{"type":"text","value":"filter"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"4f5cf06"}]},{"type":"text","value":", css "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"grid"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"cb517cc"}]},{"type":"text","value":". 另左右滚动列表实现暂时抛弃，参见"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"原神官网角色"}]},{"type":"text","value":"底部"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-be2a83{color:#8250DF}\n.ct-40da91{color:#0A3069}\n.ct-3b3eff{color:#0550AE}\n.ct-e16fdd{color:#24292F}\n.ct-66e116{color:#CF222E}\n.dark .ct-66e116{color:#FF7B72}\n.dark .ct-e16fdd{color:#C9D1D9}\n.dark .ct-3b3eff{color:#79C0FF}\n.dark .ct-40da91{color:#A5D6FF}\n.dark .ct-be2a83{color:#D2A8FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"曾用-vuepress-开发所遇到的问题","depth":2,"text":"曾用 VuePress 开发所遇到的问题","children":[{"id":"plugin","depth":3,"text":"plugin"},{"id":"各种奇怪报错","depth":3,"text":"各种奇怪报错"}]},{"id":"之前的开发历程","depth":2,"text":"之前的开发历程"}]}},"_type":"markdown","_id":"content:3.code:front-end:vuepress.md","_source":"content","_file":"3.code/front-end/vuepress.md","_extension":"md"},{"_path":"/code/habit","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"编码习惯","description":"","icon":"vscode-icons:file-type-cddl","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"编码习惯"},"children":[{"type":"text","value":"编码习惯"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"写代码前先画好类结构图和代码时序图，这样会让编码能力迅速进步"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定期重构代码真的是好习惯"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"写文档的能力非常重要，tutorial，get started，reference"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"模仿造轮子是学习编码很好的方法，但熟练后就别疯狂造了"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"形成自己的变量命名规则，否则取名字就耗费不少时间"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"算法很重要，要经常训练，很多大厂的面试都会要求手写算法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"做好封装，始终牢记高内聚、低耦合"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"尽可能消除warning"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"学会性能调优"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"千万记得要做数据备份"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"千万别直接拷贝网上的代码，要先理解然后自己写出来"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Log要尽可能规范，比如要写时间和分类，要能重定向输出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一定记得做数据量的预估"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对代码运行时序和代码逻辑要了如指掌"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免深度嵌套的代码"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"代码注释要恰到好处，最好学会命名就能达意"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编码1小时，必须站起来走几步，动动脖子，这是最重要的编码习惯！"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:habit.md","_source":"content","_file":"3.code/habit.md","_extension":"md"},{"_path":"/code/java/_dir","_dir":"java","_draft":false,"_partial":true,"_locale":"","title":"Java","icon":"logos:java","_id":"content:3.code:java:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/java/_dir.yml","_extension":"yml"},{"_path":"/code/java/basin","_dir":"java","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Java","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"java"},"children":[{"type":"text","value":"Java"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:java:basin.md","_source":"content","_file":"3.code/java/basin.md","_extension":"md"},{"_path":"/code/java/sol","_dir":"java","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"sol","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h2","props":{"id":"线程"},"children":[{"type":"text","value":"线程"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HashMap 与 ConcurrentHashMap 的实现原理是怎样的？ConcurrentHashMap 是如何保证线程安全的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"集合类中的 List 和 Map 的线程安全版本是什么，如何保证线程安全的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ThreadLocal 实现原理是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"线程池是如何实现的？简述线程池的任务策略"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何设计一个线程池"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 线程和操作系统的线程是怎么对应的？Java线程是怎样进行调度的?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 线程池里的 arrayblockingqueue 与 linkedblockingqueue 的使用场景和区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 是如何实现线程安全的，哪些数据结构是线程安全的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 中 sleep() 与 wait() 的区别"}]}]},{"type":"element","tag":"h2","props":{"id":"垃圾回收"},"children":[{"type":"text","value":"垃圾回收"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 中垃圾回收机制中如何判断对象需要回收？常见的 GC 回收算法有哪些？"}]}]},{"type":"element","tag":"h2","props":{"id":"设计模式"},"children":[{"type":"text","value":"设计模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./cpp.md#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"},"children":[{"type":"text","value":"click"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如何设计 Java 的异常体系？"}]},{"type":"element","tag":"h2","props":{"id":"锁"},"children":[{"type":"text","value":"锁"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"synchronized 关键字底层是如何实现的？它与 Lock 相比优缺点分别是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Synchronized，Volatile，可重入锁的不同使用场景及优缺点"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 常见锁有哪些？ReetrantLock 是怎么实现的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Synchronized，Volatile，可重入锁的不同使用场景及优缺点"}]}]},{"type":"element","tag":"h2","props":{"id":"jvm"},"children":[{"type":"text","value":"JVM"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 JVM 的内存模型 JVM 内存是如何对应到操作系统内存的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"JVM 中内存模型是怎样的，简述新生代与老年代的区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"JVM 是怎么去调优的？简述过程和调优的结果"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是内存泄漏，怎么确定内存泄漏？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 异常有哪些类型？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"volatile 关键字解决了什么问题，它的实现原理是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"String 类能不能被继承？为什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"== 和 equals() 的区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 BIO, NIO, AIO 的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Spring AOP 的原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Java 的反射机制及其应用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述动态代理与静态代理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Java 的 happen before 原则"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 ArrayList 与 LinkedList 的底层实现以及常见操作的时间复杂度"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 类的加载流程是怎样的？什么是双亲委派机制？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Java 中接口和抽象类的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"hashcode 和 equals 方法的联系"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Spring MVC 的原理和流程"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"线程","depth":2,"text":"线程"},{"id":"垃圾回收","depth":2,"text":"垃圾回收"},{"id":"设计模式","depth":2,"text":"设计模式"},{"id":"锁","depth":2,"text":"锁"},{"id":"jvm","depth":2,"text":"JVM"}]}},"_type":"markdown","_id":"content:3.code:java:sol.md","_source":"content","_file":"3.code/java/sol.md","_extension":"md"},{"_path":"/code/lua/_dir","_dir":"lua","_draft":false,"_partial":true,"_locale":"","title":"Lua","icon":"logos:lua","_id":"content:3.code:lua:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/lua/_dir.yml","_extension":"yml"},{"_path":"/code/lua/2021-11-01-lua","_dir":"lua","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"lua学习记录","description":"","date":"2021-11-01T09:51:12.000Z","isOriginal":true,"category":["编程"],"tag":["lua","笔记"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"基本操作"},"children":[{"type":"text","value":"基本操作"}]},{"type":"element","tag":"h3","props":{"id":"类型"},"children":[{"type":"text","value":"类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数字取整操作"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用计算方式"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n使用%运算符，得到的结果是数字。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x%1"}]},{"type":"text","value":" 表示x的小数部分，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x-x%1"}]},{"type":"text","value":" 表示x的整数部分。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用函数库"}]}]},{"type":"element","tag":"code","props":{"code":"math.ceil()  \nmath.ceil(12.2) --返回13  \nmath.ceil(12.7) --返回13  \nmath.ceil(12.0) --返回12  \na, b = math.modf(23.67) -- a=23 b=67\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"math.ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"()  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"math.ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"12.2"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"--返回13  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"math.ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"12.7"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"--返回13  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"math.ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"12.0"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"--返回12  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"a, b "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"math.modf"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"23.67"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"-- a=23 b=67"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用字符串格式化"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n得到的结果是字符串形式"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"string.format(“%d”, 17.325) --输出17"}]}]}]},{"type":"element","tag":"h3","props":{"id":"字符串连接"},"children":[{"type":"text","value":"字符串连接"}]},{"type":"element","tag":"code","props":{"code":"> print(\"a\" .. 'b')\nab\n> print(157 .. 428)\n157428\n> \n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"a\" "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"'b'"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"ab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"157"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"428"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"157428"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 # 来计算字符串的长度"}]},{"type":"element","tag":"code","props":{"code":"> len = \"www.runoob.com\"\n> print(#len)\n14\n> print(#\"www.runoob.com\")\n14\n>\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" len "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"www.runoob.com\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"len)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"14"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"www.runoob.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"14"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"表"},"children":[{"type":"text","value":"表"}]},{"type":"element","tag":"code","props":{"code":"-- 创建一个空的 table\nlocal tbl1 = {}\n \n-- 直接初始表\nlocal tbl2 = {\"apple\", \"pear\", \"orange\", \"grape\"}\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"-- 创建一个空的 table"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" tbl1 "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" {}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"-- 直接初始表"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" tbl2 "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"apple\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"pear\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"orange\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"grape\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"遍历"}]},{"type":"element","tag":"code","props":{"code":"local tbl = {\"apple\", \"pear\", \"orange\", \"grape\"}\nfor key, val in pairs(tbl) do\n    print(\"Key\", key, 'value', val)\nend\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" tbl "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"apple\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"pear\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"orange\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"grape\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" key, val "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"pairs"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"(tbl) "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"do"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"\"Key\""}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", key, "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"'value'"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", val)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"end"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输出"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nKey 1 value apple"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nKey 2 value pear\nKey 3 value orange"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nKey 4 value grape"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"判空"}]},{"type":"element","tag":"code","props":{"code":"if next(a) ~= nil\n    --不是空表\nelse\n    --空表\nend\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"(a) "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"~="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"nil"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"--不是空表"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"else"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"--空表"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"end"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"变量swap"},"children":[{"type":"text","value":"变量swap"}]},{"type":"element","tag":"code","props":{"code":"x, y = y, x                     -- swap 'x' for 'y'\na[i], a[j] = a[j], a[i]         -- swap 'a[i]' for 'a[j]'\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"x, y "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" y, x                     "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"-- swap 'x' for 'y'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"a[i], a[j] "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" a[j], a[i]         "}]},{"type":"element","tag":"span","props":{"class":"ct-b96709"},"children":[{"type":"text","value":"-- swap 'a[i]' for 'a[j]'"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"流程控制"},"children":[{"type":"text","value":"流程控制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lua认为false和nil为假，true和非nil为真。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要注意的是Lua中 0 为 true"}]},{"type":"element","tag":"h3","props":{"id":"多返回值"},"children":[{"type":"text","value":"多返回值"}]},{"type":"element","tag":"code","props":{"code":"> s, e = string.find('i have a word', 'word')\n> print(s, e)\n10 13\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" s, e "}]},{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"string.find"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"'i have a word'"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73ccb8"},"children":[{"type":"text","value":"'word'"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b5f50c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":"(s, e)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-775763"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3c8449"},"children":[{"type":"text","value":"13"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"可变参数"},"children":[{"type":"text","value":"可变参数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常在遍历变长参数的时候只需要使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{...}"}]},{"type":"text","value":"，然而变长参数可能会包含一些 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nil"}]},{"type":"text","value":"，那么就可以用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 函数来访问变长参数了："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select('#', ...)"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select(n, ...)"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select('#', ...)"}]},{"type":"text","value":" 返回可变参数的长度。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select(n, ...)"}]},{"type":"text","value":" 用于返回从起点 n 开始到结束位置的所有参数列表。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" 时，必须传入一个固定实参 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"selector(选择开关)"}]},{"type":"text","value":" 和一系列变长参数。如果 selector 为数字 n，那么 select 返回参数列表中从索引 n 开始到结束位置的所有参数列表，否则只能为字符串 #，这样 select 返回变长参数的总数。"}]},{"type":"element","tag":"h3","props":{"id":"字符串"},"children":[{"type":"text","value":"字符串"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lua 语言中字符串可以使用以下三种方式来表示："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"单引号间的一串字符。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双引号间的一串字符。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":" 与"}]}]},{"type":"text","value":" 间的一串字符。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.runoob.com/lua/lua-strings.html","rel":["nofollow"]},"children":[{"type":"text","value":"各种字符串操作"}]}]},{"type":"element","tag":"h3","props":{"id":"迭代器"},"children":[{"type":"text","value":"迭代器"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pairs: 迭代 table，可以遍历表中所有的 key 可以返回 nil"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ipairs: 迭代数组，不能返回 nil,如果遇到 nil 则退出"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"text","value":" 目前 "},{"type":"element","tag":"a","props":{"href":"https://www.runoob.com/lua/lua-metatables.html","target":"_blank"},"children":[{"type":"text","value":"研究进度"}]},{"type":"text","value":" "}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/DrAugus/augus_cpp/blob/master/test.lua","rel":["nofollow"]},"children":[{"type":"text","value":"程序代码"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-73ccb8{color:#0A3069}\n.ct-b5f50c{color:#CF222E}\n.ct-b96709{color:#6E7781}\n.ct-775763{color:#24292F}\n.ct-3c8449{color:#0550AE}\n.dark .ct-3c8449{color:#79C0FF}\n.dark .ct-775763{color:#C9D1D9}\n.dark .ct-b96709{color:#8B949E}\n.dark .ct-b5f50c{color:#FF7B72}\n.dark .ct-73ccb8{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"基本操作","depth":2,"text":"基本操作","children":[{"id":"类型","depth":3,"text":"类型"},{"id":"字符串连接","depth":3,"text":"字符串连接"},{"id":"表","depth":3,"text":"表"},{"id":"变量swap","depth":3,"text":"变量swap"},{"id":"流程控制","depth":3,"text":"流程控制"},{"id":"多返回值","depth":3,"text":"多返回值"},{"id":"可变参数","depth":3,"text":"可变参数"},{"id":"字符串","depth":3,"text":"字符串"},{"id":"迭代器","depth":3,"text":"迭代器"}]}]}},"_type":"markdown","_id":"content:3.code:lua:2021-11-01-lua学习记录.md","_source":"content","_file":"3.code/lua/2021-11-01-lua学习记录.md","_extension":"md"},{"_path":"/code/lua/2021-11-24-lua-auto-test","_dir":"lua","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"lua自动化测试指南","description":"","date":"2021-11-24T11:15:22.000Z","isOriginal":true,"category":["编程"],"tag":["lua"],"body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/luarocks/luarocks/wiki/Installation-instructions-for-Unix","rel":["nofollow"]},"children":[{"type":"text","value":"linux安装luarocks官方指南"}]}]}]},{"type":"element","tag":"h2","props":{"id":"luarocks安装过程"},"children":[{"type":"text","value":"luarocks安装过程"}]},{"type":"element","tag":"h3","props":{"id":"linux安装luarocksredhat系列"},"children":[{"type":"text","value":"linux安装luarocks（RedHat系列）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To get a default installation of Lua and LuaRocks under "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/local"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"First, ensure that you have development tools installed on your system, otherwise run the command below to install\nthem"},{"type":"element","tag":"code","props":{"code":"sudo yum install libtermcap-devel ncurses-devel libevent-devel readline-devel\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"libtermcap-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"ncurses-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"libevent-devel"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"readline-devel"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"build and install Lua, run the following commands to download the package tar ball, extract, build and install\nit.("},{"type":"element","tag":"a","props":{"href":"http://www.lua.org/ftp/","rel":["nofollow"]},"children":[{"type":"text","value":"lua source code"}]},{"type":"text","value":")"},{"type":"element","tag":"code","props":{"code":"-$ curl -R -O http://www.lua.org/ftp/lua-5.1.4.tar.gz\n-$ tar -zxf lua-5.1.4.tar.gz\n-$ cd lua-5.1.4\n-$ make linux test\n-$ sudo make install\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"http://www.lua.org/ftp/lua-5.1.4.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-zxf"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"lua-5.1.4.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"lua-5.1.4"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"linux"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"test"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"install"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Download and unpack the LuaRocks tarball using following commands."},{"type":"element","tag":"code","props":{"code":"-$ wget https://luarocks.org/releases/luarocks-3.8.0.tar.gz\n-$ tar zxpf luarocks-3.8.0.tar.gz\n-$ cd luarocks-3.8.0\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"https://luarocks.org/releases/luarocks-3.8.0.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"zxpf"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"luarocks-3.8.0.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"luarocks-3.8.0"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./configure --with-lua-include=/usr/local/include"}]},{"type":"text","value":". (This will attempt to detect your installation of Lua. If\nyou get any error messages, see the section \"Customizing your settings\", below.)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"As superuser, run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make install"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"linux安装luarocksdebian系列"},"children":[{"type":"text","value":"linux安装luarocks（Debian系列）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To get a default installation of Lua and LuaRocks under "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/usr/local"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"First, ensure that you have development tools installed on your system, otherwise run the command below to install\nthem"},{"type":"element","tag":"code","props":{"code":" -$ sudo apt install build-essential libreadline-dev unzip\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"build-essential"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"libreadline-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"unzip"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"build and install Lua, run the following commands to download the package tar ball, extract, build and install\nit.("},{"type":"element","tag":"a","props":{"href":"http://www.lua.org/ftp/","rel":["nofollow"]},"children":[{"type":"text","value":"lua source code"}]},{"type":"text","value":")"},{"type":"element","tag":"code","props":{"code":"-$ curl -R -O http://www.lua.org/ftp/lua-5.1.4.tar.gz\n-$ tar -zxf lua-5.1.4.tar.gz\n-$ cd lua-5.1.4\n-$ make linux test\n-$ sudo make install\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-R"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-O"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"http://www.lua.org/ftp/lua-5.1.4.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2eb9a8"},"children":[{"type":"text","value":"-zxf"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"lua-5.1.4.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"lua-5.1.4"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"linux"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"test"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"install"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Download and unpack the LuaRocks tarball using following commands."},{"type":"element","tag":"code","props":{"code":"-$ wget https://luarocks.org/releases/luarocks-3.8.0.tar.gz\n-$ tar zxpf luarocks-3.8.0.tar.gz\n-$ cd luarocks-3.8.0\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"https://luarocks.org/releases/luarocks-3.8.0.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"zxpf"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"luarocks-3.8.0.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"-$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-a8b772"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f40a7"},"children":[{"type":"text","value":"luarocks-3.8.0"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./configure --with-lua-include=/usr/local/include"}]},{"type":"text","value":". (This will attempt to detect your installation of Lua. If\nyou get any error messages, see the section \"Customizing your settings\", below.)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"As superuser, run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make install"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"windows子系统linux安装luarocks"},"children":[{"type":"text","value":"windows子系统linux安装luarocks"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装gcc"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"sudo apt install lua5.1"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"sudo apt install luarocks"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"sudo apt install lua-busted"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装pcre2，安装rapidjson（这两个可以直接copy dbproxy项目里的lua文件）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装完成"}]}]},{"type":"element","tag":"h3","props":{"id":"windows安装luarocks-极其难用-不建议在windows下操作"},"children":[{"type":"text","value":"windows安装luarocks (极其难用 不建议在Windows下操作)"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/xulang/p/12535667.html","rel":["nofollow"]},"children":[{"type":"text","value":"安装流程"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装完成后cmd运行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks"}]},{"type":"text","value":"看是否安装成功"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"找不到luarocks命令时，需要将图示四个文件copy放入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lua\\5.1\\"}]},{"type":"text","value":"路径下 "},{"type":"element","tag":"img","props":{"alt":"","src":"https://i.loli.net/2021/11/24/HaimyRg9jqLStwb.png"},"children":[]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装busted"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install busted"}]},{"type":"text","value":"\n*\n如若出现"},{"type":"element","tag":"a","props":{"href":"https://github.com/Olivine-Labs/busted/issues/590","rel":["nofollow"]},"children":[{"type":"text","value":"Error: Parse error processing dependency 'lua_cliargs = 3.0'"}]},{"type":"text","value":",请键入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"where luarocks"}]},{"type":"text","value":"查看路径是否为您的安装路径，此现象为您在设备上安装了多个版本的luarocks系统无法确定安装版本。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如若出现 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"'mingw32-gcc'不是内部或外部命令，也不是可运行的程序"}]},{"type":"text","value":" "},{"type":"element","tag":"img","props":{"alt":"","src":"https://i.loli.net/2021/11/24/AjSJhNkOZ4FwKLY.png"},"children":[]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"您需要安装gcc"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"mingw下载安装（windows安装"},{"type":"element","tag":"a","props":{"href":"https://www.msys2.org/","rel":["nofollow"]},"children":[{"type":"text","value":"指南"}]},{"type":"text","value":"）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"配置环境变量。 我的电脑->属性->高级系统设置->环境变量->系统变量"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n系统变量->Path->编辑->新建->D:\\mingw\\bin->确定"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n系统变量->新建->变量名：LIBRARY_path->变量值：D:\\mingw\\lib->确定"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n系统变量->新建->变量名：C_INCLUDE_PATH->变量值：D:\\mingw\\include->确定"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"gcc -v验证安装"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"安装其他库"},"children":[{"type":"text","value":"安装其他库"}]},{"type":"element","tag":"h3","props":{"id":"安装busted"},"children":[{"type":"text","value":"安装busted"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install busted"}]},{"type":"text","value":" 100%安装失败"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用别的方式安装"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先安装"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install luasocket"}]},{"type":"text","value":"安装成功后 再安装 busted"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install busted"}]}]}]},{"type":"element","tag":"h3","props":{"id":"安装-rapidjson"},"children":[{"type":"text","value":"安装 rapidjson"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install rapidjson"}]}]},{"type":"element","tag":"h3","props":{"id":"安装-lrexlib-pcre2"},"children":[{"type":"text","value":"安装 Lrexlib-PCRE2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luarocks install Lrexlib-PCRE2"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"出现错误"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Could not find header file for PCRE2"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/code/install_pcre.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pcre2"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum -y install pcre2-devel"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"应该安装so库\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum -y install pcre2-static"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find / -name \"*pcre2.so*\""}]}]},{"type":"element","tag":"code","props":{"code":"#输出路径\n/usr/local/lib/lua/5.1/rex_pcre2.so\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-201dd7"},"children":[{"type":"text","value":"#输出路径"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cb08b8"},"children":[{"type":"text","value":"/usr/local/lib/lua/5.1/rex_pcre2.so"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"拷贝至lua目录"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-201dd7{color:#6E7781}\n.ct-2eb9a8{color:#0550AE}\n.ct-8f40a7{color:#0A3069}\n.ct-a8b772{color:#24292F}\n.ct-cb08b8{color:#953800}\n.dark .ct-cb08b8{color:#FFA657}\n.dark .ct-a8b772{color:#C9D1D9}\n.dark .ct-8f40a7{color:#A5D6FF}\n.dark .ct-2eb9a8{color:#79C0FF}\n.dark .ct-201dd7{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"luarocks安装过程","depth":2,"text":"luarocks安装过程","children":[{"id":"linux安装luarocksredhat系列","depth":3,"text":"linux安装luarocks（RedHat系列）"},{"id":"linux安装luarocksdebian系列","depth":3,"text":"linux安装luarocks（Debian系列）"},{"id":"windows子系统linux安装luarocks","depth":3,"text":"windows子系统linux安装luarocks"},{"id":"windows安装luarocks-极其难用-不建议在windows下操作","depth":3,"text":"windows安装luarocks (极其难用 不建议在Windows下操作)"}]},{"id":"安装其他库","depth":2,"text":"安装其他库","children":[{"id":"安装busted","depth":3,"text":"安装busted"},{"id":"安装-rapidjson","depth":3,"text":"安装 rapidjson"},{"id":"安装-lrexlib-pcre2","depth":3,"text":"安装 Lrexlib-PCRE2"}]}]}},"_type":"markdown","_id":"content:3.code:lua:2021-11-24-lua-auto-test.md","_source":"content","_file":"3.code/lua/2021-11-24-lua-auto-test.md","_extension":"md"},{"_path":"/code/lua/2022-07-22-lua","_dir":"lua","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"lua深入","description":"","date":"2022-07-22T11:39:11.000Z","isOriginal":true,"category":["编程"],"tag":["lua","热更新","栈","内存","绑定","ELuna"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"热更新"},"children":[{"type":"text","value":"热更新"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://john.js.org/2020/10/27/Lua-Runtime-Hotfix/","rel":["nofollow"]},"children":[{"type":"text","value":"hot update"}]}]},{"type":"element","tag":"li","props":{},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"lua-的栈与内存限制"},"children":[{"type":"element","tag":"a","props":{"href":"https://www.ogura.io/posts/2018/05/lua_stack_limits/","rel":["nofollow"]},"children":[{"type":"text","value":"lua 的栈与内存限制"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个lua文件不能超过 262144 个常量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个控制结构不能超过 32895 个栈"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"upvalue数量不能超过 60 个"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Lua 的每个函数(function)中不能超过 200 个本地变量"}]}]},{"type":"element","tag":"h2","props":{"id":"eluna"},"children":[{"type":"element","tag":"a","props":{"href":"http://radiotail.github.io/2014/10/28/Eluna%E5%8F%91%E5%B8%83/","rel":["nofollow"]},"children":[{"type":"text","value":"ELuna"}]}]},{"type":"element","tag":"h3","props":{"id":"绑定c类"},"children":[{"type":"text","value":"绑定C++类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerClass( lua_State, className, constructor)"}]},{"type":"text","value":" 函数绑定一个C++类。第一个参数是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lua_state"}]},{"type":"text","value":",\n第二个参数是类在Lua中的名字。第三个参数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"constructor"}]},{"type":"text","value":"是这个类要用到的构造函数，通过传递具体的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::constructor"}]},{"type":"text","value":"\n函数来为这个类设置好一个构造函数，这个函数模板参数中的第一个参数是构造函数所属的类，后面的参数为构造函数的参数类型列表。如你需要为类Test设置一个参数为int的构造函数，则须传递"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::constructor"}]},{"type":"text","value":"\n到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"registerClass"}]},{"type":"text","value":"函数中，模板参数中的int就是这个类的构造函数所需的参数类型。在Lua中创建对象时需这样写: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test = Test(1)"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定c类成员函数"},"children":[{"type":"text","value":"绑定c++类成员函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerMethod(lua_State, funcName, func)"}]},{"type":"text","value":"\n函数绑定一个c++类成员函数。第一个参数同上面的函数。第二个参数是函数在Lua中的名字。第三个参数是这个函数的地址。如你要注册Test类的foo函数到Lua中，应利用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerMethod(L,”foo”, &Test::foo)"}]},{"type":"text","value":"来注册函数。在Lua中的调用为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test:foo()"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定c函数"},"children":[{"type":"text","value":"绑定c++函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerFunction(lua_State, funcName, func)"}]},{"type":"text","value":"函数c++函数。这个函数中参数的意义同registerMethod函数。例如C++中有一函数foo，利"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna:: registerFunction(L,“foo”, &foo)"}]},{"type":"text","value":"注册这个函数，在Lua调用为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"foo()"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定lua函数"},"children":[{"type":"text","value":"绑定Lua函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaFunction"}]},{"type":"text","value":"类为Lua函数生成一个相应的C++中的对象，调用函数通过使用类的”()”方法来实现。比如在Lua中有一个函数foo(a)，其中参数a是number型，且无返回值，则在C++中的绑定方法为先利用\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaFunction luaFoo(L, “foo”)"}]},{"type":"text","value":"\n创建一个C++对象，其中模板参数是这个Lua函数的返回值类型，因为foo无返回值，所以为void，LuaFunction的第一个参数是lua_state，第二个参数是这个Lua函数的名字。在C++中的调用方式为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luaFoo(1)"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定lua中的table类型"},"children":[{"type":"text","value":"绑定Lua中的Table类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaTable"}]},{"type":"text","value":"类生成一个Lua Table在c++中的对象，读取插入元素通过”get”, “set”方法。比如Lua中有一个Table变量luaTable = {“hello”}，在C++中使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna:: LuaTable luaTable(L, “luaTable”)"}]},{"type":"text","value":"来为luaTable在C++中生成一个对象，调用luaTable.get(1)来取得luaTable中key为1的字符串”hello”，其中模板参数char*\n为get返回的value类型。调用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luaTable.set(2, “world”)"}]},{"type":"text","value":"来为luaTable插入一个key=2,value=”world”的键值对。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":::: details 示例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::: code-tabs#shell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"@tab:active c++"}]},{"type":"element","tag":"code","props":{"code":"#include <stdio.h>\n#include \"ELuna.h\"\n\n\n//define a class\nclass CPPClass\n{\npublic:\n CPPClass(const char* name): m_name(name){\n  printf(\"%s %p Constructor!\\n\", name, this);\n }\n ~CPPClass(){\n  printf(\"%s %p Destructor!\\n\", m_name, this);\n }\n\n //define method\n void cppPrint(const char* word) {\n  printf(\"%s: %s\\n\", m_name, word);\n }\n\n int cppSum(int a, int b){\n  return a + b;\n }\n\n void print() {\n  printf(\"%s: %p\\n\", m_name, this);\n }\n\n CPPClass& createRef(CPPClass& p) {\n  printf(\"%s %s %p %p createRef!\\n\", m_name, p.m_name, &p, this);\n  p.m_name = \"ref\";\n  return p;\n } \nprivate:\n const char* m_name;\n};\n\n//define function\nvoid cppPrint(char* str) {\n printf(\"cppPrint: %s\\n\", str);\n}\n\nint cppSum(int a, int b){\n return a + b;\n}\n\nCPPClass* testnil(CPPClass* c)\n{\n    printf(\"CPPClass c: %p\\n\", c);\n    return nullptr;\n}\n\nvoid testCPP(lua_State* L) {\n //register a class and it's constructor. indicate all constructor's param type\n ELuna::registerClass<CPPClass>(L, \"CPPClass\", ELuna::constructor<CPPClass, const char* >);\n //register a method\n ELuna::registerMethod<CPPClass>(L, \"cppPrint\", &CPPClass::cppPrint);\n ELuna::registerMethod<CPPClass>(L, \"cppSum\", &CPPClass::cppSum);\n ELuna::registerMethod<CPPClass, CPPClass&>(L, \"createRef\", &CPPClass::createRef);\n ELuna::registerMethod<CPPClass>(L, \"print\", &CPPClass::print);\n\n //register a function\n ELuna::registerFunction(L, \"cppPrint\", cppPrint);\n ELuna::registerFunction(L, \"cppSum\", cppSum);\n    ELuna::registerFunction(L, \"testnil\", testnil);\n}\n\nvoid testLua(lua_State* L) {\n //new a LuaFunction object to bind lua function. indicate return value type\n ELuna::LuaFunction<void> luaPrint(L, \"luaPrint\");\n ELuna::LuaFunction<int> luaSum(L, \"luaSum\");\n\n //run Luafunction's () to call lua function\n luaPrint(\"hello world\");\n printf(\"luaSum: %d\\n\", luaSum(1,2));\n\n //register a lua table\n ELuna::LuaTable luaTable(L, \"luaTable\");\n //set table's key and value\n luaTable.set(2, \"world\");\n printf(\"LuaTable: %s %s\\n\", luaTable.get<int, char*>(1), luaTable.get<int, char*>(2));\n}\n\nconst char *fileName = \"../sample/sample.lua\";\n\nint main()\n{\n lua_State *L = ELuna::openLua();\n\n testCPP(L);\n\n ELuna::doFile(L, fileName);\n\n testLua(L);\n ELuna::closeLua(L);\n\n getchar();\n\n return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"<stdio.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"ELuna.h\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"//define a class"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"m_name"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(name){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" Constructor!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"~CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" Destructor!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //define method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"word"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, word);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"createRef"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" createRef!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, p.m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"p, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  p.m_name "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"ref\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" } "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" m_name;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"//define function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", str);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testnil"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass c: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", c);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testCPP"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"lua_State"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a class and it's constructor. indicate all constructor's param type"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"CPPClass, "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::cppPrint);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::cppSum);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"createRef\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::createRef);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"print\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::print);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", cppPrint);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", cppSum);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"testnil\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", testnil);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"lua_State"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //new a LuaFunction object to bind lua function. indicate return value type"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<void>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //run Luafunction's () to call lua function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaSum: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a lua table"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaTable "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaTable"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaTable\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //set table's key and value"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" luaTable."}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"LuaTable: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", luaTable.get"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"), luaTable.get"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"fileName "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"../sample/sample.lua\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" lua_State "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"L "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"openLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testCPP"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"doFile"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, fileName);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"closeLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"getchar"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"@tab lua"}]},{"type":"element","tag":"code","props":{"code":"--new a class\nlocal cppClass = CPPClass(\"cppClass\")\ncppClass:print()\n--call cpp method\ncppClass:cppPrint(\"Hello world!\")\nprint(\"CPPClass's cppSum:\", cppClass:cppSum(1,2))\n\n--call cpp function\ncppPrint(\"Hello world!\")\nprint(\"cppSum:\", cppSum(1,2))\nprint(\"testnil: \", testnil(cppClass))\n-- print(\"testnil: \", testnil(nil))\n\n--define lua function\nfunction luaPrint(str)\n print(\"luaPrint:\", str)\nend\n\nfunction luaSum(a, b)\n return a + b\nend\n\n--define table\nluaTable = {\"hello\"}\n\nlocal refClass = cppClass:createRef(cppClass)\nprint(\"createRef: \", refClass, cppClass)\ncppClass:print()\nrefClass:print()\n\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--new a class"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" cppClass "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppClass\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--call cpp method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"Hello world!\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass's cppSum:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--call cpp function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"Hello world!\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"testnil: \""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"testnil"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(cppClass))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"-- print(\"testnil: \", testnil(nil))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--define lua function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(str)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaPrint:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", str)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(a, b)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--define table"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"luaTable "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" refClass "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"createRef"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(cppClass)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"createRef: \""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", refClass, cppClass)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"refClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":::"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::::"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-880903{color:#0550AE}\n.ct-caecc7{color:#8250DF}\n.ct-d5f28a{color:#953800}\n.ct-c9a3e1{color:#6E7781}\n.ct-1630fe{color:#0A3069}\n.ct-68f130{color:#24292F}\n.ct-30f2f6{color:#CF222E}\n.dark .ct-30f2f6{color:#FF7B72}\n.dark .ct-68f130{color:#C9D1D9}\n.dark .ct-1630fe{color:#A5D6FF}\n.dark .ct-c9a3e1{color:#8B949E}\n.dark .ct-d5f28a{color:#FFA657}\n.dark .ct-caecc7{color:#D2A8FF}\n.dark .ct-880903{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"热更新","depth":2,"text":"热更新"},{"id":"lua-的栈与内存限制","depth":2,"text":"lua 的栈与内存限制"},{"id":"eluna","depth":2,"text":"ELuna","children":[{"id":"绑定c类","depth":3,"text":"绑定C++类"},{"id":"绑定c类成员函数","depth":3,"text":"绑定c++类成员函数"},{"id":"绑定c函数","depth":3,"text":"绑定c++函数"},{"id":"绑定lua函数","depth":3,"text":"绑定Lua函数"},{"id":"绑定lua中的table类型","depth":3,"text":"绑定Lua中的Table类型"}]}]}},"_type":"markdown","_id":"content:3.code:lua:2022-07-22-lua-深入.md","_source":"content","_file":"3.code/lua/2022-07-22-lua-深入.md","_extension":"md"},{"_path":"/code/network/_dir","_dir":"network","_draft":false,"_partial":true,"_locale":"","title":"网络协议","icon":"mdi:folder-key-network-outline","_id":"content:3.code:network:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/network/_dir.yml","_extension":"yml"},{"_path":"/code/network/qa","_dir":"network","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从系统层面上，UDP如何保证尽量可靠？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"RestFul 与 RPC 的区别是什么？RestFul 的优点在哪里？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"RestFul 是什么？RestFul 请求的 URL 有什么特点？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 RPC 的调用过程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是 ARP 协议？简述其使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"DNS 查询服务器的基本流程是什么？DNS 劫持是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是中间人攻击？如何防止攻击？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何防止传输内容被篡改？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"从输入 URL 到展现页面的全过程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是跨域，什么情况下会发生跨域请求？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 WebSocket 是如何进行传输的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Cookie 和 Session 的关系和区别是什么？"}]}]}]},{"type":"element","tag":"h2","props":{"id":"tcp"},"children":[{"type":"text","value":"TCP"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 三次握手以及四次挥手的流程。为什么需要三次握手以及四次挥手？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 四次挥手的时候 CLOSE_WAIT 的话怎么处理？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 的 TIME_WAIT"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 的 keepalive 了解吗？说一说它和 HTTP 的 keepalive 的区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 怎么保证可靠传输？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何解决 TCP 传输丢包问题？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 如何实现数据有序性？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 中常见的拥塞控制算法有哪些？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 滑动窗口以及重传机制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 中的拥塞控制与滑动窗口机制"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 协议的延迟 ACK 和累计应答"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 TCP 的报文头部结构"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么是 TCP 粘包和拆包？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 中 SYN 攻击是什么？如何防止？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TCP 与 UDP 在网络协议中的哪一层，他们之间有什么区别？"}]}]}]},{"type":"element","tag":"h2","props":{"id":"http"},"children":[{"type":"text","value":"HTTP"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 与 HTTPS 有哪些区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 HTTP 1.0，1.1，2.0 的主要区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 是无状态的吗？需要保持状态的场景应该怎么做？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 HTTPS 的加密与认证过程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述对称与非对称加密的概念"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 的方法有哪些？"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"tcp","depth":2,"text":"TCP"},{"id":"http","depth":2,"text":"HTTP"}]}},"_type":"markdown","_id":"content:3.code:network:qa.md","_source":"content","_file":"3.code/network/qa.md","_extension":"md"},{"_path":"/code/non-tech","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"非技术问题","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"非技术问题"},"children":[{"type":"text","value":"非技术问题"}]},{"type":"element","tag":"h2","props":{"id":"自我评价"},"children":[{"type":"text","value":"自我评价"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"你的优势和劣势是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最近在看什么书吗，有没有接触过什么新技术？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最有成就感的项目是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"未来的职业规划是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最近一年内遇到的最有挑战的事情是什么？ 对下一家入职的公司主要看重哪些方面？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"自己有哪些不足之处，准备如何提升？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"项目中最难的地方是哪里？你学习到了什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简单描述一下自己是怎么样的人？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"你的性格和技能上有什么缺点"}]}]}]},{"type":"element","tag":"h2","props":{"id":"看法"},"children":[{"type":"text","value":"看法"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"与同事沟通的时候，如果遇到冲突了如何解决？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对加班有什么看法？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"你用过...吗？说说对对...的看法，使用上有哪些优缺点"}]}]}]},{"type":"element","tag":"h2","props":{"id":"你还有什么要问的"},"children":[{"type":"text","value":"你还有什么要问的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于 hr 的提问"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"我想了解下如果要快速进入角色，还需要哪些知识要补充？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"公司是否有培训计划让我不断学习，为公司创造更大价值？该岗位在贵公司的职业发展通道是怎样的？我想参考确定未来努力的目标和方向。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"社保和公积金目前已经停掉，如果转入咱们公司需要我提供什么资料呢？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"公司的人才流动率高吗？为什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"您觉得最喜欢公司的地方是哪里？"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于技术面试官的提问"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"您在行业里做了这么久，是怎么兼顾技术和成长的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这个岗位，这几年最主要努力的方向是什么？"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"自我评价","depth":2,"text":"自我评价"},{"id":"看法","depth":2,"text":"看法"},{"id":"你还有什么要问的","depth":2,"text":"你还有什么要问的"}]}},"_type":"markdown","_id":"content:3.code:non-tech.md","_source":"content","_file":"3.code/non-tech.md","_extension":"md"},{"_path":"/code/os/_dir","_dir":"os","_draft":false,"_partial":true,"_locale":"","title":"操作系统","icon":"eos-icons:ai-operator","_id":"content:3.code:os:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/os/_dir.yml","_extension":"yml"},{"_path":"/code/os/qa","_dir":"os","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作系统如何申请以及管理内存的？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程通信中的管道实现原理是什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简单介绍进程调度的算法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 Linux 系统态与用户态，什么时候会进入系统态？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 LRU 算法及其实现方式"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述操作系统如何进行内存管理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么时候会由用户态陷入内核态？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述操作系统中的缺页中断"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述几个常用的 Linux 命令以及他们的功能"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述操作系统中 malloc 的实现原理"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 中虚拟内存和物理内存有什么区别？有什么优点？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 下如何查看端口被哪个进程占用？"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"a","props":{"href":"/code/record/linux/command.md#lsof"},"children":[{"type":"text","value":"lsof"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"a","props":{"href":"/code/record/linux/command.md#netstat"},"children":[{"type":"text","value":"netstat"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 下如何排查 CPU 以及 内存占用过多？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 下如何查看 CPU 荷载，正在运行的进程，某个端口对应的进程？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何调试服务器内存占用过高的问题？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 如何查看实时的滚动日志？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BIO、NIO 有什么区别？怎么判断写文件时 Buffer 已经写满？简述 Linux 的 IO模型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述 socket 中 select 与 epoll 的使用场景以及区别，epoll 中水平触发以及边缘触发有什么不同？"}]}]}]},{"type":"element","tag":"h2","props":{"id":"线程-进程"},"children":[{"type":"text","value":"线程 进程"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程和线程之间有什么区别？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程间有哪些通信方式？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"线程间有哪些通信方式？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述同步与异步的区别，阻塞与非阻塞的区别"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"线程有多少种状态，状态之间如何转换"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程有多少种状态？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进程空间从高位到低位都有些什么？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux 进程调度中有哪些常见算法以及策略？"}]}]}]},{"type":"element","tag":"h2","props":{"id":"锁"},"children":[{"type":"text","value":"锁"}]},{"type":"element","tag":"list","props":{"type":"info"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述自旋锁与互斥锁的使用场景"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"什么情况下会发生死锁，如何解决死锁？"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"简述乐观锁以及悲观锁的区别以及使用场景"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"线程-进程","depth":2,"text":"线程 进程"},{"id":"锁","depth":2,"text":"锁"}]}},"_type":"markdown","_id":"content:3.code:os:qa.md","_source":"content","_file":"3.code/os/qa.md","_extension":"md"},{"_path":"/code/others","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"一些有的没的","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"一些有的没的"},"children":[{"type":"text","value":"一些有的没的"}]},{"type":"element","tag":"h2","props":{"id":"关于网狐棋牌框架"},"children":[{"type":"text","value":"关于网狐棋牌框架"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CTCPSocketService"}]},{"type":"text","value":"用来处理各个服务器之间的通信的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TCPNetworkEngine"}]},{"type":"text","value":"用来和客户端用户之间的通信"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"同时"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TCPNetworkEngine"}]},{"type":"text","value":"还承担"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CTCPSocketService"}]},{"type":"text","value":"处理过的消息的转发"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CTCPSocketService"}]},{"type":"text","value":"应用了windows下两种常见的socket通信模式"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WSAAsyncSelect"}]},{"type":"text","value":"异步I/O模型处理各个服务器之间的通信"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"完成端口模型，为windows下特有的通信模型，支持高并发的模型"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"同时使用github和gitlab"},"children":[{"type":"text","value":"同时使用GitHub和GitLab"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"想要在同一项目里使用不同的远端仓库，使用不同的用户名邮箱来推送。找到了一个方案，本地能够改好，但是似乎不能生效。"},{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/popfisher/p/5731232.html","rel":["nofollow"]},"children":[{"type":"text","value":"☞"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"关于网狐棋牌框架","depth":2,"text":"关于网狐棋牌框架"},{"id":"同时使用github和gitlab","depth":2,"text":"同时使用GitHub和GitLab"}]}},"_type":"markdown","_id":"content:3.code:others.md","_source":"content","_file":"3.code/others.md","_extension":"md"},{"_path":"/code/problems","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"疑难排查","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"疑难排查"},"children":[{"type":"text","value":"疑难排查"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: div标签设置背景时发现实际显示效果图片高度为0"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: 增加 padding-bottom 即可显示"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: div background-image url路径错误 或者 该路径下无此文件"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: 增加多个url"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: img src路径错误 或者 该路径下无此文件"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: onerror=\"this.src=''\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: 反思"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: 知识的匮乏让你想思考都没东西去思考"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: css层级问题 div span 与 div > span"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: div span 设置是的div下的所有span div > span 设置的是紧挨着的二级span"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: css文字竖向排列\nA: 标签writing-mode vertical-lr; 从左向右 从右向左是 vertical-rl;IE浏览器的从左向右 从右向左是tb-rl"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: querySelector .开头和#开头"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: .开头是class #开头是id"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: Linux删除某个字母开头的所有文件"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: 比如删除temp目录下以a开头的所有文件："},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"首先要进到temp目录下"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"在删除前先使用ls a"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"查看要删除哪些文件，防止误删除"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"确认无误后，使用 rm -rf a"}]},{"type":"text","value":" 命令，删除a开头的所有文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: slice不会改变原始数组"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: jQuery $ .# 区别"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: html自带标签 直接写标签 类用. id用#"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: clion如何编译so库"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: clion如何链接使用dll库"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q: run libuv, got \"Process finished with exit code -1073741515 (0xC0000135)\""},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA: if you are using visual studio toolchains in CLion, You need to paste in folder cmake-build-debug or\ncmake-build-release the files .dll, but no only SDL2_image.dll, all files from folder lib/x86.\nrefer "},{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/a/65268629/17744936","rel":["nofollow"]},"children":[{"type":"text","value":"https://stackoverflow.com/a/65268629/17744936"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Q:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nA:"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.code:problems.md","_source":"content","_file":"3.code/problems.md","_extension":"md"},{"_path":"/code/python","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Python","description":"","icon":"logos:python","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"遇到的问题"},"children":[{"type":"text","value":"遇到的问题"}]},{"type":"element","tag":"h3","props":{"id":"valueerror-check_hostname-requires-server_hostname"},"children":[{"type":"text","value":"ValueError: check_hostname requires server_hostname"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"pip安装lib时报错"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ValueError: check_hostname requires server_hostname"}]},{"type":"text","value":"，是由网络代理导致，关掉VPN即可解决"}]},{"type":"element","tag":"h2","props":{"id":"python-提取字符串中的指定字符-正则表达式"},"children":[{"type":"text","value":"python 提取字符串中的指定字符 正则表达式"}]},{"type":"element","tag":"code","props":{"code":"def match_strings(text, begin, end):\n    pattern = re.compile(f'{begin}(.*?){end}')\n    matches = pattern.findall(text)\n    return matches\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545e12"},"children":[{"type":"text","value":"match_strings"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(text, begin, end):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    pattern "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" re.compile("}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"begin"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"(.*?)"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    matches "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" pattern.findall(text)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" matches"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 字符串里有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"text","value":" 记得替换掉 否则不生效"}]},{"type":"element","tag":"h2","props":{"id":"一维转二维"},"children":[{"type":"text","value":"一维转二维"}]},{"type":"element","tag":"code","props":{"code":"import numpy\nnew_list = [i for i in range(9)]\nnewnew = numpy.array(new_list).reshape(3, 3)\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" numpy"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"new_list "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" [i "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"range"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":")]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"newnew "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" numpy.array(new_list).reshape("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"二维转一维"},"children":[{"type":"text","value":"二维转一维"}]},{"type":"element","tag":"code","props":{"code":"foo = [[1,3,4], [1,3]]\nnew_foo = sum(foo, [])\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"foo "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" [["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"], ["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"]]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"new_foo "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(foo, [])"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"使用filter去除list的空值"},"children":[{"type":"text","value":"使用filter()去除list的空值"}]},{"type":"element","tag":"code","props":{"code":"d = ['', 'ad', 'fi', '', 'ar', 'ff']\nd = list(filter(None, d))\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"d "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'ad'"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'fi'"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'ar'"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'ff'"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"d "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"None"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":", d))"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"去重"},"children":[{"type":"text","value":"去重"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于一维list, 可以直接使用set转换"}]},{"type":"element","tag":"code","props":{"code":"a = [1,2,3,1,2,3]\na = list(set(a))  # [1,2,3]\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"a "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"a "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(a))  "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# [1,2,3]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于多维list, 可以使用递归的方法，先对每一维进行去重，然后递归进行下一维的去重"}]},{"type":"element","tag":"code","props":{"code":"a = [[1,2,3],[2,3,4],[1,2,3]]\n\ndef remove_duplicate(arr):\n    # 判断是否为一维list\n    if isinstance(arr[0], list):\n        # 如果是多维list, 递归进行去重\n        for i in arr:\n            remove_duplicate(i)\n    else:\n        # 如果是一维list, 直接使用set进行去重\n        arr[:] = list(set(arr))\n        \nremove_duplicate(a)\n\nprint(a)  # [[1,2,3],[2,3,4]]\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"a "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" [["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"],["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"],["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"]]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545e12"},"children":[{"type":"text","value":"remove_duplicate"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(arr):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# 判断是否为一维list"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"isinstance"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(arr["}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# 如果是多维list, 递归进行去重"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" arr:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"            remove_duplicate(i)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# 如果是一维list, 直接使用set进行去重"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"        arr[:] "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(arr))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"        "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"remove_duplicate(a)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(a)  "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# [[1,2,3],[2,3,4]]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的代码可以处理多维list的去重问题，但是这种方法需要修改原来的list，如果不希望修改原来的list，可以使用深拷贝来进行去重"}]},{"type":"element","tag":"code","props":{"code":"b = copy.deepcopy(a)\nremove_duplicate(b)\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"b "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" copy.deepcopy(a)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"remove_duplicate(b)"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"os-name"},"children":[{"type":"text","value":"os name"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"os.name"}]},{"type":"text","value":": The name of the operating system dependent module imported. The following names have currently been registered: 'posix', 'nt', 'java'."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"posix"}]},{"type":"text","value":": mac"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nt"}]},{"type":"text","value":": windows"}]}]},{"type":"element","tag":"h2","props":{"id":"argparse"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"argparse"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"good"}]},{"type":"element","tag":"h2","props":{"id":"url解码"},"children":[{"type":"text","value":"URL解码"}]},{"type":"element","tag":"code","props":{"code":"from urllib.parse import unquote\n\n# 使用urllib.parse模块的unquote()函数来进行URL解码：\nencoded_url = 'https%3A%2F%2Fwww.example.com%2F%3Fq%3Dhello%20world'\ndecoded_url = unquote(encoded_url)\nprint(decoded_url)  # 输出：https://www.example.com/?q=hello world\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" urllib.parse "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" unquote"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# 使用urllib.parse模块的unquote()函数来进行URL解码："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"encoded_url "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"'https%3A"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"%2F%2F"}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"www.example.com"}]},{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"%2F%3F"}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"q%3Dhello%20world'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"decoded_url "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" unquote(encoded_url)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(decoded_url)  "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# 输出：https://www.example.com/?q=hello world"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"html-解码"},"children":[{"type":"text","value":"html 解码"}]},{"type":"element","tag":"code","props":{"code":"import html\n\nhtml_string = \"&ndash;\"\nddd = html.unescape(html_string)\nprint(ddd)\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" html"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"html_string "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"\"&ndash;\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"ddd "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" html.unescape(html_string)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(ddd)"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"from bs4 import BeautifulSoup\n\nhtml_string = \"&lt;p&gt;This is a paragraph&lt;/p&gt;\"\n\nsoup = BeautifulSoup(html_string, \"html.parser\")\ndecoded_html = soup.unescape()\n\nprint(decoded_html) # \"<p>This is a paragraph</p>\"\n","language":"py","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" bs4 "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" BeautifulSoup"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"html_string "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"\"&lt;p&gt;This is a paragraph&lt;/p&gt;\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"soup "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" BeautifulSoup(html_string, "}]},{"type":"element","tag":"span","props":{"class":"ct-4f298f"},"children":[{"type":"text","value":"\"html.parser\""}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"decoded_html "}]},{"type":"element","tag":"span","props":{"class":"ct-a41d4d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":" soup.unescape()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b81c4"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-da46bc"},"children":[{"type":"text","value":"(decoded_html) "}]},{"type":"element","tag":"span","props":{"class":"ct-c5e01b"},"children":[{"type":"text","value":"# \"<p>This is a paragraph</p>\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c5e01b{color:#6E7781}\n.ct-5b81c4{color:#0550AE}\n.ct-4f298f{color:#0A3069}\n.ct-545e12{color:#8250DF}\n.ct-da46bc{color:#24292F}\n.ct-a41d4d{color:#CF222E}\n.dark .ct-a41d4d{color:#FF7B72}\n.dark .ct-da46bc{color:#C9D1D9}\n.dark .ct-545e12{color:#D2A8FF}\n.dark .ct-4f298f{color:#A5D6FF}\n.dark .ct-5b81c4{color:#79C0FF}\n.dark .ct-c5e01b{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"遇到的问题","depth":2,"text":"遇到的问题","children":[{"id":"valueerror-check_hostname-requires-server_hostname","depth":3,"text":"ValueError: check_hostname requires server_hostname"}]},{"id":"python-提取字符串中的指定字符-正则表达式","depth":2,"text":"python 提取字符串中的指定字符 正则表达式"},{"id":"一维转二维","depth":2,"text":"一维转二维"},{"id":"二维转一维","depth":2,"text":"二维转一维"},{"id":"使用filter去除list的空值","depth":2,"text":"使用filter()去除list的空值"},{"id":"去重","depth":2,"text":"去重"},{"id":"os-name","depth":2,"text":"os name"},{"id":"argparse","depth":2,"text":"argparse"},{"id":"url解码","depth":2,"text":"URL解码"},{"id":"html-解码","depth":2,"text":"html 解码"}]}},"_type":"markdown","_id":"content:3.code:python.md","_source":"content","_file":"3.code/python.md","_extension":"md"},{"_path":"/code/regex","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"正则表达式","description":"匹配中文 [\\u4e00-\\u9fa5]\n匹配英文 [a-zA-Z]\n匹配数字 [0-9]","icon":"file-icons:regex","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"匹配中文 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[\\u4e00-\\u9fa5]"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n匹配英文 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[a-zA-Z"}]},{"type":"text","value":"]"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n匹配数字 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[0-9]"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"匹配 字母+空格+汉字，形如”a 好“，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[a-zA-Z] [\\u4e00-\\u9fa5]"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n那么如果只匹配符合这个格式的空格呢？"}]},{"type":"element","tag":"h2","props":{"id":"正则表达式匹配空行空白行"},"children":[{"type":"text","value":"正则表达式匹配空行、空白行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"两种方法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"^(\\t)*$\\n"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/^\\s*$/"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"正则表达式匹配空行空白行","depth":2,"text":"正则表达式匹配空行、空白行"}]}},"_type":"markdown","_id":"content:3.code:regex.md","_source":"content","_file":"3.code/regex.md","_extension":"md"},{"_path":"/code/rust","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Rust","description":"","icon":"vscode-icons:file-type-rust","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rust"},"children":[{"type":"text","value":"Rust"}]},{"type":"element","tag":"h2","props":{"id":"rust-link"},"children":[{"type":"text","value":"rust link"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"速查手册: "},{"type":"element","tag":"a","props":{"href":"https://cheats.rs/","rel":["nofollow"]},"children":[{"type":"text","value":"https://cheats.rs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PingCAP talent plan: "},{"type":"element","tag":"a","props":{"href":"https://learn.pingcap.com/learner/talent-plan/rust-programming","rel":["nofollow"]},"children":[{"type":"text","value":"https://learn.pingcap.com/learner/talent-plan/rust-programming"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"book: "},{"type":"element","tag":"a","props":{"href":"https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"rust-link","depth":2,"text":"rust link"}]}},"_type":"markdown","_id":"content:3.code:rust.md","_source":"content","_file":"3.code/rust.md","_extension":"md"},{"_path":"/code/shell","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Shell","description":"refer","icon":"vscode-icons:file-type-powershell-psd2","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"shell"},"children":[{"type":"text","value":"Shell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.runoob.com/linux/linux-shell.html","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一个 shell 脚本"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\necho \"Hello World !\"\n","filename":"test.sh","language":"shell","meta":"[test.sh]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"Hello World !\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#!"}]},{"type":"text","value":" 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。扩展名并不影响脚本执行"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\necho 命令用于向窗口输出文本。"}]},{"type":"element","tag":"code","props":{"code":"chmod +x ./test.sh  #使脚本具有执行权限\n./test.sh  #执行脚本\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"./test.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#使脚本具有执行权限"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":".sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#执行脚本"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"run"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"作为可执行程序\n将上面的代码保存为 test.sh，并 cd 到相应目录："}]}]},{"type":"element","tag":"code","props":{"code":"chmod +x ./test.sh  #使脚本具有执行权限\n./test.sh  #执行脚本\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"+x"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"./test.sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#使脚本具有执行权限"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":".sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#执行脚本"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意，一定要写成 ./test.sh，而不是 test.sh，运行其它二进制的程序也一样，直接写 test.sh，linux 系统会去 PATH 里寻找有没有叫 test.sh 的，而只有 /bin, /sbin, /usr/bin，/usr/sbin 等在 PATH 里，你的当前目录通常不在 PATH 里，所以写成 test.sh 是会找不到命令的，要用 ./test.sh 告诉系统说，就在当前目录找。\n2. 作为解释器参数\n这种运行方式是，直接运行解释器，其参数就是 shell 脚本的文件名，如："}]},{"type":"element","tag":"code","props":{"code":"/bin/sh test.sh\n/bin/php test.php\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"/bin/sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"test.sh"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"/bin/php"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"test.php"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。"}]},{"type":"element","tag":"h2","props":{"id":"grammar"},"children":[{"type":"text","value":"Grammar"}]},{"type":"element","tag":"h3","props":{"id":"注释"},"children":[{"type":"text","value":"注释"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#"}]},{"type":"text","value":" 开头的行就是注释，会被解释器忽略。通过每一行加一个 # 号设置多行注释，如"}]},{"type":"element","tag":"code","props":{"code":"# comment\n## ff\n# foo\n# fo\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# comment"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"## ff"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# foo"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# fo"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"EOF 注释"}]},{"type":"element","tag":"code","props":{"code":":<<EOF\n注释内容...\n注释内容...\n注释内容...\nEOF\n\n# EOF 也可以使用其他符号\n\n:<<'\n注释内容...\n注释内容...\n注释内容...\n'\n\n:<<!\n注释内容...\n注释内容...\n注释内容...\n!\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"<<EOF"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"EOF"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# EOF 也可以使用其他符号"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"<<'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"注释内容."}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":".."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":":<<!"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"注释内容..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"注释内容..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"注释内容..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"!"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其他 (需要在自己编译环境下，亲测每种注释方法的有效性)"}]},{"type":"element","tag":"code","props":{"code":":'\n被注释的内容\n'\n\nif false; then\n被注释的内容\nfi\n\n((0)) && {\n被注释的内容\n}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"被注释的内容"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"if false; then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"被注释的内容"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"((0)) && {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"被注释的内容"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"变量"},"children":[{"type":"text","value":"变量"}]},{"type":"element","tag":"h4","props":{"id":"类型"},"children":[{"type":"text","value":"类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"局部变量"}]},{"type":"text","value":" 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"环境变量"}]},{"type":"text","value":" 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。"}]},{"type":"element","tag":"h4","props":{"id":"定义"},"children":[{"type":"text","value":"定义"}]},{"type":"element","tag":"code","props":{"code":"foo=\"foo.name\"\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"foo.name\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量名的命名须遵循如下规则："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"中间不能有空格，可以使用下划线 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_"}]},{"type":"text","value":" 。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不能使用标点符号。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不能使用bash里的关键字（可用help命令查看保留关键字）。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了显式地直接赋值，还可以用语句给变量赋值，如："}]},{"type":"element","tag":"code","props":{"code":"for file in `ls /etc`\n#或\nfor file in $(ls /etc)\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" file "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" /etc`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#或"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" file "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" /etc)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"已定义的变量，可以被重新定义"}]},{"type":"element","tag":"code","props":{"code":"foo=\"augus\"\necho ${foo}\nfoo=\"meow\"\necho ${foo}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"augus\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${foo}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"meow\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${foo}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"使用"},"children":[{"type":"text","value":"使用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用一个定义过的变量，只要在变量名前面加美元符号即可"}]},{"type":"element","tag":"code","props":{"code":"foo=\"augus\"\necho $foo\necho ${foo}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"augus\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" $foo"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${foo}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量名外面的花括号是可选的，加花括号是为了帮助解释器识别变量的边界"}]},{"type":"element","tag":"code","props":{"code":"for skill in C Vue Rust JS; do\n    echo \"I am good at ${skill} lang\"\ndone\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" skill "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" C Vue Rust JS; "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"do"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"I am good at ${skill} lang\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"done"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"只读"},"children":[{"type":"text","value":"只读"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。"}]},{"type":"element","tag":"code","props":{"code":"url=\"https://draugus.github.io/\"\nreadonly url\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"https://draugus.github.io/\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"readonly"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" url"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"删除变量"},"children":[{"type":"text","value":"删除变量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 unset 命令可以删除变量。语法："}]},{"type":"element","tag":"code","props":{"code":"unset variable_name\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"unset"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"variable_name"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量被删除后不能再次使用。unset 命令不能删除只读变量。"}]},{"type":"element","tag":"h4","props":{"id":"string"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字符串可以用单引号，也可以用双引号，也可以不用引号。"}]},{"type":"element","tag":"h5","props":{"id":"单引号"},"children":[{"type":"text","value":"单引号"}]},{"type":"element","tag":"code","props":{"code":"str='this is a string'\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"'this is a string'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"单引号字符串的限制："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为"},{"type":"element","tag":"a","props":{"href":"#%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"},"children":[{"type":"text","value":"字符串拼接"}]},{"type":"text","value":"使用。"}]}]},{"type":"element","tag":"h5","props":{"id":"双引号"},"children":[{"type":"text","value":"双引号"}]},{"type":"element","tag":"code","props":{"code":"your_name=\"au\"\nstr=\"Hello, I know you are \\\"$your_name\\\"! \\n\"\necho -e $str\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"your_name"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"au\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"Hello, I know you are "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$your_name"}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"! \\n\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" $str"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"双引号的优点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双引号里可以有变量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双引号里可以出现转义字符"}]}]},{"type":"element","tag":"h5","props":{"id":"拼接字符串"},"children":[{"type":"text","value":"拼接字符串"}]},{"type":"element","tag":"code","props":{"code":"your_name=\"meow\"\n# 使用双引号拼接\ngreeting=\"hello, \"$your_name\" !\"\ngreeting_1=\"hello, ${your_name} !\"\necho $greeting  $greeting_1\n\n# 使用单引号拼接 \ngreeting_2='hello, '$your_name' !'\ngreeting_3='hello, ${your_name} !'\necho $greeting_2  $greeting_3\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"your_name"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"meow\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 使用双引号拼接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"hello, \""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$your_name"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\" !\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"greeting_1"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"hello, ${your_name} !\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" $greeting  $greeting_1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 使用单引号拼接 "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"greeting_2"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"'hello, '"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$your_name"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"' !'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"greeting_3"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"'hello, ${your_name} !'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" $greeting_2  $greeting_3"}]}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"获取字符串长度"},"children":[{"type":"text","value":"获取字符串长度"}]},{"type":"element","tag":"code","props":{"code":"string=\"abcd\"\necho ${#string}     # 输出 4\necho ${#string[0]}  # 输出 4\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"abcd\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"string}     "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 输出 4"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"string[0]}  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 输出 4"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量为数组时，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"${#string}"}]},{"type":"text","value":" 等价于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"${#string[0]}"}]}]},{"type":"element","tag":"h5","props":{"id":"提取子字符串"},"children":[{"type":"text","value":"提取子字符串"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下实例从字符串第 2 个字符开始截取 4 个字符："}]},{"type":"element","tag":"code","props":{"code":"string=\"augus is a person\"\necho ${string:1:4} # 输出 ugus\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"augus is a person\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${string"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"4} "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 输出 ugus"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：第一个字符的索引值为 0。"}]},{"type":"element","tag":"h5","props":{"id":"查找子字符串"},"children":[{"type":"text","value":"查找子字符串"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查找字符 g 或 u 的位置(哪个字母先出现就计算哪个)："}]},{"type":"element","tag":"code","props":{"code":"string=\"augus is a great person\"\necho `expr index \"$string\" gu`  # 输出 1\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"augus is a great person\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"expr"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" index \""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$string"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\" gu`"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 输出 1"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"数组"},"children":[{"type":"text","value":"数组"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"支持一维数组（不支持多维数组），并且没有限定数组的大小。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。"}]},{"type":"element","tag":"h5","props":{"id":"定义-1"},"children":[{"type":"text","value":"定义"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"用括号来表示数组，数组元素用\"空格\"符号分割开。定义数组的一般形式为："}]},{"type":"element","tag":"code","props":{"code":"# 数组名=(值1 值2 ... 值n)\narray_name=(value0 value1 value2 value3)\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 数组名=(值1 值2 ... 值n)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"array_name"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"value0"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" value1 value2 value3)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以不使用连续的下标，而且下标的范围没有限制。"}]},{"type":"element","tag":"h5","props":{"id":"读取"},"children":[{"type":"text","value":"读取"}]},{"type":"element","tag":"code","props":{"code":"# ${数组名[下标]}\nvaluen=${array_name[n]}\n\n# 使用 @ 符号可以获取数组中的所有元素\necho ${array_name[@]}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# ${数组名[下标]}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"valuen"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"${array_name[n]}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 使用 @ 符号可以获取数组中的所有元素"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ${array_name[@]}"}]}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"获取数组的长度"},"children":[{"type":"text","value":"获取数组的长度"}]},{"type":"element","tag":"code","props":{"code":"# 取得数组元素的个数\nlength=${#array_name[@]}\n# 或者\nlength=${#array_name[*]}\n# 取得数组单个元素的长度\nlengthn=${#array_name[n]}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 取得数组元素的个数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"array_name[@]}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 或者"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"array_name[*]}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 取得数组单个元素的长度"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"lengthn"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"array_name[n]}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"echo"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"code","props":{"code":"echo -e \"OK! \\n\" # -e 开启转义\necho \"It is a test\"\necho -e \"OK! \\c\" # -e 开启转义 \\c 不换行\necho \"It is a test\"\necho \"It is a test\" > myfile # 重定向\necho `date` # 显示命令执行结果\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"OK! \\n\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# -e 开启转义"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"It is a test\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"OK! \\c\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# -e 开启转义 \\c 不换行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"It is a test\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"It is a test\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"myfile"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 重定向"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"date"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 显示命令执行结果"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"运算符"},"children":[{"type":"text","value":"运算符"}]},{"type":"element","tag":"h4","props":{"id":"算术运算符"},"children":[{"type":"text","value":"算术运算符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假定变量 a 为 10，变量 b 为 20"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"运算符"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"举例"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"+"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"加法"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expr $a + $b"}]},{"type":"text","value":" 结果为 30。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"减法"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expr $a - $b"}]},{"type":"text","value":" 结果为 -10。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"乘法"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expr $a \\* $b"}]},{"type":"text","value":" 结果为  200。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"除法"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expr $b / $a"}]},{"type":"text","value":" 结果为 2。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"%"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"取余"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expr $b % $a"}]},{"type":"text","value":" 结果为 0。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"赋值"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"a=$b"}]},{"type":"text","value":" 把变量 b 的值赋给 a。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"=="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"相等。用于比较两个数字，相同则返回 true。"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a == $b ]"}]},{"type":"text","value":" 返回 false。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"!="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"不相等。用于比较两个数字，不相同则返回 true。"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a != $b ]"}]},{"type":"text","value":" 返回 true。"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：条件表达式要放在方括号之间，并且要有空格，例如: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[$a==$b]"}]},{"type":"text","value":" 是错误的，必须写成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a == $b ]"}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"推荐用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$()"}]},{"type":"text","value":" 代替 ``:"}]},{"type":"element","tag":"code","props":{"code":"val=`expr 10 + 20`\nval=$(expr 10 + 20)\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"expr"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"expr"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"关系运算符"},"children":[{"type":"text","value":"关系运算符"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只支持数字"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假定变量 a 为 10，变量 b 为 20"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-eq"}]},{"type":"text","value":" = EQUAL "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -eq $b ]"}]},{"type":"text","value":" 返回 false"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-ne"}]},{"type":"text","value":" != NOT EQUAL "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -ne $b ]"}]},{"type":"text","value":" 返回 true"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-gt"}]},{"type":"text","value":" > GREATER THAN "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -gt $b ]"}]},{"type":"text","value":" 返回 false"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-lt"}]},{"type":"text","value":" < LESS THAN "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -lt $b ]"}]},{"type":"text","value":" 返回 true"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ge"}]},{"type":"text","value":" >= GREATER THAN OR EQUAL "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -ge $b ]"}]},{"type":"text","value":" 返回 false"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"le"}]},{"type":"text","value":" <= LESS THAN OR EQUAL "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a -le $b ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"h4","props":{"id":"布尔运算符"},"children":[{"type":"text","value":"布尔运算符"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"!"}]},{"type":"text","value":" 非"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-o"}]},{"type":"text","value":" 或"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":" 与"}]}]},{"type":"element","tag":"h4","props":{"id":"逻辑运算符"},"children":[{"type":"text","value":"逻辑运算符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"||"}]}]},{"type":"element","tag":"code","props":{"code":"command1 && command2     #命令1执行成功后，命令2才执行\ncommand1 || command2     #命令1执行失败后，命令2才执行\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"command1"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"command2"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#命令1执行成功后，命令2才执行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"command1"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"command2"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#命令1执行失败后，命令2才执行"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[[ ... ]]"}]},{"type":"text","value":" 条件判断结构，而不是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ ... ]"}]},{"type":"text","value":"，能够防止脚本中的许多逻辑错误。比如，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"||"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":">"}]},{"type":"text","value":" 操作符能够正常存在于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[[ ]]"}]},{"type":"text","value":" 条件判断结构中，但是如果出现在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ ]"}]},{"type":"text","value":" 结构中的话，会报错。"}]}]},{"type":"element","tag":"h4","props":{"id":"字符串运算符"},"children":[{"type":"text","value":"字符串运算符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假定变量 a 为 \"abc\"，变量 b 为 \"efg\""}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"运算符"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"举例"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测两个字符串是否相等，相等返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a = $b ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"!="}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测两个字符串是否不相等，不相等返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a != $b ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-z"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测字符串长度是否为0，为0返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -z $a ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-n"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测字符串长度是否不为0，不为0返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -n \"$a\" ]"}]},{"type":"text","value":" 返回 true ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$a"}]},{"type":"text","value":"注意加双引号)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测字符串是否不为空，不为空返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ $a ]"}]},{"type":"text","value":" 返回 true"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"文件测试运算符"},"children":[{"type":"text","value":"文件测试运算符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"文件测试运算符用于检测 Unix 文件的各种属性"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"操作符"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"举例"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-b file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否是块设备文件，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -b $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-c file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否是字符设备文件，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -c $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-d file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否是目录，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -d $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-e file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件（包括目录）是否存在，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -e $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-f file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -f $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-g file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否设置了 SGID 位，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -g $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-k file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -k $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-p file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否是有名管道，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -p $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-u file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否设置了 SUID 位，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -u $file ]"}]},{"type":"text","value":" 返回 false"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-r file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否可读，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -r $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-w file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否可写，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -w $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-x file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否可执行，如果是，则返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -x $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-s file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否为空（文件大小是否大于0），不为空返回 true"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[ -s $file ]"}]},{"type":"text","value":" 返回 true"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-S file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"判断某文件是否 socket"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-L file"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"检测文件是否存在并且是一个符号链接"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"参数获取"},"children":[{"type":"text","value":"参数获取"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./test.sh a b c"}]},{"type":"text","value":" 这样一个命令，则可以使用下面的参数来获取一些值："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$0"}]},{"type":"text","value":" 对应 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./test.sh"}]},{"type":"text","value":" 这个值。如果执行的是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./work/test.sh"}]},{"type":"text","value":"， 则对应 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./work/test.sh"}]},{"type":"text","value":" 这个值，而不是只返回文件名本身的部分。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$1"}]},{"type":"text","value":" 会获取到 a，即 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$1"}]},{"type":"text","value":" 对应传给脚本的第一个参数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$2"}]},{"type":"text","value":" 会获取到 b，即 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$2"}]},{"type":"text","value":" 对应传给脚本的第二个参数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$3"}]},{"type":"text","value":" 会获取到 c，即 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$3"}]},{"type":"text","value":" 对应传给脚本的第三个参数。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$4"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$5"}]},{"type":"text","value":" 等参数的含义依此类推。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$#"}]},{"type":"text","value":" 会获取到 3，对应传入脚本的参数个数，统计的参数不包括 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$0"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$@"}]},{"type":"text","value":" 会获取到 \"a\" \"b\" \"c\"，也就是所有参数的列表，不包括 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$0"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$*"}]},{"type":"text","value":" 也会获取到 \"a\" \"b\" \"c\"， 其值和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$@"}]},{"type":"text","value":" 相同。但 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$*"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$@"}]},{"type":"text","value":" 有所不同。 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$*"}]},{"type":"text","value":" 把所有参数合并成一个字符串，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$@"}]},{"type":"text","value":" 会得到一个字符串参数数组。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$?"}]},{"type":"text","value":" 可以获取到执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./test.sh a b c"}]},{"type":"text","value":" 命令后的返回值。 在执行一个前台命令后，可以立即用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$?"}]},{"type":"text","value":" 获取到该命令的返回值。 该命令可以是系统自身的命令，可以是 shell 脚本，也可以是自定义的 bash 函数。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当执行系统自身的命令时，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$?"}]},{"type":"text","value":" 对应这个命令的返回值。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当执行 shell 脚本时，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$?"}]},{"type":"text","value":" 对应该脚本调用 exit 命令返回的值。如果没有主动调用 exit 命令，默认返回为 0。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当执行自定义的 bash 函数时，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$?"}]},{"type":"text","value":" 对应该函数调用 return 命令返回的值。如果没有主动调用 return 命令，默认返回为 0。"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"输入输出重定向"},"children":[{"type":"text","value":"输入/输出重定向"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"命令"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command > file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将输出重定向到 file"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command < file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将输入重定向到 file"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command >> file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将输出以追加的方式重定向到 file"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n > file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将文件描述符为 n 的文件重定向到 file"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n >> file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将文件描述符为 n 的文件以追加的方式重定向到 file"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n >& m"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将输出文件 m 和 n 合并"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n <& m"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将输入文件 m 和 n 合并"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<< tag"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"将开始标记 tag 和结束标记 tag 之间的内容作为输入"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。\n默认情况下，command > file 将 stdout 重定向到 file，command < file 将stdin 重定向到 file。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果希望 stderr 重定向到 file，可以这样写："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command 2>file"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果希望 stderr 追加到 file 文件末尾，可以这样写："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command 2>>file"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" 表示标准错误文件(stderr)。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写："}]}]},{"type":"element","tag":"code","props":{"code":"command > file 2>&1\n# 或者\ncommand >> file 2>&1\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"2>&1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 或者"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"2>&1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果希望对 stdin 和 stdout 都重定向，可以这样写："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command < file1 >file2"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncommand 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"/dev/null 文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command > /dev/null"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到\"禁止输出\"的效果。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果希望屏蔽 stdout 和 stderr，可以这样写： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command > /dev/null 2>&1"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：0 是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。这里的 2 和 > 之间不可以有空格，2> 是一体的时候才表示错误输出。"}]}]},{"type":"element","tag":"h3","props":{"id":"文件包含"},"children":[{"type":"text","value":"文件包含"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"和其他语言一样，Shell 也可以包含外部脚本"}]},{"type":"element","tag":"code","props":{"code":". filename   # 注意点号(.)和文件名中间有一空格\n# 或\nsource filename\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"filename"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 注意点号(.)和文件名中间有一空格"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"# 或"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"filename"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"被包含的文件 filename 不需要可执行权限。"}]}]},{"type":"element","tag":"h3","props":{"id":"exit"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When used in a shell script, the commands "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit 0"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit 1"}]},{"type":"text","value":" indicate the success or failure of a command or script. Generally, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit 0"}]},{"type":"text","value":" is used to indicate successful completion, while "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit 1"}]},{"type":"text","value":" is used to indicate an error or failure. It is important to note that the exit code is -1 if the script is terminated by a signal such as SIGINT or SIGKILL."}]},{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h3","props":{"id":"mkdir-err"},"children":[{"type":"text","value":"mkdir err"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash \nmkdir -p {bin,lib,etc}\n","filename":"foo.sh","language":"shell","meta":"[foo.sh]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-628315"},"children":[{"type":"text","value":"#!/bin/bash "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"{bin,lib,etc}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"execute this sh, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sh foo.sh"}]},{"type":"text","value":", 会创建一个名字为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{bin,lib,etc}"}]},{"type":"text","value":"的文件夹。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nsol: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod a+x foo.sh"}]},{"type":"text","value":" then execute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./foo.sh"}]}]},{"type":"element","tag":"h3","props":{"id":"zsh-权限不够解决方法"},"children":[{"type":"text","value":"zsh: 权限不够解决方法"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod u+x *.sh"}]}]}]},{"type":"element","tag":"h3","props":{"id":"ubuntulinux下-sourceshbash-执行脚本的区别是什么"},"children":[{"type":"text","value":"ubuntu（linux）下 source、sh、bash、./ 执行脚本的区别是什么？"}]},{"type":"element","tag":"h4","props":{"id":"source命令用法"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"source"}]},{"type":"text","value":"命令用法"}]},{"type":"element","tag":"code","props":{"code":"source FileName\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"FileName"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用:在当前 bash 环境下读取并执行 FileName 中的命令。该 filename 文件可以无 \"执行权限\"。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n注：该命令通常用命令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"."}]},{"type":"text","value":" 来替代。"}]},{"type":"element","tag":"h4","props":{"id":"shbash的命令用法"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sh"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bash"}]},{"type":"text","value":"的命令用法"}]},{"type":"element","tag":"code","props":{"code":"sh FileName\n或\nbash FileName\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"sh"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"FileName"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"或"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"FileName"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用:打开一个子 shell 来读取并执行 FileName 中命令。该 filename 文件可以无 \"执行权限\"。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n注：运行一个shell脚本时会启动另一个命令解释器。"}]},{"type":"element","tag":"h4","props":{"id":"的命令用法"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./"}]},{"type":"text","value":"的命令用法"}]},{"type":"element","tag":"code","props":{"code":"./FileName\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"/FileName"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用: 打开一个子 shell 来读取并执行 FileName 中命令，该 filename 文件需要 \"执行权限\"。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n注：运行一个 shell 脚本时会启动另一个命令解释器。"}]},{"type":"element","tag":"h2","props":{"id":"skill"},"children":[{"type":"text","value":"skill"}]},{"type":"element","tag":"h3","props":{"id":"遍历文件个数"},"children":[{"type":"text","value":"遍历文件个数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"遍历某个目录下所有文件的个数（包括子目录）"}]},{"type":"element","tag":"code","props":{"code":"ls -lR | grep \"^-\" | wc -l\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-lR"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"^-\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"wc"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-l"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"遍历某个目录下所有目录的个数（包括子目录）"}]},{"type":"element","tag":"code","props":{"code":"ls -lR | grep \"^d\" | wc -l\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-lR"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"^d\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"wc"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"-l"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"判断字符串包含关系"},"children":[{"type":"text","value":"判断字符串包含关系"}]},{"type":"element","tag":"h4","props":{"id":"grep"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"code","props":{"code":"strA=\"long string\"\nstrB=\"string\"\nresult=$(echo $strA | grep \"${strB}\")\nif [[ \"$result\" != \"\" ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strA"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"long string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strB"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$strA"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e5100"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" \"${strB}\")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" [["}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$result"}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":" \"\""}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ]]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"else"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"不包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"fi"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":""},"children":[{"type":"text","value":"=~"}]},{"type":"element","tag":"code","props":{"code":"strA=\"long string\"\nstrB=\"string\"\nif [[ $strA =~ $strB ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strA"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"long string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strB"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" [[ $strA "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"=~"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" $strB ]]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"else"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"不包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"fi"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"通配符"},"children":[{"type":"text","value":"通配符"}]},{"type":"element","tag":"code","props":{"code":"strA=\"long string\"\nstrB=\"string\"\nif [[ $A == *$B* ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strA"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"long string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"strB"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"string\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" [[ $A "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"$B"}]},{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" ]]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"else"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d6c91c"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-db3076"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82563b"},"children":[{"type":"text","value":"\"不包含\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7c086"},"children":[{"type":"text","value":"fi"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e7c086{color:#CF222E}\n.ct-1e5100{color:#953800}\n.ct-82563b{color:#0A3069}\n.ct-db3076{color:#24292F}\n.ct-d6c91c{color:#0550AE}\n.ct-628315{color:#6E7781}\n.dark .ct-628315{color:#8B949E}\n.dark .ct-d6c91c{color:#79C0FF}\n.dark .ct-db3076{color:#C9D1D9}\n.dark .ct-82563b{color:#A5D6FF}\n.dark .ct-1e5100{color:#FFA657}\n.dark .ct-e7c086{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"run","depth":2,"text":"run"},{"id":"grammar","depth":2,"text":"Grammar","children":[{"id":"注释","depth":3,"text":"注释"},{"id":"变量","depth":3,"text":"变量"},{"id":"echo","depth":3,"text":"echo"},{"id":"运算符","depth":3,"text":"运算符"},{"id":"参数获取","depth":3,"text":"参数获取"},{"id":"输入输出重定向","depth":3,"text":"输入/输出重定向"},{"id":"文件包含","depth":3,"text":"文件包含"},{"id":"exit","depth":3,"text":"exit"}]},{"id":"qa","depth":2,"text":"QA","children":[{"id":"mkdir-err","depth":3,"text":"mkdir err"},{"id":"zsh-权限不够解决方法","depth":3,"text":"zsh: 权限不够解决方法"},{"id":"ubuntulinux下-sourceshbash-执行脚本的区别是什么","depth":3,"text":"ubuntu（linux）下 source、sh、bash、./ 执行脚本的区别是什么？"}]},{"id":"skill","depth":2,"text":"skill","children":[{"id":"遍历文件个数","depth":3,"text":"遍历文件个数"},{"id":"判断字符串包含关系","depth":3,"text":"判断字符串包含关系"},{"id":"","depth":3,"text":"=~"},{"id":"通配符","depth":3,"text":"通配符"}]}]}},"_type":"markdown","_id":"content:3.code:shell.md","_source":"content","_file":"3.code/shell.md","_extension":"md"},{"_path":"/code/stroll","_dir":"code","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"瞎玩","description":"","date":"2022-05-26T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"瞎玩"},"children":[{"type":"text","value":"瞎玩"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"记录平时的瞎搞"}]}]},{"type":"element","tag":"h2","props":{"id":"play-bot"},"children":[{"type":"text","value":"play bot"}]},{"type":"element","tag":"h3","props":{"id":"zhenxun-bot"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/HibiKier/zhenxun_bot","rel":["nofollow"]},"children":[{"type":"text","value":"zhenxun bot"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"intro: 基于 Nonebot2 和 go-cqhttp 开发，以 postgresql 作为数据库，非常可爱的绪山真寻bot"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/DrAugus/zhenxun_bot/tree/augus","rel":["nofollow"]},"children":[{"type":"text","value":"食用指南"}]},{"type":"text","value":"，直接一键部署。如果不想一键部署，也可以参考"},{"type":"element","tag":"a","props":{"href":"https://hibikier.github.io/zhenxun_bot/docs/installation_doc/","rel":["nofollow"]},"children":[{"type":"text","value":"安装文档"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"更多使用方法，请参考"},{"type":"element","tag":"a","props":{"href":"https://hibikier.github.io/zhenxun_bot/docs/help_doc/","rel":["nofollow"]},"children":[{"type":"text","value":"使用文档"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"踩坑了吗？好像踩了，又好像没踩。不了解机制。注意查看日志即可！"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"pg的坑肯定是踩了的！"}]},{"type":"element","tag":"h4","props":{"id":"pg-坑"},"children":[{"type":"text","value":"pg 坑"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"本想在win平台，安装pg，但安装最新的"},{"type":"element","tag":"a","props":{"href":"https://www.enterprisedb.com/downloads/postgres-postgresql-downloads","rel":["nofollow"]},"children":[{"type":"text","value":"v14"}]},{"type":"text","value":"出错。遂放弃，改用wsl，安装过程直接蓝屏笑嘻嘻。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"直接购买服务器！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在centos上安装pg。然后发现自己购买的centos8，而官网写着"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The PostgreSQL Yum Repository currently supports: "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CentOS (7 and 6 only)"}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"无奈重装了centos7。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"按照官网"},{"type":"element","tag":"a","props":{"href":"https://www.postgresql.org/download/linux/redhat/","rel":["nofollow"]},"children":[{"type":"text","value":"文档"}]},{"type":"element","tag":"code","props":{"code":"sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm\nsudo yum install -y postgresql14-server\nsudo /usr/pgsql-14/bin/postgresql-14-setup initdb\nsudo systemctl enable postgresql-14\nsudo systemctl start postgresql-14\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"https://download.postgresql.org/pub/repos/yum/reporpms/EL-"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-x86_64/pgdg-redhat-repo-latest.noarch.rpm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"postgresql14-server"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/pgsql-"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"14"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/bin/postgresql-"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"14"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-setup"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"initdb"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"enable"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"postgresql-"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"14"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"systemctl"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"postgresql-"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"14"}]}]}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"食用pg"},"children":[{"type":"text","value":"食用pg"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装完毕后，系统会创建一个数据库超级用户 postgres，密码为空。进入 postgres"}]},{"type":"element","tag":"code","props":{"code":"sudo -i -u postgres\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-u"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"postgres"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"psql"}]},{"type":"text","value":"，显示如下，即安装成功"}]},{"type":"element","tag":"code","props":{"code":"-bash-4.2$ psql\npsql (14.3)\nType \"help\" for help.\n\npostgres=# \n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"-bash-4.2$"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"psql"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"psql"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"14.3"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"\"help\""}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"help."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":"postgres"}]},{"type":"element","tag":"span","props":{"class":"ct-427702"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"修改数据库密码"}]},{"type":"element","tag":"code","props":{"code":"\\password\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"\\p"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":"assword"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看pg版本"}]},{"type":"element","tag":"code","props":{"code":"select version();\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-427702"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" version();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看系统表"}]},{"type":"element","tag":"code","props":{"code":"select * from pg_tables;\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-427702"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" * from pg_tables;"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"yunzai-bot"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/Le-niao/Yunzai-Bot","rel":["nofollow"]},"children":[{"type":"text","value":"yunzai bot"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原神QQ群机器人，通过米游社接口，查询原神游戏信息，快速生成图片返回"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/Le-niao/Yunzai-Bot/issues/3","rel":["nofollow"]},"children":[{"type":"text","value":"部署"}]},{"type":"text","value":"过程在安装nodejs时摔了个跟头。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果nodejs版本不对，会在执行下列命令时卡死。"},{"type":"element","tag":"code","props":{"code":"npm install cnpm -g --registry=https://registry.npm.taobao.org\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"cnpm"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"--registry=https://registry.npm.taobao.org"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"我的服务器在执行下述命令时，操作失败。"},{"type":"element","tag":"code","props":{"code":"yum install -y dnf\ndnf module install nodejs:16 -y\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"dnf"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"dnf"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"nodejs:"}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-y"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"无奈使用官网的教程进行安装"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"修改账号 使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pnpm login"}]},{"type":"text","value":"，上面的都是基操了。主要是依赖，依赖 node 和 redis，然后下面的 miao-plugin 依赖更多，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"puppeteer"}]},{"type":"text","value":" 非常多依赖，，已经在项目里写入脚本"}]},{"type":"element","tag":"h4","props":{"id":"安装-nodejs-流程"},"children":[{"type":"text","value":"安装 nodejs 流程"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://nodejs.org/en/download/","rel":["nofollow"]},"children":[{"type":"text","value":"官网"}]},{"type":"text","value":"复制 "},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/dist/v16.15.0/node-v16.15.0-linux-x64.tar.xz","rel":["nofollow"]},"children":[{"type":"text","value":"linux 二进制文件"}]},{"type":"text","value":" (以16.15.0为准 (includes npm 8.5.5))"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"执行命令安装"},{"type":"element","tag":"code","props":{"code":"cd /usr/local/src/\nwget https://nodejs.org/dist/v16.15.0/node-v16.15.0-linux-x64.tar.xz\ntar xf node-v16.15.0-linux-x64.tar.xz\ncd node-v16.15.0-linux-x64/\n./bin/node -v # 执行node命令 查看版本\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/local/src/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"https://nodejs.org/dist/v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/node-v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-linux-x64.tar.xz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"xf"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"node-v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-linux-x64.tar.xz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"node-v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-linux-x64/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"/bin/node"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e15d05"},"children":[{"type":"text","value":"# 执行node命令 查看版本"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设置软连接"},{"type":"element","tag":"code","props":{"code":"ln -s /usr/local/src/node-v16.15.0-linux-x64/bin/node /usr/bin/node\nnode -v\n# v16.15.0\n  \nln -s /usr/local/src/node-v16.15.0-linux-x64/bin/npm /usr/bin/npm\nnpm -v\n# 8.5.5\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/local/src/node-v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-linux-x64/bin/node"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/bin/node"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-v"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e15d05"},"children":[{"type":"text","value":"# v16.15.0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/local/src/node-v16."}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"15.0"}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"-linux-x64/bin/npm"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-23cc07"},"children":[{"type":"text","value":"/usr/bin/npm"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-906f1a"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-5acc62"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-545b46"},"children":[{"type":"text","value":"-v"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e15d05"},"children":[{"type":"text","value":"# 8.5.5"}]}]}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"插件"},"children":[{"type":"text","value":"插件"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/yoimiya-kokomi/miao-plugin","rel":["nofollow"]},"children":[{"type":"text","value":"喵喵插件"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e15d05{color:#6E7781}\n.ct-427702{color:#CF222E}\n.ct-545b46{color:#0550AE}\n.ct-23cc07{color:#0A3069}\n.ct-5acc62{color:#24292F}\n.ct-906f1a{color:#953800}\n.dark .ct-906f1a{color:#FFA657}\n.dark .ct-5acc62{color:#C9D1D9}\n.dark .ct-23cc07{color:#A5D6FF}\n.dark .ct-545b46{color:#79C0FF}\n.dark .ct-427702{color:#FF7B72}\n.dark .ct-e15d05{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"play-bot","depth":2,"text":"play bot","children":[{"id":"zhenxun-bot","depth":3,"text":"zhenxun bot"},{"id":"yunzai-bot","depth":3,"text":"yunzai bot"}]}]}},"_type":"markdown","_id":"content:3.code:stroll.md","_source":"content","_file":"3.code/stroll.md","_extension":"md"},{"_path":"/code/sys-design/_dir","_dir":"sys-design","_draft":false,"_partial":true,"_locale":"","title":"系统设计","icon":"nimbus:ecosystem","_id":"content:3.code:sys-design:_dir.yml","_type":"yaml","_source":"content","_file":"3.code/sys-design/_dir.yml","_extension":"yml"},{"_path":"/code/sys-design/design-pattern","_dir":"sys-design","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"设计模式","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"设计模式"},"children":[{"type":"text","value":"设计模式"}]},{"type":"element","tag":"h2","props":{"id":"单例模式的双锁分别有什么作用"},"children":[{"type":"text","value":"单例模式的双锁分别有什么作用"}]},{"type":"element","tag":"h2","props":{"id":"实现单例设计模式懒汉饿汉"},"children":[{"type":"text","value":"实现单例设计模式（懒汉，饿汉）"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/a/92193/17744936","rel":["nofollow"]},"children":[{"type":"text","value":"singleton-how-should-it-be-used"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"意图：保证一个类仅有一个实例，并提供一个访问他的全局访问点。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主要解决：一个全局使用的类频繁的创建与销毁。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"何时使用：当您想控制实例数目节省系统资源的时候。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如何解决：判断系统是否已经有这个单例，如果有则返回，如果没有则创建。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关键代码：构造函数是私有的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"饿汉：在类加载时就创建实例；懒汉：在第一次使用时进行实例化"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"code"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"code","props":{"code":"class Singleton\n{\nprivate:\nstatic Singleton instance;\nprivate:\nSingleton();\n~Singleton();\nSingleton(const Singleton&);\nSingleton& operator=(const Singleton&);\npublic:\nstatic Singleton& getInstance() {\nreturn instance;\n}\n}\n\n// initialize defaultly\nSingleton Singleton::instance;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" Singleton instance;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"~Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"operator"}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"getInstance"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" instance;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c1b5da"},"children":[{"type":"text","value":"// initialize defaultly"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"Singleton "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"::instance;"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"简述常见的工厂模式以及单例模式的使用场景"},"children":[{"type":"text","value":"简述常见的工厂模式以及单例模式的使用场景"}]},{"type":"element","tag":"h2","props":{"id":"如何实现单例模式如何避免发生对象的用户复制行为如何实现线程安全的单例模式dclp是什么有什么问题"},"children":[{"type":"text","value":"如何实现单例模式？如何避免发生对象的用户复制行为？如何实现线程安全的单例模式？DCLP是什么，有什么问题？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将构造函数、析构函数、复制构造函数、赋值操作符声明为私有，即可实现单例模式\n单例模式实现代码通常为："},{"type":"element","tag":"code","props":{"code":"class Singleton\n{\npublic:\n    static Singleton* Instance();\nprotected:\n    Singleton();\nprivate:\n    static Singleton* _instance;\n};\nSingleton::Singleton(){}\nSingleton* Singleton::_instance = nullptr;\nSingleton* Singleton::Instance()\n{\n    if(_instance == nullptr)\n    _instance = new Singleton;\n    return _instance;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Instance"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"protected:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" _instance;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"(){}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"::_instance "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2065c4"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2a99b2"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ebcaf3"},"children":[{"type":"text","value":"Instance"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"(_instance "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2065c4"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    _instance "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" Singleton;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1d2712"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":" _instance;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24c2cf"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"避免用户的复制行为，可以将复制构造函数声明为private或者使用C++11中的delete语法。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"实现线程安全的单例模式：上面实现中的GetInstance()不是线程安全的，因为在单例的静态初始化中存在竞争条件。如果碰巧有多个线程在同时调用该方法，那么就有可能被构造多次。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"比较简单"}]},{"type":"text","value":"的做法是在存在竞争条件的地方加上互斥锁。这样做的代价是开销比较高。因为每次方法调用时都需要加锁。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"比较常用"}]},{"type":"text","value":"的做法是使用双重检查锁定模式(DCLP)\n。但是DCLP并不能保证在所有编译器和处理器内存模型下都能正常工作。如，共享内存的对称多处理器通常突发式提交内存写操作，这会造成不同线程的写操作重新排序。这种情况通常可以采用volatile解决，他能将读写操作同步到易变数据中，但这样在多线程环境下仍旧存在问题。"}]}]},{"type":"element","tag":"pdf","props":{"url":"/pdf/DDJ_Jul_Aug_2004_revised.pdf"},"children":[{"type":"element","tag":"h2","props":{"id":"手写生产者消费者模型"},"children":[{"type":"text","value":"手写生产者消费者模型"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-2065c4{color:#0550AE}\n.ct-c1b5da{color:#6E7781}\n.ct-ebcaf3{color:#8250DF}\n.ct-2a99b2{color:#953800}\n.ct-24c2cf{color:#24292F}\n.ct-1d2712{color:#CF222E}\n.dark .ct-1d2712{color:#FF7B72}\n.dark .ct-24c2cf{color:#C9D1D9}\n.dark .ct-2a99b2{color:#FFA657}\n.dark .ct-ebcaf3{color:#D2A8FF}\n.dark .ct-c1b5da{color:#8B949E}\n.dark .ct-2065c4{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"单例模式的双锁分别有什么作用","depth":2,"text":"单例模式的双锁分别有什么作用"},{"id":"实现单例设计模式懒汉饿汉","depth":2,"text":"实现单例设计模式（懒汉，饿汉）"},{"id":"简述常见的工厂模式以及单例模式的使用场景","depth":2,"text":"简述常见的工厂模式以及单例模式的使用场景"},{"id":"如何实现单例模式如何避免发生对象的用户复制行为如何实现线程安全的单例模式dclp是什么有什么问题","depth":2,"text":"如何实现单例模式？如何避免发生对象的用户复制行为？如何实现线程安全的单例模式？DCLP是什么，有什么问题？"},{"id":"手写生产者消费者模型","depth":2,"text":"手写生产者消费者模型"}]}},"_type":"markdown","_id":"content:3.code:sys-design:design-pattern.md","_source":"content","_file":"3.code/sys-design/design-pattern.md","_extension":"md"},{"_path":"/code/sys-design/qa","_dir":"sys-design","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"QA","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h2","props":{"id":"电商系统中如何实现秒杀功能如何解决商品的超卖问题"},"children":[{"type":"text","value":"电商系统中，如何实现秒杀功能？如何解决商品的超卖问题？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在电商系统中实现秒杀功能，需要考虑到如下几个方面："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"确定秒杀商品的数量，保证秒杀商品的数量足够满足用户的需求，但不能过多以至于导致商品超卖的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设计一个合理的倒计时机制，提醒用户秒杀活动即将开始，并且在秒杀活动开始时启动计时器，提醒用户秒杀时间已经过半或者秒杀活动即将结束。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"开发一个高并发的秒杀接口，用于处理大量用户同时发起的秒杀请求。这一步可以通过缓存、队列等技术来实现。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决商品超卖的问题，常见的方法有以下几种："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"库存预留。在秒杀活动开始前，对商品的库存进行预留，以避免在秒杀过程中对商品库存进行修改，从而避免商品超卖的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"乐观锁。在秒杀过程中，当用户发起请求时，使用乐观锁的机制来更新商品库存，从而保证在并发情况下不会出现商品超卖的问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"悲观锁。在秒杀过程中，当用户发起请求时，使用悲观锁的机制来更新商品库存，通过对商品的行级锁定来保证在并发情况下不会出现商品超卖的问题。悲观锁的方式通常是通过数据库的事务机制来实现的，能够很好的保证数据的一致性和完整性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，还可以通过限流、防抖等技术来避免秒杀活动出现商品超卖的问题。通过限流，可以限制每个用户对秒杀接口的访问频率，从而避免大量请求同时发送到服务器，造成商品超卖的问题。通过防抖，可以让用户在短时间内只能发起一次秒杀请求，从而避免用户重复发送大量请求，造成商品超卖的问题。"}]},{"type":"element","tag":"h2","props":{"id":"简述-zookeeper-基础原理以及使用场景"},"children":[{"type":"text","value":"简述 Zookeeper 基础原理以及使用场景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Zookeeper 是一个分布式的协调服务，提供了一个统一的接口，用于在分布式系统中维护配置信息、命名服务、组服务等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Zookeeper 的基础原理是将数据以树形结构存储在内存中，并通过类似文件系统的方式来维护这些数据。每个节点都可以作为一个父节点，来维护它的子节点；同时，每个节点也可以作为一个子节点，来被它的父节点维护。每个节点都可以存储数据，也可以作为一个空节点，来维护其他节点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Zookeeper 使用场景很多，常见的有以下几种："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分布式配置管理。通过 Zookeeper 维护集群中的配置信息，可以实时的同步配置信息，方便集群中各个节点之间的信息交换。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分布式命名服务。通过 Zookeeper 维护集群中的命名服务，可以方便集群中各个节点之间的通信，解决节点间通信的复杂性问题。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分布式协调服务。通过 Zookeeper 维护集群中的协调服务，可以方便集群中各个节点之间的协作，解决节点间协作的复杂性问题。例如，在分布式数据库中，可以使用 Zookeeper 协调各个节点之间的数据备份和恢复等操作。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，Zookeeper 还可以作为分布式锁服务，用于解决节点之间的资源竞争问题。例如，在分布式消息队列中，可以使用 Zookeeper 来协调各个节点之间的消息发送和消费。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Zookeeper 是一个非常强大的分布式协调服务，可以用于解决分布式系统中各种复杂的协作问题。"}]},{"type":"element","tag":"h2","props":{"id":"简述什么是两阶段提交"},"children":[{"type":"text","value":"简述什么是两阶段提交？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"两阶段提交（Two-Phase Commit，简称 2PC）是一种分布式事务协议，用于解决分布式系统中的事务一致性问题。两阶段提交协议包括两个阶段：第一阶段是提交阶段，协调者向所有参与者发送提交指令，要求所有参与者提交事务；第二阶段是投票阶段，协调者向所有参与者发送投票指令，要求所有参与者投票表决是否提交事务。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"两阶段提交协议能够保证分布式系统中的事务在所有参与者之间达成一致，并且能够在事务发生错误时进行回滚，从而保证事务的原子性和一致性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"两阶段提交协议的主要优点是保证了事务的原子性和一致性，能够在分布式系统中有效地维护事务的完整性。但是，两阶段提交协议也有一些缺点，比如性能较差，容易受单点故障的影响等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，两阶段提交协议是一种非常有用的分布式事务协议，能够在分布式系统中有效地维护事务的一致性和完整性。"}]},{"type":"element","tag":"h2","props":{"id":"如何设计一个消息队列"},"children":[{"type":"text","value":"如何设计一个消息队列"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设计一个消息队列需要考虑如下几个方面："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义消息队列的结构体，包括队列的大小、队列中存储的消息数据、队列头和队列尾等信息。"}]}]},{"type":"element","tag":"code","props":{"code":"struct MessageQueue {\n    int size;\n    int head;\n    int tail;\n    vector<Message> data;\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" head;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tail;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    vector"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" data;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义消息队列的操作函数，包括初始化、销毁、入队、出队等操作。"}]}]},{"type":"element","tag":"code","props":{"code":"// 初始化消息队列\nvoid init(MessageQueue& queue, int size) {\n    queue.size = size;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.resize(size);\n}\n\n// 销毁消息队列\nvoid destroy(MessageQueue& queue) {\n    queue.size = 0;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.clear();\n}\n\n// 入队\nbool enqueue(MessageQueue& queue, const Message& message) {\n    if (queue.tail == queue.head && queue.data[queue.head].valid) {\n        // 队列已满\n        return false;\n    }\n    queue.data[queue.tail] = message;\n    queue.tail = (queue.tail + 1) % queue.size;\n\n    return true;\n}\n\n// 出队\nbool dequeue(MessageQueue& queue, Message& message) {\n    if (queue.head == queue.tail && !queue.data[queue.head].valid) {\n        // 队列为空\n        return false;\n    }\n    message = queue.data[queue.head];\n    queue.data[queue.head].valid = false;\n    queue.head = (queue.head + 1) % queue.size;\n\n    return true;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 初始化消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(size);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 销毁消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"destroy"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"clear"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 入队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"enqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head].valid) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列已满"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.tail] "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" message;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 出队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"dequeue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"queue.data[queue.head].valid) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列为空"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    message "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.head].valid "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用锁机制，保证消息队列的线程安全性。"}]}]},{"type":"element","tag":"code","props":{"code":"std::mutex mtx;\n\n// 初始化消息队列\nvoid init(MessageQueue& queue, int size) {\n    std::lock_guardstd::mutex lock(mtx);\n    queue.size = size;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.resize(size);\n}\n\n// 销毁消息队列\nvoid destroy(MessageQueue& queue) {\n    std::lock_guardstd::mutex lock(mtx);\n    queue.size = 0;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.clear();\n}\n\n// 入队\nbool enqueue(MessageQueue& queue, const Message& message) {\n    std::lock_guardstd::mutex lock(mtx);\n    if (queue.tail == queue.head && queue.data[queue.head].valid) {\n        // 队列已满\n        return false;\n    }\n\n    queue.data[queue.tail] = message;\n    queue.tail = (queue.tail + 1) % queue.size;\n\n    return true;\n}\n\n// 出队\nbool dequeue(MessageQueue& queue, Message& message) {\n    std::lock_guardstd::mutex lock(mtx);\n    if (queue.head == queue.tail && !queue.data[queue.head].valid) {\n        // 队列为空\n        return false;\n    }\n\n    message = queue.data[queue.head];\n    queue.data[queue.head].valid = false;\n    queue.head = (queue.head + 1) % queue.size;\n\n    return true;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex mtx;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 初始化消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(size);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 销毁消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"destroy"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"clear"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 入队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"enqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head].valid) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列已满"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.tail] "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" message;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 出队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"dequeue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"queue.data[queue.head].valid) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列为空"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    message "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.head].valid "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"完整实现"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <vector>\n#include <mutex>\n\nstruct Message\n{\n    int id;\n    std::string data;\n    bool valid;\n};\n\nstruct MessageQueue\n{\n    int size;\n    int head;\n    int tail;\n    std::vector<Message> data;\n};\n\nstd::mutex mtx;\n\n// 初始化消息队列\nvoid init(MessageQueue &queue, int size)\n{\n    std::lock_guardstd::mutex lock(mtx);\n    queue.size = size;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.resize(size);\n}\n\n// 销毁消息队列\nvoid destroy(MessageQueue &queue)\n{\n    std::lock_guardstd::mutex lock(mtx);\n    queue.size = 0;\n    queue.head = 0;\n    queue.tail = 0;\n    queue.data.clear();\n}\n\n// 入队\nbool enqueue(MessageQueue &queue, const Message &message)\n{\n    std::lock_guardstd::mutex lock(mtx);\n    if (queue.tail == queue.head && queue.data[queue.head].valid)\n    {\n        // 队列已满\n        return false;\n    }\n\n    queue.data[queue.tail] = message;\n    queue.data[queue.tail].valid = true;\n    queue.tail = (queue.tail + 1) % queue.size;\n\n    return true;\n}\n\n// 出队\nbool dequeue(MessageQueue &queue, Message &message)\n{\n    std::lock_guardstd::mutex lock(mtx);\n    if (queue.head == queue.tail && !queue.data[queue.head].valid)\n    {\n        // 队列为空\n        return false;\n    }\n\n    message = queue.data[queue.head];\n    queue.data[queue.head].valid = false;\n    queue.head = (queue.head + 1) % queue.size;\n\n    return true;\n}\n\nint main()\n{\n    // 创建消息队列\n    MessageQueue queue;\n    init(queue, 10);\n    // 入队\n    Message message1 = {1, \"hello\", false};\n    enqueue(queue, message1);\n    Message message2 = {2, \"world\", false};\n    enqueue(queue, message2);\n\n    // 出队\n    Message message;\n    dequeue(queue, message);\n    std::cout << message.id << \": \" << message.data << std::endl;\n\n    // 销毁消息队列\n    destroy(queue);\n\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<mutex>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" id;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::string data;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" valid;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"struct"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" head;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tail;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::vector"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" data;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex mtx;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 初始化消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"resize"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(size);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 销毁消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"destroy"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.size "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"clear"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 入队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"enqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head].valid)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列已满"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.tail] "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" message;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.tail].valid "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 出队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"dequeue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"MessageQueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"queue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"Message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"lock_guardstd"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mtx);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.tail "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"queue.data[queue.head].valid)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"        // 队列为空"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    message "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.data[queue.head];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.data[queue.head].valid "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (queue.head "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"%"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" queue.size;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"    // 创建消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    MessageQueue queue;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(queue, "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"    // 入队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    Message message1 "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"enqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(queue, message1);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    Message message2 "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"enqueue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(queue, message2);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"    // 出队"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    Message message;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"dequeue"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(queue, message);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" message.id "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\": \""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" message.data "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"    // 销毁消息队列"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"destroy"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(queue);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"如何设计一个线程池"},"children":[{"type":"text","value":"如何设计一个线程池"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要用C++设计一个线程池，首先需要使用C++提供的多线程库，比如"},{"type":"element","tag":"thread","props":{},"children":[{"type":"text","value":"头文件。然后，可以定义一个线程池类，包含一个线程容器，用于存储创建的线程。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在线程池类中，需要定义一个方法用于添加新任务，该方法可以将新任务打包为一个函数对象，然后将其放入一个任务队列中。另外，还需要定义一个方法用于启动线程池，该方法会创建指定数量的线程，每个线程都会不断从任务队列中获取任务并执行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"线程池类还需要提供一些其他功能，比如停止线程池，等待所有线程完成任务等。以下是一个简单的C++线程池的示例实现："}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <thread>\n#include <vector>\n#include <queue>\n#include <mutex>\n#include <condition_variable>\n#include <atomic>\n#include <future>\n\nclass ThreadPool\n{\npublic:\n    ThreadPool(size_t num_threads)\n        : stop_(false)\n    {\n        for (size_t i = 0; i < num_threads; ++i)\n        {\n            threads_.emplace_back([this]()\n            {\n                while (true)\n                {\n                    std::function<void()> task;\n                    {\n                        std::unique_lock<std::mutex> lock(mutex_);\n                        cond_.wait(lock, [this]{ return stop_ || !tasks_.empty(); });\n                        if (stop_ && tasks_.empty())\n                            return;\n                        task = std::move(tasks_.front());\n                        tasks_.pop();\n                    }\n                    task();\n                }\n            });\n        }\n    }\n\n    ~ThreadPool()\n    {\n        {\n            std::unique_lock<std::mutex> lock(mutex_);\n            stop_ = true;\n        }\n        cond_.notify_all();\n        for (auto& thread : threads_)\n            thread.join();\n    }\n\n    template <class T>\n    auto AddTask(T task) -> std::future<decltype(task())>\n    {\n        auto wrapper = std::make_shared<std::packaged_task<decltype(task())()>>(std::move(task));\n        {\n            std::unique_lock<std::mutex> lock(mutex_);\n            tasks_.emplace([=]{ (*wrapper)(); });\n        }\n        cond_.notify_one();\n        return wrapper->get_future();\n    }\n\n    void Wait()\n    {\n        std::unique_lock<std::mutex> lock(mutex_);\n        cond_.wait(lock, [this]{ return tasks_.empty(); });\n    }\n\n    size_t Size()\n    {\n        std::unique_lock<std::mutex> lock(mutex_);\n        return tasks_.size();\n    }\n\nprivate:\n    std::vector<std::thread> threads_;\n    std::queue<std::function<void()>> tasks_;\n    std::mutex mutex_;\n    std::condition_variable cond_;\n    std::atomic<bool> stop_;\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<vector>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<queue>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<mutex>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<condition_variable>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<atomic>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"<future>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"ThreadPool"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"ThreadPool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"num_threads"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        : "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"stop_"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" num_threads; "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"i)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            threads_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"emplace_back"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"]()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::function"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" task;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mutex_);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                        cond_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(lock, ["}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"]{ "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" stop_ "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"empty"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(); });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" (stop_ "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"empty"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                            "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                        task "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"front"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                        tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"pop"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"task"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"                }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"~ThreadPool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mutex_);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            stop_ "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        cond_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"notify_all"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"auto&"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" thread : threads_)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            thread."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"AddTask"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"task"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"future"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"decltype"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"task"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"())>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" wrapper "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"make_shared"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"packaged_task"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"decltype"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"task"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"())()>>("}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(task));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mutex_);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"            tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"emplace"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"]{ ("}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"wrapper)(); });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        cond_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"notify_one"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" wrapper->"}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"get_future"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"Wait"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mutex_);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        cond_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"wait"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(lock, ["}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"]{ "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"empty"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(); });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"Size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::unique_lock"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"lock"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"(mutex_);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tasks_."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::vector"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::thread"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" threads_;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::queue"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::function"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<void"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" tasks_;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::mutex mutex_;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::condition_variable cond_;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::atomic"}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<bool>"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" stop_;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的代码，可以使用以下方式来创建一个线程池，并通过调用AddTask方法添加任务："}]},{"type":"element","tag":"code","props":{"code":"// 创建一个线程池，包含4个线程\nThreadPool pool(4);\n\n// 添加一个任务，该任务是一个普通的函数\nauto task1 = pool.AddTask([]()\n{\n    std::cout << \"Hello from a worker thread!\" << std::endl;\n    return 42;\n});\n\n// 添加一个任务，该任务是一个 Lambda 表达式\nauto task2 = pool.AddTask([]()\n{\n    std::cout << \"Hello from another worker thread!\" << std::endl;\n    return 123;\n});\n\n// 等待所有任务完成\npool.Wait();\n\n// 获取任务的返回值\nstd::cout << \"Task1 returned \" << task1.get() << std::endl;\nstd::cout << \"Task2 returned \" << task2.get() << std::endl;\n\n// 获取当前任务队列的长度\nstd::cout << \"Task queue size: \" << pool.Size() << std::endl;\n\n// 线程池对象在析构时会自动停止所有线程\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 创建一个线程池，包含4个线程"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"ThreadPool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"pool"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 添加一个任务，该任务是一个普通的函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" task1 "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" pool."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"AddTask"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"([]()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"Hello from a worker thread!\""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"42"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 添加一个任务，该任务是一个 Lambda 表达式"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" task2 "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" pool."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"AddTask"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"([]()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"Hello from another worker thread!\""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca5c6c"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 等待所有任务完成"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"pool."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"Wait"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 获取任务的返回值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"Task1 returned \""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" task1."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"Task2 returned \""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" task2."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 获取当前任务队列的长度"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::cout "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915ffd"},"children":[{"type":"text","value":"\"Task queue size: \""}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" pool."}]},{"type":"element","tag":"span","props":{"class":"ct-d18dd2"},"children":[{"type":"text","value":"Size"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-b797a8"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adf194"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-66a037"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03e561"},"children":[{"type":"text","value":"// 线程池对象在析构时会自动停止所有线程"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"线程池类中还有很多可以改进的地方，比如可以支持线程池动态扩容、支持自定义线程启动参数等。完整实现需要考虑更多细节，这里仅提供了一个简单的实现供参考。"}]},{"type":"element","tag":"h2","props":{"id":"简述一致性哈希算法的实现方式及原理"},"children":[{"type":"text","value":"简述一致性哈希算法的实现方式及原理"}]},{"type":"element","tag":"h2","props":{"id":"简述-cap-理论"},"children":[{"type":"text","value":"简述 CAP 理论"}]},{"type":"element","tag":"h2","props":{"id":"项目上有什么技术难点"},"children":[{"type":"text","value":"项目上有什么技术难点？"}]},{"type":"element","tag":"h2","props":{"id":"了解高并发的解决方案吗例如动静分离缓存负载均衡"},"children":[{"type":"text","value":"了解高并发的解决方案吗？例如动静分离，缓存，负载均衡"}]},{"type":"element","tag":"h2","props":{"id":"有哪些实现服务发现的方法"},"children":[{"type":"text","value":"有哪些实现服务发现的方法？"}]},{"type":"element","tag":"h2","props":{"id":"如何阅读大型项目的源码"},"children":[{"type":"text","value":"如何阅读大型项目的源码？"}]},{"type":"element","tag":"h2","props":{"id":"假如明天是活动高峰qps-预计会翻10倍你要怎么做"},"children":[{"type":"text","value":"假如明天是活动高峰？QPS 预计会翻10倍，你要怎么做？"}]},{"type":"element","tag":"h2","props":{"id":"kafka-发送消息是如何保证可靠性的"},"children":[{"type":"text","value":"Kafka 发送消息是如何保证可靠性的？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kafka 是一个分布式消息队列系统，用于存储和转发消息。它使用多种机制来保证消息的可靠性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先，Kafka 将消息分成一系列的分区，并将每个分区保存到一个或多个副本节点上。这种分区和副本机制可以保证消息的可用性，即使某个节点出现故障，也能通过其它节点访问消息。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其次，Kafka 使用了严格的消息发布顺序和消费顺序。每条消息都有一个唯一的编号，并且消费者在消费消息时必须按照消息的编号顺序进行消费。这样就能保证消息的顺序性和一致性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，Kafka 还支持消息确认机制。消费者可以选择在消费消息后进行确认，Kafka 将在收到消费者的确认后才会删除消息，从而保证消息的持久性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，Kafka 通过多种机制来保证消息的可靠性，包括副本机制、消息顺序性、消息确认等。这些机制的综合作用，为 Kafka 带来了高可用性和高可靠性。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-915ffd{color:#0A3069}\n.ct-ca5c6c{color:#0550AE}\n.ct-d18dd2{color:#8250DF}\n.ct-03e561{color:#6E7781}\n.ct-adf194{color:#953800}\n.ct-66a037{color:#24292F}\n.ct-b797a8{color:#CF222E}\n.dark .ct-b797a8{color:#FF7B72}\n.dark .ct-66a037{color:#C9D1D9}\n.dark .ct-adf194{color:#FFA657}\n.dark .ct-03e561{color:#8B949E}\n.dark .ct-d18dd2{color:#D2A8FF}\n.dark .ct-ca5c6c{color:#79C0FF}\n.dark .ct-915ffd{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"电商系统中如何实现秒杀功能如何解决商品的超卖问题","depth":2,"text":"电商系统中，如何实现秒杀功能？如何解决商品的超卖问题？"},{"id":"简述-zookeeper-基础原理以及使用场景","depth":2,"text":"简述 Zookeeper 基础原理以及使用场景"},{"id":"简述什么是两阶段提交","depth":2,"text":"简述什么是两阶段提交？"},{"id":"如何设计一个消息队列","depth":2,"text":"如何设计一个消息队列"},{"id":"如何设计一个线程池","depth":2,"text":"如何设计一个线程池"},{"id":"简述一致性哈希算法的实现方式及原理","depth":2,"text":"简述一致性哈希算法的实现方式及原理"},{"id":"简述-cap-理论","depth":2,"text":"简述 CAP 理论"},{"id":"项目上有什么技术难点","depth":2,"text":"项目上有什么技术难点？"},{"id":"了解高并发的解决方案吗例如动静分离缓存负载均衡","depth":2,"text":"了解高并发的解决方案吗？例如动静分离，缓存，负载均衡"},{"id":"有哪些实现服务发现的方法","depth":2,"text":"有哪些实现服务发现的方法？"},{"id":"如何阅读大型项目的源码","depth":2,"text":"如何阅读大型项目的源码？"},{"id":"假如明天是活动高峰qps-预计会翻10倍你要怎么做","depth":2,"text":"假如明天是活动高峰？QPS 预计会翻10倍，你要怎么做？"},{"id":"kafka-发送消息是如何保证可靠性的","depth":2,"text":"Kafka 发送消息是如何保证可靠性的？"}]}},"_type":"markdown","_id":"content:3.code:sys-design:qa.md","_source":"content","_file":"3.code/sys-design/qa.md","_extension":"md"},{"_path":"/interview/_dir","_dir":"interview","_draft":false,"_partial":true,"_locale":"","title":"八股文","icon":"mdi:code-tags-check","_id":"content:4.interview:_dir.yml","_type":"yaml","_source":"content","_file":"4.interview/_dir.yml","_extension":"yml"},{"_path":"/interview/compile","_dir":"interview","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"编译","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"编译"},"children":[{"type":"text","value":"编译"}]},{"type":"element","tag":"h2","props":{"id":"cc-编译时和运行时的内存区域分配"},"children":[{"type":"text","value":"c/c++ 编译时和运行时的内存区域分配"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先来说下c程序编译内存分配："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈区(stack)：存放局部变量和参数，申请和释放都由编译器自动完成。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆区(heap)：动态内存分配，申请和释放都是由程序员控制。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态区/全局区(static)：存放全局变量和静态变量。下面存放了未初始化的静态/全局变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文字常量区：存放字符串常量的。比如，char *p = “my name is”。“my....is!”字符串常量就存放那个区域。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"代码区(code)：用来存放代码的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第二种是程序在运行时内存分配，程序在进程中的内存分配区域。\n从高地址到地址：\n1.环境变量(Unix/Linux中全局环境变量)\n2.stack区，存放内容和上文同。\n3.heap区，存放内容和上文同。值得说明的是：stack区起始地址是在高地址，即是从高地址向低地址延伸。而heap区起始地址是在低地址，即是从低地址向高地址延伸。总结：stack起始地址固定在高地址，heap起始地址固定在低地址，然后两个区都向中间延伸。直到stack区和heap区的结束地址重合则表示没有stack和heap内存空间了。\n4.data区，分为bss未初始化的数据区和初始化的数据区。\n5.文本(text)区，存放代码的区域。"}]},{"type":"element","tag":"h3","props":{"id":"编译时与运行时的内存情况"},"children":[{"type":"text","value":"编译时与运行时的内存情况"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.编译时不分配内存"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n编译时是不分配内存的。此时只是根据声明时的类型进行占位，到以后程序执行时分配内存才会正确。所以声明是给编译器看的，聪明的编译器能根据声明帮你识别错误。\n2.运行时必分配内存"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n运行时程序是必须调到“内存”的。因为CPU（其中有多个寄存器）只与内存打交道的。程序在进入实际内存之前要首先分配物理内存。\n3.编译过程"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n只能简单说一下，因为如果要详细的话，就是一本书了《编译原理》。编译器能够识别语法，数据类型等等。然后逐行逐句检查编译成二进制数据的obj文件，然后再由链接程序将其链接成一个EXE文件。此时的程序是以EXE文件的形式存放在磁盘上。\n4.运行过程"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n当执行这个EXE文件以后，此程序就被加载到内存中，成为进程。此时一开始程序会初始化一些全局对象，然后找到入口函数（main()或者WinMain()），就开始按程序的执行语句开始执行。此时需要的内存只能在程序的堆上进行动态增加/释放了。"}]},{"type":"element","tag":"h2","props":{"id":"c-编译流程"},"children":[{"type":"text","value":"c++ 编译流程"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"cc-编译时和运行时的内存区域分配","depth":2,"text":"c/c++ 编译时和运行时的内存区域分配","children":[{"id":"编译时与运行时的内存情况","depth":3,"text":"编译时与运行时的内存情况"}]},{"id":"c-编译流程","depth":2,"text":"c++ 编译流程"}]}},"_type":"markdown","_id":"content:4.interview:compile.md","_source":"content","_file":"4.interview/compile.md","_extension":"md"},{"_path":"/interview/pointer","_dir":"interview","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"指针","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"指针"},"children":[{"type":"text","value":"指针"}]},{"type":"element","tag":"h2","props":{"id":"指针的具体实现方式"},"children":[{"type":"text","value":"指针的具体实现方式"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"指针的具体实现方式","depth":2,"text":"指针的具体实现方式"}]}},"_type":"markdown","_id":"content:4.interview:pointer.md","_source":"content","_file":"4.interview/pointer.md","_extension":"md"},{"_path":"/interview/process","_dir":"interview","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"进程","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"进程"},"children":[{"type":"text","value":"进程"}]},{"type":"element","tag":"h2","props":{"id":"进程间同步"},"children":[{"type":"text","value":"进程间同步"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./thread#%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5"},"children":[{"type":"text","value":"线程间同步"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo"}]},{"type":"element","tag":"h2","props":{"id":"进程间通信方式"},"children":[{"type":"text","value":"进程间通信方式"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"进程间同步","depth":2,"text":"进程间同步"},{"id":"进程间通信方式","depth":2,"text":"进程间通信方式"}]}},"_type":"markdown","_id":"content:4.interview:process.md","_source":"content","_file":"4.interview/process.md","_extension":"md"},{"_path":"/interview/stl","_dir":"interview","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"STL","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"stl"},"children":[{"type":"text","value":"STL"}]},{"type":"element","tag":"h2","props":{"id":"各种容器的实现方式"},"children":[{"type":"text","value":"各种容器的实现方式"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"各种容器的实现方式","depth":2,"text":"各种容器的实现方式"}]}},"_type":"markdown","_id":"content:4.interview:stl.md","_source":"content","_file":"4.interview/stl.md","_extension":"md"},{"_path":"/interview/thread","_dir":"interview","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"线程","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"线程"},"children":[{"type":"text","value":"线程"}]},{"type":"element","tag":"h2","props":{"id":"数据互斥"},"children":[{"type":"text","value":"数据互斥"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在多线程存在的环境中，除了堆栈中的临时数据之外，所有的数据都是共享的。如果我们需要线程之间正确地运行，那么务必需要保证公共数据的执行和计算是正确的。简单一点说，就是保证数据在执行的时候必须是互斥的。否则，如果两个或者多个线程在同一时刻对数据进行了操作，那么后果是不可想象的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo todo todo"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么，有什么办法可以保证在某一时刻只有一个线程对数据进行操作呢？四个基本方法："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关中断"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数学互斥方法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作系统提供的互斥方法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cpu原子操作"}]}]},{"type":"element","tag":"h3","props":{"id":"关中断"},"children":[{"type":"text","value":"关中断"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要让数据在某一时刻只被一个线程访问，方法之一就是停止线程调度就可以了。那么怎样停止线程调度呢？那么关掉时钟中断就可以了啊。在X86里面的确存在这样的两个指令"}]},{"type":"element","tag":"code","props":{"code":"#include <stdio.h>\nint main () {\n    __asm {\n        cli\n        sti\n    }\n    return 1;\n}\n","language":"c","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3dfa2a"},"children":[{"type":"text","value":"<stdio.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3fc83"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    __asm {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"        cli"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"        sti"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中cli是关中断，sti是开中断。这段代码没有什么问题，可以编过，当然也可以生成执行文件。但是在执行的时候会出现一个异常告警：Unhandled exception in test.exe: 0xC0000096:  Privileged Instruction。告警已经说的很清楚了，这是一个特权指令。只有系统或者内核本身才可以使用这个指令。"}]},{"type":"element","tag":"h3","props":{"id":"数学互斥方法"},"children":[{"type":"text","value":"数学互斥方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设有两个线程（a、b）正要对一个共享数据进行访问，那么怎么做到他们之间的互斥的呢？其实我们可以这么做"}]},{"type":"element","tag":"code","props":{"code":"unsigned flag[2] = {0};\nunsigned turn = 0;\n\nvoid process (unsigned index) {\n    flag[index] = 1;\n    turn = index;\n    while (flag[1 - index] && (turn == index)) {\n        // do something\n    }\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"unsigned"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" flag["}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"unsigned"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" turn "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d3fc83"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"unsigned"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-053100"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    flag[index] "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    turn "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" index;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" (flag["}]},{"type":"element","tag":"span","props":{"class":"ct-a0bb02"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" index] "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" (turn "}]},{"type":"element","tag":"span","props":{"class":"ct-687e35"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":" index)) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06b5b9"},"children":[{"type":"text","value":"        // do something"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3491c1"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"操作系统提供的互斥方法"},"children":[{"type":"text","value":"操作系统提供的互斥方法"}]},{"type":"element","tag":"h3","props":{"id":"cpu原子操作"},"children":[{"type":"text","value":"cpu原子操作"}]},{"type":"element","tag":"h2","props":{"id":"线程间同步"},"children":[{"type":"text","value":"线程间同步"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-06b5b9{color:#6E7781}\n.ct-053100{color:#953800}\n.ct-a0bb02{color:#0550AE}\n.ct-d3fc83{color:#8250DF}\n.ct-3dfa2a{color:#0A3069}\n.ct-3491c1{color:#24292F}\n.ct-687e35{color:#CF222E}\n.dark .ct-687e35{color:#FF7B72}\n.dark .ct-3491c1{color:#C9D1D9}\n.dark .ct-3dfa2a{color:#A5D6FF}\n.dark .ct-d3fc83{color:#D2A8FF}\n.dark .ct-a0bb02{color:#79C0FF}\n.dark .ct-053100{color:#FFA657}\n.dark .ct-06b5b9{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"数据互斥","depth":2,"text":"数据互斥","children":[{"id":"关中断","depth":3,"text":"关中断"},{"id":"数学互斥方法","depth":3,"text":"数学互斥方法"},{"id":"操作系统提供的互斥方法","depth":3,"text":"操作系统提供的互斥方法"},{"id":"cpu原子操作","depth":3,"text":"cpu原子操作"}]},{"id":"线程间同步","depth":2,"text":"线程间同步"}]}},"_type":"markdown","_id":"content:4.interview:thread.md","_source":"content","_file":"4.interview/thread.md","_extension":"md"},{"_path":"/notes/_dir","_dir":"notes","_draft":false,"_partial":true,"_locale":"","title":"NOTES","icon":"charm:notes-tick","_id":"content:5.notes:_dir.yml","_type":"yaml","_source":"content","_file":"5.notes/_dir.yml","_extension":"yml"},{"_path":"/notes","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Guide","description":"学无止境\n学习笔记","icon":"twemoji:newspaper","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"学无止境"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n学习笔记"}]},{"type":"element","tag":"h2","props":{"id":"todo"},"children":[{"type":"text","value":"todo"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"makefile"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"cmake"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"todo","depth":2,"text":"todo"}]}},"_type":"markdown","_id":"content:5.notes:0.index.md","_source":"content","_file":"5.notes/0.index.md","_extension":"md"},{"_path":"/notes/intro","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Intro","description":"","icon":"twemoji:card-file-box","body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此网站的一些指南和疑问"}]}]},{"type":"element","tag":"h2","props":{"id":"指南"},"children":[{"type":"text","value":"指南"}]},{"type":"element","tag":"h3","props":{"id":"icon-的使用"},"children":[{"type":"text","value":"icon 的使用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接点击"},{"type":"element","tag":"a","props":{"href":"https://icones.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"此链接"}]},{"type":"element","tag":"a","props":{"href":"https://icones.js.org/collection/all","rel":["nofollow"]},"children":[{"type":"text","value":"搜索"}]},{"type":"text","value":"复制"}]},{"type":"element","tag":"h3","props":{"id":"built-in-component"},"children":[{"type":"text","value":"built-in component"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"variety of types"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"primary"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"warning"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"danger"}]}]}]},{"type":"element","tag":"h4","props":{"id":"alert"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Alert />"}]}]},{"type":"element","tag":"code","props":{"code":"::alert{type=\"info\"}\nmsg\n::\n","language":"md","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"alert"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"{type"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"info\""}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"msg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"badge"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Badge />"}]}]},{"type":"element","tag":"code","props":{"code":":badge[v1.2]\n\n:badge[Deprecated]{type=\"warning\"}\n\n::badge{type=\"danger\"}\nNot found!\n::\n","language":"md","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"badge"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"v1.2"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"badge"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"Deprecated"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]{"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"warning\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"badge"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"{type"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"danger\""}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"Not found!"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"buttonlink"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<ButtonLink />"}]}]},{"type":"element","tag":"code","props":{"code":":button-link[Play]{icon=\"IconStackBlitz\" href=\"#\" blank}\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"button-link"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"Play"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]{"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"icon"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"IconStackBlitz\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"#\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"blank"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"callout"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Callout />"}]}]},{"type":"element","tag":"code","props":{"code":"::callout{type=\"warning\"}\n#summary\nThis is a callout! Click me to open.\n#content\nThis is the content of the callout.\n::\n","language":"md","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"callout"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"{type"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"warning\""}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#summary"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"This is a callout! Click me to open."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#content"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"This is the content of the callout."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"card"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Card />"}]}]},{"type":"element","tag":"code","props":{"code":"::card{icon=\"logos:nuxt-icon\"}\n#title\nNuxt Architecture.\n#description\nBased on **Nuxt 3** and **Nuxt Content**. :br\nUse Nuxt to build a static site, or a serverless app.\n::\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"card"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"{icon"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"logos:nuxt-icon\""}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#title"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"Nuxt Architecture."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#description"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"Based on "}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"**Nuxt 3**"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" and "}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"**Nuxt Content**"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":". :"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"br"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"Use Nuxt to build a static site, or a serverless app."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"cardgrid"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<CardGrid />"}]}]},{"type":"element","tag":"code","props":{"code":"::card-grid\n#title\nWhat's included\n#root\n:ellipsis\n#default\n    ::card\n    #title\n    Nuxt Architecture.\n    #description\n    Harness the full power of Nuxt and the Nuxt ecosystem.\n    ::\n    ::card\n    #title\n    Vue Components.\n    #description\n    Use built-in components (or your own!) inside your content.\n    ::\n    ::card\n    #title\n    Write Markdown.\n    #description\n    Enjoy the ease and simplicity of Markdown and discover MDC syntax.\n    ::\n::\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"card-grid"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#title"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"What's included"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"ellipsis"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#default"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"card"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#title"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Nuxt Architecture."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    #description"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Harness the full power of Nuxt and the Nuxt ecosystem."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"card"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#title"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Vue Components."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    #description"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Use built-in components (or your own!) inside your content."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"card"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"#title"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Write Markdown."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    #description"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    Enjoy the ease and simplicity of Markdown and discover MDC syntax."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ::"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"codegroup"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<CodeGroup />"}]}]},{"type":"element","tag":"code","props":{"code":"::code-group\n    ```bash [Yarn]\n    yarn add docus\n    ```\n    ```bash [NPM]\n    npm install docus\n    ```\n::\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"code-group"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ```bash ["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"Yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    yarn add docus"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ```"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ```bash ["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"NPM"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    npm install docus"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"    ```"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"icon"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Icon />"}]}]},{"type":"element","tag":"code","props":{"code":":icon{name=\"logos:nuxt-icon\"}\n:icon{name=\"logos:vue\"}\n:icon{name=\"logos:nuxt-icon\"}\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"icon"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"{name=\"logos:nuxt-icon\"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"icon"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"{name=\"logos:vue\"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"icon"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"{name=\"logos:nuxt-icon\"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"list"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<List />"}]}]},{"type":"element","tag":"code","props":{"code":"::list{type=\"primary\"}\n- **Important**\n- Always\n::\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"{type"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"\"primary\""}]},{"type":"element","tag":"span","props":{"class":"ct-b9648a"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"**Important**"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" Always"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"terminal"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<Terminal />"}]}]},{"type":"element","tag":"code","props":{"code":":terminal{content=\"nuxi build\"}\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"terminal"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"{content=\"nuxi build\"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"videoplayer"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<VideoPlayer />"}]}]},{"type":"element","tag":"code","props":{"code":"::div\n:video-player{src=\"https://www.youtube.com/watch?v=o9e12WbKrd8\"}\n::\n","filename":"Code","language":"md","meta":"[Code]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"div"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"video-player"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"{src=\"https://www.youtube.com/watch?v=o9e12WbKrd8\"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"::"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"component"},"children":[{"type":"text","value":"component"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":component_name"}]},{"type":"text","value":" in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"content/"}]},{"type":"text","value":" *.md, as"}]},{"type":"element","tag":"code","props":{"code":":component_name\nor\n<component_name />\n","language":"md","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-af03c4"},"children":[{"type":"text","value":"component_name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"<component_name />"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"about component name ("},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/components#component-names","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]},{"type":"text","value":")"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have a component in nested directories such as:"}]},{"type":"element","tag":"code","props":{"code":"| components/\n--| base/\n----| foo/\n------| Button.vue\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-275115"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"components/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-275115"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"base/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"----"}]},{"type":"element","tag":"span","props":{"class":"ct-275115"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"foo/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"------"}]},{"type":"element","tag":"span","props":{"class":"ct-275115"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"Button.vue"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"... then the component's name will be based on its own path directory and filename, with duplicate segments being removed. Therefore, the component's name will be:"}]},{"type":"element","tag":"code","props":{"code":"<BaseFooButton />\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-63de5d"},"children":[{"type":"text","value":"BaseFooButton"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" />"}]}]}]}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For clarity, we recommend that the component's filename matches its name. (So, in the example above, you could rename "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Button.vue"}]},{"type":"text","value":" to be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BaseFooButton.vue"}]},{"type":"text","value":".)"}]}]},{"type":"element","tag":"h2","props":{"id":"疑问"},"children":[{"type":"text","value":"疑问"}]},{"type":"element","tag":"h3","props":{"id":"this-web-question"},"children":[{"type":"text","value":"this web question"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"插件有吗"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"搜索🔍是否需要重新申请"}]}]},{"type":"element","tag":"h3","props":{"id":"found-this-webs-bug"},"children":[{"type":"text","value":"found this web's bug"}]},{"type":"element","tag":"list","props":{"type":"danger"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网站似乎非常卡顿，。。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"目录过长时，目录没有滚动条"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不支持以中文名命名的 markdown"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"markdown 写在下方的链接不受支持"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nono  是下面这样的不支持"}]}]},{"type":"element","tag":"code","props":{"code":"- [link] not supported  \n- [link][link] supported\n\n[link]: draugus.github.io\n","language":"md","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"] not supported  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-937a72"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"] supported"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-3d08d8"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-1fc82d"},"children":[{"type":"text","value":"]: draugus.github.io"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"是否可以隐藏文件不在列表里显示 (这个算是 feature 吧)"}]}]}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"del","props":{},"children":[{"type":"text","value":"markdown 多级列表不支持"}]},{"type":"text","value":" 现在支持了"}]}]}]},{"type":"element","tag":"h2","props":{"id":"test"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-63de5d{color:#82071E}\n.ct-275115{color:#CF222E}\n.ct-937a72{color:#953800}\n.ct-3d08d8{color:#0A3069}\n.ct-b9648a{color:#0550AE}\n.ct-af03c4{color:#116329}\n.ct-1fc82d{color:#24292F}\n.dark .ct-1fc82d{color:#C9D1D9}\n.dark .ct-af03c4{color:#7EE787}\n.dark .ct-b9648a{color:#79C0FF}\n.dark .ct-3d08d8{color:#A5D6FF}\n.dark .ct-937a72{color:#FFA657}\n.dark .ct-275115{color:#FF7B72}\n.dark .ct-63de5d{color:#FFA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"指南","depth":2,"text":"指南","children":[{"id":"icon-的使用","depth":3,"text":"icon 的使用"},{"id":"built-in-component","depth":3,"text":"built-in component"},{"id":"component","depth":3,"text":"component"}]},{"id":"疑问","depth":2,"text":"疑问","children":[{"id":"this-web-question","depth":3,"text":"this web question"},{"id":"found-this-webs-bug","depth":3,"text":"found this web's bug"}]},{"id":"test","depth":2,"text":"test"}]}},"_type":"markdown","_id":"content:5.notes:1.intro.md","_source":"content","_file":"5.notes/1.intro.md","_extension":"md"},{"_path":"/notes/algolia","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Algolia","description":"","icon":"logos:algolia","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"apply"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docsearch.algolia.com/apply/","rel":["nofollow"]},"children":[{"type":"text","value":"go"}]}]},{"type":"element","tag":"h2","props":{"id":"algolia-crawler"},"children":[{"type":"element","tag":"a","props":{"href":"https://crawler.algolia.com/admin/crawlers/","rel":["nofollow"]},"children":[{"type":"text","value":"Algolia Crawler"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"apply","depth":2,"text":"apply"},{"id":"algolia-crawler","depth":2,"text":"Algolia Crawler"}]}},"_type":"markdown","_id":"content:5.notes:algolia.md","_source":"content","_file":"5.notes/algolia.md","_extension":"md"},{"_path":"/notes/cmakelists","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"CMakeLists","description":"","icon":"vscode-icons:file-type-cmake","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"基本语法"},"children":[{"type":"text","value":"基本语法"}]},{"type":"element","tag":"h3","props":{"id":"变量"},"children":[{"type":"text","value":"变量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用set命令显式定义及赋值，在非if语句中，使用${}引用，if中直接使用变量名引用；后续的set命令会清理变量原来的值；"}]},{"type":"element","tag":"code","props":{"code":"command (args ...) # 命令不分大小写，参数使用空格分隔，使用双引号引起参数中空格\nset(var a;b;c) <=> set(var a b c) # 定义变量var并赋值为a;b;c这样一个string list\nAdd_executable(${var}) <=> Add_executable(a b c) # 变量使用${xxx}引用\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (args ...) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 命令不分大小写，参数使用空格分隔，使用双引号引起参数中空格"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(var a;b;c) <=> set(var a b c) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 定义变量var并赋值为a;b;c这样一个string list"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"Add_executable"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${var}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":") <=> Add_executable(a b c) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 变量使用${xxx}引用"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"条件语句"},"children":[{"type":"text","value":"条件语句"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"逻辑值"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"常量值"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"1、ON、YES、TRUE、Y、非0数字"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"0、OFF、NO、FALSE、N、IGNORE、NOTFOUNT、空字符串、-NOTFOUND结尾字符串"}]}]}]}]},{"type":"element","tag":"code","props":{"code":"if(var)\n#...\nelse()/elseif()\n#...\nendif(var)\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(var)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"()/elseif()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"endif"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(var)"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# 逻辑运算\nif(NOT <condition>) # 非运算\nif(<cond1> AND <cond2>) # 与运算\nif(<cond1> OR <cond2>) #或运算\nif((condition) AND (condition OR (condition))) # 有括号时，先计算括号的逻辑值\n\n# 存在性判断\nif(COMMAND command-name) # true 给定参数是可调用的命令、宏、函数时\nif(POLICY policy-id) # true 给定的策略存在时\nif(TARGET target-name) # true 给定的目标参数是通过add_executable()、add_library() 或 add_custom_target() 命令创建并存在的\nif(TEST test-name) # true 给定参数是通过add_test()创建并存在的\nif(DEFINED <name>|CACHE{<name>}|ENV{<name>}) # true 如果变量、缓存、环境变量存在（其取值无关）\nif(<variable|string> IN_LIST <variable>) # true 如果<variable|string>存在于列表变量<variable>中\n\n# 文件判断\n# 以下路径参数可以为相对路径或绝对路径，相对是指相对于当前执行cmake的路径。\nif(EXISTS path-to-file-or-directory) # true 如果文件/目录存在，当参数是连接时表示连接指向的实体存在。\nif(file1 IS_NEWER_THAN file2) # true file1比file2新\nif(IS_DIRECTORY path-to-directory) # true 如果参数是目录\nif(IS_SYMLINK file-name)# true 如果参数是一个链接\nif(IS_ABSOLUTE path) # true 如果参数是绝对路径\n\n# 比较\n# 正则匹配\nif(<variable|string> MATCHES regex)\n# 数字比较\nif(<variable|string> LESS <variable|string>)       # <\nif(<variable|string> GREATER <variable|string>)     # >\nif(<variable|string> EQUAL <variable|string>)      # ==\nif(<variable|string> LESS_EQUAL <variable|string>)   # <=\nif(<variable|string> GREATER_EQUAL <variable|string>) # >=\n# 字符串比较\nif(<variable|string> STRLESS <variable|string>)       # <\nif(<variable|string> STRGREATER <variable|string>)     # >\nif(<variable|string> STREQUAL <variable|string>)      # ==\nif(<variable|string> STRLESS_EQUAL <variable|string>)   # <=\nif(<variable|string> STRGREATER_EQUAL <variable|string>) # >=\n# 版本号比较\nif(<variable|string> VERSION_LESS <variable|string>)       # <\nif(<variable|string> VERSION_GREATER <variable|string>)     # >\nif(<variable|string> VERSION_EQUAL <variable|string>)      # ==\nif(<variable|string> VERSION_LESS_EQUAL <variable|string>)   # <=\nif(<variable|string> VERSION_GREATER_EQUAL <variable|string>) # >=\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 逻辑运算"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"NOT"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <condition>) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 非运算"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<cond1> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"AND"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <cond2>) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 与运算"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<cond1> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"OR"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <cond2>) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#或运算"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"((condition) "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"AND"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (condition "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"OR"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (condition))) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 有括号时，先计算括号的逻辑值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 存在性判断"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 给定参数是可调用的命令、宏、函数时"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"POLICY"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"policy"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-id) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 给定的策略存在时"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"TARGET"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 给定的目标参数是通过add_executable()、add_library() 或 add_custom_target() 命令创建并存在的"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"TEST"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 给定参数是通过add_test()创建并存在的"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"DEFINED"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"CACHE"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"{<"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">}|ENV{<"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">}) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果变量、缓存、环境变量存在（其取值无关）"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IN_LIST"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable>) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果<variable|string>存在于列表变量<variable>中"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 文件判断"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 以下路径参数可以为相对路径或绝对路径，相对是指相对于当前执行cmake的路径。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"EXISTS"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-to-file-"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-directory) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果文件/目录存在，当参数是连接时表示连接指向的实体存在。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(file1 "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IS_NEWER_THAN"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" file2) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true file1比file2新"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IS_DIRECTORY"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"-to-directory) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果参数是目录"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IS_SYMLINK"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" file-"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果参数是一个链接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IS_ABSOLUTE"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# true 如果参数是绝对路径"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 比较"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 正则匹配"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"MATCHES"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" regex)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 数字比较"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"LESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)       "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"GREATER"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)     "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)      "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# =="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"LESS_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)   "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"GREATER_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 字符串比较"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STRLESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)       "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STRGREATER"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)     "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STREQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)      "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# =="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STRLESS_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)   "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STRGREATER_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# 版本号比较"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"VERSION_LESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)       "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"VERSION_GREATER"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)     "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"VERSION_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)      "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# =="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> VERSION_LESS_EQUAL <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">)   "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# <="}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"VERSION_GREATER_EQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" <variable|"}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":">) "}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"# >="}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"循环语句"},"children":[{"type":"text","value":"循环语句"}]},{"type":"element","tag":"code","props":{"code":"Set(VAR a b c)\nForeach(f ${VAR})\n#...\nEndforeach(f)\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(VAR a b c)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"Foreach"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(f "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${VAR}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"Endforeach"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(f)"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"WHILE()\n#...\nENDWHILE()\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"WHILE"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ENDWHILE"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"others"},"children":[{"type":"text","value":"others"}]},{"type":"element","tag":"h3","props":{"id":"导入库文件"},"children":[{"type":"text","value":"导入库文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要添加的内容包括"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.库文件搜索路径: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"link_directories"}]},{"type":"text","value":"(输入你的MinGW中的lib文件夹的完整路径，不用引号)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.需要添加的库名称： 这里我用到的库是ws2_32库文件，因此添加的内容是：link_libraries(ws2_32)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上内容需要添加在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_executable"}]},{"type":"text","value":"前。 在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_executable"}]},{"type":"text","value":"后加上"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"target_link_libraries(\"执行名称\"空格库名)"}]},{"type":"text","value":"\n即"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"target_link_libraries(YOUR_PROJECT ws2_32)"}]}]},{"type":"element","tag":"h3","props":{"id":"一个示例"},"children":[{"type":"text","value":"一个示例"}]},{"type":"element","tag":"code","props":{"code":"set(LINK_DIR /usr/lib2/libnet-1.2-rc3/src/.libs)\nset(LINK_DIR2 /usr/lib2/libpcap-1.0.0)\nset(PRO simple_network_sniffer)\n#1.cmake verson，指定cmake版本\ncmake_minimum_required(VERSION 3.2)\n\n#2.project name，指定项目的名称，一般和项目的文件夹名称对应\nPROJECT(${PRO})\n\n#3.head file path，头文件目录\nINCLUDE_DIRECTORIES(\n        ../include\n)\nlink_directories(${LINK_DIR}\n        ${LINK_DIR2})\nlink_libraries(net pcap)\n\n#4.source directory，源文件目录\nAUX_SOURCE_DIRECTORY(../src DIR_SRCS)\n\n#5.set environment variable，设置环境变量，编译用到的源文件全部都要放到这里，否则编译能够通过，但是执行的时候会出现各种问题，比如\"symbol lookup error xxxxx , undefined symbol\"\n#SET(TEST_MATH ${DIR_SRCS})\n\n#6.add executable file，添加要编译的可执行文件\nADD_EXECUTABLE(${PRO} ${DIR_SRCS})\n\n#7.add link library，添加可执行文件所需要的库，比如我们用到了libm.so（命名规则：lib+name+.so），就添加该库的名称\nTARGET_LINK_LIBRARIES(${PRO} net pcap)\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(LINK_DIR /usr/lib2/libnet-1.2-rc3/src/.libs)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(LINK_DIR2 /usr/lib2/libpcap-1.0.0)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(PRO simple_network_sniffer)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#1.cmake verson，指定cmake版本"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"cmake_minimum_required"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ee42db"},"children":[{"type":"text","value":"VERSION"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" 3.2)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#2.project name，指定项目的名称，一般和项目的文件夹名称对应"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"PROJECT"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${PRO}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#3.head file path，头文件目录"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"INCLUDE_DIRECTORIES"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"        ../include"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"link_directories"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${LINK_DIR}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${LINK_DIR2}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"link_libraries"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(net pcap)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#4.source directory，源文件目录"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"AUX_SOURCE_DIRECTORY"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(../src DIR_SRCS)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#5.set environment variable，设置环境变量，编译用到的源文件全部都要放到这里，否则编译能够通过，但是执行的时候会出现各种问题，比如\"symbol lookup error xxxxx , undefined symbol\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#SET(TEST_MATH ${DIR_SRCS})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#6.add executable file，添加要编译的可执行文件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ADD_EXECUTABLE"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${PRO}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${DIR_SRCS}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#7.add link library，添加可执行文件所需要的库，比如我们用到了libm.so（命名规则：lib+name+.so），就添加该库的名称"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"TARGET_LINK_LIBRARIES"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"${PRO}"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" net pcap)"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"内部变量"},"children":[{"type":"text","value":"内部变量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CMAKE_C_COMPILER"}]},{"type":"text","value":"：指定C编译器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CMAKE_CXX_COMPILER"}]},{"type":"text","value":"："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CMAKE_C_FLAGS"}]},{"type":"text","value":"：编译C文件时的选项，如-g；也可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_definitions"}]},{"type":"text","value":"添加编译选项"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EXECUTABLE_OUTPUT_PATH"}]},{"type":"text","value":"：可执行文件的存放路径"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LIBRARY_OUTPUT_PATH"}]},{"type":"text","value":"：库文件路径"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CMAKE_BUILD_TYPE"}]},{"type":"text","value":"：build类型(Debug, Release, ...)，CMAKE_BUILD_TYPE=Debug"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"BUILD_SHARED_LIBS"}]},{"type":"text","value":"：Switch between shared and static libraries"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内置变量的使用："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在CMakeLists.txt中指定，使用set"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cmake命令中使用，如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake -DBUILD_SHARED_LIBS=OFF"}]}]}]},{"type":"element","tag":"h2","props":{"id":"命令"},"children":[{"type":"text","value":"命令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"project(HELLO)#指定项目名称，生成的VC项目的名称；"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用${HELLO_SOURCE_DIR}表示项目根目录"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"include_directories：指定头文件的搜索路径，相当于指定gcc的-I参数"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"include_directories (${HELLO_SOURCE_DIR}/Hello)#增加Hello为include目录"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"link_directories：动态链接库或静态链接库的搜索路径，相当于gcc的-L参数"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"link_directories (${HELLO_BINARY_DIR}/Hello)#增加Hello为link目录"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_subdirectory：包含子目录"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_subdirectory (Hello)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_executable：编译可执行程序，指定编译，好像也可以添加.o文件"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_executable (helloDemo demo.cxx demo_b.cxx)#将cxx编译成可执行文件——"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_definitions：添加编译参数"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_definitions(-DDEBUG)将在gcc命令行添加DEBUG宏定义；"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_definitions( “-Wall -ansi –pedantic –g”)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"target_link_libraries：添加链接库,相同于指定-l参数"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"target_link_libraries(demo Hello) #将可执行文件与Hello连接成最终文件demo"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_library:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_library(Hello hello.cxx)#将hello.cxx编译成静态库如libHello.a"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add_custom_target:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"message( status|fatal_error, “message”):"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"set_target_properties( ... ): lots of properties... OUTPUT_NAME, VERSION, ...."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"link_libraries( lib1 lib2 ...): All targets link with the same set of libs"}]},{"type":"element","tag":"h3","props":{"id":"注意"},"children":[{"type":"text","value":"注意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"CMAKE生成的makefile能够处理好.h文件更改时只编译需要的cpp文件"}]},{"type":"element","tag":"h2","props":{"id":"faq"},"children":[{"type":"text","value":"FAQ"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1）怎样获得一个目录下的所有源文件"}]},{"type":"element","tag":"code","props":{"code":"aux_source_directory(<dir> <variable>)\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"aux_source_directory"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(<dir> <variable>)"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将dir中所有源文件（不包括头文件）保存到变量variable中，然后可以add_executable (ss7gw ${variable})这样使用。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2）怎样指定项目编译目标"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"project"}]},{"type":"text","value":"命令指定"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3）怎样添加动态库和静态库"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"target_link_libraries"}]},{"type":"text","value":"命令添加即可"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4）怎样在执行CMAKE时打印消息"}]},{"type":"element","tag":"code","props":{"code":"message([SEND_ERROR | STATUS | FATAL_ERROR] \"message to display\" ...)\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"([SEND_ERROR | STATUS | FATAL_ERROR] "}]},{"type":"element","tag":"span","props":{"class":"ct-418494"},"children":[{"type":"text","value":"\"message to display\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" ...)"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意大小写"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"5）怎样指定头文件与库文件路径"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"include_directories"}]},{"type":"text","value":"与"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"link_directories"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以多次调用以设置多个路径"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"link_directories"}]},{"type":"text","value":"仅对其后面的targets起作用"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"6）怎样区分debug、release版本"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建立debug/release两目录，分别在其中执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake -DCMAKE_BUILD_TYPE=Debug"}]},{"type":"text","value":"("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake -DCMAKE_BUILD_TYPE=Release"}]},{"type":"text","value":")\n，需要编译不同版本时进入不同目录执行make即可；"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Debug版会使用参数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-g"}]},{"type":"text","value":"；Release版使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O3 –DNDEBUG"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"另一种设置方法——例如DEBUG版设置编译参数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DDEBUG"}]}]}]},{"type":"element","tag":"code","props":{"code":"IF (DEBUG_mode)\n    add_definitions(-DDEBUG)\nENDIF ()\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (DEBUG_mode)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"    add_definitions"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(-DDEBUG)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ENDIF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" ()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在执行cmake时增加参数即可，例如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake -D DEBUG_mode=ON"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"7）怎样设置条件编译"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如debug版设置编译选项DEBUG，并且更改不应改变CMakelists.txt"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用option command，eg："}]}]},{"type":"element","tag":"code","props":{"code":"option(DEBUG_mode \"ON for debug or OFF for release\" ON)\nIF (DEBUG_mode)\n    add_definitions(-DDEBUG)\nENDIF ()\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"option"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(DEBUG_mode "}]},{"type":"element","tag":"span","props":{"class":"ct-418494"},"children":[{"type":"text","value":"\"ON for debug or OFF for release\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ON"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (DEBUG_mode)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"    add_definitions"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(-DDEBUG)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ENDIF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" ()"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使其生效的方法：首先cmake生成makefile，然后make edit_cache编辑编译选项；Linux下会打开一个文本框，可以更改，该完后再make生成目标文件——emacs不支持make edit_cache；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"局限"}]},{"type":"text","value":"：这种方法不能直接设置生成的makefile，而是必须使用命令在make前设置参数；对于debug、release版本，相当于需要两个目录，分别先cmake一次，然后分别make edit_cache一次；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"期望的效果"}]},{"type":"text","value":"：在执行cmake时直接通过参数指定一个开关项，生成相应的makefile——可以这样做，例如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake –DDEBUGVERSION=ON"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"8）怎样添加编译宏定义"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_definitions"}]},{"type":"text","value":"命令，见命令部分说明"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"9）怎样添加编译依赖项 用于确保编译目标项目前依赖项必须先构建好"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"add_dependencies"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"10）怎样指定目标文件目录"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建立一个新的目录，在该目录中执行cmake生成Makefile文件，这样编译结果会保存在该目录——类似"}]}]},{"type":"element","tag":"code","props":{"code":"SET_TARGET_PROPERTIES(ss7gw PROPERTIES\n        RUNTIME_OUTPUT_DIRECTORY \"${BIN_DIR}\")\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"SET_TARGET_PROPERTIES"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(ss7gw PROPERTIES"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d97ce6"},"children":[{"type":"text","value":"RUNTIME_OUTPUT_DIRECTORY"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-418494"},"children":[{"type":"text","value":"\"${BIN_DIR}\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"11）很多文件夹，难道需要把每个文件夹编译成一个库文件？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以不在子目录中使用CMakeList.txt，直接在上层目录中指定子目录"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"12）怎样设定依赖的cmake版本"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmake_minimum_required(VERSION 2.6)"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"13）相对路径怎么指定"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"${projectname_SOURCE_DIR}"}]},{"type":"text","value":"表示根源文件目录，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"${projectname_BINARY_DIR}"}]},{"type":"text","value":"表示根二进制文件目录？"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"14）怎样设置编译中间文件的目录"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TBD"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"15）怎样在IF语句中使用字串或数字比较"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数字比较"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LESS、GREATER、EQUAL"}]},{"type":"text","value":"，字串比较"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"STRLESS、STRGREATER、STREQUAL"}]},{"type":"text","value":"，"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Eg："}]}]},{"type":"element","tag":"code","props":{"code":"set(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS ON)\nset(AAA abc)\nIF (AAA STREQUAL abc)\n    message(STATUS \"true\")#应该打印true\nENDIF ()\n","language":"cmake","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ON"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(AAA abc)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"IF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" (AAA "}]},{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"STREQUAL"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" abc)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"    message"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":"(STATUS "}]},{"type":"element","tag":"span","props":{"class":"ct-418494"},"children":[{"type":"text","value":"\"true\""}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-c7348a"},"children":[{"type":"text","value":"#应该打印true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-64b625"},"children":[{"type":"text","value":"ENDIF"}]},{"type":"element","tag":"span","props":{"class":"ct-ea81d3"},"children":[{"type":"text","value":" ()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"16）更改h文件时是否只编译必须的cpp文件"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"是"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"17）机器上安装了VC7和VC8，CMAKE会自动搜索编译器，但是怎样指定某个版本？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TBD"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"18）怎样根据OS指定编译选项"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"IF( APPLE ); IF( UNIX ); IF( WIN32 )"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"19）能否自动执行某些编译前、后命令？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以，TBD"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"20）怎样打印make的输出"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"make VERBOSE=1"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d97ce6{color:#953800}\n.ct-418494{color:#0A3069}\n.ct-ee42db{color:#0550AE}\n.ct-c7348a{color:#6E7781}\n.ct-ea81d3{color:#24292F}\n.ct-64b625{color:#CF222E}\n.dark .ct-64b625{color:#FF7B72}\n.dark .ct-ea81d3{color:#C9D1D9}\n.dark .ct-c7348a{color:#8B949E}\n.dark .ct-ee42db{color:#79C0FF}\n.dark .ct-418494{color:#A5D6FF}\n.dark .ct-d97ce6{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"基本语法","depth":2,"text":"基本语法","children":[{"id":"变量","depth":3,"text":"变量"},{"id":"条件语句","depth":3,"text":"条件语句"},{"id":"循环语句","depth":3,"text":"循环语句"}]},{"id":"others","depth":2,"text":"others","children":[{"id":"导入库文件","depth":3,"text":"导入库文件"},{"id":"一个示例","depth":3,"text":"一个示例"}]},{"id":"内部变量","depth":2,"text":"内部变量"},{"id":"命令","depth":2,"text":"命令","children":[{"id":"注意","depth":3,"text":"注意"}]},{"id":"faq","depth":2,"text":"FAQ"}]}},"_type":"markdown","_id":"content:5.notes:CMakeLists.md","_source":"content","_file":"5.notes/CMakeLists.md","_extension":"md"},{"_path":"/notes/compile","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Compile","description":"","icon":"fluent-emoji-flat:person-running-light","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"compile"},"children":[{"type":"text","value":"Compile"}]},{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h3","props":{"id":"make1-no-rule-to-make-target"},"children":[{"type":"text","value":"make"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":": *** No rule to make target"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"清除之前生成的 build"}]},{"type":"element","tag":"h3","props":{"id":"can-not-be-used-when-making-a-shared-object"},"children":[{"type":"text","value":"can not be used when making a shared object"}]},{"type":"element","tag":"code","props":{"code":"/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/7/crtbeginT.o: relocation R_X86_64_32 against hidden symbol `__TMC_END__' can not be used when making a shared object\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"/usr/bin/ld:"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"/usr/lib/gcc/x86_64-linux-gnu/"}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"/crtbeginT.o:"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"relocation"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"R_X86_64_32"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"against"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"hidden"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"symbol"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"__TMC_END__'"}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":" can not be used when making a shared object"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"configure-error-c-compiler-cannot-create-executables"},"children":[{"type":"text","value":"configure: error: C compiler cannot create executables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 x64 位机器上编译 x86 位程序时，报错 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"configure: error: C compiler cannot create executables"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"# 确认主机内核为 x64 输出 amd64\ndpkg --print-architecture \n# 确认打开了多架构支持 输出 i386\ndpkg --print-foreign-architectures\n# 若没有\ndpkg --add-architecture i386 && apt-get update\n# 安装 gcc multilib\napt-get install  gcc-multilib g++-multilib \n# 编译加上 -m32\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 确认主机内核为 x64 输出 amd64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--print-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 确认打开了多架构支持 输出 i386"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--print-foreign-architectures"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 若没有"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--add-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"i386"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"update"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 安装 gcc multilib"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"gcc-multilib"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"g++-multilib"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 编译加上 -m32"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"error-adding-symbols-dso-missing-from-command-line"},"children":[{"type":"text","value":"error adding symbols: DSO missing from command line"}]},{"type":"element","tag":"code","props":{"code":"/usr/bin/ld: build/release/objs/index_conn.o: undefined reference to symbol '_ZN5boost6system15system_categoryEv'\n//usr/lib/x86_64-linux-gnu/libboost_system.so.1.55.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [build/release/query_runner] Error 1\n","language":"txt","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/usr/bin/ld: build/release/objs/index_conn.o: undefined reference to symbol '_ZN5boost6system15system_categoryEv'\n//usr/lib/x86_64-linux-gnu/libboost_system.so.1.55.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [build/release/query_runner] Error 1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"sol: flag add "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-lboost_system"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":LDFLAGS += -L/usr/lib/boost -lboost_thread -lpthread -lboost_system"}]}]},{"type":"element","tag":"h3","props":{"id":"is-incompatible-with-i386x86-64-output"},"children":[{"type":"text","value":"is incompatible with i386:x86-64 output"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"/usr/bin/ld: i386 architecture of input file `xxx.a(log.o)' is incompatible with i386:x86-64 output"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将 xxx.a 库在当前机器上重新编译 或者 flag + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m32"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncmake "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_target_properties (your_project PROPERTIES LINK_FLAGS \"-m32\")"}]}]},{"type":"element","tag":"h3","props":{"id":"d_file_offset_bits64"},"children":[{"type":"text","value":"-D_FILE_OFFSET_BITS=64"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://digital-domain.net/largefiles.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://digital-domain.net/largefiles.html"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b0c25b{color:#6E7781}\n.ct-8eded2{color:#0550AE}\n.ct-f70cde{color:#0A3069}\n.ct-1ac6a3{color:#24292F}\n.ct-98c06d{color:#953800}\n.dark .ct-98c06d{color:#FFA657}\n.dark .ct-1ac6a3{color:#C9D1D9}\n.dark .ct-f70cde{color:#A5D6FF}\n.dark .ct-8eded2{color:#79C0FF}\n.dark .ct-b0c25b{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"qa","depth":2,"text":"QA","children":[{"id":"make1-no-rule-to-make-target","depth":3,"text":"make1: *** No rule to make target"},{"id":"can-not-be-used-when-making-a-shared-object","depth":3,"text":"can not be used when making a shared object"},{"id":"configure-error-c-compiler-cannot-create-executables","depth":3,"text":"configure: error: C compiler cannot create executables"},{"id":"error-adding-symbols-dso-missing-from-command-line","depth":3,"text":"error adding symbols: DSO missing from command line"},{"id":"is-incompatible-with-i386x86-64-output","depth":3,"text":"is incompatible with i386:x86-64 output"},{"id":"d_file_offset_bits64","depth":3,"text":"-D_FILE_OFFSET_BITS=64"}]}]}},"_type":"markdown","_id":"content:5.notes:compile.md","_source":"content","_file":"5.notes/compile.md","_extension":"md"},{"_path":"/notes/docker","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Docker","description":"","icon":"logos:docker-icon","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"docker"},"children":[{"type":"text","value":"Docker"}]},{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"h3","props":{"id":"ubuntu"},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/engine/install/ubuntu/#prerequisites","rel":["nofollow"]},"children":[{"type":"text","value":"ubuntu"}]}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\nsudo docker run hello-world\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/keyrings"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"https://download.docker.com/linux/ubuntu/gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"--dearmor"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/keyrings/docker.gpg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"\"deb [arch=$("}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"--print-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":") signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"  $("}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"lsb_release"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-cs"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":") stable\""}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/sources.list.d/docker.list"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/dev/null"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"update"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-ce-cli"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"containerd.io"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-compose-plugin"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"hello-world"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"debian"},"children":[{"type":"text","value":"debian"}]},{"type":"element","tag":"code","props":{"code":"sudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\nsudo apt-get update  \nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/keyrings"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"https://download.docker.com/linux/debian/gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"--dearmor"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/keyrings/docker.gpg"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"\"deb [arch=$("}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"--print-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":") signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"  $("}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"lsb_release"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-cs"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":") stable\""}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/etc/apt/sources.list.d/docker.list"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/dev/null"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-ce"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-ce-cli"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"containerd.io"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"docker-compose-plugin"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"build"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当你使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker build"}]},{"type":"text","value":" 命令构建镜像时，镜像会被保存在你本地电脑上的 Docker 镜像仓库中。通常，这个仓库位于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/var/lib/docker"}]},{"type":"text","value":" 目录中。要查看镜像仓库中所有的镜像，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker images"}]},{"type":"text","value":" 命令。如果你想要查看镜像的详细信息，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker inspect"}]},{"type":"text","value":" 命令。"}]},{"type":"element","tag":"code","props":{"code":"docker image build .\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样操作的 REPOSITORY TAG 都为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<none>"}]},{"type":"text","value":" 使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker tag"}]}]},{"type":"element","tag":"code","props":{"code":"docker tag <image> <tag>\ndocker tag <your_image name or id> <tag>\ndocker tag my-img my-repo:my-tag\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"tag"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"imag"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"ta"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"tag"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"your_image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"d"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"ta"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"tag"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my-img"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my-repo:my-tag"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dockerfile_name 可以在同一项目里放置多个 dockerfile"}]},{"type":"element","tag":"code","props":{"code":"docker build -t my_image -f dockerfile_name .\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my_image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"dockerfile_name"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"."}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"run"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"运行 docker："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动 docker 服务："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sudo service docker start"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进入 docker 终端："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker run -it [image_name] /bin/bash"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 docker 里运行命令："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 docker 终端中输入命令，按下回车执行。例如："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls"}]},{"type":"text","value":" 查看当前目录文件列表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"也可以在运行 docker 时指定要执行的命令，例如："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker run [image_name] ls"}]},{"type":"text","value":" 查看当前目录文件列表。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"退出 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exit"}]},{"type":"text","value":" / "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl + D"}]}]},{"type":"element","tag":"h2","props":{"id":"exec"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在运行的容器中执行命令"}]},{"type":"element","tag":"code","props":{"code":"docker exec [OPTIONS] CONTAINER COMMAND [ARG...]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" [OPTIONS] "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"CONTAINER"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" [ARG...]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"OPTIONS说明"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":": 分离模式: 在后台运行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":": 即使没有附加也保持STDIN 打开"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-t"}]},{"type":"text","value":": 分配一个伪终端"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"e.g."}]},{"type":"element","tag":"code","props":{"code":"docker exec -it container_id /bin/bash\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-it"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"container_id"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"/bin/bash"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"save"},"children":[{"type":"text","value":"save"}]},{"type":"element","tag":"code","props":{"code":"# 在 Linux 上将 Docker image my_image 打包为 tar 文件 my_image.tar\ndocker save my_image > my_image.tar\n\n# 将 tar 文件复制到本地\nscp my_image.tar user@localhost:~/\n\n# 将 tar 文件导入到本地的 Docker 中\ndocker load < my_image.tar\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 在 Linux 上将 Docker image my_image 打包为 tar 文件 my_image.tar"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"save"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my_image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my_image.tar"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 将 tar 文件复制到本地"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"scp"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my_image.tar"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"user@localhost:~/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 将 tar 文件导入到本地的 Docker 中"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"my_image.tar"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"multi-stage"},"children":[{"type":"text","value":"multi-stage"}]},{"type":"element","tag":"h3","props":{"id":"参数传递"},"children":[{"type":"text","value":"参数传递"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ARG 声明传入的参数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"FROM 分隔了不同的构建阶段"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不同构建阶段必须先声明 ARG 后才能使用"}]}]}]},{"type":"element","tag":"code","props":{"code":"ARG COMMIT_ID\nARG APP_VERSION\n\n# stage 1\nFROM augus/basin-env:latest AS stage-compile\n\nARG COMMIT_ID\n\nENV WORK_PATH /augus\n\nWORKDIR ${WORK_PATH}\nRUN ${WORK_PATH}/a.sh ${COMMIT_ID}\n\n\n# stage 2\nFROM debian:latest AS stage-runtime\n\nARG COMMIT_ID\nARG APP_VERSION\n\nENV WORK_PATH /augus\nENV PROJECT_NAME \"AUGUS\"\nENV PROJECT_SYS_TYPE \"Linux_x86_64\"\nENV RELEASE ${PROJECT_NAME}_v${APP_VERSION}_${PROJECT_SYS_TYPE}_${COMMIT_ID}.deb\n\nRUN echo ${RELEASE}\n\nWORKDIR ${WORK_PATH}\nCOPY --from=stage-compile ${WORK_PATH}/${RELEASE} .\n","filename":"e.g.","language":"docker","meta":"[e.g.]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ARG"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" COMMIT_ID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ARG"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" APP_VERSION"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# stage 1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" augus/basin-env:latest "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"AS"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" stage-compile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ARG"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" COMMIT_ID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" WORK_PATH /augus"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"WORKDIR"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" ${WORK_PATH}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" ${WORK_PATH}/a.sh ${COMMIT_ID}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# stage 2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" debian:latest "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"AS"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" stage-runtime"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ARG"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" COMMIT_ID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ARG"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" APP_VERSION"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" WORK_PATH /augus"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" PROJECT_NAME "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"\"AUGUS\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" PROJECT_SYS_TYPE "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"\"Linux_x86_64\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" RELEASE ${PROJECT_NAME}_v${APP_VERSION}_${PROJECT_SYS_TYPE}_${COMMIT_ID}.deb"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" echo ${RELEASE}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"WORKDIR"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" ${WORK_PATH}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" --from=stage-compile ${WORK_PATH}/${RELEASE} ."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--build-arg KEY=\"VAL\""}]},{"type":"text","value":" 传入参数"}]},{"type":"element","tag":"h3","props":{"id":"指定阶段"},"children":[{"type":"text","value":"指定阶段"}]},{"type":"element","tag":"code","props":{"code":"docker build --target stage-runtime -t augus/test:runtime .\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"--target"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"stage-runtime"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"augus/test:runtime"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"."}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"阶段内引用"},"children":[{"type":"text","value":"阶段内引用"}]},{"type":"element","tag":"code","props":{"code":"FROM debian:latest AS base\n# ...\nFROM base AS derive\n# ...\nFROM derive AS son\n# ...\n","language":"docker","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" debian:latest "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"AS"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" base"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" base "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"AS"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" derive"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" derive "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"AS"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" son"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# ..."}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"check-docker"},"children":[{"type":"text","value":"check docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"初始化判断docker中某镜像是否存在"}]},{"type":"element","tag":"code","props":{"code":"CON=`docker image ls 'augus:latest' | wc -l`\nif [ $CON -eq 2 ]  #CON取值为2表示镜像存在，为1镜像不存在\nthen\ndocker rmi augus  #镜像存在时remove\nfi\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"CON"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" image ls 'augus:latest' "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"wc"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" [ $CON "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"-eq"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" ]  "}]},{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"#CON取值为2表示镜像存在，为1镜像不存在"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"rmi"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"augus "}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"#镜像存在时remove"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"fi"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"cp"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"h3","props":{"id":"dockerfile-内互相拷贝"},"children":[{"type":"text","value":"dockerfile 内互相拷贝"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参考上面的 e.g."}]},{"type":"element","tag":"h3","props":{"id":"一个docker里的文件迁移到另一个docker"},"children":[{"type":"text","value":"一个docker里的文件迁移到另一个docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要将一个Docker容器中的文件迁移到另一个Docker容器，你需要使用Docker的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cp"}]},{"type":"text","value":"命令。首先，使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker ps"}]},{"type":"text","value":"命令查看正在运行的Docker容器的ID。然后，使用以下命令将文件从源容器复制到目标容器："}]},{"type":"element","tag":"code","props":{"code":"docker cp [source_container_id]:/path/to/source/file [target_container_id]:/path/to/target/file\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" [source_container_id]:/path/to/source/file [target_container_id]:/path/to/target/file"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，如果要将一个名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"myfile.txt"}]},{"type":"text","value":"的文件从源容器"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"4fa6e0f0c67a"}]},{"type":"text","value":"复制到目标容器"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"8dbd9e392a96"}]},{"type":"text","value":"，你可以使用以下命令："}]},{"type":"element","tag":"code","props":{"code":"docker cp 4fa6e0f0c67a:/myfile.txt 8dbd9e392a96:/myfile.txt\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"4fa6e0f0c67a:/myfile.txt"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"8dbd9e392a96:/myfile.txt"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请注意，在上面的命令中，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/path/to/source/file"}]},{"type":"text","value":"和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/path/to/target/file"}]},{"type":"text","value":"都是相对于Docker容器中的根目录的路径。因此，如果文件在Docker容器中的其他目录下，你需要指定完整的路径。"}]},{"type":"element","tag":"h2","props":{"id":"第一个-docker"},"children":[{"type":"text","value":"第一个 docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要写一个 Dockerfile，需要按照以下步骤进行："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"打开一个文本编辑器，新建一个文件，并命名为“Dockerfile”（注意文件名的大小写）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在文件中输入以下内容："},{"type":"element","tag":"code","props":{"code":"# 指定基础镜像\nFROM <base image>\n# 指定维护人员的名字和电子邮件地址\nMAINTAINER <name> <email>\n# 安装需要的软件包\nRUN <command>\n# 拷贝文件到容器中\nCOPY <src> <dest>\n# 暴露容器中的端口\nEXPOSE <port>\n# 容器启动时运行的命令\nCMD <command>\n","language":"docker","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 指定基础镜像"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <base image>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 指定维护人员的名字和电子邮件地址"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"MAINTAINER"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <name> <email>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 安装需要的软件包"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <command>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 拷贝文件到容器中"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <src> <dest>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 暴露容器中的端口"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"EXPOSE"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <port>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1343a9"},"children":[{"type":"text","value":"# 容器启动时运行的命令"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"CMD"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" <command>"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据需要，修改上面各项内容的具体值。例如，如果你想基于 Ubuntu 镜像构建容器，那么 FROM 命令就应该写成：FROM ubuntu。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"保存文件，并在命令行中运行以下命令来构建镜像："},{"type":"element","tag":"code","props":{"code":"docker build -t <image name> .\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"nam"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"."}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构建完成后，就可以使用以下命令来运行容器："},{"type":"element","tag":"code","props":{"code":"docker run -d -p <host port>:<container port> <image name>\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd20f1"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"por"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"por"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"nam"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":">"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n这样就完成了一个 Dockerfile 的编写。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　需要注意的是，上面的内容是 Dockerfile 的基本结构和写法，但是实际写 Dockerfile 时还需要注意一些其他的事项。例如，你需要根据需要调整命令的执行顺序，确保每个命令都能够正常执行。此外，你还需要注意每个命令的格式，确保命令能够正确识别。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　总之，写 Dockerfile 需要注意很多细节，需要结合实际情况来进行调整和优化。如果遇到问题，可以查阅相关文档或者询问更有经验的开发人员。"}]},{"type":"element","tag":"h2","props":{"id":"docker-间通信"},"children":[{"type":"text","value":"docker 间通信"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"bridge 网络通信，不建议，此处略。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在宿主机，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ifconfig"}]},{"type":"text","value":" 查看各个 docker 的 ip。直接在 docker A 上指定 服务器 ip 访问 docker B"}]},{"type":"element","tag":"h2","props":{"id":"dockerfile"},"children":[{"type":"text","value":"dockerfile"}]},{"type":"element","tag":"h3","props":{"id":"expose"},"children":[{"type":"text","value":"EXPOSE"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"功能为暴漏容器运行时的监听端口给外部，但是EXPOSE并不会使容器访问主机的端口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果想使得容器与主机的端口有映射关系，必须在容器启动的时候加上 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-p"}]},{"type":"text","value":" 参数"}]},{"type":"element","tag":"h3","props":{"id":"volume"},"children":[{"type":"text","value":"VOLUME"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可实现挂载功能，容器告诉Docker在主机上创建一个目录(默认情况下是在/var/lib/docker),然后将其挂载到指定的路径。当删除使用该Volume的容器时,Volume本身不会受到影响,它可以一直存在下去。"}]},{"type":"element","tag":"code","props":{"code":"FROM centos\n#将该镜像的存储内容挂载到test文件夹下。这样即使删除了该镜像，再重新创建后，也不会影响数据\nVOLUME /test  \nCMD echo \"hello docker\"\n","language":"dockerfile","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FROM centos\n#将该镜像的存储内容挂载到test文件夹下。这样即使删除了该镜像，再重新创建后，也不会影响数据\nVOLUME /test  \nCMD echo \"hello docker\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"docker-会损失性能吗"},"children":[{"type":"text","value":"docker 会损失性能吗"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://dominoweb.draco.res.ibm.com/reports/rc25482.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"不会"}]}]},{"type":"element","tag":"h3","props":{"id":"debian-源加入-阿里云-的镜像源-会抛出-certificate-verification-failed"},"children":[{"type":"text","value":"debian 源加入 阿里云 的镜像源 会抛出 Certificate verification failed"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown. Could not handshake: Error in the certificate verification."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"todo"}]},{"type":"element","tag":"h3","props":{"id":"不同系统可能出现不同的问题"},"children":[{"type":"text","value":"不同系统可能出现不同的问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在一次 docker 编译 c++ 代码实践中，mac 平台出现 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Relocations in generic ELF (EM: 62)"}]},{"type":"text","value":" 异常，linux 平台可以正常编译"}]},{"type":"element","tag":"h3","props":{"id":"docker-源超时问题"},"children":[{"type":"text","value":"docker 源超时问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"加上"},{"type":"element","tag":"a","props":{"href":"./linux/sys_category#%E5%AE%98%E6%96%B9%E6%BA%90%E8%B6%85%E6%97%B6"},"children":[{"type":"text","value":"国内源"}]},{"type":"text","value":"，在 dockerfile 里导入"}]},{"type":"element","tag":"code","props":{"code":"RUN cp /etc/apt/sources.list /etc/apt/sources.list.bak\nCOPY source_aliyun /home\nRUN cat /home/source_aliyun >> /etc/apt/sources.list\nRUN apt-get update\n","language":"docker","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" cp /etc/apt/sources.list /etc/apt/sources.list.bak"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" source_aliyun /home"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" cat /home/source_aliyun >> /etc/apt/sources.list"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d5069"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" apt-get update"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果加上国内源出现"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown.  Could not handshake: Error in the certificate verification."}]},{"type":"text","value":" 可以尝试加上 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"echo 'Acquire { https::Verify-Peer false }' >>/etc/apt/apt.conf.d/99synaptic"}]}]},{"type":"element","tag":"h3","props":{"id":"error-you-dont-have-enough-free-space-in-varcacheaptarchives"},"children":[{"type":"text","value":"Error: You don't have enough free space in /var/cache/apt/archives/"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/onyx-platform/onyx-starter/issues/5#issuecomment-276562225","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://github.com/onyx-platform/onyx-starter/issues/5#issuecomment-736082622","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"code","props":{"code":"docker system prune\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46a4b2"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"system"}]},{"type":"element","tag":"span","props":{"class":"ct-3663db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d6a80"},"children":[{"type":"text","value":"prune"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"refer"},"children":[{"type":"text","value":"refer"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://yeasy.gitbook.io/docker_practice/","rel":["nofollow"]},"children":[{"type":"text","value":"Docker 从入门到实践"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://yeasy.gitbook.io/docker_practice/image/multistage-builds","rel":["nofollow"]},"children":[{"type":"text","value":"Dockerfile 多阶段构建"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/build/building/multi-stage/","rel":["nofollow"]},"children":[{"type":"text","value":"Multi-stage builds"}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1343a9{color:#6E7781}\n.ct-0d5069{color:#CF222E}\n.ct-cd20f1{color:#0550AE}\n.ct-0d6a80{color:#0A3069}\n.ct-3663db{color:#24292F}\n.ct-46a4b2{color:#953800}\n.dark .ct-46a4b2{color:#FFA657}\n.dark .ct-3663db{color:#C9D1D9}\n.dark .ct-0d6a80{color:#A5D6FF}\n.dark .ct-cd20f1{color:#79C0FF}\n.dark .ct-0d5069{color:#FF7B72}\n.dark .ct-1343a9{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install","depth":2,"text":"install","children":[{"id":"ubuntu","depth":3,"text":"ubuntu"},{"id":"debian","depth":3,"text":"debian"}]},{"id":"build","depth":2,"text":"build"},{"id":"run","depth":2,"text":"run"},{"id":"exec","depth":2,"text":"exec"},{"id":"save","depth":2,"text":"save"},{"id":"multi-stage","depth":2,"text":"multi-stage","children":[{"id":"参数传递","depth":3,"text":"参数传递"},{"id":"指定阶段","depth":3,"text":"指定阶段"},{"id":"阶段内引用","depth":3,"text":"阶段内引用"}]},{"id":"check-docker","depth":2,"text":"check docker"},{"id":"cp","depth":2,"text":"cp","children":[{"id":"dockerfile-内互相拷贝","depth":3,"text":"dockerfile 内互相拷贝"},{"id":"一个docker里的文件迁移到另一个docker","depth":3,"text":"一个docker里的文件迁移到另一个docker"}]},{"id":"第一个-docker","depth":2,"text":"第一个 docker"},{"id":"docker-间通信","depth":2,"text":"docker 间通信"},{"id":"dockerfile","depth":2,"text":"dockerfile","children":[{"id":"expose","depth":3,"text":"EXPOSE"},{"id":"volume","depth":3,"text":"VOLUME"}]},{"id":"sol","depth":2,"text":"sol","children":[{"id":"docker-会损失性能吗","depth":3,"text":"docker 会损失性能吗"},{"id":"debian-源加入-阿里云-的镜像源-会抛出-certificate-verification-failed","depth":3,"text":"debian 源加入 阿里云 的镜像源 会抛出 Certificate verification failed"},{"id":"不同系统可能出现不同的问题","depth":3,"text":"不同系统可能出现不同的问题"},{"id":"docker-源超时问题","depth":3,"text":"docker 源超时问题"},{"id":"error-you-dont-have-enough-free-space-in-varcacheaptarchives","depth":3,"text":"Error: You don't have enough free space in /var/cache/apt/archives/"}]},{"id":"refer","depth":2,"text":"refer"}]}},"_type":"markdown","_id":"content:5.notes:docker.md","_source":"content","_file":"5.notes/docker.md","_extension":"md"},{"_path":"/notes/excel","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Excel","description":"","icon":"vscode-icons:file-type-excel2","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"excel"},"children":[{"type":"text","value":"Excel"}]},{"type":"element","tag":"h2","props":{"id":"从身份证中提取年龄"},"children":[{"type":"text","value":"从身份证中提取年龄"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"=YEAR(NOW())-MID(B2,7,4)"}]}]},{"type":"element","tag":"h2","props":{"id":"获取当前日期"},"children":[{"type":"text","value":"获取当前日期"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Excel 中，可以使用函数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TODAY()"}]},{"type":"text","value":" 来获取当前日期。具体使用方法如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在单元格中输入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"=TODAY()"}]},{"type":"text","value":" 并按下回车键。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Excel 会自动计算并显示当前日期。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如：如果当前日期是 2020 年 7 月 31 日，那么 Excel 会显示 7/31/2020。"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：虽然 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TODAY()"}]},{"type":"text","value":" 函数返回的是当前日期，但它并不包含时间信息。如果需要获取当前时间，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NOW()"}]},{"type":"text","value":" 函数。"}]}]},{"type":"element","tag":"h2","props":{"id":"筛选后求和"},"children":[{"type":"text","value":"筛选后求和"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SUBTOTAL(function_num,ref1,[ref2],...)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"示例，对 C3:C70 筛选后求和，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SUBTOTAL(9,C3:C70)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Function_num"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n必需。 数字 1-11 或 101-111，用于指定要为分类汇总使用的函数。 如果使用 1-11，将包括手动隐藏的行，如果使用 101-111，则排除手动隐藏的行；始终排除已筛选掉的单元格。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Function_num (包括隐藏的行)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Function_num (忽略隐藏的行)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"函数"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"101"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"AVERAGE"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"102"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"COUNT"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"103"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"COUNTA"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"104"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"MAX"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"105"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"MIN"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"106"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"PRODUCT"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"107"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"STDEV"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"108"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"STDEVP"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"109"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"SUM"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"110"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"VAR"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"111"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"VARP"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ref1"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n必需。 要对其进行分类汇总计算的第一个命名区域或引用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ref2,..."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n可选。 要对其进行分类汇总计算的第 2 个至第 254 个命名区域或引用。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"从身份证中提取年龄","depth":2,"text":"从身份证中提取年龄"},{"id":"获取当前日期","depth":2,"text":"获取当前日期"},{"id":"筛选后求和","depth":2,"text":"筛选后求和"}]}},"_type":"markdown","_id":"content:5.notes:excel.md","_source":"content","_file":"5.notes/excel.md","_extension":"md"},{"_path":"/notes/fish","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"fish","description":"","icon":"noto:fishing-pole","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"switch-to-fish-as-your-default"},"children":[{"type":"text","value":"switch to fish as your "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"default"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To change your login shell to fish:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Add the shell to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/shells"}]},{"type":"text","value":" with:"},{"type":"element","tag":"code","props":{"code":"echo /usr/local/bin/fish | sudo tee -a /etc/shells\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8849df"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57e5ba"},"children":[{"type":"text","value":"/usr/local/bin/fish"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a552"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0960ad"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57e5ba"},"children":[{"type":"text","value":"tee"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8849df"},"children":[{"type":"text","value":"-a"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57e5ba"},"children":[{"type":"text","value":"/etc/shells"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Change your default shell with:"},{"type":"element","tag":"code","props":{"code":"chsh -s /usr/local/bin/fish\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0960ad"},"children":[{"type":"text","value":"chsh"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8849df"},"children":[{"type":"text","value":"-s"}]},{"type":"element","tag":"span","props":{"class":"ct-bfff8a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57e5ba"},"children":[{"type":"text","value":"/usr/local/bin/fish"}]}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0960ad{color:#953800}\n.ct-a4a552{color:#CF222E}\n.ct-57e5ba{color:#0A3069}\n.ct-bfff8a{color:#24292F}\n.ct-8849df{color:#0550AE}\n.dark .ct-8849df{color:#79C0FF}\n.dark .ct-bfff8a{color:#C9D1D9}\n.dark .ct-57e5ba{color:#A5D6FF}\n.dark .ct-a4a552{color:#FF7B72}\n.dark .ct-0960ad{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"switch-to-fish-as-your-default","depth":2,"text":"switch to fish as your default"}]}},"_type":"markdown","_id":"content:5.notes:fish.md","_source":"content","_file":"5.notes/fish.md","_extension":"md"},{"_path":"/notes/gcc","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"gcc","description":"版本对应","icon":"twemoji:building-construction","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"gcc"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html","rel":["nofollow"]},"children":[{"type":"text","value":"版本对应"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc"}]},{"type":"text","value":" 与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"g++"}]},{"type":"text","value":" 分别是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gnu"}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"c/c++"}]},{"type":"text","value":" 编译器 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc/g++"}]},{"type":"text","value":" 在执行编译工作的时候，总共需要4步："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"预处理, 生成 .i 的文件"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"预处理器cpp"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将预处理后的文件转换成汇编语言, 生成文件 .s "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"编译器egcs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"有汇编变为目标代码(机器代码)生成 .o 的文件"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"汇编器as"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"连接目标代码, 生成可执行程序 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"链接器ld"}]}]}]},{"type":"element","tag":"h2","props":{"id":"gcc-命令的常用选项"},"children":[{"type":"text","value":"gcc 命令的常用选项"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"选项"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"解释"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-ansi"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"只支持 ANSI 标准的 C 语法。这一选项将禁止 GNU C 的某些特色， 例如 asm 或 typeof 关键词。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"只编译并生成目标文件。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-DMACRO"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"以字符串\"1\"定义 MACRO 宏。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-DMACRO=DEFN"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"以字符串\"DEFN\"定义 MACRO 宏。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-E"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"只运行 C 预编译器。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-g"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"生成调试信息。GNU 调试器可利用该信息。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-IDIRECTORY"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"指定额外的头文件搜索路径DIRECTORY。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-LDIRECTORY"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"指定额外的函数库搜索路径DIRECTORY。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-lLIBRARY"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"连接时搜索指定的函数库LIBRARY。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m486"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"针对 486 进行代码优化。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-o FILE"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"生成指定的输出文件。用在生成可执行文件时。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O0"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"不进行优化处理。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O1"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"优化生成代码。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O2"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"进一步优化。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-O3"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"比 -O2 更进一步优化，包括 inline 函数。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-shared"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"生成共享目标文件。通常用在建立共享库时。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-static"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"禁止使用共享连接。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-UMACRO"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"取消对 MACRO 宏的定义。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-w"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"不生成任何警告信息。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-Wall"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"生成所有警告信息。"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"参数详解"},"children":[{"type":"text","value":"参数详解"}]},{"type":"element","tag":"h3","props":{"id":"x-language-filename"},"children":[{"type":"text","value":"-x language filename"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设定文件所使用的语言, 使后缀名无效, 对以后的多个有效。也就是根据约定 C 语言的后缀名称是 .c 的，而 C++ 的后缀名是 .C 或者 .cpp, 如果你很个性，决定你的 C 代码文件的后缀名是 .pig 哈哈，那你就要用这个参数, 这个参数对他后面的文件名都起作用，除非到了下一个参数的使用。 可以使用的参数吗有下面的这些：'c', 'objective-c', 'c-header', 'c++', 'cpp-output', 'assembler', 与 'assembler-with-cpp'。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n看到英文，应该可以理解的。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -x c hello.pig"}]},{"type":"text","value":"\n　　"}]},{"type":"element","tag":"h3","props":{"id":"x-none-filename"},"children":[{"type":"text","value":"-x none filename"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关掉上一个选项，也就是让gcc根据文件名后缀，自动识别文件类型 。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -x c hello.pig -x none hello2.c"}]},{"type":"text","value":"\n　　"}]},{"type":"element","tag":"h3","props":{"id":"c"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只激活预处理,编译,和汇编,也就是他只把程序做成obj文件"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -c hello.c"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n他将生成 .o 的 obj 文件"}]},{"type":"element","tag":"h3","props":{"id":"s"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只激活预处理和编译，就是指把文件编译成为汇编代码。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -S hello.c"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n他将生成 .s 的汇编代码，你可以用文本编辑器察看。"}]},{"type":"element","tag":"h3","props":{"id":"e"},"children":[{"type":"text","value":"-E"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只激活预处理,这个不生成文件, 你需要把它重定向到一个输出文件里面。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -E hello.c > pianoapan.txt"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -E hello.c | more"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n慢慢看吧, 一个 hello word 也要与处理成800行的代码。"}]},{"type":"element","tag":"h3","props":{"id":"o"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"制定目标名称, 默认的时候, gcc 编译出来的文件是 a.out, 很难听, 如果你和我有同感，改掉它, 哈哈。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:"}]},{"type":"element","tag":"code","props":{"code":"gcc -o hello.exe hello.c #(哦,windows用习惯了) \n　　gcc -o hello.asm -S hello.c\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-140735"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b9904"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d63b6d"},"children":[{"type":"text","value":"hello.exe"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d63b6d"},"children":[{"type":"text","value":"hello.c"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-370925"},"children":[{"type":"text","value":"#(哦,windows用习惯了) "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":"　　"}]},{"type":"element","tag":"span","props":{"class":"ct-140735"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b9904"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d63b6d"},"children":[{"type":"text","value":"hello.asm"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b9904"},"children":[{"type":"text","value":"-S"}]},{"type":"element","tag":"span","props":{"class":"ct-1e4d5c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d63b6d"},"children":[{"type":"text","value":"hello.c"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"pipe"},"children":[{"type":"text","value":"-pipe"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n使用管道代替编译中临时文件, 在使用非 gnu 汇编工具的时候, 可能有些问题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -pipe -o hello.exe hello.c"}]}]},{"type":"element","tag":"h3","props":{"id":"ansi"},"children":[{"type":"text","value":"-ansi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关闭 gnu c中与 ansi c 不兼容的特性, 激活 ansi c 的专有特性（包括禁止一些 asm inline typeof 关键字, 以及 UNIX,vax 等预处理宏）。"}]},{"type":"element","tag":"h3","props":{"id":"fno-asm"},"children":[{"type":"text","value":"-fno-asm"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此选项实现 ansi 选项的功能的一部分，它禁止将 asm, inline 和 typeof 用作关键字。"}]},{"type":"element","tag":"h3","props":{"id":"fno-strict-prototype"},"children":[{"type":"text","value":"-fno-strict-prototype"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只对 g++ 起作用, 使用这个选项, g++ 将对不带参数的函数,都认为是没有显式的对参数的个数和类型说明,而不是没有参数。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n而 gcc 无论是否使用这个参数, 都将对没有带参数的函数, 认为城没有显式说明的类型。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"fthis-is-varialble"},"children":[{"type":"text","value":"-fthis-is-varialble"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"就是向传统 c++ 看齐, 可以使用 this 当一般变量使用。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"fcond-mismatch"},"children":[{"type":"text","value":"-fcond-mismatch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"允许条件表达式的第二和第三参数类型不匹配, 表达式的值将为 void 类型。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"funsigned-char-fno-signed-char-fsigned-char-fno-unsigned-char"},"children":[{"type":"text","value":"-funsigned-char 、-fno-signed-char、-fsigned-char 、-fno-unsigned-char"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这四个参数是对 char 类型进行设置, 决定将 char 类型设置成 unsigned char(前两个参数)或者 signed char(后两个参数)。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"include-file"},"children":[{"type":"text","value":"-include file"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"包含某个代码,简单来说,就是便以某个文件,需要另一个文件的时候,就可以用它设定,功能就相当于在代码中使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include<filename>"}]},{"type":"text","value":"。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc hello.c -include /root/pianopan.h"}]},{"type":"text","value":"\n　　"}]},{"type":"element","tag":"h3","props":{"id":"imacros-file"},"children":[{"type":"text","value":"-imacros file"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n将 file 文件的宏, 扩展到 gcc/g++ 的输入文件, 宏定义本身并不出现在输入文件中。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"dmacro"},"children":[{"type":"text","value":"-Dmacro"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相当于 C 语言中的 #define macro\n　　"}]},{"type":"element","tag":"h3","props":{"id":"dmacrodefn"},"children":[{"type":"text","value":"-Dmacro=defn"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相当于 C 语言中的 #define macro=defn\n　　"}]},{"type":"element","tag":"h3","props":{"id":"umacro"},"children":[{"type":"text","value":"-Umacro"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相当于 C 语言中的 #undef macro"}]},{"type":"element","tag":"h3","props":{"id":"undef"},"children":[{"type":"text","value":"-undef"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n取消对任何非标准宏的定义\n　　"}]},{"type":"element","tag":"h3","props":{"id":"idir"},"children":[{"type":"text","value":"-Idir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在你是用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include \"file\""}]},{"type":"text","value":" 的时候, gcc/g++ 会先在当前目录查找你所制定的头文件, 如果没有找到, 他回到默认的头文件目录找, 如果使用 -I 制定了目录,他会先在你所制定的目录查找, 然后再按常规的顺序去找。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n对于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include<file>"}]},{"type":"text","value":", gcc/g++ 会到 -I 制定的目录查找, 查找不到, 然后将到系统的默认的头文件目录查找 。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"i"},"children":[{"type":"text","value":"-I-"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n就是取消前一个参数的功能, 所以一般在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-Idir"}]},{"type":"text","value":" 之后使用。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"idirafter-dir"},"children":[{"type":"text","value":"-idirafter dir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 -I 的目录里面查找失败, 讲到这个目录里面查找。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"iprefix-prefix-iwithprefix-dir"},"children":[{"type":"text","value":"-iprefix prefix 、-iwithprefix dir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般一起使用, 当 -I 的目录查找失败, 会到 prefix+dir 下查找\n　　"}]},{"type":"element","tag":"h3","props":{"id":"nostdinc"},"children":[{"type":"text","value":"-nostdinc"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n使编译器不再系统默认的头文件目录里面找头文件, 一般和 -I 联合使用,明确限定头文件的位置。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"nostdin-c"},"children":[{"type":"text","value":"-nostdin C++"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"规定不在 g++ 指定的标准路经中搜索, 但仍在其他路径中搜索, 此选项在创 libg++ 库使用 。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"c-1"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在预处理的时候, 不删除注释信息, 一般和-E使用, 有时候分析程序，用这个很方便的。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"m"},"children":[{"type":"text","value":"-M"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"生成文件关联的信息。包含目标文件所依赖的所有源代码你可以用 gcc -M hello.c 来测试一下，很简单。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"mm"},"children":[{"type":"text","value":"-MM"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"和上面的那个一样，但是它将忽略由 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"#include<file>"}]},{"type":"text","value":" 造成的依赖关系。"}]},{"type":"element","tag":"h3","props":{"id":"md"},"children":[{"type":"text","value":"-MD"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"和-M相同，但是输出将导入到.d的文件里面"}]},{"type":"element","tag":"h3","props":{"id":"mmd"},"children":[{"type":"text","value":"-MMD"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"和 -MM 相同，但是输出将导入到 .d 的文件里面。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"waoption"},"children":[{"type":"text","value":"-Wa,option"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此选项传递 option 给汇编程序; 如果 option 中间有逗号, 就将 option 分成多个选项, 然 后传递给会汇编程序。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"wloption"},"children":[{"type":"text","value":"-Wl.option"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此选项传递 option 给连接程序; 如果 option 中间有逗号, 就将 option 分成多个选项, 然 后传递给会连接程序。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"llibrary"},"children":[{"type":"text","value":"-llibrary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"制定编译的时候使用的库"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n例子用法"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gcc -lcurses hello.c"}]},{"type":"text","value":"\n　　\n使用 ncurses 库编译程序\n　　"}]},{"type":"element","tag":"h3","props":{"id":"ldir"},"children":[{"type":"text","value":"-Ldir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n制定编译的时候，搜索库的路径。比如你自己的库，可以用它制定目录，不然编译器将只在标准库的目录找。这个dir就是目录的名称。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"o0-o1-o2-o3"},"children":[{"type":"text","value":"-O0 、-O1 、-O2 、-O3"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n编译器的优化选项的 4 个级别，-O0 表示没有优化, -O1 为默认值，-O3 优化级别最高。"}]},{"type":"element","tag":"h3","props":{"id":"g"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n只是编译器，在编译的时候，产生调试信息。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"gstabs"},"children":[{"type":"text","value":"-gstabs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n此选项以 stabs 格式声称调试信息, 但是不包括 gdb 调试信息。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"gstabs-1"},"children":[{"type":"text","value":"-gstabs+"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n此选项以 stabs 格式声称调试信息, 并且包含仅供 gdb 使用的额外调试信息。\n　　"}]},{"type":"element","tag":"h3","props":{"id":"ggdb"},"children":[{"type":"text","value":"-ggdb"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n此选项将尽可能的生成 gdb 的可以使用的调试信息。"}]},{"type":"element","tag":"h3","props":{"id":"static"},"children":[{"type":"text","value":"-static"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n此选项将禁止使用动态库，所以，编译出来的东西，一般都很大，也不需要什么动态连接库，就可以运行。"}]},{"type":"element","tag":"h3","props":{"id":"share"},"children":[{"type":"text","value":"-share"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此选项将尽量使用动态库，所以生成文件比较小，但是需要系统由动态库。"}]},{"type":"element","tag":"h3","props":{"id":"traditional"},"children":[{"type":"text","value":"-traditional"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"　　\n试图让编译器支持传统的C语言特性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GCC 是 GNU 的 C 和 C++ 编译器。实际上，GCC 能够编译三种语言：C、C++ 和 Object C（C 语言的一种面向对象扩展）。利用 gcc 命令可同时编译并连接 C 和 C++ 源程序。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果你有两个或少数几个 C 源文件，也可以方便地利用 GCC 编译、连接并生成可执行文件。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-370925{color:#6E7781}\n.ct-d63b6d{color:#0A3069}\n.ct-6b9904{color:#0550AE}\n.ct-1e4d5c{color:#24292F}\n.ct-140735{color:#953800}\n.dark .ct-140735{color:#FFA657}\n.dark .ct-1e4d5c{color:#C9D1D9}\n.dark .ct-6b9904{color:#79C0FF}\n.dark .ct-d63b6d{color:#A5D6FF}\n.dark .ct-370925{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"gcc-命令的常用选项","depth":2,"text":"gcc 命令的常用选项"},{"id":"参数详解","depth":2,"text":"参数详解","children":[{"id":"x-language-filename","depth":3,"text":"-x language filename"},{"id":"x-none-filename","depth":3,"text":"-x none filename"},{"id":"c","depth":3,"text":"-c"},{"id":"s","depth":3,"text":"-S"},{"id":"e","depth":3,"text":"-E"},{"id":"o","depth":3,"text":"-o"},{"id":"pipe","depth":3,"text":"-pipe"},{"id":"ansi","depth":3,"text":"-ansi"},{"id":"fno-asm","depth":3,"text":"-fno-asm"},{"id":"fno-strict-prototype","depth":3,"text":"-fno-strict-prototype"},{"id":"fthis-is-varialble","depth":3,"text":"-fthis-is-varialble"},{"id":"fcond-mismatch","depth":3,"text":"-fcond-mismatch"},{"id":"funsigned-char-fno-signed-char-fsigned-char-fno-unsigned-char","depth":3,"text":"-funsigned-char 、-fno-signed-char、-fsigned-char 、-fno-unsigned-char"},{"id":"include-file","depth":3,"text":"-include file"},{"id":"imacros-file","depth":3,"text":"-imacros file"},{"id":"dmacro","depth":3,"text":"-Dmacro"},{"id":"dmacrodefn","depth":3,"text":"-Dmacro=defn"},{"id":"umacro","depth":3,"text":"-Umacro"},{"id":"undef","depth":3,"text":"-undef"},{"id":"idir","depth":3,"text":"-Idir"},{"id":"i","depth":3,"text":"-I-"},{"id":"idirafter-dir","depth":3,"text":"-idirafter dir"},{"id":"iprefix-prefix-iwithprefix-dir","depth":3,"text":"-iprefix prefix 、-iwithprefix dir"},{"id":"nostdinc","depth":3,"text":"-nostdinc"},{"id":"nostdin-c","depth":3,"text":"-nostdin C++"},{"id":"c-1","depth":3,"text":"-C"},{"id":"m","depth":3,"text":"-M"},{"id":"mm","depth":3,"text":"-MM"},{"id":"md","depth":3,"text":"-MD"},{"id":"mmd","depth":3,"text":"-MMD"},{"id":"waoption","depth":3,"text":"-Wa,option"},{"id":"wloption","depth":3,"text":"-Wl.option"},{"id":"llibrary","depth":3,"text":"-llibrary"},{"id":"ldir","depth":3,"text":"-Ldir"},{"id":"o0-o1-o2-o3","depth":3,"text":"-O0 、-O1 、-O2 、-O3"},{"id":"g","depth":3,"text":"-g"},{"id":"gstabs","depth":3,"text":"-gstabs"},{"id":"gstabs-1","depth":3,"text":"-gstabs+"},{"id":"ggdb","depth":3,"text":"-ggdb"},{"id":"static","depth":3,"text":"-static"},{"id":"share","depth":3,"text":"-share"},{"id":"traditional","depth":3,"text":"-traditional"}]}]}},"_type":"markdown","_id":"content:5.notes:gcc.md","_source":"content","_file":"5.notes/gcc.md","_extension":"md"},{"_path":"/notes/git","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Git","description":"","icon":"vscode-icons:file-type-git","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"git"},"children":[{"type":"text","value":"Git"}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"could-not-access-submodule"},"children":[{"type":"text","value":"could not access submodule"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"just execute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git submodule update --init --recursive"}]}]},{"type":"element","tag":"h3","props":{"id":"git-submodule-already-exists-in-the-index"},"children":[{"type":"text","value":"git submodule: already exists in the index"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git rm -rf --cached xx/xx"}]}]},{"type":"element","tag":"h3","props":{"id":"git-del-commit"},"children":[{"type":"text","value":"git del commit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git rebase -i commitID"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git log"}]},{"type":"text","value":" found id you want to del"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"rebase then enter, edit file, change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pick"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drop"}]},{"type":"text","value":", then save"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个时候本地删除该 id 的操作已经完成 然后推送 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push --force"}]}]},{"type":"element","tag":"h3","props":{"id":"the-following-untracked-working-tree-files-would-be-overwritten-by-checkout"},"children":[{"type":"text","value":"The following untracked working tree files would be overwritten by checkout"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不知道怎么解决。但是日前，是因为把 remote 仓库 rename 了。后面是把本地仓库删了，重新拉取了。"}]},{"type":"element","tag":"h2","props":{"id":"clone"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git clone <xxx.git>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git clone --branch your_branch_or_tag <xxx.git>"}]}]},{"type":"element","tag":"h2","props":{"id":"submodule"},"children":[{"type":"text","value":"submodule"}]},{"type":"element","tag":"code","props":{"code":"git submodule add <git_url>\n# clone 时一同初始化并checkout子模块commit，且会拉取嵌套的子模块(即子模块又包含它引用的子模块)\ngit clone --recurse-submodules -j8 <url>\n# For already cloned repos, or older Git versions, use:\ngit submodule update --init --recursive\n# also \ngit pull --recurse-submodules\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submodule"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"git_ur"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"l"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# clone 时一同初始化并checkout子模块commit，且会拉取嵌套的子模块(即子模块又包含它引用的子模块)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"clone"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--recurse-submodules"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-j8"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"ur"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"l"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# For already cloned repos, or older Git versions, use:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submodule"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--init"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--recursive"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# also "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"pull"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--recurse-submodules"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"# update submodule\ncd submodule\ngit checkout <branch>\ngit pull\n# 也可以在主模块更新\ngit submodule update --remote <submoduleName>\n# 可以通过以下命令设置特定的分支\ngit config -f .gitmodules submodule.<submoduleName>.branch <branch>\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# update submodule"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submodule"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"checkout"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"pull"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# 也可以在主模块更新"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submodule"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--remote"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submoduleNam"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# 可以通过以下命令设置特定的分支"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":".gitmodules"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submodule."}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"submoduleNam"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":".branch"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"确保子模块更新"}]},{"type":"element","tag":"code","props":{"code":"# 在主模块 push 之前，检查子模块是否 push，包括嵌套子模块\ngit push --recurse-submodules=check\n# 在主模块 push 之前，自动 push 子模块，包括嵌套子模块\ngit push --recurse-submodules=on-demand\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# 在主模块 push 之前，检查子模块是否 push，包括嵌套子模块"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--recurse-submodules=check"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# 在主模块 push 之前，自动 push 子模块，包括嵌套子模块"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--recurse-submodules=on-demand"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://cloud.tencent.com/developer/article/2143377","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"h2","props":{"id":"remote"},"children":[{"type":"text","value":"remote"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote -v"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote show [remote]"}]},{"type":"text","value":" 显示某个远程仓库的信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote add [shortname] [url]"}]},{"type":"text","value":" 添加远程版本库"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push -u origin master"}]},{"type":"text","value":" push"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote rm name"}]},{"type":"text","value":"  删除远程仓库"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote rename old_name new_name"}]},{"type":"text","value":"  修改仓库名"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git remote set-url origin [new_url]"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories#changing-a-remote-repositorys-url","rel":["nofollow"]},"children":[{"type":"text","value":"修改仓库url"}]}]}]},{"type":"element","tag":"h2","props":{"id":"config"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"code","props":{"code":"git config --global user.email \"you@example.com\"\ngit config --global user.name \"Your Name\"\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--global"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"user.email"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"\"you@example.com\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"--global"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"user.name"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"\"Your Name\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"push"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"h3","props":{"id":"push-to-remote"},"children":[{"type":"text","value":"push to remote"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push <remote> <branch>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If your upstream branch is not already created, you will need to create it by running the “git push” command with the “-u” option for upstream."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push -u origin feature"}]}]},{"type":"element","tag":"h3","props":{"id":"push-b-to-anther-b"},"children":[{"type":"text","value":"push b to anther b"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push <remote> <local_branch>:<remote_name>"}]}]},{"type":"element","tag":"h2","props":{"id":"status"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git status"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-s"}]},{"type":"text","value":" 参数来获得简短的输出结果"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git status ./"}]}]},{"type":"element","tag":"h2","props":{"id":"diff"},"children":[{"type":"text","value":"diff"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"尚未缓存的改动：git diff"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git diff [file]"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git diff [first-branch]...[second-branch]"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看已缓存的改动： git diff --cached"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git diff --cached [file]"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看已缓存的与未缓存的所有改动：git diff HEAD"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"显示摘要而非整个 diff：git diff --stat"}]}]},{"type":"element","tag":"h2","props":{"id":"commit"},"children":[{"type":"text","value":"commit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git commit -m \"msg\""}]}]},{"type":"element","tag":"h3","props":{"id":"git-commit-log"},"children":[{"type":"text","value":"git commit log"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git commit -m [message]"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"-a 参数设置修改文件后不需要执行 git add 命令，直接来提交"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Commit message 的格式\n每次提交，Commit message 都包括三个部分：Header，Body 和 Footer。"}]}]},{"type":"element","tag":"code","props":{"code":"<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n","language":"markdown","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"<type>(<scope>): <subject>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"// 空一行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"<body>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"// 空一行"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"<footer>"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中，Header 是必需的，Body 和 Footer 可以省略。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不管是哪一个部分，任何一行都不得超过72个字符（或100个字符）。这是为了避免自动换行影响美观。"}]},{"type":"element","tag":"h4","props":{"id":"header"},"children":[{"type":"text","value":"Header"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Header部分只有一行，包括三个字段：type（必需）、scope（可选）和subject（必需）。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"type"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"type用于说明 commit 的类别，只允许使用下面7个标识。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"feat：新功能（feature）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"fix：修补bug"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"docs：文档（documentation）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"style： 格式（不影响代码运行的变动）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"refactor：重构（即不是新增功能，也不是修改bug的代码变动）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"test：增加测试"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"chore：构建过程或辅助工具的变动"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"如果type为feat和fix，则该 commit 将肯定出现在 Change log 之中。其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change log，建议是不要。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scope"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"subject"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"subject是 commit 目的的简短描述，不超过50个字符。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"以动词开头，使用第一人称现在时，比如change，而不是changed或changes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一个字母小写"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"结尾不加句号（.）"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"body"},"children":[{"type":"text","value":"Body"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Body 部分是对本次 commit 的详细描述，可以分成多行。"}]},{"type":"element","tag":"code","props":{"code":"More detailed explanatory text, if necessary. Wrap it to about 72 characters or so.\n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent\n","language":"text","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"More detailed explanatory text, if necessary. Wrap it to about 72 characters or so.\n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有两个注意点。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用第一人称现在时，比如使用change而不是changed或changes。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"应该说明代码变动的动机，以及与以前行为的对比。"}]}]},{"type":"element","tag":"h4","props":{"id":"footer"},"children":[{"type":"text","value":"Footer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Footer 部分只用于两种情况。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不兼容变动"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。"},{"type":"element","tag":"code","props":{"code":"BREAKING CHANGE: isolate scope bindings definition has changed.\nTo migrate the code follow the example below:\nBefore:\nscope: { myAttr: 'attribute', }\nAfter:\nscope: { myAttr: '@', }\nThe removed `inject` wasn't generaly useful for directives so there should be no code using it.\n","language":"text","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"BREAKING CHANGE: isolate scope bindings definition has changed.\nTo migrate the code follow the example below:\nBefore:\nscope: { myAttr: 'attribute', }\nAfter:\nscope: { myAttr: '@', }\nThe removed `inject` wasn't generaly useful for directives so there should be no code using it."}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关闭 Issue"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。"},{"type":"element","tag":"code","props":{"code":"Closes #234\n","language":"text","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Closes #234"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"也可以一次关闭多个 issue 。"},{"type":"element","tag":"code","props":{"code":"Closes #123, #245, #992\n","language":"text","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Closes #123, #245, #992"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"git-reset"},"children":[{"type":"text","value":"git reset"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git reset [--soft | --mixed | --hard] [HEAD]"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"--mixed 为默认，可以不用带该参数，用于重置暂存区的文件与上一次的提交(commit)保持一致，工作区文件内容保持不变。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"--soft 参数用于回退到某个版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"--hard 参数撤销工作区中所有未提交的修改内容，将暂存区与工作区都回到上一次版本，并删除之前的所有信息提交"},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"谨慎使用 –-hard 参数，它会删除回退点之前的所有信息。"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HEAD"}]},{"type":"text","value":" 说明："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD 表示当前版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD^ 上一个版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD^^ 上上一个版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"以此类推...\n可以使用 ～数字表示"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD~0 表示当前版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD~1 上一个版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HEAD^2 上上一个版本"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"以此类推..."}]}]},{"type":"element","tag":"h2","props":{"id":"git遗弃本地所有修改"},"children":[{"type":"text","value":"git遗弃本地所有修改"}]},{"type":"element","tag":"code","props":{"code":"#本地所有的修改，没有提交的，都返回到原来的状态\ngit checkout .  \n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"#本地所有的修改，没有提交的，都返回到原来的状态"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"checkout"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"  "}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"git-checkout-指定版本"},"children":[{"type":"text","value":"git checkout 指定版本"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"切换到master: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git checkout master"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下载最新代码:  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git pull"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下载head： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git checkout HEAD"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看log找到需要的版本: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git log"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据header checkout : "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git checkout XXXXXX"}]}]}]},{"type":"element","tag":"h2","props":{"id":"branch"},"children":[{"type":"text","value":"branch"}]},{"type":"element","tag":"code","props":{"code":"git checkout <existing_branch>\ngit checkout -b <new_branch>\ngit switch <existing_branch>\ngit switch -c <non_existing_branch>\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"checkout"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"existing_branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"checkout"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-b"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"new_branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"switch"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"existing_branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"switch"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"non_existing_branc"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git branch"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git branch -a"}]},{"type":"text","value":" //查看历史"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git branch -d dev"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git branch –delete dev"}]},{"type":"text","value":" //删除分支"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git push <remote-name> --delete <branch-name>"}]},{"type":"text","value":" //删除远程分支"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git checkout -b dev origin/dev"}]},{"type":"text","value":" //checkout 远程"}]}]},{"type":"element","tag":"h2","props":{"id":"git如何取消merge"},"children":[{"type":"text","value":"git如何取消merge"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们使用git merge操作合并代码但还没add时，若想取消这次合并，使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git merge --abort"}]},{"type":"text","value":"命令即可"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假如不幸已经 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git add"}]},{"type":"text","value":" 了怎么办呢？ 其实也很简单，先用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git reflog"}]},{"type":"text","value":" 指令显示历史的操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"再用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git reset --hard commit id"}]},{"type":"text","value":"就可以回退到操作之前的状态了"}]},{"type":"element","tag":"h2","props":{"id":"git-合并没有共同祖先的分支"},"children":[{"type":"text","value":"git 合并没有共同祖先的分支"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"fatal: refusing to merge unrelated histories"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git pull origin master --allow-unrelated-histories"}]}]},{"type":"element","tag":"h2","props":{"id":"linux下git免密码登录配置"},"children":[{"type":"text","value":"linux下git免密码登录配置"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://yongqing.is-programmer.com/posts/80371.html","rel":["nofollow"]},"children":[{"type":"text","value":"原链接"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用git push提交时，每次都要输入密码，次数多了，感觉挺麻烦. 如果git以ssh协议通讯，免密码可以用ssh公钥设置免登录。如果git时以https方式访问呢，该怎么办？下面方式可以解决这个问题."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编辑"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git-credentials"}]},{"type":"text","value":"文件(如果没有 键入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"touch ~/.git-credentials"}]},{"type":"text","value":")，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vi ~/.git-credentials"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文件中添加"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://{username}:{passeord}@domain"}]},{"type":"text","value":"，如果账号密码中有@符号，用40%代替"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git config --global credential.helper store"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat .gitconfig"}]},{"type":"text","value":" 出现 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"helper = store"}]},{"type":"text","value":", 再尝试git push不再需要输入密码."},{"type":"element","tag":"code","props":{"code":"cat .gitconfig\n\n[credential]\nhelper = store \n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":".gitconfig"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"[credential]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"helper"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]}]}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"better"},"children":[{"type":"text","value":"better"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key","rel":["nofollow"]},"children":[{"type":"text","value":"服务器上的 Git - 生成 SSH 公钥"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#ssh"},"children":[{"type":"text","value":"below"}]}]},{"type":"element","tag":"h2","props":{"id":"ssh"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本地存放多个 ssh"}]},{"type":"element","tag":"code","props":{"code":"# gitlab\nHost ssh1\nHostName gitlab.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/gitlab_id_rsa\n# github\nHost ssh1\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/github_id_rsa\n","filename":"~/.ssh/config","language":"bash","meta":"[~/.ssh/config]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# gitlab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"Host"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"ssh1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"HostName"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"gitlab.com"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"PreferredAuthentications"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"publickey"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"IdentityFile"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"~/.ssh/gitlab_id_rsa"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# github"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"Host"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"ssh1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"HostName"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"github.com"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"PreferredAuthentications"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"publickey"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"IdentityFile"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"~/.ssh/github_id_rsa"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"ssh-keygen -t ed25519 -C \"email@example.com\"\n# or\nssh-keygen -o -t rsa -b 4096 -C \"email@example.com\"\n# for name\nssh-keygen -o -t rsa -b 4096 -C \"email@example.com\" -f <keyname>\n# To test whether your SSH key was added correctly\nssh -T git@gitlab.com\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"ed25519"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"\"email@example.com\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"rsa"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-b"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"\"email@example.com\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# for name"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"rsa"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-b"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"4096"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"\"email@example.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"keynam"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-deb94e"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7129fb"},"children":[{"type":"text","value":"# To test whether your SSH key was added correctly"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a2eb0"},"children":[{"type":"text","value":"ssh"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-efd81e"},"children":[{"type":"text","value":"-T"}]},{"type":"element","tag":"span","props":{"class":"ct-eb0ada"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14a22c"},"children":[{"type":"text","value":"git@gitlab.com"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-efd81e{color:#0550AE}\n.ct-7129fb{color:#6E7781}\n.ct-deb94e{color:#CF222E}\n.ct-14a22c{color:#0A3069}\n.ct-eb0ada{color:#24292F}\n.ct-9a2eb0{color:#953800}\n.dark .ct-9a2eb0{color:#FFA657}\n.dark .ct-eb0ada{color:#C9D1D9}\n.dark .ct-14a22c{color:#A5D6FF}\n.dark .ct-deb94e{color:#FF7B72}\n.dark .ct-7129fb{color:#8B949E}\n.dark .ct-efd81e{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sol","depth":2,"text":"sol","children":[{"id":"could-not-access-submodule","depth":3,"text":"could not access submodule"},{"id":"git-submodule-already-exists-in-the-index","depth":3,"text":"git submodule: already exists in the index"},{"id":"git-del-commit","depth":3,"text":"git del commit"},{"id":"the-following-untracked-working-tree-files-would-be-overwritten-by-checkout","depth":3,"text":"The following untracked working tree files would be overwritten by checkout"}]},{"id":"clone","depth":2,"text":"clone"},{"id":"submodule","depth":2,"text":"submodule"},{"id":"remote","depth":2,"text":"remote"},{"id":"config","depth":2,"text":"config"},{"id":"push","depth":2,"text":"push","children":[{"id":"push-to-remote","depth":3,"text":"push to remote"},{"id":"push-b-to-anther-b","depth":3,"text":"push b to anther b"}]},{"id":"status","depth":2,"text":"status"},{"id":"diff","depth":2,"text":"diff"},{"id":"commit","depth":2,"text":"commit","children":[{"id":"git-commit-log","depth":3,"text":"git commit log"}]},{"id":"git-reset","depth":2,"text":"git reset"},{"id":"git遗弃本地所有修改","depth":2,"text":"git遗弃本地所有修改"},{"id":"git-checkout-指定版本","depth":2,"text":"git checkout 指定版本"},{"id":"branch","depth":2,"text":"branch"},{"id":"git如何取消merge","depth":2,"text":"git如何取消merge"},{"id":"git-合并没有共同祖先的分支","depth":2,"text":"git 合并没有共同祖先的分支"},{"id":"linux下git免密码登录配置","depth":2,"text":"linux下git免密码登录配置","children":[{"id":"better","depth":3,"text":"better"}]},{"id":"ssh","depth":2,"text":"ssh"},{"id":"qa","depth":2,"text":"QA"}]}},"_type":"markdown","_id":"content:5.notes:git.md","_source":"content","_file":"5.notes/git.md","_extension":"md"},{"_path":"/notes/gitalk","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"gitalk","description":"","icon":"icon-park:github-one","date":"2021-12-30T15:39:11.000Z","category":["编程"],"tag":["gitalk","评论","转载"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"gitalk评论接入教程"},"children":[{"type":"text","value":"gitalk评论接入教程"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000018072952","rel":["nofollow"]},"children":[{"type":"text","value":"转载并修改自sf"}]}]}]},{"type":"element","tag":"h2","props":{"id":"安装使用"},"children":[{"type":"text","value":"安装使用"}]},{"type":"element","tag":"h3","props":{"id":"安装-引入"},"children":[{"type":"text","value":"安装 引入"}]},{"type":"element","tag":"code","props":{"code":"<link rel=\"stylesheet\" href=\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css\">\n<script src=\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js\"></script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"rel"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"stylesheet\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"使用"},"children":[{"type":"text","value":"使用"}]},{"type":"element","tag":"h4","props":{"id":"1申请一个oauth-application"},"children":[{"type":"text","value":"1、申请一个OAuth application"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GitHub OAuth application允许程序来操作你的github账户，可以对github中仓库读写。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"申请GitHub OAuth application流程："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"打开github网站登陆后，点击右上角的用户图标，选择Settings"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在Settings页面选择Developer settings选项。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在Developer settings选择OAuth Apps,然后会在页面右边有一个New OAuth App按钮，点击这个按钮就进入到新建OAuth application页面"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在注册OAuth应用页面有如下几个参数需要填写："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application name：必填，OAuth的名字"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nHomepage URL：必填，你应用的网址，哪个网站用了Gitalk组件，就填写这个网址"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nApplication description：选填，该OAuth的说明"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAuthorization callback URL：必填，授权成功后回调网址，跟Homepage URL参数保持一致就好"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这些参数在注册成功后是可以修改。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数填好后，点"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Register application"}]},{"type":"text","value":"按钮即可完成注册。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注册成功后会自动跳转到这个OAuth应用的页面，或者在Developer settings选择OAuth Apps后就能看见你创建的OAuth应用名字，点击它进入这个OAuth应用的页面："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"找到 clientID clientSecret 后面会用到。"}]},{"type":"element","tag":"h4","props":{"id":"2首先需要在html文件中添加一个容器gitalk组件会在此处显示"},"children":[{"type":"text","value":"2、首先需要在html文件中添加一个容器，Gitalk组件会在此处显示"}]},{"type":"element","tag":"code","props":{"code":"<div id=\"gitalk-container\"></div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"gitalk-container\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"3使用下面的javascript代码来生成gitalk评论"},"children":[{"type":"text","value":"3、使用下面的JavaScript代码来生成Gitalk评论"}]},{"type":"element","tag":"code","props":{"code":"const initGitalk = () => {\n    const gitalk = new Gitalk({\n        clientID: \"5301328d56cf49a6d68e\",\n        clientSecret: \"dd04918e1a0267bc6eeaf27c1f7c9cc65832db57\",\n        repo: \"draugus.github.io\",\n        owner: \"draugus\",\n        admin: [\"draugus\"],\n        id: \"{{page.title}}\",\n        language: \"zh-CN\",\n        perPage: 10,\n        distractionFreeMode: false,\n        pagerDirection: \"last\",\n        createIssueManually: false\n        // updateCountCallback: commentCount\n    });\n\n    gitalk.render(\"gitalk-container\");\n};\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"initGitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"gitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"Gitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        clientID: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"5301328d56cf49a6d68e\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        clientSecret: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"dd04918e1a0267bc6eeaf27c1f7c9cc65832db57\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        repo: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus.github.io\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        owner: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        admin: ["}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        id: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"{{page.title}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        language: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"zh-CN\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        perPage: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        distractionFreeMode: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        pagerDirection: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"last\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        createIssueManually: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4dbc84"},"children":[{"type":"text","value":"// updateCountCallback: commentCount"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    gitalk."}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"render"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"gitalk-container\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数说明"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clientID"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，申请的OAuth App的Client ID"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clientSecret"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，申请的OAuth App的Client Secret"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"repo"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，github上的仓库名字，用于存放Gitalk评论"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"owner"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，github仓库的所有者的名字"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"admin"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：数组(元素是字符串)，必填，github仓库的所有者和合作者 (对这个 repository 有写权限的用户)"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，选填，页面的唯一标识。长度必须小于50。此参数用于评论和页面对应的标识，如果想让两个页面用一个评论，可设置两个页面的id一样。默认值：location.href(页面URL)"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"title"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，选填，GitHub issue 的标题，默认值：document.title(HTML中title标签中的值)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配置好会显示如下"},{"type":"element","tag":"a","props":{"href":"https://gitalk.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"效果"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"/gitalk.png"},"children":[]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4dbc84{color:#6E7781}\n.ct-4fb149{color:#8250DF}\n.ct-16c33e{color:#CF222E}\n.ct-dc339f{color:#0A3069}\n.ct-f0e639{color:#0550AE}\n.ct-ccf02e{color:#116329}\n.ct-c43d44{color:#24292F}\n.dark .ct-c43d44{color:#C9D1D9}\n.dark .ct-ccf02e{color:#7EE787}\n.dark .ct-f0e639{color:#79C0FF}\n.dark .ct-dc339f{color:#A5D6FF}\n.dark .ct-16c33e{color:#FF7B72}\n.dark .ct-4fb149{color:#D2A8FF}\n.dark .ct-4dbc84{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"安装使用","depth":2,"text":"安装使用","children":[{"id":"安装-引入","depth":3,"text":"安装 引入"},{"id":"使用","depth":3,"text":"使用"}]}]}},"_type":"markdown","_id":"content:5.notes:gitalk.md","_source":"content","_file":"5.notes/gitalk.md","_extension":"md"},{"_path":"/notes/github","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"GitHub","description":"","icon":"logos:github-octocat","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"github"},"children":[{"type":"text","value":"GitHub"}]},{"type":"element","tag":"h2","props":{"id":"hub"},"children":[{"type":"element","tag":"a","props":{"href":"https://hub.github.com/","rel":["nofollow"]},"children":[{"type":"text","value":"hub"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自动建仓"}]},{"type":"element","tag":"code","props":{"code":"hub create [-poc] [-d <DESCRIPTION>] [-h <HOMEPAGE>] [<ORGANIZATION>/<NAME>]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-964ec3"},"children":[{"type":"text","value":"hub"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" [-poc] [-d "}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"DESCRIPTION"}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"] [-h "}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"HOMEPAGE"}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"] ["}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"ORGANIZATION"}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"clone-private-repo"},"children":[{"type":"text","value":"clone private repo"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"github clone private repo, clone submodule private repo"}]},{"type":"element","tag":"code","props":{"code":"uses: actions/checkout@v3\nwith:\n  submodules: recursive\n  token: '${{ secrets.KEY }}'\n","language":"yaml","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"actions/checkout@v3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"submodules"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"recursive"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"'${{ secrets.KEY }}'"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"generate-ssh"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"generate ssh"}]}]},{"type":"element","tag":"code","props":{"code":"ssh-keygen -t ed25519 -C \"your_email@example.com\"\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-964ec3"},"children":[{"type":"text","value":"ssh-keygen"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5ebcd0"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"ed25519"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5ebcd0"},"children":[{"type":"text","value":"-C"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"\"your_email@example.com\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"github-action"},"children":[{"type":"text","value":"GitHub Action"}]},{"type":"element","tag":"h3","props":{"id":"create-pull-request"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/marketplace/actions/create-pull-request","rel":["nofollow"]},"children":[{"type":"text","value":"Create Pull Request"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GitHub Action"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"try it by "},{"type":"element","tag":"a","props":{"href":"https://github.com/peter-evans/create-pull-request/blob/main/docs/examples.md#keep-a-branch-up-to-date-with-another","rel":["nofollow"]},"children":[{"type":"text","value":"documents"}]}]},{"type":"element","tag":"code","props":{"code":"name: Create production promotion pull request\non:\n  push:\n    branches:\n      - main\njobs:\n  productionPromotion:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n        with:\n          ref: production\n      - name: Reset promotion branch\n        run: |\n          git fetch origin main:main\n          git reset --hard main\n      - name: Create Pull Request\n        uses: peter-evans/create-pull-request@v4\n        with:\n          branch: production-promotion\n","language":"yaml","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"Create production promotion pull request"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ebcd0"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"main"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"jobs"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"productionPromotion"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"runs-on"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"ubuntu-latest"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"actions/checkout@v3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"production"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"Reset promotion branch"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-abad8c"},"children":[{"type":"text","value":"|"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"          git fetch origin main:main"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"          git reset --hard main"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"Create Pull Request"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"peter-evans/create-pull-request@v4"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"branch"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"production-promotion"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是并没有生效，就更换了其他的 ci。"}]},{"type":"element","tag":"h3","props":{"id":"github-pull-request-action"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/marketplace/actions/github-pull-request-action","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub Pull Request Action"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://fluxcd.io/docs/use-cases/gh-actions-auto-pr/","rel":["nofollow"]},"children":[{"type":"text","value":"docs"}]}]},{"type":"element","tag":"code","props":{"code":"# ./.github/workflows/staging-auto-pr.yaml\nname: Staging Auto-PR\non:\n  push:\n    branches: [staging]\n\njobs:\n  pull-request:\n    name: Open PR to main\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n        name: checkout\n\n      - uses: repo-sync/pull-request@v2\n        name: pull-request\n        with:\n          destination_branch: main\n          pr_title: 'Pulling ${{ github.ref }} into main'\n          pr_body: '👑 *An automated PR*'\n          pr_reviewer: kingdonb\n          pr_draft: true\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n","language":"yaml","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7caebb"},"children":[{"type":"text","value":"# ./.github/workflows/staging-auto-pr.yaml"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"Staging Auto-PR"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ebcd0"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"staging"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"jobs"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"pull-request"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"Open PR to main"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"runs-on"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"ubuntu-latest"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"actions/checkout@v2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"checkout"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"repo-sync/pull-request@v2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"pull-request"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"destination_branch"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"main"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"pr_title"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"'Pulling ${{ github.ref }} into main'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"pr_body"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"'👑 *An automated PR*'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"pr_reviewer"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"kingdonb"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"pr_draft"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5ebcd0"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-dde66f"},"children":[{"type":"text","value":"github_token"}]},{"type":"element","tag":"span","props":{"class":"ct-45ead5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ea1760"},"children":[{"type":"text","value":"${{ secrets.GITHUB_TOKEN }}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也即本网站的"},{"type":"element","tag":"a","props":{"href":"https://github.com/DrAugus/draugus.github.io/blob/master/.github/workflows/autopr.yml","rel":["nofollow"]},"children":[{"type":"text","value":"最终方案"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7caebb{color:#6E7781}\n.ct-5ebcd0{color:#0550AE}\n.ct-dde66f{color:#116329}\n.ct-abad8c{color:#CF222E}\n.ct-ea1760{color:#0A3069}\n.ct-45ead5{color:#24292F}\n.ct-964ec3{color:#953800}\n.dark .ct-964ec3{color:#FFA657}\n.dark .ct-45ead5{color:#C9D1D9}\n.dark .ct-ea1760{color:#A5D6FF}\n.dark .ct-abad8c{color:#FF7B72}\n.dark .ct-dde66f{color:#7EE787}\n.dark .ct-5ebcd0{color:#79C0FF}\n.dark .ct-7caebb{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"hub","depth":2,"text":"hub"},{"id":"clone-private-repo","depth":2,"text":"clone private repo"},{"id":"generate-ssh","depth":2,"text":"generate ssh"},{"id":"github-action","depth":2,"text":"GitHub Action","children":[{"id":"create-pull-request","depth":3,"text":"Create Pull Request"},{"id":"github-pull-request-action","depth":3,"text":"GitHub Pull Request Action"}]}]}},"_type":"markdown","_id":"content:5.notes:github.md","_source":"content","_file":"5.notes/github.md","_extension":"md"},{"_path":"/notes/gitlab","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Gitlab","description":"","icon":"logos:gitlab","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"gitlab"},"children":[{"type":"text","value":"Gitlab"}]},{"type":"element","tag":"h2","props":{"id":"web-ide"},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.gitlab.com/ee/user/shortcuts.html#web-ide","rel":["nofollow"]},"children":[{"type":"text","value":"web ide"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"hotkeys"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"find command + F (win ctrl+F)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"replace command + option + F (win ctrl+F)"}]}]},{"type":"element","tag":"h2","props":{"id":"auto-create-repo"},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.gitlab.com/ee/user/project/index.html#create-a-new-project-with-git-push","rel":["nofollow"]},"children":[{"type":"text","value":"auto create repo"}]}]},{"type":"element","tag":"code","props":{"code":"cd your_project\ngit init\ngit add .\ngit push --set-upstream git@gitlab.example.com:namespace/myproject.git master\n# git push --set-upstream https://gitlab.example.com/namespace/myproject.git master\ngit remote add origin https://gitlab.example.com/namespace/myproject.git\n# got remote: The private project namespace/myproject was created.\n# then done\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c6f0e"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"your_project"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8c983"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"init"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8c983"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8c983"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c6f0e"},"children":[{"type":"text","value":"--set-upstream"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"git@gitlab.example.com:namespace/myproject.git"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"master"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3b2e34"},"children":[{"type":"text","value":"# git push --set-upstream https://gitlab.example.com/namespace/myproject.git master"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8c983"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"remote"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc2ab"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c14a70"},"children":[{"type":"text","value":"https://gitlab.example.com/namespace/myproject.git"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3b2e34"},"children":[{"type":"text","value":"# got remote: The private project namespace/myproject was created."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3b2e34"},"children":[{"type":"text","value":"# then done"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3b2e34{color:#6E7781}\n.ct-a8c983{color:#953800}\n.ct-c14a70{color:#0A3069}\n.ct-ebc2ab{color:#24292F}\n.ct-6c6f0e{color:#0550AE}\n.dark .ct-6c6f0e{color:#79C0FF}\n.dark .ct-ebc2ab{color:#C9D1D9}\n.dark .ct-c14a70{color:#A5D6FF}\n.dark .ct-a8c983{color:#FFA657}\n.dark .ct-3b2e34{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"web-ide","depth":2,"text":"web ide"},{"id":"auto-create-repo","depth":2,"text":"auto create repo"}]}},"_type":"markdown","_id":"content:5.notes:gitlab.md","_source":"content","_file":"5.notes/gitlab.md","_extension":"md"},{"_path":"/notes/jenkins","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Jenkins","description":"","icon":"vscode-icons:file-type-jenkins","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jenkins"},"children":[{"type":"text","value":"Jenkins"}]},{"type":"element","tag":"h2","props":{"id":"pipeline"},"children":[{"type":"text","value":"pipeline"}]},{"type":"element","tag":"h2","props":{"id":"matrix"},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jenkins.io/doc/book/pipeline/syntax/#declarative-matrix","rel":["nofollow"]},"children":[{"type":"text","value":"matrix"}]}]},{"type":"element","tag":"code","props":{"code":"stage(\"compile-all\") {\n    when {\n        anyOf {\n            branch 'dev'\n            branch 'release'\n            branch 'master'\n        }\n    }\n    failFast false\n    \n    matrix {\n        axes {\n            axis {\n                name \"MODULE_NAME\"\n                values \"module1\", \"module2\"\n            }                 \n        }\n        stages {\n            stage(\"compile\") {\n                steps {\n                    container('docker') {\n                        echo \"build-${MODULE_NAME}\"\n                        script {}\n                    }\n                }\n            }\n        }\n    }\n}\n","language":"jenkinsfile","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"stage(\"compile-all\") {\n    when {\n        anyOf {\n            branch 'dev'\n            branch 'release'\n            branch 'master'\n        }\n    }\n    failFast false\n    \n    matrix {\n        axes {\n            axis {\n                name \"MODULE_NAME\"\n                values \"module1\", \"module2\"\n            }                 \n        }\n        stages {\n            stage(\"compile\") {\n                steps {\n                    container('docker') {\n                        echo \"build-${MODULE_NAME}\"\n                        script {}\n                    }\n                }\n            }\n        }\n    }\n}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"use-method"},"children":[{"type":"text","value":"use method"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Jenkins pipeline 中，可以使用 Groovy 语言定义函数，然后在 pipeline 中调用该函数。定义函数的方式如下："}]},{"type":"element","tag":"code","props":{"code":"def myFunc(name) {\n    println \"Hello ${name}, welcome to Jenkins Pipeline!\"\n}\n","language":"groovy","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2938be"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e909b"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-915d09"},"children":[{"type":"text","value":"println"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\"Hello "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":", welcome to Jenkins Pipeline!\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后可以在 pipeline 中调用该函数："}]},{"type":"element","tag":"code","props":{"code":"myFunc('John')\n","language":"groovy","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"myFunc("}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"'John'"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也可以通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@Library"}]},{"type":"text","value":" 注解，将函数放入类中，然后在 pipeline 中调用："}]},{"type":"element","tag":"code","props":{"code":"@Library('my-lib@master')\nclass MyLib {\n    def myFunc(name) {\n        println \"Hello ${name}, welcome to Jenkins Pipeline!\"\n    }\n}\n\n// call the function\nMyLib.myFunc('John')\n","language":"groovy","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"@Library"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"'my-lib@master'"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e909b"},"children":[{"type":"text","value":"MyLib"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2938be"},"children":[{"type":"text","value":"myFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e909b"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-915d09"},"children":[{"type":"text","value":"println"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\"Hello "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":", welcome to Jenkins Pipeline!\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-62414c"},"children":[{"type":"text","value":"// call the function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce9751"},"children":[{"type":"text","value":"MyLib."}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"myFunc("}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"'John'"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"curl"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"h4","props":{"id":"async-curl"},"children":[{"type":"text","value":"async curl"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Jenkins Pipeline 中使用 curl 异步发送 HTTP 请求非常容易。首先，您需要安装 curl 插件，然后使用sh 'curl'命令来发送请求。例如："}]},{"type":"element","tag":"code","props":{"code":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                sh 'curl http://example.com'\n            }\n        }\n    }\n}\n","language":"jenkinsfile","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                sh 'curl http://example.com'\n            }\n        }\n    }\n}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，如果您需要在 Pipeline 中等待远程请求的响应，则可以利用 Jenkins 内置的 waitUntil 方法，如下所示："}]},{"type":"element","tag":"code","props":{"code":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                script {\n                    def response = sh(returnStdout: true, script: 'curl http://example.com')\n                    waitUntil { response == 'expected response' }\n                }\n            }\n        }\n    }\n}\n","language":"jenkinsfile","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                script {\n                    def response = sh(returnStdout: true, script: 'curl http://example.com')\n                    waitUntil { response == 'expected response' }\n                }\n            }\n        }\n    }\n}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，您还可以使用 Jenkins 的 HTTP Request 插件，它提供了一种更加可靠和易于使用的方式来发送和管理 HTTP 请求，如下所示："}]},{"type":"element","tag":"code","props":{"code":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                httpRequest url: 'http://example.com'\n            }\n        }\n    }\n}\n","language":"jenkinsfile","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pipeline {\n    agent any\n    stages {\n        stage('Request') {\n            steps {\n                httpRequest url: 'http://example.com'\n            }\n        }\n    }\n}"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"refer:"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jenkins.io/doc/book/pipeline/docker/","rel":["nofollow"]},"children":[{"type":"text","value":"Using Docker with Pipeline"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jenkins.io/doc/book/pipeline/jenkinsfile/","rel":["nofollow"]},"children":[{"type":"text","value":"Using a Jenkinsfile"}]}]}]}]},{"type":"element","tag":"code","props":{"code":"curl -d '{\"msgtype\": \"text\",\"text\": {\"content\":\"'\"$JOB_NAME\"': 镜像构建成功'\"${BASIN_IMAGE}, ${DEPS_IMAGE}\"'，已推送至镜像仓库\"}, \"at\": { \"atMobiles\": [\"'\"$OWNER_PHONE\"'\"] }}' \\ \n    -H 'Content-Type: application/json' \"$DINGTALK_URL\"\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e909b"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915d09"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"'{\"msgtype\": \"text\",\"text\": {\"content\":\"'\""}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"$JOB_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\"': 镜像构建成功'\"${BASIN_IMAGE}, ${DEPS_IMAGE}\"'，已推送至镜像仓库\"}, \"at\": { \"atMobiles\": [\"'\""}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"$OWNER_PHONE"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\"'\"] }}'"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-915d09"},"children":[{"type":"text","value":"\\ "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e909b"},"children":[{"type":"text","value":"-H"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"'Content-Type: application/json'"}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-8ca7a0"},"children":[{"type":"text","value":"$DINGTALK_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-c208ea"},"children":[{"type":"text","value":"\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-62414c{color:#6E7781}\n.ct-c208ea{color:#0A3069}\n.ct-915d09{color:#0550AE}\n.ct-0e909b{color:#953800}\n.ct-2938be{color:#8250DF}\n.ct-8ca7a0{color:#24292F}\n.ct-ce9751{color:#CF222E}\n.dark .ct-ce9751{color:#FF7B72}\n.dark .ct-8ca7a0{color:#C9D1D9}\n.dark .ct-2938be{color:#D2A8FF}\n.dark .ct-0e909b{color:#FFA657}\n.dark .ct-915d09{color:#79C0FF}\n.dark .ct-c208ea{color:#A5D6FF}\n.dark .ct-62414c{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"pipeline","depth":2,"text":"pipeline"},{"id":"matrix","depth":2,"text":"matrix","children":[{"id":"use-method","depth":3,"text":"use method"},{"id":"curl","depth":3,"text":"curl"}]}]}},"_type":"markdown","_id":"content:5.notes:Jenkins.md","_source":"content","_file":"5.notes/Jenkins.md","_extension":"md"},{"_path":"/notes/jetbrains","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"JetBrains","description":"","icon":"logos:jetbrains","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"hotkeys"},"children":[{"type":"text","value":"hotkeys"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"ctrl"}]},{"type":"text","value":"+"},{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"z"}]},{"type":"text","value":"撤回代码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"ctrl"}]},{"type":"text","value":"+"},{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"shift"}]},{"type":"text","value":"+"},{"type":"element","tag":"kbd","props":{},"children":[{"type":"text","value":"z"}]},{"type":"text","value":"恢复撤回代码"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"hotkeys","depth":2,"text":"hotkeys"}]}},"_type":"markdown","_id":"content:5.notes:jetbrains.md","_source":"content","_file":"5.notes/jetbrains.md","_extension":"md"},{"_path":"/notes/linux/_dir","_dir":"linux","_draft":false,"_partial":true,"_locale":"","title":"Linux","icon":"logos:linux-tux","_id":"content:5.notes:linux:_dir.yml","_type":"yaml","_source":"content","_file":"5.notes/linux/_dir.yml","_extension":"yml"},{"_path":"/notes/linux/command","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"cmd","description":"system base info","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"cmd"},"children":[{"type":"text","value":"cmd"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./sys_base_info"},"children":[{"type":"text","value":"system base info"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uname"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uname -a"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uname -m"}]}]},{"type":"element","tag":"h2","props":{"id":"ls"},"children":[{"type":"text","value":"ls"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"list directory contents, 用于显示指定工作目录下之内容(列出目前工作目录所含之文件及子目录)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls [-alrtAFR] [name...]"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-a 显示所有文件及目录 (. 开头的隐藏文件也会列出)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-r 将文件以相反次序显示(原定依英文字母次序)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-t 将文件依建立时间之先后次序列出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-A 同 -a ，但不列出 \".\" (目前目录) 及 \"..\" (父目录)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-F 在列出的文件名称后加一符号；例如可执行档则加 \"*\", 目录则加 \"/\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-R 若目录下有文件，则以下之文件亦皆依序列出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls -ll"}]},{"type":"text","value":" 会显示成字节大小"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls- lh"}]},{"type":"text","value":" 会以 KB、MB 等为单位进行显示，这样比较直观一些"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls -lt"}]},{"type":"text","value":" 时间最近的在前面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ls -ltr"}]},{"type":"text","value":" 时间从前到后"}]}]},{"type":"element","tag":"h2","props":{"id":"cut"},"children":[{"type":"text","value":"cut"}]},{"type":"element","tag":"code","props":{"code":"cut [-bn] [file]\ncut [-c] [file]\ncut [-df] [file]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cut"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-bn] [file]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cut"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-c] [file]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cut"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-df] [file]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n如果不指定 File 参数，cut 命令将读取标准输入。必须指定 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" 标志之一。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":" ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-n"}]},{"type":"text","value":" 标志。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":" ：以字符为单位进行分割。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" ：自定义分隔符，默认为制表符。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" ：与"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":"一起使用，指定显示哪个区域。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-n"}]},{"type":"text","value":" ：取消分割多字节字符。仅和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":" 标志一起使用。如果字符的最后一个字节落在由 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":" 标志的 List 参数指示的范围之内，该字符将被写出；否则，该字符将被排除"}]}]},{"type":"element","tag":"h2","props":{"id":"du"},"children":[{"type":"text","value":"du"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"disk usage"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"du [-abcDhHklmsSx][-L <符号连接>][-X <文件>][--block-size][--exclude=<目录或文件>][--max-depth=<目录层数>][--help][--version][目录或文件]"}]},{"type":"text","value":"\n参数说明"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-all"}]},{"type":"text","value":" 显示目录中个别文件的大小。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-bytes"}]},{"type":"text","value":" 显示目录或文件大小时，以byte为单位。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--total"}]},{"type":"text","value":" 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-D"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--dereference-args"}]},{"type":"text","value":" 显示指定符号连接的源文件大小。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-h"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--human-readable"}]},{"type":"text","value":" 以K，M，G为单位，提高信息的可读性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-H"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--si"}]},{"type":"text","value":"与-h参数相同，但是K，M，G是以1000为换算单位。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-k"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--kilobytes"}]},{"type":"text","value":"以1024 bytes为单位。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-l"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--count-links"}]},{"type":"text","value":"重复计算硬件连接的文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-L<符号连接>"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--dereference<符号连接>"}]},{"type":"text","value":"显示选项中所指定符号连接的源文件大小。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--megabytes"}]},{"type":"text","value":"以1MB为单位。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-s"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--summarize"}]},{"type":"text","value":"仅显示总计。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-S"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--separate-dirs"}]},{"type":"text","value":"显示个别目录的大小时，并不含其子目录的大小。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-x"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--one-file-xystem"}]},{"type":"text","value":"以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-X<文件>"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--exclude-from=<文件>"}]},{"type":"text","value":"在<文件>指定目录或文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--exclude=<目录或文件>"}]},{"type":"text","value":" 略过指定的目录或文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--max-depth=<目录层数>"}]},{"type":"text","value":" 超过指定层数的目录后，予以忽略。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--help"}]},{"type":"text","value":" 显示帮助。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--version"}]},{"type":"text","value":" 显示版本信息。"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"du -sh"}]},{"type":"text","value":" 显示总计"}]},{"type":"element","tag":"h2","props":{"id":"ps"},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ps [options] [--help]"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ps"}]},{"type":"text","value":" 的参数非常多, 在此仅列出几个常用的参数并大略介绍含义"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-A"}]},{"type":"text","value":" 列出所有的进程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-w"}]},{"type":"text","value":" 显示加宽可以显示较多的资讯"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-au"}]},{"type":"text","value":" 显示较详细的资讯"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-aux"}]},{"type":"text","value":" 显示所有包含其他使用者的进程"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"au(x) 输出格式"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"USER"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"PID"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"%CPU"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"%MEM"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"VSZ"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"RSS"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"TTY"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"STAT"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"START"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"TIME"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"COMMAND`"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"行程拥有者"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"pid"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"占用的虚拟记忆体大小"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"占用的记忆体大小"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"终端的次要装置号码 (minor device number of tty)"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"该行程的状态"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"行程开始时间"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"执行的时间"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"所执行的指令"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"w"},"children":[{"type":"text","value":"w"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看当前用户名、实际SSH连接的终端数量"}]},{"type":"element","tag":"h2","props":{"id":"cp"},"children":[{"type":"text","value":"cp"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cp -frap from_folder/* dist_folder"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-f 强制覆盖，不询问yes/no（-i的默认的，即默认为交互模式，询问是否覆盖）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-r 递归复制，包含目录"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-a 做一个备份，这里可以不用这个参数，我们可以先备份整个test目录"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-p 保持新文件的属性不变"}]}]},{"type":"element","tag":"h2","props":{"id":"date"},"children":[{"type":"text","value":"date"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"重命名文件，cp副本+`date +%F`"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其他命令参考"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"runoob date"}]}]}]},{"type":"element","tag":"h2","props":{"id":"ln"},"children":[{"type":"text","value":"ln"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建立软连接 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ln -s lib lib.so"}]}]},{"type":"element","tag":"h2","props":{"id":"chmod"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux chmod（英文全拼：change mode）命令是控制用户对文件的权限的命令\nLinux/Unix 的文件调用权限分为三级 : 文件所有者（Owner）、用户组（Group）、其它用户（Other Users）。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"/notes/file-permissions-rwx.jpg"},"children":[]},{"type":"element","tag":"img","props":{"alt":"1","src":"/notes/rwx-standard-unix-permission-bits.png"},"children":[]}]},{"type":"element","tag":"code","props":{"code":"chmod [-cfvR] [--help] [--version] mode file...\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-cfvR] [--help] [--version] "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"mode"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"file..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mode 权限设定字串，格式如下"}]},{"type":"element","tag":"code","props":{"code":"[ugoa...][[+-=][rwxX]...][,...]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"[ugoa...][[+-"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"][rwxX]...][,...]"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"u"}]},{"type":"text","value":" 表示该文件的拥有者，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"g"}]},{"type":"text","value":" 表示与该文件的拥有者属于同一个群体(group)者，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"o"}]},{"type":"text","value":" 表示其他以外的人，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"a"}]},{"type":"text","value":" 表示这三者皆是。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" 表示增加权限、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" 表示取消权限、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"="}]},{"type":"text","value":" 表示唯一设定权限。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"r"}]},{"type":"text","value":" 表示可读取，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"w"}]},{"type":"text","value":" 表示可写入，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" 表示可执行，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"X"}]},{"type":"text","value":" 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其他"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":" : 若该文件权限确实已经更改，才显示其更改动作"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" : 若该文件权限无法被更改也不要显示错误讯息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"text","value":" : 显示权限变更的详细资料"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-R"}]},{"type":"text","value":" : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递归的方式逐个变更)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--help"}]},{"type":"text","value":" : 显示辅助说明"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--version"}]},{"type":"text","value":" : 显示版本"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用八进制"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"#"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"权限"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"rwx"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"二进制"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"读 + 写 + 执行"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"rwx"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"111"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"读 + 写"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"rw-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"110"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"读 + 执行"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"r-x"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"101"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"只读"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"r--"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"100"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"写 + 执行"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-wx"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"011"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"只写"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-w-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"010"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"只执行"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"--x"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"001"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"无"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"---"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"000"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"命令"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"说明"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod a+r file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"给file的所有用户增加读权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod a-x file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"删除file的所有用户的执行权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod a+rw file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"给file的所有用户增加读写权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod +rwx file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"给file的所有用户增加读写执行权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod u=rw,go= file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"对file的所有者设置读写权限，清空该用户组和其他用户对file的所有权限（空格代表无权限）"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod -R u+r,go-r docs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"对目录docs和其子目录层次结构中的所有文件给用户增加读权限，而对用户组和其他用户删除读权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod 664 file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"对file的所有者和用户组设置读写权限, 为其其他用户设置读权限"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod 0755 file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"相当于u=rwx (4+2+1),go=rx (4+1 & 4+1)。0 没有特殊模式。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod 4755 file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"4设置了设置用户ID位，剩下的相当于 u=rwx (4+2+1),go=rx (4+1 & 4+1)。"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find path/ -type d -exec chmod a-x {} \\;"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"删除可执行权限对path/以及其所有的目录（不包括文件）的所有用户，使用'-type f'匹配文件"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find path/ -type d -exec chmod a+x {} \\;"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"允许所有用户浏览或通过目录path/"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod +x lib.so"}]}]},{"type":"element","tag":"h2","props":{"id":"kill"},"children":[{"type":"text","value":"kill"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"killall -9 pid"}]}]},{"type":"element","tag":"h2","props":{"id":"tar"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"zip "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tar -zcvf zip.tar.gz zip/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unzip "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tar -zxvf zip.tar.gz"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unzip .tar.bz2 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tar -jxvf zip.tar.bz2"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unzip .tat.xz "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tar -xvf zip.tar.xz"}]}]}]},{"type":"element","tag":"h2","props":{"id":"pidof"},"children":[{"type":"text","value":"pidof"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pidof + pid"}]}]},{"type":"element","tag":"h2","props":{"id":"tcpdump"},"children":[{"type":"text","value":"tcpdump"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tcpdump -i admin port 1433 or port 3306 -vvv -w /home/clog/name.pcap"}]}]},{"type":"element","tag":"h2","props":{"id":"chown"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux chown（英文全拼：change owner）命令用于设置文件所有者和文件关联组的命令。\nchown 需要超级用户 root 的权限才能执行此命令。"}]},{"type":"element","tag":"code","props":{"code":"chown [-cfhvR] [--help] [--version] user[:group] file...\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"chown"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-cfhvR] [--help] [--version] "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"user[:group]"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"file..."}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"user : 新的文件拥有者的使用者 ID"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"group : 新的文件拥有者的使用者组(group)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-c : 显示更改的部分的信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-f : 忽略错误信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-h : 修复符号链接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-v : 显示详细的处理信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-R : 处理指定目录以及其子目录下的所有文件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chown -R clog:clog /home/clog/"}]}]},{"type":"element","tag":"h2","props":{"id":"ldd"},"children":[{"type":"text","value":"ldd"}]},{"type":"element","tag":"h2","props":{"id":"netstat"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -anp | grep gateway"}]}]},{"type":"element","tag":"h2","props":{"id":"gdb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gdb gateway /data/coredump/..."}]}]},{"type":"element","tag":"h2","props":{"id":"perf"},"children":[{"type":"text","value":"perf"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"perf top -K -p 27041"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Perf 内置于Linux 内核源码树中的性能剖析工具。它基于事件采样原理，以性能事件为基础，支持针对处理器相关性能指标与操作系统相关性能指标的性能剖析。可用于性能瓶颈的查找与热点代码的定位"}]}]},{"type":"element","tag":"h2","props":{"id":"find"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Linux 查找当前目录下 包含特定字符串 的所有文件"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 Linux 经常会遇到这种情况：只知道文件中包含某些特定的字符串，但是不知道具体的文件名。需要根据“特定的字符串”反向查找文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查找当前目录下，包含“Hello”字符串的所有文件"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"【方式1】（其中，r 表示递归， n 表示查询结果显示行号）："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grep -rn \"Hello\" ./"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"【方式2】 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find ./ -name \"*.*\" | xargs grep  \"Hello\""}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"【方式3】（-l 表示只显示文件名）"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find . | xargs grep -ri \"Hello\""}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find . | xargs grep -ri \"Hello\" -l"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"【方式4】 如果不知道文件所在的大致目录，知道文件的类型（例如文本类型 txt），可以在root根目录 /\n下根据特定字符串进行查找："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find / -type f -name \"*.txt\" | xargs grep \"Hello\""}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"在系统中查找包含 bra 的文件或目录"}]},{"type":"text","value":", combine "},{"type":"element","tag":"a","props":{"href":"#rm"},"children":[{"type":"text","value":"rm"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#xagrs"},"children":[{"type":"text","value":"xargs"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#wc"},"children":[{"type":"text","value":"wc"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find / -name '*bra*'"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"在某目录下查找名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app.cc"}]},{"type":"text","value":"”`的文件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find /home/app/ -name app.cc"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"查找文件名中包含某字符（如"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app"}]},{"type":"text","value":"）的文件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find /home/app/ -name '*app*'"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find /home/app/ -name 'app*'"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find /home/app/ -name '*app'"}]}]},{"type":"element","tag":"h2","props":{"id":"rm"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":" 删除前逐一询问确认。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" 即使原档案属性设为唯读，亦直接删除，无需逐一确认。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-r"}]},{"type":"text","value":" 将目录及以下之档案亦逐一删除。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rm -rf"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"find and then delete"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find . -name \"*.a\" | wc -l"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"find . -name \"*.a\" | xargs rm -rfv"}]}]}]},{"type":"element","tag":"h2","props":{"id":"xargs"},"children":[{"type":"text","value":"xargs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"xargs（英文全拼： eXtended ARGuments）是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"somecommand | xargs -item  command"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-a file 从文件中读入作为 stdin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-p 当每次执行一个argument的时候询问一次用户。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-t 表示先打印命令，然后再执行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 {}，可以用 {} 代替。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-L num 或者是 -l num 从标准输入一次读取 num 行送给 command 命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-x exit的意思，主要是配合-s使用。。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-P 修改最大的进程数，默认是1，为0时候为as many as it can"}]}]},{"type":"element","tag":"h2","props":{"id":"wc"},"children":[{"type":"text","value":"wc"}]},{"type":"element","tag":"code","props":{"code":"wc [-clw][--help][--version][file...]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"wc"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-clw][--help][--version][file...]"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-c或--bytes或--chars 只显示Bytes数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-l或--lines 显示行数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-w或--words 只显示字数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"--help 在线帮助。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"--version 显示版本信息。"}]}]},{"type":"element","tag":"h2","props":{"id":"ar"},"children":[{"type":"text","value":"ar"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux ar命令用于建立或修改备存文件，或是从备存文件中抽取文件。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nar可让您集合许多文件，成为单一的备存文件。在备存文件中，所有成员文件皆保有原来的属性与权限。"}]},{"type":"element","tag":"code","props":{"code":"ar[-dmpqrtx][cfosSuvV][a<成员文件>][b<成员文件>][i<成员文件>][备存文件][成员文件]\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"ar[-dmpqrtx"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"][cfosSuvV][a"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"成员文件"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"][b"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"成员文件"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"][i"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"成员文件"}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"][备存文件][成员文件]"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"必要参数"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" 　删除备存文件中的成员文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m"}]},{"type":"text","value":"　 变更成员文件在备存文件中的次序。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-p"}]},{"type":"text","value":" 　显示备存文件中的成员文件内容。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-q"}]},{"type":"text","value":" 　将文件附加在备存文件末端。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-r"}]},{"type":"text","value":" 　将文件插入备存文件中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-t"}]},{"type":"text","value":" 　显示备存文件中所包含的文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-x"}]},{"type":"text","value":" 　自备存文件中取出成员文件。"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"选项参数"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"a<成员文件>"}]},{"type":"text","value":" 　将文件插入备存文件中指定的成员文件之后。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"b<成员文件>"}]},{"type":"text","value":" 　将文件插入备存文件中指定的成员文件之前。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"c"}]},{"type":"text","value":" 　建立备存文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f"}]},{"type":"text","value":" 　为避免过长的文件名不兼容于其他系统的ar指令指令，因此可利用此参数，截掉要放入备存文件中过长的成员文件名称。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i<成员文件>"}]},{"type":"text","value":" 　将文件插入备存文件中指定的成员文件之前。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"o"}]},{"type":"text","value":" 　保留备存文件中文件的日期。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" 　若备存文件中包含了对象模式，可利用此参数建立备存文件的符号表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"S"}]},{"type":"text","value":" 　不产生符号表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"u"}]},{"type":"text","value":" 　只将日期较新文件插入备存文件中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v"}]},{"type":"text","value":" 　程序执行时显示详细的信息。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"V"}]},{"type":"text","value":" 　显示版本信息。"}]}]},{"type":"element","tag":"h2","props":{"id":"tree"},"children":[{"type":"text","value":"tree"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"获取目录结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"win"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree"}]},{"type":"text","value":" 只显示文件夹"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree /f"}]},{"type":"text","value":" 显示文件夹及所有文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"导出"},{"type":"element","tag":"code","props":{"code":"tree /f >1.txt\n保存的树形结构，只含有文件夹\ntree /f >1.txt\n保存的树形结构，包含文件夹和文件\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"tree"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/f"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"1.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"保存的树形结构，只含有文件夹"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"tree"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/f"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"1.txt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"保存的树形结构，包含文件夹和文件"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mac"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"brew install tree"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree -L 1"}]},{"type":"text","value":" 只显示一级目录"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" option displays only directories"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-I"}]},{"type":"text","value":" option allows to exclude directories that match specific pattern\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree -I 'node_modules|cache|test_*'"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"e.g."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tree -a -I 'node_modules|.git|.github|.idea|.vscode|.cache|.temp|nuxt*|dist' -L 4 > 1.txt"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":" All files are printed.  By default tree does not print hidden files\n(those beginning with a dot "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".').   In no event does tree print the file system constructs "}]},{"type":"text","value":"."},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(current directory) and"}]},{"type":"text","value":"..` (previous directory)."}]},{"type":"element","tag":"h2","props":{"id":"cat"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux复制文件内容到另一个文件中"}]},{"type":"element","tag":"code","props":{"code":"# 将a文件中的内容追加到b文件中的末尾命令\ncat a >> b\n\n# 将a文件中的内容覆盖b文件内容命令\ncat a > b\n\n# 清空文件内容\n> filename\necho \"\" > filename\ncat /dev/null > filename\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# 将a文件中的内容追加到b文件中的末尾命令"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"b"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# 将a文件中的内容覆盖b文件内容命令"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"b"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# 清空文件内容"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" filename"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"filename"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"cat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/dev/null"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"filename"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":""},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输出重定向"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mac"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有两种方式可以将输出重定向："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n> file"}]},{"type":"text","value":" 将文件描述符n重定向到文件file中，如果文件不存在则会创建文件，如果存在的话将会覆盖原有内容。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n>> file"}]},{"type":"text","value":" 将文件描述符n重定向到文件file中，如果文件不存在将会创建文件，如果存在则会在文件的结尾开始写入输出。"}]}]},{"type":"element","tag":"h2","props":{"id":"rz-sz"},"children":[{"type":"text","value":"rz sz"}]},{"type":"element","tag":"code","props":{"code":"apt-get install lrzsz\n# 从服务端发送文件到客户端：\nsz filename \n# 从客户端上传文件到服务端：\nrz\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"lrzsz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# 从服务端发送文件到客户端："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"sz"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"filename"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# 从客户端上传文件到服务端："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"rz"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"sz 命令"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用途说明：将选定的文件发送（send）到本地机器。sz命令是利用ZModem协议来从Linux服务器传送文件到本地，一次可以传送一个或多个文件。相对应的从本地上传文件到Linux服务器，可以使用rz命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常用参数"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":"： 以文本方式传输（ascii）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":"： 以二进制方式传输（binary）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-e"}]},{"type":"text","value":"： 对控制字符转义（escape），这可以保证文件传输正确。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果能够确定所传输的文件是文本格式的，使用： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sz -a files"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果是二进制文件，使用： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sz -be files"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://linux.die.net/man/1/rz","rel":["nofollow"]},"children":[{"type":"text","value":"rz"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rz -bye"}]}]}]},{"type":"element","tag":"h2","props":{"id":"scp"},"children":[{"type":"text","value":"scp"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scp -r server_a server_b"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"服务器A上执行scp到服务器B，报错："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Permission denied (publickey)"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决方法，把A的公钥放到B上"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体操作："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A：cat .ssh/id_rsa.pub"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"B: cat .ssh/authorized_keys"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把A的公钥贴过来即可"}]},{"type":"element","tag":"h2","props":{"id":"ssh-keygen"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ssh-keygen"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh-keygen -t rsa -C \"your_email@example.com\""}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-t 指定密钥类型，默认是 rsa ，可以省略。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-C 设置注释文字，比如邮箱。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-f 指定密钥文件存储文件名。"}]}]},{"type":"element","tag":"h2","props":{"id":"clip"},"children":[{"type":"text","value":"clip"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clip < ~/.ssh/id_rsa.pub"}]}]},{"type":"element","tag":"h2","props":{"id":"crontab"},"children":[{"type":"text","value":"crontab"}]},{"type":"element","tag":"code","props":{"code":"crontab [-u username]　　　　#省略用户表表示操作当前用户的crontab\n    -e      #(编辑工作表)\n    -l      #(列出工作表里的命令)\n    -r      #(删除工作作)\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"crontab"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" [-u username]　　　　"}]},{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"#省略用户表表示操作当前用户的crontab"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"#(编辑工作表)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"-l"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"#(列出工作表里的命令)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"-r"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"#(删除工作作)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"crontab -e"}]},{"type":"text","value":"进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。\ncrontab的命令构成为 时间+动作，其时间有分、时、日、月、周五种，操作符有"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" 取值范围内的所有数字"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" 每过多少个数字"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" 从X到Z"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":","}]},{"type":"text","value":" 散列数字"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实例"}]},{"type":"element","tag":"code","props":{"code":"实例1：每1分钟执行一次myCommand\n* * * * * myCommand\n实例2：每小时的第3和第15分钟执行\n3,15 * * * * myCommand\n实例3：在上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * * myCommand\n实例4：每隔两天的上午8点到11点的第3和第15分钟执行\n3,15 8-11 */2  *  * myCommand\n实例5：每周一上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * 1 myCommand\n实例6：每晚的21:30重启smb\n30 21 * * * /etc/init.d/smb restart\n实例7：每月1、10、22日的4 : 45重启smb\n45 4 1,10,22 * * /etc/init.d/smb restart\n实例8：每周六、周日的1 : 10重启smb\n10 1 * * 6,0 /etc/init.d/smb restart\n实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb\n0,30 18-23 * * * /etc/init.d/smb restart\n实例10：每星期六的晚上11 : 00 pm重启smb\n0 23 * * 6 /etc/init.d/smb restart\n实例11：每一小时重启smb\n0 */1 * * * /etc/init.d/smb restart\n实例12：晚上11点到早上7点之间，每隔一小时重启smb\n0 23-7/1 * * * /etc/init.d/smb restart\n","language":"config","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"实例1：每1分钟执行一次myCommand\n* * * * * myCommand\n实例2：每小时的第3和第15分钟执行\n3,15 * * * * myCommand\n实例3：在上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * * myCommand\n实例4：每隔两天的上午8点到11点的第3和第15分钟执行\n3,15 8-11 */2  *  * myCommand\n实例5：每周一上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * 1 myCommand\n实例6：每晚的21:30重启smb\n30 21 * * * /etc/init.d/smb restart\n实例7：每月1、10、22日的4 : 45重启smb\n45 4 1,10,22 * * /etc/init.d/smb restart\n实例8：每周六、周日的1 : 10重启smb\n10 1 * * 6,0 /etc/init.d/smb restart\n实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb\n0,30 18-23 * * * /etc/init.d/smb restart\n实例10：每星期六的晚上11 : 00 pm重启smb\n0 23 * * 6 /etc/init.d/smb restart\n实例11：每一小时重启smb\n0 */1 * * * /etc/init.d/smb restart\n实例12：晚上11点到早上7点之间，每隔一小时重启smb\n0 23-7/1 * * * /etc/init.d/smb restart"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"logrotate"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"logrotate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主流Linux发行版上都默认安装有logrotate包，如果出于某种原因，logrotate没有出现在里头，你可以使用apt-get或yum命令来安装。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apt-get install logrotate cron"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum install logrotate crontabs"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"logrotate的配置文件是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/logrotate.conf"}]},{"type":"text","value":"，通常不需要对它进行修改。日志文件的轮循设置在独立的配置文件中，它（们）放在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/logrotate.d/"}]},{"type":"text","value":"目录下。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"案例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从创建一个日志文件开始，然后在其中填入一个10MB的随机比特流数据。"}]},{"type":"element","tag":"code","props":{"code":"touch /var/log/log-file\nhead -c 10M < /dev/urandom > /var/log/log-file\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"touch"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/var/log/log-file"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"10M"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/dev/urandom"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/var/log/log-file"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建一个配置文件 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim /etc/logrotate.d/log-file"}]}]},{"type":"element","tag":"code","props":{"code":"/var/log/log-file {\n    monthly\n    rotate 5\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 root root\n    postrotate\n        /usr/bin/killall -HUP rsyslogd\n    endscript\n}\n","language":"config","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/var/log/log-file {\n    monthly\n    rotate 5\n    compress\n    delaycompress\n    missingok\n    notifempty\n    create 644 root root\n    postrotate\n        /usr/bin/killall -HUP rsyslogd\n    endscript\n}"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"monthly: 日志文件将按月轮循。其它可用值为‘daily’，‘weekly’或者‘yearly’。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"rotate 5: 一次将存储5个归档日志。对于第六个归档，时间最久的归档将被删除。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"compress: 在轮循任务完成后，已轮循的归档将使用gzip进行压缩。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"delaycompress: 总是与compress选项一起用，delaycompress选项指示logrotate不要将最近的归档压缩，压缩将在下一次轮循周期进行。这在你或任何软件仍然需要读取最新归档时很有用。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"missingok: 在日志轮循期间，任何错误将被忽略，例如“文件无法找到”之类的错误。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"notifempty: 如果日志文件为空，轮循不会进行。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"create 644 root root: 以指定的权限创建全新的日志文件，同时logrotate也会重命名原始日志文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"postrotate/endscript: 在所有其它指令完成后，postrotate和endscript里面指定的命令将被执行。在这种情况下，rsyslogd 进程将立即再次读取其配置并继续运行。"}]}]},{"type":"element","tag":"h2","props":{"id":"lsof"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"list open files"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lsof -i: port"}]}]},{"type":"element","tag":"code","props":{"code":"lsof -i:8080：查看8080端口占用\nlsof abc.txt：显示开启文件abc.txt的进程\nlsof -c abc：显示abc进程现在打开的文件\nlsof -c -p 1234：列出进程号为1234的进程所打开的文件\nlsof -g gid：显示归属gid的进程情况\nlsof +d /usr/local/：显示目录下被进程开启的文件\nlsof +D /usr/local/：同上，但是会搜索目录下的目录，时间较长\nlsof -d 4：显示使用fd为4的进程\nlsof -i -U：显示所有打开的端口和UNIX domain文件\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-i:8080：查看8080端口占用"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"abc.txt：显示开启文件abc.txt的进程"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"abc：显示abc进程现在打开的文件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"1234"}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"：列出进程号为1234的进程所打开的文件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"gid：显示归属gid的进程情况"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"+d"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/usr/local/：显示目录下被进程开启的文件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"+D"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"/usr/local/：同上，但是会搜索目录下的目录，时间较长"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"：显示使用fd为4的进程"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"lsof"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-i"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-U：显示所有打开的端口和UNIX"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"domain文件"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"netstat-1"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -tunlp"}]},{"type":"text","value":" 用于显示 tcp，udp 的端口和进程等相关情况。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -tunlp | grep port"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-t (tcp) 仅显示tcp相关选项"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-u (udp)仅显示udp相关选项"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-n 拒绝显示别名，能显示数字的全部转化为数字"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-l 仅列出在Listen(监听)的服务状态"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"-p 显示建立相关链接的程序名"}]}]},{"type":"element","tag":"code","props":{"code":"netstat -ntlp   //查看当前所有tcp端口\nnetstat -ntulp | grep 80   //查看所有80端口使用情况\nnetstat -ntulp | grep 3306   //查看所有3306端口使用情况\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-ntlp"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"//查看当前所有tcp端口"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-ntulp"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"//查看所有80端口使用情况"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"netstat"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-ntulp"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7325e"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"3306"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"//查看所有3306端口使用情况"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"curl"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://catonmat.net/cookbooks/curl","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"h3","props":{"id":"command"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.ruanyifeng.com/blog/2019/09/curl-reference.html","rel":["nofollow"]},"children":[{"type":"text","value":"curl command"}]}]},{"type":"element","tag":"h3","props":{"id":"查看网页源码"},"children":[{"type":"text","value":"查看网页源码"}]},{"type":"element","tag":"code","props":{"code":"curl genshin.hoyoverse.com/main/news/\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"genshin.hoyoverse.com/main/news/"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"<html>\n<head><title>301 Moved Permanently</title></head>\n<body>\n<center><h1>301 Moved Permanently</h1></center>\n<hr><center>CloudFront</center>\n</body>\n</html>\n","language":"out","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<html>\n<head><title>301 Moved Permanently</title></head>\n<body>\n<center><h1>301 Moved Permanently</h1></center>\n<hr><center>CloudFront</center>\n</body>\n</html>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要把这个网页保存下来，可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-o"}]},{"type":"text","value":"参数，这就相当于使用wget命令了。"}]},{"type":"element","tag":"code","props":{"code":"curl -o file_name genshin.hoyoverse.com/main/news/\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"file_name"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"genshin.hoyoverse.com/main/news/"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"自动跳转"},"children":[{"type":"text","value":"自动跳转"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有的网址是自动跳转的。使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-L"}]},{"type":"text","value":"参数，curl就会跳转到新的网址。"}]},{"type":"element","tag":"code","props":{"code":"curl -L genshin.hoyoverse.com/main/news/\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-L"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"genshin.hoyoverse.com/main/news/"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"显示头信息"},"children":[{"type":"text","value":"显示头信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":"参数可以显示http response的头信息，连同网页代码一起。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-I"}]},{"type":"text","value":"参数则是只显示http response的头信息。"}]},{"type":"element","tag":"h3","props":{"id":"显示通信过程"},"children":[{"type":"text","value":"显示通信过程"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"text","value":"参数可以显示一次http通信的整个过程，包括端口连接和http request头信息。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你觉得上面的信息还不够，那么下面的命令可以查看更详细的通信过程。"}]},{"type":"element","tag":"code","props":{"code":"curl --trace output.txt genshin.hoyoverse.com/main/news/\n# or\ncurl --trace-ascii output.txt genshin.hoyoverse.com/main/news/\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"--trace"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"output.txt"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"genshin.hoyoverse.com/main/news/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f65e76"},"children":[{"type":"text","value":"# or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"--trace-ascii"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"output.txt"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"genshin.hoyoverse.com/main/news/"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"发送表单信息"},"children":[{"type":"text","value":"发送表单信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"发送表单信息有GET和POST两种方法。GET方法相对简单，只要把数据附在网址后面就行。"}]},{"type":"element","tag":"code","props":{"code":"curl example.com/augus?data=xxx\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"example.com/augus?data=xxx"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"POST方法必须把数据和网址分开，curl就要用到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--data"}]},{"type":"text","value":"参数。"}]},{"type":"element","tag":"code","props":{"code":"curl -X POST --data \"data=xxx\" example.com/augus\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-X"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"--data"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"\"data=xxx\""}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"example.com/augus"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你的数据没有经过表单编码，还可以让curl为你编码，参数是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--data-urlencode"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"curl -X POST --data-urlencode \"date=April 1\" example.com/augus\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-X"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"--data-urlencode"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"\"date=April 1\""}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"example.com/augus"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"http动词"},"children":[{"type":"text","value":"HTTP动词"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"curl默认的HTTP动词是GET，使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-X"}]},{"type":"text","value":"参数可以支持其他动词。"}]},{"type":"element","tag":"code","props":{"code":"curl -X POST www.example.com\ncurl -X DELETE www.example.com\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-X"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"POST"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"www.example.com"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d14b0f"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-56629e"},"children":[{"type":"text","value":"-X"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tag":"span","props":{"class":"ct-ecf3ac"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28201c"},"children":[{"type":"text","value":"www.example.com"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"readelf"},"children":[{"type":"text","value":"readelf"}]},{"type":"element","tag":"h2","props":{"id":"objdump"},"children":[{"type":"text","value":"objdump"}]},{"type":"element","tag":"h2","props":{"id":"addr2line"},"children":[{"type":"text","value":"addr2line"}]},{"type":"element","tag":"h2","props":{"id":"others"},"children":[{"type":"text","value":"others"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Linux使用sar进行性能分析"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"使用iostat分析IO性能"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"参考："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"runoob date"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ssh-keygen"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"logrotate"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-56629e{color:#0550AE}\n.ct-f65e76{color:#6E7781}\n.ct-c7325e{color:#CF222E}\n.ct-28201c{color:#0A3069}\n.ct-ecf3ac{color:#24292F}\n.ct-d14b0f{color:#953800}\n.dark .ct-d14b0f{color:#FFA657}\n.dark .ct-ecf3ac{color:#C9D1D9}\n.dark .ct-28201c{color:#A5D6FF}\n.dark .ct-c7325e{color:#FF7B72}\n.dark .ct-f65e76{color:#8B949E}\n.dark .ct-56629e{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ls","depth":2,"text":"ls"},{"id":"cut","depth":2,"text":"cut"},{"id":"du","depth":2,"text":"du"},{"id":"ps","depth":2,"text":"ps"},{"id":"w","depth":2,"text":"w"},{"id":"cp","depth":2,"text":"cp"},{"id":"date","depth":2,"text":"date"},{"id":"ln","depth":2,"text":"ln"},{"id":"chmod","depth":2,"text":"chmod"},{"id":"kill","depth":2,"text":"kill"},{"id":"tar","depth":2,"text":"tar"},{"id":"pidof","depth":2,"text":"pidof"},{"id":"tcpdump","depth":2,"text":"tcpdump"},{"id":"chown","depth":2,"text":"chown"},{"id":"ldd","depth":2,"text":"ldd"},{"id":"netstat","depth":2,"text":"netstat"},{"id":"gdb","depth":2,"text":"gdb"},{"id":"perf","depth":2,"text":"perf"},{"id":"find","depth":2,"text":"find"},{"id":"rm","depth":2,"text":"rm"},{"id":"xargs","depth":2,"text":"xargs"},{"id":"wc","depth":2,"text":"wc"},{"id":"ar","depth":2,"text":"ar"},{"id":"tree","depth":2,"text":"tree"},{"id":"cat","depth":2,"text":"cat"},{"id":"","depth":2,"text":">"},{"id":"rz-sz","depth":2,"text":"rz sz"},{"id":"scp","depth":2,"text":"scp"},{"id":"ssh-keygen","depth":2,"text":"ssh-keygen"},{"id":"clip","depth":2,"text":"clip"},{"id":"crontab","depth":2,"text":"crontab"},{"id":"logrotate","depth":2,"text":"logrotate"},{"id":"lsof","depth":2,"text":"lsof"},{"id":"netstat-1","depth":2,"text":"netstat"},{"id":"curl","depth":2,"text":"curl","children":[{"id":"command","depth":3,"text":"command"},{"id":"查看网页源码","depth":3,"text":"查看网页源码"},{"id":"自动跳转","depth":3,"text":"自动跳转"},{"id":"显示头信息","depth":3,"text":"显示头信息"},{"id":"显示通信过程","depth":3,"text":"显示通信过程"},{"id":"发送表单信息","depth":3,"text":"发送表单信息"},{"id":"http动词","depth":3,"text":"HTTP动词"}]},{"id":"readelf","depth":2,"text":"readelf"},{"id":"objdump","depth":2,"text":"objdump"},{"id":"addr2line","depth":2,"text":"addr2line"},{"id":"others","depth":2,"text":"others"}]}},"_type":"markdown","_id":"content:5.notes:linux:command.md","_source":"content","_file":"5.notes/linux/command.md","_extension":"md"},{"_path":"/notes/linux/gdb","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"gdb","description":"实例，refer","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"gdb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实例，"},{"type":"element","tag":"a","props":{"href":"https://haoel.blog.csdn.net/article/details/2879","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cc -g tst.c -o tst"}]}]},{"type":"element","tag":"code","props":{"code":"gdb tst  <---------- 启动GDB\nGNU gdb 5.1.1\nCopyright 2002 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-suse-linux\"...\n(gdb) l     <-------------------- l命令相当于list，从第一行开始例出原码。\n1        #include <stdio.h>\n2\n3        int func(int n)\n4        {\n5                int sum=0,i;\n6                for(i=0; i<n; i++)\n7                {\n8                        sum+=i;\n9                }\n10               return sum;\n(gdb)       <-------------------- 直接回车表示，重复上一次命令\n11       }\n12\n13\n14       main()\n15       {\n16               int i;\n17               long result = 0;\n18               for(i=1; i<=100; i++)\n19               {\n20                       result += i;    \n(gdb) break 16    <-------------------- 设置断点，在源程序第16行处。\nBreakpoint 1 at 0x8048496: file tst.c, line 16.\n(gdb) break func  <-------------------- 设置断点，在函数func()入口处。\nBreakpoint 2 at 0x8048456: file tst.c, line 5.\n(gdb) info break  <-------------------- 查看断点信息。\nNum Type           Disp Enb Address    What\n1   breakpoint     keep y   0x08048496 in main at tst.c:16\n2   breakpoint     keep y   0x08048456 in func at tst.c:5\n(gdb) r           <--------------------- 运行程序，run命令简写\nStarting program: /home/hchen/test/tst\n\nBreakpoint 1, main () at tst.c:17    <---------- 在断点处停住。\n17               long result = 0;\n(gdb) n          <--------------------- 单条语句执行，next命令简写。\n18               for(i=1; i<=100; i++)\n(gdb) n\n20                       result += i;\n(gdb) n\n18               for(i=1; i<=100; i++)\n(gdb) n\n20                       result += i;\n(gdb) c          <--------------------- 继续运行程序，continue命令简写。\nContinuing.\nresult[1-100] = 5050       <----------程序输出。\n\nBreakpoint 2, func (n=250) at tst.c:5\n5                int sum=0,i;\n(gdb) n\n6                for(i=1; i<=n; i++)\n(gdb) p i        <--------------------- 打印变量i的值，print命令简写。\n$1 = 134513808\n(gdb) n\n8                        sum+=i;\n(gdb) n\n6                for(i=1; i<=n; i++)\n(gdb) p sum\n$2 = 1\n(gdb) n\n8                        sum+=i;\n(gdb) p i\n$3 = 2\n(gdb) n\n6                for(i=1; i<=n; i++)\n(gdb) p sum\n$4 = 3\n(gdb) bt        <--------------------- 查看函数堆栈。\n#0  func (n=250) at tst.c:5\n#1  0x080484e4 in main () at tst.c:24\n#2  0x400409ed in __libc_start_main () from /lib/libc.so.6\n(gdb) finish    <--------------------- 退出函数。\nRun till exit from #0  func (n=250) at tst.c:5\n0x080484e4 in main () at tst.c:24\n24              printf(\"result[1-250] = %d /n\", func(250) );\nValue returned is $6 = 31375\n(gdb) c     <--------------------- 继续运行。\nContinuing.\nresult[1-250] = 31375    <----------程序输出。\n\nProgram exited with code 027. <--------程序退出，调试结束。\n(gdb) q     <--------------------- 退出gdb。\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"tst"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"----------"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"启动GDB"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"GNU"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"5.1.1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Copyright"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2002"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Free"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Software"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Foundation,"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Inc."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"GDB"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"is"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"free"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"software,"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"covered"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"by"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"the"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"GNU"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"General"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Public"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"License,"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"and"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"you"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"are"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"welcome"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"change"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"it"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"and/or"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"distribute"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"copies"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"it"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"under"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"certain"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"conditions."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"\"show copying\""}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"see"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"the"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"conditions."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"There"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"is"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"absolutely"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"no"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"warranty"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"GDB."}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"\"show warranty\""}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"details."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"This"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"GDB"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"was"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"configured"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"\"i386-suse-linux\"..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") l     "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"-------------------- l命令相当于list，从第一行开始例出原码。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#include <stdio.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"        int func("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"        {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                int sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":",i"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<n"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                        sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"+="}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" sum;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")       "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"-------------------- 直接回车表示，重复上一次命令"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"       }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"12"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"13"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"14"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-268fcd"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"       {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               int i;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               long result = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=100"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"19"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                       result += i;    "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"break"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"--------------------"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"设置断点，在源程序第16行处。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Breakpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8048496"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"tst.c,"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"line"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"16."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") break func  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"-------------------- "}]},{"type":"element","tag":"span","props":{"class":"ct-268fcd"},"children":[{"type":"text","value":"设置断点，在函数func"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"()入口处。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Breakpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8048456"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"tst.c,"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"line"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") info break  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"-------------------- 查看断点信息。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Num"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"           "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Disp"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Enb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Address"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"What"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"   breakpoint     keep y   "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"08048496"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" main at tst.c:"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"16"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"   breakpoint     keep y   "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"08048456"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" func at tst.c:"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") r           "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 运行程序，run命令简写"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Starting"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"program:"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"/home/hchen/test/tst"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Breakpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"tst.c:"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"----------"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"在断点处停住。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"17"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               long result = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n          "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 单条语句执行，next命令简写。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=100"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                       result += i;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"               for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=100"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                       result += i;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") c          "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 继续运行程序，continue命令简写。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Continuing."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"result[1-100"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5050"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"----------程序输出。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Breakpoint"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" (n"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"250"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") at tst.c:"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                int sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":",i"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=n"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") p i        "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 打印变量i的值，print命令简写。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"134513808"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                        sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"+="}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=n"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") p sum"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$2"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                        sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"+="}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") p i"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$3"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"                for(i"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i<=n"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"i++"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") p sum"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$4"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"3"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") bt        "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 查看函数堆栈。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#0  func (n=250) at tst.c:5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#1  0x080484e4 in main () at tst.c:24"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#2  0x400409ed in __libc_start_main () from /lib/libc.so.6"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") finish    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 退出函数。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Run"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"till"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#0  func (n=250) at tst.c:5"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"080484e4"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-268fcd"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" () at tst.c:"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"24"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"24"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"              printf("}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"\"result[1-250] = %d /n\""}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":", func("}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"250"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") );"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Value"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"returned"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"is"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"31375"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") c     "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 继续运行。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Continuing."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"result[1-250"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"31375"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"----------程序输出。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Program"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"exited"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"027."}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"--------程序退出，调试结束。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") q     "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"--------------------- 退出gdb。"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"use"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说GDB主要调试的是C/C++的程序。要调试C/C++的程序，首先在编译时，我们必须要把调试信息加到可执行文件中。使用编译器（cc/gcc/g++）的 -g 参数可以做到这一点。如："}]},{"type":"element","tag":"code","props":{"code":"> cc -g hello.c -o hello\n> g++ -g hello.cpp -o hello\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"> cc -g hello.c -o hello\n> g++ -g hello.cpp -o hello"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果没有-g，你将看不见程序的函数名、变量名，所代替的全是运行时的内存地址。当你用-g把调试信息加入之后，并成功编译目标代码以后，让我们来看看如何用gdb来调试他。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"启动GDB的方法有以下几种："}]},{"type":"element","tag":"code","props":{"code":"1、gdb <program> \n   program也就是你的执行文件，一般在当然目录下。\n\n2、gdb <program> core\n   用gdb同时调试一个运行程序和core文件，core是程序非法执行后core dump后产生的文件。\n\n3、gdb <program> <PID>\n   如果你的程序是一个服务程序，那么你可以指定这个服务程序运行时的进程ID。gdb会自动attach上去，并调试他。program应该在PATH环境变量中搜索得到。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1、gdb <program> \n   program也就是你的执行文件，一般在当然目录下。\n\n2、gdb <program> core\n   用gdb同时调试一个运行程序和core文件，core是程序非法执行后core dump后产生的文件。\n\n3、gdb <program> <PID>\n   如果你的程序是一个服务程序，那么你可以指定这个服务程序运行时的进程ID。gdb会自动attach上去，并调试他。program应该在PATH环境变量中搜索得到。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GDB启动时，可以加上一些GDB的启动开关，详细的开关可以用gdb -help查看。我在下面只例举一些比较常用的参数："}]},{"type":"element","tag":"code","props":{"code":"-symbols <file> \n-s <file> \n从指定文件中读取符号表。\n\n-se file \n从指定文件中读取符号表信息，并把他用在可执行文件中。\n\n-core <file>\n-c <file> \n调试时core dump的core文件。\n\n-directory <directory>\n-d <directory>\n加入一个源文件的搜索路径。默认搜索路径是环境变量中PATH所定义的路径。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"-symbols <file> \n-s <file> \n从指定文件中读取符号表。\n\n-se file \n从指定文件中读取符号表信息，并把他用在可执行文件中。\n\n-core <file>\n-c <file> \n调试时core dump的core文件。\n\n-directory <directory>\n-d <directory>\n加入一个源文件的搜索路径。默认搜索路径是环境变量中PATH所定义的路径。"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"gdb的命令概貌"},"children":[{"type":"text","value":"GDB的命令概貌"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/haoel/article/details/2880","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"启动gdb后，就你被带入gdb的调试环境中，就可以使用gdb的命令开始调试程序了，gdb的命令可以使用help命令来查看，如下所示："}]},{"type":"element","tag":"code","props":{"code":"(gdb) help\nList of classes of commands:\n\naliases -- Aliases of other commands\nbreakpoints -- Making program stop at certain points\ndata -- Examining data\nfiles -- Specifying and examining files\ninternals -- Maintenance commands\nobscure -- Obscure features\nrunning -- Running the program\nstack -- Examining the stack\nstatus -- Status inquiries\nsupport -- Support facilities\ntracepoints -- Tracing of program execution without stopping the program\nuser-defined -- User-defined commands\n\nType \"help\" followed by a class name for a list of commands in that class.\nType \"help\" followed by command name for full documentation.\nCommand name abbreviations are allowed if unambiguous.\n(gdb)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"(gdb) help\nList of classes of commands:\n\naliases -- Aliases of other commands\nbreakpoints -- Making program stop at certain points\ndata -- Examining data\nfiles -- Specifying and examining files\ninternals -- Maintenance commands\nobscure -- Obscure features\nrunning -- Running the program\nstack -- Examining the stack\nstatus -- Status inquiries\nsupport -- Support facilities\ntracepoints -- Tracing of program execution without stopping the program\nuser-defined -- User-defined commands\n\nType \"help\" followed by a class name for a list of commands in that class.\nType \"help\" followed by command name for full documentation.\nCommand name abbreviations are allowed if unambiguous.\n(gdb)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"gdb的命令很多，gdb把之分成许多个种类。help命令只是例出gdb的命令种类，如果要看种类中的命令，可以使用help "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<class>"}]},{"type":"text","value":" 命令，如：help breakpoints，查看设置断点的所有命令。也可以直接help "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<command>"}]},{"type":"text","value":"来查看命令的帮助。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"gdb中，输入命令时，可以不用打全命令，只用打命令的前几个字符就可以了，当然，命令的前几个字符应该要标志着一个唯一的命令，在Linux下，你可以敲击两次TAB键来补齐命令的全称，如果有重复的，那么gdb会把其例出来。"}]},{"type":"element","tag":"code","props":{"code":"示例一：在进入函数func时，设置一个断点。可以敲入break func，或是直接就是b func\n(gdb) b func\nBreakpoint 1 at 0x8048458: file hello.c, line 10.\n\n示例二：敲入b按两次TAB键，你会看到所有b打头的命令：\n(gdb) b\nbacktrace  break      bt\n(gdb)\n\n示例三：只记得函数的前缀，可以这样：\n(gdb) b make_ <按TAB键>\n（再按下一次TAB键，你会看到:）\nmake_a_section_from_file     make_environ\nmake_abs_section             make_function_type\nmake_blockvector             make_pointer_type\nmake_cleanup                 make_reference_type\nmake_command                 make_symbol_completion_list\n(gdb) b make_\nGDB把所有make开头的函数全部例出来给你查看。\n\n示例四：调试C++的程序时，有可以函数名一样。如：\n(gdb) b 'bubble( M-? \nbubble(double,double)    bubble(int,int)\n(gdb) b 'bubble(\n你可以查看到C++中的所有的重载函数及参数。（注：M-?和“按两次TAB键”是一个意思）\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"示例一：在进入函数func时，设置一个断点。可以敲入break func，或是直接就是b func\n(gdb) b func\nBreakpoint 1 at 0x8048458: file hello.c, line 10.\n\n示例二：敲入b按两次TAB键，你会看到所有b打头的命令：\n(gdb) b\nbacktrace  break      bt\n(gdb)\n\n示例三：只记得函数的前缀，可以这样：\n(gdb) b make_ <按TAB键>\n（再按下一次TAB键，你会看到:）\nmake_a_section_from_file     make_environ\nmake_abs_section             make_function_type\nmake_blockvector             make_pointer_type\nmake_cleanup                 make_reference_type\nmake_command                 make_symbol_completion_list\n(gdb) b make_\nGDB把所有make开头的函数全部例出来给你查看。\n\n示例四：调试C++的程序时，有可以函数名一样。如：\n(gdb) b 'bubble( M-? \nbubble(double,double)    bubble(int,int)\n(gdb) b 'bubble(\n你可以查看到C++中的所有的重载函数及参数。（注：M-?和“按两次TAB键”是一个意思）"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要退出gdb时，只用发quit或命令简称q就行了。"}]},{"type":"element","tag":"h2","props":{"id":"run"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gdb --args exe args1 args2"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"(gdb) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"run"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"r"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"l"}]},{"type":"text","value":" + method, find method"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"b"}]},{"type":"text","value":" + line, breakpoint"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" 下一步"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" 步入"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"c"}]},{"type":"text","value":" continue"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设置源码路径 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set substitute-path source now_pos"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#layout"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout split"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"layout"},"children":[{"type":"text","value":"layout"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"layout：用于分割窗口，可以一边查看代码，一边测试。主要有以下几种用法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout src"}]},{"type":"text","value":"：显示源代码窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout asm"}]},{"type":"text","value":"：显示汇编窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout regs"}]},{"type":"text","value":"：显示源代码/汇编和寄存器窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout split"}]},{"type":"text","value":"：显示源代码和汇编窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout next"}]},{"type":"text","value":"：显示下一个layout"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"layout prev"}]},{"type":"text","value":"：显示上一个layout"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl + L"}]},{"type":"text","value":"：刷新窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl + x"}]},{"type":"text","value":"，再按1：单窗口模式，显示一个窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl + x"}]},{"type":"text","value":"，再按2：双窗口模式，显示两个窗口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl + x"}]},{"type":"text","value":"，再按a：回到传统模式，即退出layout，回到执行layout之前的调试窗口。"}]}]},{"type":"element","tag":"h3","props":{"id":"gdb中运行unix的shell程序"},"children":[{"type":"text","value":"GDB中运行UNIX的shell程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在gdb环境中，你可以执行UNIX的shell的命令，使用gdb的shell命令来完成："}]},{"type":"element","tag":"code","props":{"code":"shell <command string>\n调用UNIX的shell来执行<command string>，环境变量SHELL中定义的UNIX的shell将会被用来执行<command string>，如果SHELL没有定义，那就使用UNIX的标准shell：/bin/sh。（在Windows中使用Command.com或cmd.exe）\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"shell <command string>\n调用UNIX的shell来执行<command string>，环境变量SHELL中定义的UNIX的shell将会被用来执行<command string>，如果SHELL没有定义，那就使用UNIX的标准shell：/bin/sh。（在Windows中使用Command.com或cmd.exe）"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一个gdb命令是make：\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make <make-args>"}]},{"type":"text","value":"\n可以在gdb中执行make命令来重新build自己的程序。这个命令等价于"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"shell make <make-args>"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"在gdb中运行程序"},"children":[{"type":"text","value":"在GDB中运行程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当以"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gdb <program>"}]},{"type":"text","value":"方式启动gdb后，gdb会在PATH路径和当前目录中搜索"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<program>"}]},{"type":"text","value":"的源文件。如要确认gdb是否读到源文件，可使用l或list命令，看看gdb是否能列出源代码。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在gdb中，运行程序使用r或是run命令。程序的运行，你有可能需要设置下面四方面的事。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1、程序运行参数。\nset args 可指定运行时参数。（如：set args 10 20 30 40 50）\nshow args 命令可以查看设置好的运行参数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2、运行环境。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"path <dir>"}]},{"type":"text","value":"可设定程序的运行路径。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show paths"}]},{"type":"text","value":" 查看程序的运行路径。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set environment varname [=value]"}]},{"type":"text","value":" 设置环境变量。如：set env USER=hchen\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"show environment [varname]"}]},{"type":"text","value":" 查看环境变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3、工作目录。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cd <dir>"}]},{"type":"text","value":" 相当于shell的cd命令。\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pwd"}]},{"type":"text","value":" 显示当前的所在目录。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4、程序的输入输出。\ninfo terminal 显示你程序用到的终端的模式。\n使用重定向控制程序输出。如：run > outfile\ntty命令可以指写输入输出的终端设备。如：tty /dev/ttyb"}]},{"type":"element","tag":"h3","props":{"id":"调试已运行的程序"},"children":[{"type":"text","value":"调试已运行的程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"两种方法：\n1、在UNIX下用ps查看正在运行的程序的PID（进程ID），然后用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gdb <program> PID"}]},{"type":"text","value":"格式挂接正在运行的程序。\n2、先用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gdb <program>"}]},{"type":"text","value":"关联上源代码，并进行gdb，在gdb中用attach命令来挂接进程的PID。并用detach来取消挂接的进程。"}]},{"type":"element","tag":"h3","props":{"id":"暂停-恢复程序运行"},"children":[{"type":"text","value":"暂停 / 恢复程序运行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"调试程序中，暂停程序运行是必须的，GDB可以方便地暂停程序的运行。你可以设置程序的在哪行停住，在什么条件下停住，在收到什么信号时停往等等。以便于你查看运行时的变量，以及运行时的流程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当进程被gdb停住时，你可以使用info program 来查看程序的是否在运行，进程号，被暂停的原因。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在gdb中，我们可以有以下几种暂停方式：断点（BreakPoint）、观察点（WatchPoint）、捕捉点（CatchPoint）、信号（Signals）、线程停止（Thread Stops）。如果要恢复程序运行，可以使用c或是continue命令。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一、设置断点（BreakPoint）"}]},{"type":"element","tag":"code","props":{"code":"我们用break命令来设置断点。正面有几点设置断点的方法：\n\nbreak <function> \n    在进入指定函数时停住。C++中可以使用class::function或function(type,type)格式来指定函数名。\n\nbreak <linenum>\n    在指定行号停住。\n\nbreak +offset \nbreak -offset \n    在当前行号的前面或后面的offset行停住。offiset为自然数。\n\nbreak filename:linenum \n    在源文件filename的linenum行处停住。\n\nbreak filename:function \n    在源文件filename的function函数的入口处停住。\n\nbreak *address\n    在程序运行的内存地址处停住。\n\nbreak \n    break命令没有参数时，表示在下一条指令处停住。\n\nbreak ... if <condition>\n    ...可以是上述的参数，condition表示条件，在条件成立时停住。比如在循环境体中，可以设置break if i=100，表示当i为100时停住程序。\n\n查看断点时，可使用info命令，如下所示：（注：n表示断点号）\ninfo breakpoints [n] \ninfo break [n] \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"我们用break命令来设置断点。正面有几点设置断点的方法：\n\nbreak <function> \n    在进入指定函数时停住。C++中可以使用class::function或function(type,type)格式来指定函数名。\n\nbreak <linenum>\n    在指定行号停住。\n\nbreak +offset \nbreak -offset \n    在当前行号的前面或后面的offset行停住。offiset为自然数。\n\nbreak filename:linenum \n    在源文件filename的linenum行处停住。\n\nbreak filename:function \n    在源文件filename的function函数的入口处停住。\n\nbreak *address\n    在程序运行的内存地址处停住。\n\nbreak \n    break命令没有参数时，表示在下一条指令处停住。\n\nbreak ... if <condition>\n    ...可以是上述的参数，condition表示条件，在条件成立时停住。比如在循环境体中，可以设置break if i=100，表示当i为100时停住程序。\n\n查看断点时，可使用info命令，如下所示：（注：n表示断点号）\ninfo breakpoints [n] \ninfo break [n] "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"二、设置观察点（WatchPoint）"}]},{"type":"element","tag":"code","props":{"code":"观察点一般来观察某个表达式（变量也是一种表达式）的值是否有变化了，如果有变化，马上停住程序。我们有下面的几种方法来设置观察点：\n\nwatch <expr>\n    为表达式（变量）expr设置一个观察点。一量表达式值有变化时，马上停住程序。\n    \nrwatch <expr>\n    当表达式（变量）expr被读时，停住程序。\n    \nawatch <expr>\n    当表达式（变量）的值被读或被写时，停住程序。\n\ninfo watchpoints\n    列出当前所设置了的所有观察点。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"观察点一般来观察某个表达式（变量也是一种表达式）的值是否有变化了，如果有变化，马上停住程序。我们有下面的几种方法来设置观察点：\n\nwatch <expr>\n    为表达式（变量）expr设置一个观察点。一量表达式值有变化时，马上停住程序。\n    \nrwatch <expr>\n    当表达式（变量）expr被读时，停住程序。\n    \nawatch <expr>\n    当表达式（变量）的值被读或被写时，停住程序。\n\ninfo watchpoints\n    列出当前所设置了的所有观察点。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三、设置捕捉点（CatchPoint）"}]},{"type":"element","tag":"code","props":{"code":"你可设置捕捉点来补捉程序运行时的一些事件。如：载入共享库（动态链接库）或是C++的异常。设置捕捉点的格式为：\n\ncatch <event>\n    当event发生时，停住程序。event可以是下面的内容：\n    1、throw 一个C++抛出的异常。（throw为关键字）\n    2、catch 一个C++捕捉到的异常。（catch为关键字）\n    3、exec 调用系统调用exec时。（exec为关键字，目前此功能只在HP-UX下有用）\n    4、fork 调用系统调用fork时。（fork为关键字，目前此功能只在HP-UX下有用）\n    5、vfork 调用系统调用vfork时。（vfork为关键字，目前此功能只在HP-UX下有用）\n    6、load 或 load <libname> 载入共享库（动态链接库）时。（load为关键字，目前此功能只在HP-UX下有用）\n    7、unload 或 unload <libname> 卸载共享库（动态链接库）时。（unload为关键字，目前此功能只在HP-UX下有用）\n\ntcatch <event> \n    只设置一次捕捉点，当程序停住以后，应点被自动删除。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"你可设置捕捉点来补捉程序运行时的一些事件。如：载入共享库（动态链接库）或是C++的异常。设置捕捉点的格式为：\n\ncatch <event>\n    当event发生时，停住程序。event可以是下面的内容：\n    1、throw 一个C++抛出的异常。（throw为关键字）\n    2、catch 一个C++捕捉到的异常。（catch为关键字）\n    3、exec 调用系统调用exec时。（exec为关键字，目前此功能只在HP-UX下有用）\n    4、fork 调用系统调用fork时。（fork为关键字，目前此功能只在HP-UX下有用）\n    5、vfork 调用系统调用vfork时。（vfork为关键字，目前此功能只在HP-UX下有用）\n    6、load 或 load <libname> 载入共享库（动态链接库）时。（load为关键字，目前此功能只在HP-UX下有用）\n    7、unload 或 unload <libname> 卸载共享库（动态链接库）时。（unload为关键字，目前此功能只在HP-UX下有用）\n\ntcatch <event> \n    只设置一次捕捉点，当程序停住以后，应点被自动删除。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"四、维护停止点 "},{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/haoel/article/details/2881","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面说了如何设置程序的停止点，GDB中的停止点也就是上述的三类。在GDB中，如果你觉得已定义好的停止点没有用了，你可以使用delete、clear、disable、enable这几个命令来进行维护。"}]},{"type":"element","tag":"code","props":{"code":"clear\n    清除所有的已定义的停止点。\n\nclear <function>\nclear <filename:function>\n    清除所有设置在函数上的停止点。\n\nclear <linenum>\nclear <filename:linenum>\n    清除所有设置在指定行上的停止点。\n\ndelete [breakpoints] [range...]\n    删除指定的断点，breakpoints为断点号。如果不指定断点号，则表示删除所有的断点。range 表示断点号的范围（如：3-7）。其简写命令为d。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"clear\n    清除所有的已定义的停止点。\n\nclear <function>\nclear <filename:function>\n    清除所有设置在函数上的停止点。\n\nclear <linenum>\nclear <filename:linenum>\n    清除所有设置在指定行上的停止点。\n\ndelete [breakpoints] [range...]\n    删除指定的断点，breakpoints为断点号。如果不指定断点号，则表示删除所有的断点。range 表示断点号的范围（如：3-7）。其简写命令为d。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比删除更好的一种方法是disable停止点，disable了的停止点，GDB不会删除，当你还需要时，enable即可，就好像回收站一样。"}]},{"type":"element","tag":"code","props":{"code":"disable [breakpoints] [range...]\n    disable所指定的停止点，breakpoints为停止点号。如果什么都不指定，表示disable所有的停止点。简写命令是dis.\n\nenable [breakpoints] [range...]\n    enable所指定的停止点，breakpoints为停止点号。\n\nenable [breakpoints] once range...\n    enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动disable。\n\nenable [breakpoints] delete range...\n    enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动删除。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"disable [breakpoints] [range...]\n    disable所指定的停止点，breakpoints为停止点号。如果什么都不指定，表示disable所有的停止点。简写命令是dis.\n\nenable [breakpoints] [range...]\n    enable所指定的停止点，breakpoints为停止点号。\n\nenable [breakpoints] once range...\n    enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动disable。\n\nenable [breakpoints] delete range...\n    enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动删除。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"五、停止条件维护"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前面在说到设置断点时，我们提到过可以设置一个条件，当条件成立时，程序自动停止，这是一个非常强大的功能，这里，我想专门说说这个条件的相关维护命令。一般来说，为断点设置一个条件，我们使用if关键词，后面跟其断点条件。并且，条件设置好后，我们可以用condition命令来修改断点的条件。（只有break和watch命令支持if，catch目前暂不支持if）"}]},{"type":"element","tag":"code","props":{"code":"condition <bnum> <expression>\n    修改断点号为bnum的停止条件为expression。\n\ncondition <bnum>\n    清除断点号为bnum的停止条件。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"condition <bnum> <expression>\n    修改断点号为bnum的停止条件为expression。\n\ncondition <bnum>\n    清除断点号为bnum的停止条件。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一个比较特殊的维护命令ignore，你可以指定程序运行时，忽略停止条件几次。"}]},{"type":"element","tag":"code","props":{"code":"ignore <bnum> <count>\n    表示忽略断点号为bnum的停止条件count次。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ignore <bnum> <count>\n    表示忽略断点号为bnum的停止条件count次。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"六、为停止点设定运行命令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以使用GDB提供的command命令来设置停止点的运行命令。也就是说，当运行的程序在被停止住时，我们可以让其自动运行一些别的命令，这很有利行自动化调试。对基于GDB的自动化调试是一个强大的支持。"}]},{"type":"element","tag":"code","props":{"code":"commands [bnum]\n... command-list ...\nend\n\n为断点号bnum指写一个命令列表。当程序被该断点停住时，gdb会依次运行命令列表中的命令。\n\n例如：\n\n    break foo if x>0\n    commands\n    printf \"x is %d/n\",x\n    continue\n    end\n    断点设置在函数foo中，断点条件是x>0，如果程序被断住后，也就是，一旦x的值在foo函数中大于0，GDB会自动打印出x的值，并继续运行程序。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"commands [bnum]\n... command-list ...\nend\n\n为断点号bnum指写一个命令列表。当程序被该断点停住时，gdb会依次运行命令列表中的命令。\n\n例如：\n\n    break foo if x>0\n    commands\n    printf \"x is %d/n\",x\n    continue\n    end\n    断点设置在函数foo中，断点条件是x>0，如果程序被断住后，也就是，一旦x的值在foo函数中大于0，GDB会自动打印出x的值，并继续运行程序。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你要清除断点上的命令序列，那么只要简单的执行一下commands命令，并直接在打个end就行了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"七、断点菜单"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在C++中，可能会重复出现同一个名字的函数若干次（函数重载），在这种情况下，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"break <function>"}]},{"type":"text","value":"不能告诉GDB要停在哪个函数的入口。当然，你可以使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"break <function(type)>"}]},{"type":"text","value":"也就是把函数的参数类型告诉GDB，以指定一个函数。否则的话，GDB会给你列出一个断点菜单供你选择你所需要的断点。你只要输入你菜单列表中的编号就可以了。如："}]},{"type":"element","tag":"code","props":{"code":"(gdb) b String::after\n[0] cancel\n[1] all\n[2] file:String.cc; line number:867\n[3] file:String.cc; line number:860\n[4] file:String.cc; line number:875\n[5] file:String.cc; line number:853\n[6] file:String.cc; line number:846\n[7] file:String.cc; line number:735\n> 2 4 6\nBreakpoint 1 at 0xb26c: file String.cc, line 867.\nBreakpoint 2 at 0xb344: file String.cc, line 875.\nBreakpoint 3 at 0xafcc: file String.cc, line 846.\nMultiple breakpoints were set.\nUse the \"delete\" command to delete unwanted\n breakpoints.\n(gdb)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"(gdb) b String::after\n[0] cancel\n[1] all\n[2] file:String.cc; line number:867\n[3] file:String.cc; line number:860\n[4] file:String.cc; line number:875\n[5] file:String.cc; line number:853\n[6] file:String.cc; line number:846\n[7] file:String.cc; line number:735\n> 2 4 6\nBreakpoint 1 at 0xb26c: file String.cc, line 867.\nBreakpoint 2 at 0xb344: file String.cc, line 875.\nBreakpoint 3 at 0xafcc: file String.cc, line 846.\nMultiple breakpoints were set.\nUse the \"delete\" command to delete unwanted\n breakpoints.\n(gdb)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可见，GDB列出了所有after的重载函数，你可以选一下列表编号就行了。0表示放弃设置断点，1表示所有函数都设置断点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"八、恢复程序运行和单步调试"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当程序被停住了，你可以用continue命令恢复程序的运行直到程序结束，或下一个断点到来。也可以使用step或next命令单步跟踪程序。"}]},{"type":"element","tag":"code","props":{"code":"continue [ignore-count]\nc [ignore-count]\nfg [ignore-count]\n    恢复程序运行，直到程序结束，或是下一个断点到来。ignore-count表示忽略其后的断点次数。continue，c，fg三个命令都是一样的意思。\n\n\nstep <count>\n    单步跟踪，如果有函数调用，他会进入该函数。进入函数的前提是，此函数被编译有debug信息。很像VC等工具中的step in。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。\n\nnext <count>\n    同样单步跟踪，如果有函数调用，他不会进入该函数。很像VC等工具中的step over。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。\n\nset step-mode\nset step-mode on\n    打开step-mode模式，于是，在进行单步跟踪时，程序不会因为没有debug信息而不停住。这个参数有很利于查看机器码。\n\nset step-mod off\n    关闭step-mode模式。\n\nfinish\n    运行程序，直到当前函数完成返回。并打印函数返回时的堆栈地址和返回值及参数值等信息。\n\nuntil 或 u\n    当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。\n\nstepi 或 si\nnexti 或 ni\n    单步跟踪一条机器指令！一条程序代码有可能由数条机器指令完成，stepi和nexti可以单步执行机器指令。与之一样有相同功能的命令是“display/i $pc” ，当运行完这个命令后，单步跟踪会在打出程序代码的同时打出机器指令（也就是汇编代码）\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"continue [ignore-count]\nc [ignore-count]\nfg [ignore-count]\n    恢复程序运行，直到程序结束，或是下一个断点到来。ignore-count表示忽略其后的断点次数。continue，c，fg三个命令都是一样的意思。\n\n\nstep <count>\n    单步跟踪，如果有函数调用，他会进入该函数。进入函数的前提是，此函数被编译有debug信息。很像VC等工具中的step in。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。\n\nnext <count>\n    同样单步跟踪，如果有函数调用，他不会进入该函数。很像VC等工具中的step over。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。\n\nset step-mode\nset step-mode on\n    打开step-mode模式，于是，在进行单步跟踪时，程序不会因为没有debug信息而不停住。这个参数有很利于查看机器码。\n\nset step-mod off\n    关闭step-mode模式。\n\nfinish\n    运行程序，直到当前函数完成返回。并打印函数返回时的堆栈地址和返回值及参数值等信息。\n\nuntil 或 u\n    当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。\n\nstepi 或 si\nnexti 或 ni\n    单步跟踪一条机器指令！一条程序代码有可能由数条机器指令完成，stepi和nexti可以单步执行机器指令。与之一样有相同功能的命令是“display/i $pc” ，当运行完这个命令后，单步跟踪会在打出程序代码的同时打出机器指令（也就是汇编代码）"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"九、信号（Signals）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"信号是一种软中断，是一种处理异步事件的方法。一般来说，操作系统都支持许多信号。尤其是UNIX，比较重要应用程序一般都会处理信号。UNIX定义了许多信号，比如SIGINT表示中断字符信号，也就是Ctrl+C的信号，SIGBUS表示硬件故障的信号；SIGCHLD表示子进程状态改变信号；SIGKILL表示终止程序运行的信号，等等。信号量编程是UNIX下非常重要的一种技术。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GDB有能力在你调试程序的时候处理任何一种信号，你可以告诉GDB需要处理哪一种信号。你可以要求GDB收到你所指定的信号时，马上停住正在运行的程序，以供你进行调试。你可以用GDB的handle命令来完成这一功能。"}]},{"type":"element","tag":"code","props":{"code":"handle <signal> <keywords...>\n    在GDB中定义一个信号处理。信号<signal>可以以SIG开头或不以SIG开头，可以用定义一个要处理信号的范围（如：SIGIO-SIGKILL，表示处理从SIGIO信号到SIGKILL的信号，其中包括SIGIO，SIGIOT，SIGKILL三个信号），也可以使用关键字all来标明要处理所有的信号。一旦被调试的程序接收到信号，运行程序马上会被GDB停住，以供调试。其<keywords>可以是以下几种关键字的一个或多个。\n\n    nostop\n        当被调试的程序收到信号时，GDB不会停住程序的运行，但会打出消息告诉你收到这种信号。\n    stop\n        当被调试的程序收到信号时，GDB会停住你的程序。\n    print\n        当被调试的程序收到信号时，GDB会显示出一条信息。\n    noprint\n        当被调试的程序收到信号时，GDB不会告诉你收到信号的信息。\n    pass\n    noignore\n        当被调试的程序收到信号时，GDB不处理信号。这表示，GDB会把这个信号交给被调试程序会处理。\n    nopass\n    ignore\n        当被调试的程序收到信号时，GDB不会让被调试程序来处理这个信号。\n\n\ninfo signals\ninfo handle\n    查看有哪些信号在被GDB检测中。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"handle <signal> <keywords...>\n    在GDB中定义一个信号处理。信号<signal>可以以SIG开头或不以SIG开头，可以用定义一个要处理信号的范围（如：SIGIO-SIGKILL，表示处理从SIGIO信号到SIGKILL的信号，其中包括SIGIO，SIGIOT，SIGKILL三个信号），也可以使用关键字all来标明要处理所有的信号。一旦被调试的程序接收到信号，运行程序马上会被GDB停住，以供调试。其<keywords>可以是以下几种关键字的一个或多个。\n\n    nostop\n        当被调试的程序收到信号时，GDB不会停住程序的运行，但会打出消息告诉你收到这种信号。\n    stop\n        当被调试的程序收到信号时，GDB会停住你的程序。\n    print\n        当被调试的程序收到信号时，GDB会显示出一条信息。\n    noprint\n        当被调试的程序收到信号时，GDB不会告诉你收到信号的信息。\n    pass\n    noignore\n        当被调试的程序收到信号时，GDB不处理信号。这表示，GDB会把这个信号交给被调试程序会处理。\n    nopass\n    ignore\n        当被调试的程序收到信号时，GDB不会让被调试程序来处理这个信号。\n\n\ninfo signals\ninfo handle\n    查看有哪些信号在被GDB检测中。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"十、线程（Thread Stops）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你程序是多线程的话，你可以定义你的断点是否在所有的线程上，或是在某个特定的线程。GDB很容易帮你完成这一工作。"}]},{"type":"element","tag":"code","props":{"code":"break <linespec> thread <threadno>\nbreak <linespec> thread <threadno> if ...\n    linespec指定了断点设置在的源程序的行号。threadno指定了线程的ID，注意，这个ID是GDB分配的，你可以通过“info threads”命令来查看正在运行程序中的线程信息。如果你不指定thread <threadno>则表示你的断点设在所有线程上面。你还可以为某线程指定断点条件。如：\n\n    (gdb) break frik.c:13 thread 28 if bartab > lim\n\n当你的程序被GDB停住时，所有的运行线程都会被停住。这方便你你查看运行程序的总体情况。而在你恢复程序运行时，所有的线程也会被恢复运行。那怕是主进程在被单步调试时。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"break <linespec> thread <threadno>\nbreak <linespec> thread <threadno> if ...\n    linespec指定了断点设置在的源程序的行号。threadno指定了线程的ID，注意，这个ID是GDB分配的，你可以通过“info threads”命令来查看正在运行程序中的线程信息。如果你不指定thread <threadno>则表示你的断点设在所有线程上面。你还可以为某线程指定断点条件。如：\n\n    (gdb) break frik.c:13 thread 28 if bartab > lim\n\n当你的程序被GDB停住时，所有的运行线程都会被停住。这方便你你查看运行程序的总体情况。而在你恢复程序运行时，所有的线程也会被恢复运行。那怕是主进程在被单步调试时。"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"查看栈信息-refer"},"children":[{"type":"text","value":"查看栈信息 "},{"type":"element","tag":"a","props":{"href":"https://haoel.blog.csdn.net/article/details/2882","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当程序被停住了，你需要做的第一件事就是查看程序是在哪里停住的。当你的程序调用了一个函数，函数的地址，函数参数，函数内的局部变量都会被压入“栈”（Stack）中。你可以用GDB命令来查看当前的栈中的信息。\n下面是一些查看函数调用栈信息的GDB命令："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"backtrace"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"bt"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"打印当前的函数调用栈的所有信息。如："}]},{"type":"element","tag":"code","props":{"code":"(gdb) bt\n#0 func (n=250) at tst.c:6\n#1 0x08048524 in main (argc=1, argv=0xbffff674) at tst.c:30\n#2 0x400409ed in __libc_start_main () from /lib/libc.so.6\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") bt"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#0 func (n=250) at tst.c:6"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#1 0x08048524 in main (argc=1, argv=0xbffff674) at tst.c:30"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"#2 0x400409ed in __libc_start_main () from /lib/libc.so.6"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从上可以看出函数的调用栈信息："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__libc_start_main --> main()--> func()"}]}]},{"type":"element","tag":"code","props":{"code":"backtrace n\nbt n\n# n是一个正整数，表示只打印栈顶上n层的栈信息。\nbacktrace <-n>\nbt <-n>\n# -n表一个负整数，表示只打印栈底下n层的栈信息。\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"backtrace"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"bt"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"# n是一个正整数，表示只打印栈顶上n层的栈信息。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"backtrace"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"bt"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"# -n表一个负整数，表示只打印栈底下n层的栈信息。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你要查看某一层的信息，你需要在切换当前的栈，一般来说，程序停止时，最顶层的栈就是当前栈，如果你要查看栈下面层的详细信息，首先要做的是切换当前栈。"}]},{"type":"element","tag":"code","props":{"code":"frame n\nf n\n# n是一个从0开始的整数，是栈中的层编号。比如：frame 0，表示栈顶，frame 1，表示栈的第二层。\nup\n# 表示向栈的上面移动n层，可以不打n，表示向上移动一层。\ndown\n# 表示向栈的下面移动n层，可以不打n，表示向下移动一层。\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"# n是一个从0开始的整数，是栈中的层编号。比如：frame 0，表示栈顶，frame 1，表示栈的第二层。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"up"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"# 表示向栈的上面移动n层，可以不打n，表示向上移动一层。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"down"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f54dad"},"children":[{"type":"text","value":"# 表示向栈的下面移动n层，可以不打n，表示向下移动一层。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的命令，都会打印出移动到的栈层的信息。如果你不想让其打出信息。你可以使用这三个命令："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"select-frame"}]},{"type":"text","value":" 对应于 frame 命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"up-silently"}]},{"type":"text","value":" 对应于 up 命令。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"down-silently"}]},{"type":"text","value":" 对应于 down 命令。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看当前栈层的信息，你可以用以下GDB命令："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"frame"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"会打印出这些信息：栈的层编号，当前的函数名，函数参数值，函数所在文件及行号，函数执行到的语句。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"info frame"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"info f"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个命令会打印出更为详细的当前栈层的信息，只不过，大多数都是运行时的内存地址。比如：函数地址，调用函数的地址，被调用函数的地址，目前的函数是由什么样的程序语言写成的、函数参数地址及值、局部变量的地址等等。如："}]},{"type":"element","tag":"code","props":{"code":"(gdb) info f\nStack level 0, frame at 0xbffff5d4:\neip = 0x804845d in func (tst.c:6); saved eip 0x8048524\ncalled by frame at 0xbffff60c\nsource language c.\nArglist at 0xbffff5d4, args: n=250\nLocals at 0xbffff5d4, Previous frame's sp is 0x0\nSaved registers:\nebp at 0xbffff5d4, eip at 0xbffff5d8\n\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") info f"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Stack"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"level"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"bffff5d4"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"eip"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"804845d"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"tst.c:6"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"saved"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"eip"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"8048524"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"called"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"by"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"frame"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"bffff60c"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"language"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"c."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Arglist"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"bffff5d4"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"args:"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"n="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"250"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Locals"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"0x"}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"bffff5d4"}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Previous"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"frame's sp is 0x0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"Saved registers:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"ebp at 0xbffff5d4, eip at 0xbffff5d8"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"info args"}]},{"type":"text","value":" 打印出当前函数的参数名及其值。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"info locals"}]},{"type":"text","value":" 打印出当前函数中所有局部变量及其值。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"info catch"}]},{"type":"text","value":" 打印出当前的函数中的异常处理信息。"}]}]},{"type":"element","tag":"h2","props":{"id":"查看源程序"},"children":[{"type":"text","value":"查看源程序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一、显示源代码"}]},{"type":"element","tag":"code","props":{"code":"GDB 可以打印出所调试程序的源代码，当然，在程序编译时一定要加上-g的参数，把源程序信息编译到执行文件中。不然就看不到源程序了。当程序停下来以后，GDB会报告程序停在了那个文件的第几行上。你可以用list命令来打印程序的源代码。还是来看一看查看源代码的GDB命令吧。\n\nlist <linenum>\n    显示程序第linenum行的周围的源程序。\n\nlist <function> \n    显示函数名为function的函数的源程序。\n    \nlist \n    显示当前行后面的源程序。\n\nlist - \n    显示当前行前面的源程序。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GDB 可以打印出所调试程序的源代码，当然，在程序编译时一定要加上-g的参数，把源程序信息编译到执行文件中。不然就看不到源程序了。当程序停下来以后，GDB会报告程序停在了那个文件的第几行上。你可以用list命令来打印程序的源代码。还是来看一看查看源代码的GDB命令吧。\n\nlist <linenum>\n    显示程序第linenum行的周围的源程序。\n\nlist <function> \n    显示函数名为function的函数的源程序。\n    \nlist \n    显示当前行后面的源程序。\n\nlist - \n    显示当前行前面的源程序。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般是打印当前行的上5行和下5行，如果显示函数是是上2行下8行，默认是10行，当然，你也可以定制显示的范围，使用下面命令可以设置一次显示源程序的行数。"}]},{"type":"element","tag":"code","props":{"code":"set listsize <count>\n    设置一次显示源代码的行数。\n    \nshow listsize\n    查看当前listsize的设置。\n   \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"set listsize <count>\n    设置一次显示源代码的行数。\n    \nshow listsize\n    查看当前listsize的设置。\n   "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"list命令还有下面的用法："}]},{"type":"element","tag":"code","props":{"code":"list <first>, <last>\n    显示从first行到last行之间的源代码。\n\nlist , <last>\n    显示从当前行到last行之间的源代码。\n    \nlist +\n    往后显示源代码。\n   \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"list <first>, <last>\n    显示从first行到last行之间的源代码。\n\nlist , <last>\n    显示从当前行到last行之间的源代码。\n    \nlist +\n    往后显示源代码。\n   "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说在list后面可以跟以下这们的参数："}]},{"type":"element","tag":"code","props":{"code":"<linenum>   行号。\n<+offset>   当前行号的正偏移量。\n<-offset>   当前行号的负偏移量。\n<filename:linenum>  哪个文件的哪一行。\n<function>  函数名。\n<filename:function> 哪个文件中的哪个函数。\n<*address>  程序运行时的语句在内存中的地址。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<linenum>   行号。\n<+offset>   当前行号的正偏移量。\n<-offset>   当前行号的负偏移量。\n<filename:linenum>  哪个文件的哪一行。\n<function>  函数名。\n<filename:function> 哪个文件中的哪个函数。\n<*address>  程序运行时的语句在内存中的地址。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"二、搜索源代码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不仅如此，GDB还提供了源代码搜索的命令："}]},{"type":"element","tag":"code","props":{"code":"forward-search <regexp> \nsearch <regexp>\n    向前面搜索。\n\nreverse-search <regexp> \n    全部搜索。\n    \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"forward-search <regexp> \nsearch <regexp>\n    向前面搜索。\n\nreverse-search <regexp> \n    全部搜索。\n    "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<regexp>"}]},{"type":"text","value":"就是正则表达式，也主一个字符串的匹配模式，关于正则表达式，我就不在这里讲了，还请各位查看相关资料。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三、指定源文件的路径"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"某些时候，用-g编译过后的执行程序中只是包括了源文件的名字，没有路径名。GDB提供了可以让你指定源文件的路径的命令，以便GDB进行搜索。"}]},{"type":"element","tag":"code","props":{"code":"directory <dirname ... >\ndir <dirname ... >\n    加一个源文件路径到当前路径的前面。如果你要指定多个路径，UNIX下你可以使用“:”，Windows下你可以使用“;”。\ndirectory \n    清除所有的自定义的源文件搜索路径信息。\n\nshow directories \n    显示定义了的源文件搜索路径。\n   \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"directory <dirname ... >\ndir <dirname ... >\n    加一个源文件路径到当前路径的前面。如果你要指定多个路径，UNIX下你可以使用“:”，Windows下你可以使用“;”。\ndirectory \n    清除所有的自定义的源文件搜索路径信息。\n\nshow directories \n    显示定义了的源文件搜索路径。\n   "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"四、源代码的内存"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你可以使用info line命令来查看源代码在内存中的地址。info line后面可以跟“行号”，“函数名”，“文件名:行号”，“文件名:函数名”，这个命令会打印出所指定的源码在运行时的内存地址，如："}]},{"type":"element","tag":"code","props":{"code":"    (gdb) info line tst.c:func\n    Line 5 of \"tst.c\" starts at address 0x8048456 <func+6> and ends at 0x804845d <func+13>.\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    (gdb) info line tst.c:func\n    Line 5 of \"tst.c\" starts at address 0x8048456 <func+6> and ends at 0x804845d <func+13>."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一个命令（disassemble）你可以查看源程序的当前执行时的机器码，这个命令会把目前内存中的指令dump出来。如下面的示例表示查看函数func的汇编代码。"}]},{"type":"element","tag":"code","props":{"code":"    (gdb) disassemble func\n    Dump of assembler code for function func:\n    0x8048450 <func>:       push   %ebp\n    0x8048451 <func+1>:     mov    %esp,%ebp\n    0x8048453 <func+3>:     sub    $0x18,%esp\n    0x8048456 <func+6>:     movl   $0x0,0xfffffffc(%ebp)\n    0x804845d <func+13>:    movl   $0x1,0xfffffff8(%ebp)\n    0x8048464 <func+20>:    mov    0xfffffff8(%ebp),%eax\n    0x8048467 <func+23>:    cmp    0x8(%ebp),%eax\n    0x804846a <func+26>:    jle    0x8048470 <func+32>\n    0x804846c <func+28>:    jmp    0x8048480 <func+48>\n    0x804846e <func+30>:    mov    %esi,%esi\n    0x8048470 <func+32>:    mov    0xfffffff8(%ebp),%eax\n    0x8048473 <func+35>:    add    %eax,0xfffffffc(%ebp)\n    0x8048476 <func+38>:    incl   0xfffffff8(%ebp)\n    0x8048479 <func+41>:    jmp    0x8048464 <func+20>\n    0x804847b <func+43>:    nop\n    0x804847c <func+44>:    lea    0x0(%esi,1),%esi\n    0x8048480 <func+48>:    mov    0xfffffffc(%ebp),%edx\n    0x8048483 <func+51>:    mov    %edx,%eax\n    0x8048485 <func+53>:    jmp    0x8048487 <func+55>\n    0x8048487 <func+55>:    mov    %ebp,%esp\n    0x8048489 <func+57>:    pop    %ebp\n    0x804848a <func+58>:    ret\n    End of assembler dump.\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    (gdb) disassemble func\n    Dump of assembler code for function func:\n    0x8048450 <func>:       push   %ebp\n    0x8048451 <func+1>:     mov    %esp,%ebp\n    0x8048453 <func+3>:     sub    $0x18,%esp\n    0x8048456 <func+6>:     movl   $0x0,0xfffffffc(%ebp)\n    0x804845d <func+13>:    movl   $0x1,0xfffffff8(%ebp)\n    0x8048464 <func+20>:    mov    0xfffffff8(%ebp),%eax\n    0x8048467 <func+23>:    cmp    0x8(%ebp),%eax\n    0x804846a <func+26>:    jle    0x8048470 <func+32>\n    0x804846c <func+28>:    jmp    0x8048480 <func+48>\n    0x804846e <func+30>:    mov    %esi,%esi\n    0x8048470 <func+32>:    mov    0xfffffff8(%ebp),%eax\n    0x8048473 <func+35>:    add    %eax,0xfffffffc(%ebp)\n    0x8048476 <func+38>:    incl   0xfffffff8(%ebp)\n    0x8048479 <func+41>:    jmp    0x8048464 <func+20>\n    0x804847b <func+43>:    nop\n    0x804847c <func+44>:    lea    0x0(%esi,1),%esi\n    0x8048480 <func+48>:    mov    0xfffffffc(%ebp),%edx\n    0x8048483 <func+51>:    mov    %edx,%eax\n    0x8048485 <func+53>:    jmp    0x8048487 <func+55>\n    0x8048487 <func+55>:    mov    %ebp,%esp\n    0x8048489 <func+57>:    pop    %ebp\n    0x804848a <func+58>:    ret\n    End of assembler dump."}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"查看运行时数据-refer"},"children":[{"type":"text","value":"查看运行时数据 "},{"type":"element","tag":"a","props":{"href":"https://haoel.blog.csdn.net/article/details/2883","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"code","props":{"code":"在你调试程序时，当程序被停住时，你可以使用print命令（简写命令为p），或是同义命令inspect来查看当前程序的运行数据。print命令的格式是：\n\nprint <expr>\nprint /<f> <expr>\n    <expr>是表达式，是你所调试的程序的语言的表达式（GDB可以调试多种编程语言），<f>是输出的格式，比如，如果要把表达式按16进制的格式输出，那么就是/x。\n    \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"在你调试程序时，当程序被停住时，你可以使用print命令（简写命令为p），或是同义命令inspect来查看当前程序的运行数据。print命令的格式是：\n\nprint <expr>\nprint /<f> <expr>\n    <expr>是表达式，是你所调试的程序的语言的表达式（GDB可以调试多种编程语言），<f>是输出的格式，比如，如果要把表达式按16进制的格式输出，那么就是/x。\n    "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一、表达式"}]},{"type":"element","tag":"code","props":{"code":"print和许多GDB的命令一样，可以接受一个表达式，GDB会根据当前的程序运行的数据来计算这个表达式，既然是表达式，那么就可以是当前程序运行中的const常量、变量、函数等内容。可惜的是GDB不能使用你在程序中所定义的宏。\n\n表达式的语法应该是当前所调试的语言的语法，由于C/C++是一种大众型的语言，所以，本文中的例子都是关于C/C++的。（而关于用GDB调试其它语言的章节，我将在后面介绍）\n\n在表达式中，有几种GDB所支持的操作符，它们可以用在任何一种语言中。\n\n@\n    是一个和数组有关的操作符，在后面会有更详细的说明。\n    \n::\n    指定一个在文件或是一个函数中的变量。\n    \n{<type>} <addr>\n    表示一个指向内存地址<addr>的类型为type的一个对象。\n    \n    \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print和许多GDB的命令一样，可以接受一个表达式，GDB会根据当前的程序运行的数据来计算这个表达式，既然是表达式，那么就可以是当前程序运行中的const常量、变量、函数等内容。可惜的是GDB不能使用你在程序中所定义的宏。\n\n表达式的语法应该是当前所调试的语言的语法，由于C/C++是一种大众型的语言，所以，本文中的例子都是关于C/C++的。（而关于用GDB调试其它语言的章节，我将在后面介绍）\n\n在表达式中，有几种GDB所支持的操作符，它们可以用在任何一种语言中。\n\n@\n    是一个和数组有关的操作符，在后面会有更详细的说明。\n    \n::\n    指定一个在文件或是一个函数中的变量。\n    \n{<type>} <addr>\n    表示一个指向内存地址<addr>的类型为type的一个对象。\n    \n    "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"二、程序变量"}]},{"type":"element","tag":"code","props":{"code":"在GDB中，你可以随时查看以下三种变量的值：\n    1、全局变量（所有文件可见的）\n    2、静态全局变量（当前文件可见的）\n    3、局部变量（当前Scope可见的）\n    \n如果你的局部变量和全局变量发生冲突（也就是重名），一般情况下是局部变量会隐藏全局变量，也就是说，如果一个全局变量和一个函数中的局部变量同名时，如果当前停止点在函数中，用print显示出的变量的值会是函数中的局部变量的值。如果此时你想查看全局变量的值时，你可以使用“::”操作符：\n\n    file::variable\nfunction::variable\n可以通过这种形式指定你所想查看的变量，是哪个文件中的或是哪个函数中的。例如，查看文件f2.c中的全局变量x的值：\n\ngdb) p 'f2.c'::x\n\n当然，“::”操作符会和C++中的发生冲突，GDB能自动识别“::” 是否C++的操作符，所以你不必担心在调试C++程序时会出现异常。\n\n另外，需要注意的是，如果你的程序编译时开启了优化选项，那么在用GDB调试被优化过的程序时，可能会发生某些变量不能访问，或是取值错误码的情况。这个是很正常的，因为优化程序会删改你的程序，整理你程序的语句顺序，剔除一些无意义的变量等，所以在GDB调试这种程序时，运行时的指令和你所编写指令就有不一样，也就会出现你所想象不到的结果。对付这种情况时，需要在编译程序时关闭编译优化。一般来说，几乎所有的编译器都支持编译优化的开关，例如，GNU的C/C++编译器GCC，你可以使用“-gstabs”选项来解决这个问题。关于编译器的参数，还请查看编译器的使用说明文档。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"在GDB中，你可以随时查看以下三种变量的值：\n    1、全局变量（所有文件可见的）\n    2、静态全局变量（当前文件可见的）\n    3、局部变量（当前Scope可见的）\n    \n如果你的局部变量和全局变量发生冲突（也就是重名），一般情况下是局部变量会隐藏全局变量，也就是说，如果一个全局变量和一个函数中的局部变量同名时，如果当前停止点在函数中，用print显示出的变量的值会是函数中的局部变量的值。如果此时你想查看全局变量的值时，你可以使用“::”操作符：\n\n    file::variable\nfunction::variable\n可以通过这种形式指定你所想查看的变量，是哪个文件中的或是哪个函数中的。例如，查看文件f2.c中的全局变量x的值：\n\ngdb) p 'f2.c'::x\n\n当然，“::”操作符会和C++中的发生冲突，GDB能自动识别“::” 是否C++的操作符，所以你不必担心在调试C++程序时会出现异常。\n\n另外，需要注意的是，如果你的程序编译时开启了优化选项，那么在用GDB调试被优化过的程序时，可能会发生某些变量不能访问，或是取值错误码的情况。这个是很正常的，因为优化程序会删改你的程序，整理你程序的语句顺序，剔除一些无意义的变量等，所以在GDB调试这种程序时，运行时的指令和你所编写指令就有不一样，也就会出现你所想象不到的结果。对付这种情况时，需要在编译程序时关闭编译优化。一般来说，几乎所有的编译器都支持编译优化的开关，例如，GNU的C/C++编译器GCC，你可以使用“-gstabs”选项来解决这个问题。关于编译器的参数，还请查看编译器的使用说明文档。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三、数组"}]},{"type":"element","tag":"code","props":{"code":"有时候，你需要查看一段连续的内存空间的值。比如数组的一段，或是动态分配的数据的大小。你可以使用GDB的“@”操作符，“@”的左边是第一个内存的地址的值，“@”的右边则你你想查看内存的长度。例如，你的程序中有这样的语句：\n \n    int *array = (int *) malloc (len * sizeof (int));\n    \n于是，在GDB调试过程中，你可以以如下命令显示出这个动态数组的取值：\n\n    p *array@len\n\n@的左边是数组的首地址的值，也就是变量array所指向的内容，右边则是数据的长度，其保存在变量len中，其输出结果，大约是下面这个样子的：\n\n    (gdb) p *array@len\n    $1 = {2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40}\n\n如果是静态数组的话，可以直接用print数组名，就可以显示数组中所有数据的内容了。\n\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"有时候，你需要查看一段连续的内存空间的值。比如数组的一段，或是动态分配的数据的大小。你可以使用GDB的“@”操作符，“@”的左边是第一个内存的地址的值，“@”的右边则你你想查看内存的长度。例如，你的程序中有这样的语句：\n \n    int *array = (int *) malloc (len * sizeof (int));\n    \n于是，在GDB调试过程中，你可以以如下命令显示出这个动态数组的取值：\n\n    p *array@len\n\n@的左边是数组的首地址的值，也就是变量array所指向的内容，右边则是数据的长度，其保存在变量len中，其输出结果，大约是下面这个样子的：\n\n    (gdb) p *array@len\n    $1 = {2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40}\n\n如果是静态数组的话，可以直接用print数组名，就可以显示数组中所有数据的内容了。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"四、输出格式"}]},{"type":"element","tag":"code","props":{"code":"一般来说，GDB会根据变量的类型输出变量的值。但你也可以自定义GDB的输出的格式。例如，你想输出一个整数的十六进制，或是二进制来查看这个整型变量的中的位的情况。要做到这样，你可以使用GDB的数据显示格式：\n\nx  按十六进制格式显示变量。\nd  按十进制格式显示变量。\nu  按十六进制格式显示无符号整型。\no  按八进制格式显示变量。\nt  按二进制格式显示变量。 \na  按十六进制格式显示变量。\nc  按字符格式显示变量。\nf  按浮点数格式显示变量。\n\n    (gdb) p i\n    $21 = 101    \n    \n    (gdb) p/a i\n    $22 = 0x65\n    \n    (gdb) p/c i\n    $23 = 101 'e'\n    \n    (gdb) p/f i\n    $24 = 1.41531145e-43\n    \n    (gdb) p/x i\n    $25 = 0x65\n    \n    (gdb) p/t i\n    $26 = 1100101\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"一般来说，GDB会根据变量的类型输出变量的值。但你也可以自定义GDB的输出的格式。例如，你想输出一个整数的十六进制，或是二进制来查看这个整型变量的中的位的情况。要做到这样，你可以使用GDB的数据显示格式：\n\nx  按十六进制格式显示变量。\nd  按十进制格式显示变量。\nu  按十六进制格式显示无符号整型。\no  按八进制格式显示变量。\nt  按二进制格式显示变量。 \na  按十六进制格式显示变量。\nc  按字符格式显示变量。\nf  按浮点数格式显示变量。\n\n    (gdb) p i\n    $21 = 101    \n    \n    (gdb) p/a i\n    $22 = 0x65\n    \n    (gdb) p/c i\n    $23 = 101 'e'\n    \n    (gdb) p/f i\n    $24 = 1.41531145e-43\n    \n    (gdb) p/x i\n    $25 = 0x65\n    \n    (gdb) p/t i\n    $26 = 1100101"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"五、查看内存"}]},{"type":"element","tag":"code","props":{"code":"你可以使用examine命令（简写是x）来查看内存地址中的值。x命令的语法如下所示：\n\nx/<n/f/u> <addr> \n\nn、f、u是可选的参数。\n\nn 是一个正整数，表示显示内存的长度，也就是说从当前地址向后显示几个地址的内容。\nf 表示显示的格式，参见上面。如果地址所指的是字符串，那么格式可以是s，如果地十是指令地址，那么格式可以是i。\nu 表示从当前地址往后请求的字节数，如果不指定的话，GDB默认是4个bytes。u参数可以用下面的字符来代替，b表示单字节，h表示双字节，w表示四字节，g表示八字节。当我们指定了字节长度后，GDB会从指内存定的内存地址开始，读写指定字节，并把其当作一个值取出来。\n\n<addr>表示一个内存地址。\n\nn/f/u三个参数可以一起使用。例如：\n\n命令：x/3uh 0x54320 表示，从内存地址0x54320读取内容，h表示以双字节为一个单位，3表示三个单位，u表示按十六进制显示。\n\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"你可以使用examine命令（简写是x）来查看内存地址中的值。x命令的语法如下所示：\n\nx/<n/f/u> <addr> \n\nn、f、u是可选的参数。\n\nn 是一个正整数，表示显示内存的长度，也就是说从当前地址向后显示几个地址的内容。\nf 表示显示的格式，参见上面。如果地址所指的是字符串，那么格式可以是s，如果地十是指令地址，那么格式可以是i。\nu 表示从当前地址往后请求的字节数，如果不指定的话，GDB默认是4个bytes。u参数可以用下面的字符来代替，b表示单字节，h表示双字节，w表示四字节，g表示八字节。当我们指定了字节长度后，GDB会从指内存定的内存地址开始，读写指定字节，并把其当作一个值取出来。\n\n<addr>表示一个内存地址。\n\nn/f/u三个参数可以一起使用。例如：\n\n命令：x/3uh 0x54320 表示，从内存地址0x54320读取内容，h表示以双字节为一个单位，3表示三个单位，u表示按十六进制显示。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"六、自动显示"}]},{"type":"element","tag":"code","props":{"code":"你可以设置一些自动显示的变量，当程序停住时，或是在你单步跟踪时，这些变量会自动显示。相关的GDB命令是display。\n\ndisplay <expr> \ndisplay/<fmt> <expr> \ndisplay/<fmt> <addr>\n\nexpr是一个表达式，fmt表示显示的格式，addr表示内存地址，当你用display设定好了一个或多个表达式后，只要你的程序被停下来，GDB会自动显示你所设置的这些表达式的值。\n\n格式i和s同样被display支持，一个非常有用的命令是：\n\n    display/i $pc\n\n$pc是GDB的环境变量，表示着指令的地址，/i则表示输出格式为机器指令码，也就是汇编。于是当程序停下后，就会出现源代码和机器指令码相对应的情形，这是一个很有意思的功能。\n\n下面是一些和display相关的GDB命令：\n\nundisplay <dnums...>\ndelete display <dnums...>\n删除自动显示，dnums意为所设置好了的自动显式的编号。如果要同时删除几个，编号可以用空格分隔，如果要删除一个范围内的编号，可以用减号表示（如：2-5）\n\ndisable display <dnums...>\nenable display <dnums...>\ndisable和enalbe不删除自动显示的设置，而只是让其失效和恢复。\n\ninfo display\n查看display设置的自动显示的信息。GDB会打出一张表格，向你报告当然调试中设置了多少个自动显示设置，其中包括，设置的编号，表达式，是否enable。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"你可以设置一些自动显示的变量，当程序停住时，或是在你单步跟踪时，这些变量会自动显示。相关的GDB命令是display。\n\ndisplay <expr> \ndisplay/<fmt> <expr> \ndisplay/<fmt> <addr>\n\nexpr是一个表达式，fmt表示显示的格式，addr表示内存地址，当你用display设定好了一个或多个表达式后，只要你的程序被停下来，GDB会自动显示你所设置的这些表达式的值。\n\n格式i和s同样被display支持，一个非常有用的命令是：\n\n    display/i $pc\n\n$pc是GDB的环境变量，表示着指令的地址，/i则表示输出格式为机器指令码，也就是汇编。于是当程序停下后，就会出现源代码和机器指令码相对应的情形，这是一个很有意思的功能。\n\n下面是一些和display相关的GDB命令：\n\nundisplay <dnums...>\ndelete display <dnums...>\n删除自动显示，dnums意为所设置好了的自动显式的编号。如果要同时删除几个，编号可以用空格分隔，如果要删除一个范围内的编号，可以用减号表示（如：2-5）\n\ndisable display <dnums...>\nenable display <dnums...>\ndisable和enalbe不删除自动显示的设置，而只是让其失效和恢复。\n\ninfo display\n查看display设置的自动显示的信息。GDB会打出一张表格，向你报告当然调试中设置了多少个自动显示设置，其中包括，设置的编号，表达式，是否enable。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"七、设置显示选项 "},{"type":"element","tag":"a","props":{"href":"https://haoel.blog.csdn.net/article/details/2884","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"code","props":{"code":"GDB中关于显示的选项比较多，这里我只例举大多数常用的选项。\n\nset print address \nset print address on \n    打开地址输出，当程序显示函数信息时，GDB会显出函数的参数地址。系统默认为打开的，如：\n    \n    (gdb) f\n    #0  set_quotes (lq=0x34c78 \"<<\", rq=0x34c88 \">>\")\n        at input.c:530\n    530         if (lquote != def_lquote)\n\n\nset print address off \n    关闭函数的参数地址显示，如：\n    \n    (gdb) set print addr off\n    (gdb) f\n    #0  set_quotes (lq=\"<<\", rq=\">>\") at input.c:530\n    530         if (lquote != def_lquote)\n\nshow print address \n    查看当前地址显示选项是否打开。\n    \nset print array \nset print array on \n    打开数组显示，打开后当数组显示时，每个元素占一行，如果不打开的话，每个元素则以逗号分隔。这个选项默认是关闭的。与之相关的两个命令如下，我就不再多说了。\n    \nset print array off \nshow print array\n\nset print elements <number-of-elements>\n    这个选项主要是设置数组的，如果你的数组太大了，那么就可以指定一个<number-of-elements>来指定数据显示的最大长度，当到达这个长度时，GDB就不再往下显示了。如果设置为0，则表示不限制。\n    \nshow print elements \n    查看print elements的选项信息。\n    \nset print null-stop <on/off>\n    如果打开了这个选项，那么当显示字符串时，遇到结束符则停止显示。这个选项默认为off。\n    \nset print pretty on \n    如果打开printf pretty这个选项，那么当GDB显示结构体时会比较漂亮。如：\n\n        $1 = {\n          next = 0x0,\n          flags = {\n            sweet = 1,\n            sour = 1\n          },\n          meat = 0x54 \"Pork\"\n        }\n\nset print pretty off\n    关闭printf pretty这个选项，GDB显示结构体时会如下显示：\n    \n        $1 = {next = 0x0, flags = {sweet = 1, sour = 1}, meat = 0x54 \"Pork\"}\n        \nshow print pretty \n    查看GDB是如何显示结构体的。\n    \n\nset print sevenbit-strings <on/off>\n    设置字符显示，是否按“/nnn”的格式显示，如果打开，则字符串或字符数据按/nnn显示，如“/065”。\n\nshow print sevenbit-strings\n    查看字符显示开关是否打开。 \n    \nset print union <on/off>\n    设置显示结构体时，是否显式其内的联合体数据。例如有以下数据结构：\n    \n    typedef enum {Tree, Bug} Species;\n    typedef enum {Big_tree, Acorn, Seedling} Tree_forms;\n    typedef enum {Caterpillar, Cocoon, Butterfly}\n                  Bug_forms;\n    \n    struct thing {\n      Species it;\n      union {\n        Tree_forms tree;\n        Bug_forms bug;\n      } form;\n    };\n    \n    struct thing foo = {Tree, {Acorn}};\n\n    当打开这个开关时，执行 p foo 命令后，会如下显示：\n        $1 = {it = Tree, form = {tree = Acorn, bug = Cocoon}}\n    \n    当关闭这个开关时，执行 p foo 命令后，会如下显示：\n        $1 = {it = Tree, form = {...}}\n\nshow print union\n    查看联合体数据的显示方式\n    \nset print object <on/off>\n    在C++中，如果一个对象指针指向其派生类，如果打开这个选项，GDB会自动按照虚方法调用的规则显示输出，如果关闭这个选项的话，GDB就不管虚函数表了。这个选项默认是off。\n\nshow print object\n    查看对象选项的设置。\n    \nset print static-members <on/off>\n    这个选项表示，当显示一个C++对象中的内容是，是否显示其中的静态数据成员。默认是on。\n\nshow print static-members\n    查看静态数据成员选项设置。\n    \nset print vtbl <on/off>\n    当此选项打开时，GDB将用比较规整的格式来显示虚函数表时。其默认是关闭的。\n    \nshow print vtbl\n    查看虚函数显示格式的选项。\n    \n    \n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GDB中关于显示的选项比较多，这里我只例举大多数常用的选项。\n\nset print address \nset print address on \n    打开地址输出，当程序显示函数信息时，GDB会显出函数的参数地址。系统默认为打开的，如：\n    \n    (gdb) f\n    #0  set_quotes (lq=0x34c78 \"<<\", rq=0x34c88 \">>\")\n        at input.c:530\n    530         if (lquote != def_lquote)\n\n\nset print address off \n    关闭函数的参数地址显示，如：\n    \n    (gdb) set print addr off\n    (gdb) f\n    #0  set_quotes (lq=\"<<\", rq=\">>\") at input.c:530\n    530         if (lquote != def_lquote)\n\nshow print address \n    查看当前地址显示选项是否打开。\n    \nset print array \nset print array on \n    打开数组显示，打开后当数组显示时，每个元素占一行，如果不打开的话，每个元素则以逗号分隔。这个选项默认是关闭的。与之相关的两个命令如下，我就不再多说了。\n    \nset print array off \nshow print array\n\nset print elements <number-of-elements>\n    这个选项主要是设置数组的，如果你的数组太大了，那么就可以指定一个<number-of-elements>来指定数据显示的最大长度，当到达这个长度时，GDB就不再往下显示了。如果设置为0，则表示不限制。\n    \nshow print elements \n    查看print elements的选项信息。\n    \nset print null-stop <on/off>\n    如果打开了这个选项，那么当显示字符串时，遇到结束符则停止显示。这个选项默认为off。\n    \nset print pretty on \n    如果打开printf pretty这个选项，那么当GDB显示结构体时会比较漂亮。如：\n\n        $1 = {\n          next = 0x0,\n          flags = {\n            sweet = 1,\n            sour = 1\n          },\n          meat = 0x54 \"Pork\"\n        }\n\nset print pretty off\n    关闭printf pretty这个选项，GDB显示结构体时会如下显示：\n    \n        $1 = {next = 0x0, flags = {sweet = 1, sour = 1}, meat = 0x54 \"Pork\"}\n        \nshow print pretty \n    查看GDB是如何显示结构体的。\n    \n\nset print sevenbit-strings <on/off>\n    设置字符显示，是否按“/nnn”的格式显示，如果打开，则字符串或字符数据按/nnn显示，如“/065”。\n\nshow print sevenbit-strings\n    查看字符显示开关是否打开。 \n    \nset print union <on/off>\n    设置显示结构体时，是否显式其内的联合体数据。例如有以下数据结构：\n    \n    typedef enum {Tree, Bug} Species;\n    typedef enum {Big_tree, Acorn, Seedling} Tree_forms;\n    typedef enum {Caterpillar, Cocoon, Butterfly}\n                  Bug_forms;\n    \n    struct thing {\n      Species it;\n      union {\n        Tree_forms tree;\n        Bug_forms bug;\n      } form;\n    };\n    \n    struct thing foo = {Tree, {Acorn}};\n\n    当打开这个开关时，执行 p foo 命令后，会如下显示：\n        $1 = {it = Tree, form = {tree = Acorn, bug = Cocoon}}\n    \n    当关闭这个开关时，执行 p foo 命令后，会如下显示：\n        $1 = {it = Tree, form = {...}}\n\nshow print union\n    查看联合体数据的显示方式\n    \nset print object <on/off>\n    在C++中，如果一个对象指针指向其派生类，如果打开这个选项，GDB会自动按照虚方法调用的规则显示输出，如果关闭这个选项的话，GDB就不管虚函数表了。这个选项默认是off。\n\nshow print object\n    查看对象选项的设置。\n    \nset print static-members <on/off>\n    这个选项表示，当显示一个C++对象中的内容是，是否显示其中的静态数据成员。默认是on。\n\nshow print static-members\n    查看静态数据成员选项设置。\n    \nset print vtbl <on/off>\n    当此选项打开时，GDB将用比较规整的格式来显示虚函数表时。其默认是关闭的。\n    \nshow print vtbl\n    查看虚函数显示格式的选项。\n    \n    "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"八、历史记录"}]},{"type":"element","tag":"code","props":{"code":"当你用GDB的print查看程序运行时的数据时，你每一个print都会被GDB记录下来。GDB会以$1, $2, $3 .....这样的方式为你每一个print命令编上号。于是，你可以使用这个编号访问以前的表达式，如$1。这个功能所带来的好处是，如果你先前输入了一个比较长的表达式，如果你还想查看这个表达式的值，你可以使用历史记录来访问，省去了重复输入。\n\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"当你用GDB的print查看程序运行时的数据时，你每一个print都会被GDB记录下来。GDB会以$1, $2, $3 .....这样的方式为你每一个print命令编上号。于是，你可以使用这个编号访问以前的表达式，如$1。这个功能所带来的好处是，如果你先前输入了一个比较长的表达式，如果你还想查看这个表达式的值，你可以使用历史记录来访问，省去了重复输入。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"九、GDB环境变量"}]},{"type":"element","tag":"code","props":{"code":"你可以在GDB的调试环境中定义自己的变量，用来保存一些调试程序中的运行数据。要定义一个GDB的变量很简单只需。使用GDB的set命令。GDB的环境变量和UNIX一样，也是以$起头。如：\n\nset $foo = *object_ptr\n\n使用环境变量时，GDB会在你第一次使用时创建这个变量，而在以后的使用中，则直接对其賦值。环境变量没有类型，你可以给环境变量定义任一的类型。包括结构体和数组。\n\nshow convenience \n    该命令查看当前所设置的所有的环境变量。\n    \n这是一个比较强大的功能，环境变量和程序变量的交互使用，将使得程序调试更为灵活便捷。例如：\n\n    set $i = 0\n    print bar[$i++]->contents\n\n于是，当你就不必，print bar[0]->contents, print bar[1]->contents地输入命令了。输入这样的命令后，只用敲回车，重复执行上一条语句，环境变量会自动累加，从而完成逐个输出的功能。\n\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"你可以在GDB的调试环境中定义自己的变量，用来保存一些调试程序中的运行数据。要定义一个GDB的变量很简单只需。使用GDB的set命令。GDB的环境变量和UNIX一样，也是以$起头。如：\n\nset $foo = *object_ptr\n\n使用环境变量时，GDB会在你第一次使用时创建这个变量，而在以后的使用中，则直接对其賦值。环境变量没有类型，你可以给环境变量定义任一的类型。包括结构体和数组。\n\nshow convenience \n    该命令查看当前所设置的所有的环境变量。\n    \n这是一个比较强大的功能，环境变量和程序变量的交互使用，将使得程序调试更为灵活便捷。例如：\n\n    set $i = 0\n    print bar[$i++]->contents\n\n于是，当你就不必，print bar[0]->contents, print bar[1]->contents地输入命令了。输入这样的命令后，只用敲回车，重复执行上一条语句，环境变量会自动累加，从而完成逐个输出的功能。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"十、查看寄存器"}]},{"type":"element","tag":"code","props":{"code":"要查看寄存器的值，很简单，可以使用如下命令：\n\ninfo registers \n    查看寄存器的情况。（除了浮点寄存器）\n\ninfo all-registers\n    查看所有寄存器的情况。（包括浮点寄存器）\n\ninfo registers <regname ...>\n    查看所指定的寄存器的情况。\n    \n寄存器中放置了程序运行时的数据，比如程序当前运行的指令地址（ip），程序的当前堆栈地址（sp）等等。你同样可以使用print命令来访问寄存器的情况，只需要在寄存器名字前加一个$符号就可以了。如：p $eip。\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"要查看寄存器的值，很简单，可以使用如下命令：\n\ninfo registers \n    查看寄存器的情况。（除了浮点寄存器）\n\ninfo all-registers\n    查看所有寄存器的情况。（包括浮点寄存器）\n\ninfo registers <regname ...>\n    查看所指定的寄存器的情况。\n    \n寄存器中放置了程序运行时的数据，比如程序当前运行的指令地址（ip），程序的当前堆栈地址（sp）等等。你同样可以使用print命令来访问寄存器的情况，只需要在寄存器名字前加一个$符号就可以了。如：p $eip。"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"改变程序的执行"},"children":[{"type":"text","value":"改变程序的执行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/haoel/article/details/2885","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一旦使用GDB挂上被调试程序，当程序运行起来后，你可以根据自己的调试思路来动态地在GDB中更改当前被调试程序的运行线路或是其变量的值，这个强大的功能能够让你更好的调试你的程序，比如，你可以在程序的一次运行中走遍程序的所有分支。"}]},{"type":"element","tag":"h3","props":{"id":"修改变量值"},"children":[{"type":"text","value":"修改变量值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"修改被调试程序运行时的变量值，在GDB中很容易实现，使用GDB的print命令即可完成。如："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(gdb) print x=4"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"x=4这个表达式是C/C++的语法，意为把变量x的值修改为4，如果你当前调试的语言是Pascal，那么你可以使用Pascal的语法：x:=4。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在某些时候，很有可能你的变量和GDB中的参数冲突，如："}]},{"type":"element","tag":"code","props":{"code":"(gdb) whatis width\ntype = double\n(gdb) p width\n$4 = 13\n(gdb) set width=47\nInvalid syntax in expression.\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") whatis width"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"double"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") p width"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"$4"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"13"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"gdb"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":") set width"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3584d7"},"children":[{"type":"text","value":"47"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3467fb"},"children":[{"type":"text","value":"Invalid"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"syntax"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a602f9"},"children":[{"type":"text","value":"expression."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为，set width是GDB的命令，所以，出现了“Invalid syntax in expression”的设置错误，此时，你可以使用set var命令来告诉GDB，width不是你GDB的参数，而是程序的变量名，如："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(gdb) set var width=47"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，还可能有些情况，GDB并不报告这种错误，所以保险起见，在你改变程序变量取值时，最好都使用set var格式的GDB命令。"}]},{"type":"element","tag":"h3","props":{"id":"跳转执行"},"children":[{"type":"text","value":"跳转执行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说，被调试程序会按照程序代码的运行顺序依次执行。GDB提供了乱序执行的功能，也就是说，GDB可以修改程序的执行顺序，可以让程序执行随意跳跃。这个功能可以由GDB的jump命令来完："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jump <linespec>"}]},{"type":"text","value":"\n指定下一条语句的运行点。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<linespce>"}]},{"type":"text","value":"可以是文件的行号，可以是file:line格式，可以是+num这种偏移量格式。表式着下一条运行语句从哪里开始。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jump <address>"}]},{"type":"text","value":"\n这里的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<address>"}]},{"type":"text","value":"是代码行的内存地址。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意，jump命令不会改变当前的程序栈中的内容，所以，当你从一个函数跳到另一个函数时，当函数运行完返回时进行弹栈操作时必然会发生错误，可能结果还是非常奇怪的，甚至于产生程序Core Dump。所以最好是同一个函数中进行跳转。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"熟悉汇编的人都知道，程序运行时，有一个寄存器用于保存当前代码所在的内存地址。所以，jump命令也就是改变了这个寄存器中的值。于是，你可以使用“set $pc”来更改跳转执行的地址。如："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set $pc = 0x485"}]}]},{"type":"element","tag":"h3","props":{"id":"产生信号量"},"children":[{"type":"text","value":"产生信号量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用singal命令，可以产生一个信号量给被调试的程序。如：中断信号Ctrl+C。这非常方便于程序的调试，可以在程序运行的任意位置设置断点，并在该断点用GDB产生一个信号量，这种精确地在某处产生信号非常有利程序的调试。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"语法是："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signal <singal>"}]},{"type":"text","value":"，UNIX的系统信号量通常从1到15。所以"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<singal>"}]},{"type":"text","value":"取值也在这个范围。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"single命令和shell的kill命令不同，系统的kill命令发信号给被调试程序时，是由GDB截获的，而single命令所发出一信号则是直接发给被调试程序的。"}]},{"type":"element","tag":"h3","props":{"id":"强制函数返回"},"children":[{"type":"text","value":"强制函数返回"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你的调试断点在某个函数中，并还有语句没有执行完。你可以使用return命令强制函数忽略还没有执行的语句并返回。"}]},{"type":"element","tag":"code","props":{"code":"return\nreturn <expression>\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"return"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-50977c"},"children":[{"type":"text","value":"expression"}]},{"type":"element","tag":"span","props":{"class":"ct-4ce865"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用return命令取消当前函数的执行，并立即返回，如果指定了"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<expression>"}]},{"type":"text","value":"，那么该表达式的值会被认作函数的返回值。"}]},{"type":"element","tag":"h3","props":{"id":"强制调用函数"},"children":[{"type":"text","value":"强制调用函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"call <expr>"}]},{"type":"text","value":"\n表达式中可以一是函数，以此达到强制调用函数的目的。并显示函数的返回值，如果函数返回值是void，那么就不显示。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一个相似的命令也可以完成这一功能——print，print后面可以跟表达式，所以也可以用他来调用函数，print和call的不同是，如果函数返回void，call则不显示，print则显示函数返回值，并把该值存入历史数据中。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-268fcd{color:#8250DF}\n.ct-f54dad{color:#6E7781}\n.ct-3584d7{color:#0550AE}\n.ct-4ce865{color:#CF222E}\n.ct-a602f9{color:#0A3069}\n.ct-50977c{color:#24292F}\n.ct-3467fb{color:#953800}\n.dark .ct-3467fb{color:#FFA657}\n.dark .ct-50977c{color:#C9D1D9}\n.dark .ct-a602f9{color:#A5D6FF}\n.dark .ct-4ce865{color:#FF7B72}\n.dark .ct-3584d7{color:#79C0FF}\n.dark .ct-f54dad{color:#8B949E}\n.dark .ct-268fcd{color:#D2A8FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"use","depth":2,"text":"use"},{"id":"gdb的命令概貌","depth":2,"text":"GDB的命令概貌"},{"id":"run","depth":2,"text":"run","children":[{"id":"layout","depth":3,"text":"layout"},{"id":"gdb中运行unix的shell程序","depth":3,"text":"GDB中运行UNIX的shell程序"},{"id":"在gdb中运行程序","depth":3,"text":"在GDB中运行程序"},{"id":"调试已运行的程序","depth":3,"text":"调试已运行的程序"},{"id":"暂停-恢复程序运行","depth":3,"text":"暂停 / 恢复程序运行"},{"id":"查看栈信息-refer","depth":3,"text":"查看栈信息 refer"}]},{"id":"查看源程序","depth":2,"text":"查看源程序"},{"id":"查看运行时数据-refer","depth":2,"text":"查看运行时数据 refer"},{"id":"改变程序的执行","depth":2,"text":"改变程序的执行","children":[{"id":"修改变量值","depth":3,"text":"修改变量值"},{"id":"跳转执行","depth":3,"text":"跳转执行"},{"id":"产生信号量","depth":3,"text":"产生信号量"},{"id":"强制函数返回","depth":3,"text":"强制函数返回"},{"id":"强制调用函数","depth":3,"text":"强制调用函数"}]}]}},"_type":"markdown","_id":"content:5.notes:linux:gdb.md","_source":"content","_file":"5.notes/linux/gdb.md","_extension":"md"},{"_path":"/notes/linux/guide","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"指南","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"指南"},"children":[{"type":"text","value":"指南"}]},{"type":"element","tag":"h2","props":{"id":"修改-linux-环境变量"},"children":[{"type":"text","value":"修改 Linux 环境变量"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"临时生效 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export NAME='value'"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"全局环境变量配置永久生效"}]},{"type":"element","tag":"code","props":{"code":"#切换到root用户下\nsu - root\n#编辑全局系统环境变量存储配置文件，所有用户都生效，永久生效。\nvim /etc/profile\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31694b"},"children":[{"type":"text","value":"#切换到root用户下"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d598c"},"children":[{"type":"text","value":"su"}]},{"type":"element","tag":"span","props":{"class":"ct-96ee57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca4a74"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-96ee57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca4a74"},"children":[{"type":"text","value":"root"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31694b"},"children":[{"type":"text","value":"#编辑全局系统环境变量存储配置文件，所有用户都生效，永久生效。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6d598c"},"children":[{"type":"text","value":"vim"}]},{"type":"element","tag":"span","props":{"class":"ct-96ee57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca4a74"},"children":[{"type":"text","value":"/etc/profile"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"尾行加入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export NAME='value'"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"execute "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"source /etc/profile"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ca4a74{color:#0A3069}\n.ct-96ee57{color:#24292F}\n.ct-6d598c{color:#953800}\n.ct-31694b{color:#6E7781}\n.dark .ct-31694b{color:#8B949E}\n.dark .ct-6d598c{color:#FFA657}\n.dark .ct-96ee57{color:#C9D1D9}\n.dark .ct-ca4a74{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"修改-linux-环境变量","depth":2,"text":"修改 Linux 环境变量"}]}},"_type":"markdown","_id":"content:5.notes:linux:guide.md","_source":"content","_file":"5.notes/linux/guide.md","_extension":"md"},{"_path":"/notes/linux/install","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"install","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"install"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"h2","props":{"id":"linux-安装pcre库"},"children":[{"type":"text","value":"Linux 安装PCRE库"}]},{"type":"element","tag":"code","props":{"code":"cd /usr/local/\n#下载\nwget https://netix.dl.sourceforge.net/project/pcre/pcre/8.40/pcre-8.40.tar.gz\n#解压安装包:\ntar -zxvf pcre-8.40.tar.gz\n#进入安装包目录\ncd pcre-8.40\n#编译安装  \n./configure\n# 如果报错:configure: error: You need a C++ compiler for C++ support.则表示[系统缺少c++环境]，需要先安装:yum install -y gcc gcc-c++\nmake && make install\n#查看pcre版本\npcre-config --version \n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"/usr/local/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"#下载"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"https://netix.dl.sourceforge.net/project/pcre/pcre/"}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"8.40"}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"/pcre-8.40.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"#解压安装包:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"-zxvf"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"pcre-8.40.tar.gz"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"#进入安装包目录"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"pcre-"}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"8.40"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"#编译安装  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"/configure"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"# 如果报错:configure: error: You need a C++ compiler for C++ support.则表示[系统缺少c++环境]，需要先安装:yum install -y gcc gcc-c++"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"install"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"#查看pcre版本"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"pcre-config"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"--version"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"卸载安装包"},"children":[{"type":"text","value":"卸载安装包"}]},{"type":"element","tag":"h3","props":{"id":"redhat-系列"},"children":[{"type":"text","value":"RedHat 系列"}]},{"type":"element","tag":"code","props":{"code":"yum list installed\nyum -y remove vsftpd\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"installed"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"vsftpd"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"debian系列"},"children":[{"type":"text","value":"Debian系列"}]},{"type":"element","tag":"code","props":{"code":"# 使用apt 列出已经安装的程序包：\nsudo apt list --installed\n# 卸载程序包\nsudo apt remove vsftpd\n# 添加 --purge选项，卸载 把程序包的配置文件也删掉。\nsudo apt remove --purge vsftpd\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"# 使用apt 列出已经安装的程序包："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"--installed"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"# 卸载程序包"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"vsftpd"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1cd61c"},"children":[{"type":"text","value":"# 添加 --purge选项，卸载 把程序包的配置文件也删掉。"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27a063"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"apt"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-26508a"},"children":[{"type":"text","value":"--purge"}]},{"type":"element","tag":"span","props":{"class":"ct-9d48a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e69ba2"},"children":[{"type":"text","value":"vsftpd"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-27a063{color:#953800}\n.ct-1cd61c{color:#6E7781}\n.ct-e69ba2{color:#0A3069}\n.ct-9d48a8{color:#24292F}\n.ct-26508a{color:#0550AE}\n.dark .ct-26508a{color:#79C0FF}\n.dark .ct-9d48a8{color:#C9D1D9}\n.dark .ct-e69ba2{color:#A5D6FF}\n.dark .ct-1cd61c{color:#8B949E}\n.dark .ct-27a063{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"linux-安装pcre库","depth":2,"text":"Linux 安装PCRE库"},{"id":"卸载安装包","depth":2,"text":"卸载安装包","children":[{"id":"redhat-系列","depth":3,"text":"RedHat 系列"},{"id":"debian系列","depth":3,"text":"Debian系列"}]}]}},"_type":"markdown","_id":"content:5.notes:linux:install.md","_source":"content","_file":"5.notes/linux/install.md","_extension":"md"},{"_path":"/notes/linux/qa","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Linux 问题收集","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linux-问题收集"},"children":[{"type":"text","value":"Linux 问题收集"}]},{"type":"element","tag":"h2","props":{"id":"命令行使用代理"},"children":[{"type":"text","value":"命令行使用代理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"export HTTPS_PROXY=your_proxy_addr"}]}]},{"type":"element","tag":"h2","props":{"id":"zsh-权限不够解决方法"},"children":[{"type":"text","value":"zsh: 权限不够解决方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod u+x *.sh"}]}]},{"type":"element","tag":"h2","props":{"id":"杀掉进程"},"children":[{"type":"text","value":"杀掉进程"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/wintest/p/12749090.html","rel":["nofollow"]},"children":[{"type":"text","value":"Linux下如何通过一行命令查找并杀掉进程"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查找指定进程：agent "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ps -ef | grep agent"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据找到的进程号pid，强制杀掉进程（假设进程号为 15750） "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"kill -9 15750"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果我们要杀掉的进程个数不多的话，用上面的命令不需要耗费多少时间，但如果进程个数比较多的时候,\n使用 kill -9 进程号 一个个的杀掉进程，可能会比较麻烦，且耗时长。于是，我们需要一个能够快速杀掉进程的命令，如下（以杀掉所有 flask 进程为例）："}]}]},{"type":"element","tag":"code","props":{"code":"ps -ef | grep flask | grep -v grep | awk '{print $2}' | xargs kill -9\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"-ef"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93ca89"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"flask"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93ca89"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"grep"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93ca89"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"awk"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"'{print $2}'"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93ca89"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"xargs"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"kill"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"-9"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"命令分析"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"命令"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"作用"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"`ps -ef"}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"grep flask`"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grep -v grep"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"过滤包含 grep 的进程行"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"awk '{print $2}'"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"提取找到的进程行记录中第二列的参数，也就是flask的进程号"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"xargs kill -9"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"text","value":"把前面的参数都传递给后面的命令 kill -9"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"解决linux的-bash-xx-permission-denied"},"children":[{"type":"text","value":"解决linux的-bash: ./xx: Permission denied"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在linux下执行sh文件时提示下面信息："}]},{"type":"element","tag":"code","props":{"code":"./xx.sh: Permission denied\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"/xx.sh:"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"Permission"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"denied"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chmod 777 xx.sh"}]}]},{"type":"element","tag":"h2","props":{"id":"g-command-not-found"},"children":[{"type":"text","value":"g++: command not found"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"G++没有装或却没有更新"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"g++ --version"}]}]},{"type":"element","tag":"code","props":{"code":"# centos：\nyum -y update gcc #(更新)\nyum -y install gcc+ gcc-c++\n# ubuntu：\napt-get update gcc #(更新)\napt-get install g++\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce518"},"children":[{"type":"text","value":"# centos："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5ce518"},"children":[{"type":"text","value":"#(更新)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"yum"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e81494"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"gcc+"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"gcc-c++"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5ce518"},"children":[{"type":"text","value":"# ubuntu："}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5ce518"},"children":[{"type":"text","value":"#(更新)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-560954"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-9179db"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c59a63"},"children":[{"type":"text","value":"g++"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5ce518{color:#6E7781}\n.ct-c59a63{color:#0A3069}\n.ct-93ca89{color:#CF222E}\n.ct-e81494{color:#0550AE}\n.ct-9179db{color:#24292F}\n.ct-560954{color:#953800}\n.dark .ct-560954{color:#FFA657}\n.dark .ct-9179db{color:#C9D1D9}\n.dark .ct-e81494{color:#79C0FF}\n.dark .ct-93ca89{color:#FF7B72}\n.dark .ct-c59a63{color:#A5D6FF}\n.dark .ct-5ce518{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"命令行使用代理","depth":2,"text":"命令行使用代理"},{"id":"zsh-权限不够解决方法","depth":2,"text":"zsh: 权限不够解决方法"},{"id":"杀掉进程","depth":2,"text":"杀掉进程"},{"id":"解决linux的-bash-xx-permission-denied","depth":2,"text":"解决linux的-bash: ./xx: Permission denied"},{"id":"g-command-not-found","depth":2,"text":"g++: command not found"}]}},"_type":"markdown","_id":"content:5.notes:linux:qa.md","_source":"content","_file":"5.notes/linux/qa.md","_extension":"md"},{"_path":"/notes/linux/readme","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"linux记录","description":"安装pg","article":true,"index":false,"isOriginal":true,"date":"2021-12-07T09:32:11.000Z","category":["编程"],"tag":["linux"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linux-日常"},"children":[{"type":"text","value":"Linux 日常"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/blog/stroll.md#pg-%E5%9D%91"},"children":[{"type":"text","value":"安装pg"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/blog/stroll.md#%E5%AE%89%E8%A3%85-nodejs-%E6%B5%81%E7%A8%8B"},"children":[{"type":"text","value":"安装nodejs"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./sys_category"},"children":[{"type":"text","value":"linux系统分类"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"./sys_base_info"},"children":[{"type":"text","value":"查看Linux的基本信息"}]}]}]},{"type":"element","tag":"h2","props":{"id":"遇到的问题"},"children":[{"type":"text","value":"遇到的问题"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bash: cd: too many arguments"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原因：路径名或者变量有空格时候，会造成参数太多的错误提示"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解决：把空格的地方用引号包括起来"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Can't locate Digest/MD5.pm in @INC (@INC contains:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原因：缺少perl-Digest-MD5包， 安装perl-Digest-MD5即可解决。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解决："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum -y install perl-Digest-MD5"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"其他"},"children":[{"type":"text","value":"其他"}]},{"type":"element","tag":"h3","props":{"id":"修改linux上vim的molokai配色方案"},"children":[{"type":"text","value":"修改Linux上Vim的molokai配色方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下载"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git clone https://github.com/tomasr/molokai"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"use molokai/colors/molokai.vim"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更改所有用户的vim配色方案"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"whereis vim"}]},{"type":"text","value":" 找到vim"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cp yourdownload/molokai/colors/molokai.vim /urs/share/vim/vim版本号/colors"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim /etc/vimrc"}]},{"type":"text","value":"进行编辑，加上"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"colorscheme molokai"}]},{"type":"text","value":"后保存退出即安装molokai插件成功。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只想更改自己/当前用户的配色"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cd ~"}]},{"type":"text","value":" 进入自己用户文件夹下，ls .vim检查.vim是否存在，如果不存在则mkdir .vim创建即可"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mkdir ~/.vim/colors"}]},{"type":"text","value":" 文件夹，然后将上面的molokai.vim文件放入~/.vim/colors/文件夹中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim ~/.vimrc"}]},{"type":"text","value":" 进行编辑，加入colorscheme molokai即安装molokai配色插件成功。"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"遇到的问题","depth":2,"text":"遇到的问题"},{"id":"其他","depth":2,"text":"其他","children":[{"id":"修改linux上vim的molokai配色方案","depth":3,"text":"修改Linux上Vim的molokai配色方案"}]}]}},"_type":"markdown","_id":"content:5.notes:linux:README.md","_source":"content","_file":"5.notes/linux/README.md","_extension":"md"},{"_path":"/notes/linux/sys_base_info","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"查看Linux的基本信息","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"查看linux的基本信息"},"children":[{"type":"text","value":"查看Linux的基本信息"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux查看版本当前操作系统内核信息 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uname -a"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux查看当前操作系统版本信息 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/version"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lsb_release -a"}]},{"type":"text","value":"，即可列出所有版本信息。这个命令适用于所有的Linux发行版，包括RedHat、SUSE、Debian…等发行版。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /etc/redhat-release"}]},{"type":"text","value":"，这种方法只适合Redhat系的Linux"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /etc/issue"}]},{"type":"text","value":"，此命令也适用于所有的Linux发行版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/cpuinfo"}]},{"type":"text","value":" 查看CPU信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lscpu"}]},{"type":"text","value":" Linux查看cpu相关信息，包括型号、主频、内核信息等"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nproc"}]},{"type":"text","value":" cpu core"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getconf LONG_BIT"}]},{"type":"text","value":" 查看cpu运行在32位还是64位"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hostname"}]},{"type":"text","value":" 查看服务器名称"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ifconfig"}]},{"type":"text","value":" 查看网络信息 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /etc/sysconfig/network-scripts/ifcfg-eth0"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lsblk"}]},{"type":"text","value":" 查看磁盘信息 - 列出所有可用块设备的信息，而且还能显示他们之间的依赖关系，但是它不会列出RAM盘的信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fdisk -l"}]},{"type":"text","value":" 观察硬盘实体使用情况，也可对硬盘分区"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"df -k"}]},{"type":"text","value":" 用于显示磁盘分区上的可使用的磁盘空间"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看pci信息，即主板所有硬件槽信息："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果要更详细的信息:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci -v"}]},{"type":"text","value":" 或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci -vv"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果要看设备树:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci -t"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci -tv"}]},{"type":"text","value":" # 列出所有PCI设备"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lsusb -tv"}]},{"type":"text","value":" # 列出所有USB设备"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lsmod"}]},{"type":"text","value":" # 列出加载的内核模块"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" # 查看环境变量资源"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"free -m"}]},{"type":"text","value":" # 查看内存使用量和交换区使用量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"df -h"}]},{"type":"text","value":" # 查看各分区使用情况"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"du -sh <目录名>"}]},{"type":"text","value":" # 查看指定目录的大小"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grep MemTotal /proc/meminfo"}]},{"type":"text","value":" # 查看内存总量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grep MemFree /proc/meminfo"}]},{"type":"text","value":" # 查看空闲内存量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uptime"}]},{"type":"text","value":" # 查看系统运行时间、用户数、负载"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/loadavg"}]},{"type":"text","value":" # 查看系统负载磁盘和分区"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mount | column -t"}]},{"type":"text","value":" # 查看挂接的分区状态"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"swapon -s"}]},{"type":"text","value":" # 查看所有交换分区"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hdparm -i /dev/hda"}]},{"type":"text","value":" # 查看磁盘参数(仅适用于IDE设备)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dmesg | grep IDE"}]},{"type":"text","value":" # 查看启动时IDE设备检测状况网络"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"iptables -L"}]},{"type":"text","value":" # 查看防火墙设置"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"route -n"}]},{"type":"text","value":" # 查看路由表"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -lntp"}]},{"type":"text","value":" # 查看所有监听端口"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -antp"}]},{"type":"text","value":" # 查看所有已经建立的连接"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"netstat -s"}]},{"type":"text","value":" # 查看网络统计信息进程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ps -ef"}]},{"type":"text","value":" # 查看所有进程"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"top"}]},{"type":"text","value":" # 实时显示进程状态用户"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"w"}]},{"type":"text","value":" # 查看活动用户"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id <用户名>"}]},{"type":"text","value":" # 查看指定用户信息"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"last"}]},{"type":"text","value":" # 查看用户登录日志"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cut -d: -f1 /etc/passwd"}]},{"type":"text","value":" # 查看系统所有用户"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cut -d: -f1 /etc/group"}]},{"type":"text","value":" # 查看系统所有组"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"crontab -l"}]},{"type":"text","value":" # 查看当前用户的计划任务服务"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chkconfig –list"}]},{"type":"text","value":" # 列出所有系统服务"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"chkconfig –list | grep on"}]},{"type":"text","value":" # 列出所有启动的系统服务程序"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rpm -qa"}]},{"type":"text","value":" # 查看所有安装的软件包"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看/proc/uptime文件计算系统启动时间："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/uptime"}]},{"type":"text","value":"\n输出: 5113396.94 575949.85\n第一数字即是系统已运行的时间5113396.94秒，运用系统工具date即可算出系统启动时间\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"date -d \"$(awk -F. '{print $1}' /proc/uptime) second ago\" +\"%Y-%m-%d %H:%M:%S\""}]},{"type":"text","value":"\n输出: 2018-01-02 06:50:52"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看/proc/uptime文件计算系统运行时间\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/uptime| awk -F. '{run_days=$1 / 86400;run_hour=($1 % 86400)/3600;run_minute=($1 % 3600)/60;run_second=$1 % 60;printf(\"系统已运行：%d天%d时%d分%d秒\",run_days,run_hour,run_minute,run_second)}'"}]},{"type":"text","value":"\n输出:系统已运行：1天1时36分13秒"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Linux查看物理CPU个数、核数、逻辑CPU个数"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"总核数 = 物理CPU个数 X 每颗物理CPU的核数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看物理CPU个数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看每个物理CPU中core的个数(即核数) "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/cpuinfo| grep \"cpu cores\"| uniq"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看逻辑CPU的个数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/cpuinfo| grep \"processor\"| wc -l"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看CPU信息（型号）"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看网卡硬件信息 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lspci | grep -i 'eth'"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看系统的所有网络接口："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ifconfig -a"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果要查看某个网络接口的详细信息，例如eth0的详细参数和指标："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ethtool eth0"}]}]}]},{"type":"element","tag":"h2","props":{"id":"目录"},"children":[{"type":"text","value":"目录"}]},{"type":"element","tag":"h3","props":{"id":"linux-proc目录详解"},"children":[{"type":"text","value":"Linux /proc目录详解"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"/proc目录\nLinux 内核提供了一种通过 /proc 文件系统，在运行时访问内核内部数据结构、改变内核设置的机制。proc文件系统是一个伪文件系统，它只存在内存当中，而不占用外存空间。它以文件系统的方式为访问系统内核数据的操作提供接口。\n用户和应用程序可以通过proc得到系统的信息，并可以改变内核的某些参数。由于系统的信息，如进程，是动态改变的，所以用户或应用程序读取proc文件时，proc文件系统是动态从系统内核读出所需信息并提交的。下面列出的这些文件或子文件夹，并不是都是在你的系统中存在，这取决于你的内核配置和装载的模块。另外，在/proc下还有三个很重要的目录：net，scsi和sys。 Sys目录是可写的，可以通过它来访问或修改内核的参数，而net和scsi则依赖于内核配置。例如，如果系统不支持scsi，则scsi 目录不存在。\n除了以上介绍的这些，还有的是一些以数字命名的目录，它们是进程目录。系统中当前运行的每一个进程都有对应的一个目录在/proc下，以进程的 PID号为目录名，它们是读取进程信息的接口。而self目录则是读取进程本身的信息接口，是一个link。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"子文件或子文件夹\n/proc/buddyinfo 每个内存区中的每个order有多少块可用，和内存碎片问题有关\n/proc/cmdline 启动时传递给kernel的参数信息\n/proc/cpuinfo cpu的信息\n/proc/crypto 内核使用的所有已安装的加密密码及细节\n/proc/devices 已经加载的设备并分类\n/proc/dma 已注册使用的ISA DMA频道列表\n/proc/execdomains Linux内核当前支持的execution domains\n/proc/fb 帧缓冲设备列表，包括数量和控制它的驱动\n/proc/filesystems 内核当前支持的文件系统类型\n/proc/interrupts x86架构中的每个IRQ中断数\n/proc/iomem 每个物理设备当前在系统内存中的映射\n/proc/ioports 一个设备的输入输出所使用的注册端口范围\n/proc/kcore 代表系统的物理内存，存储为核心文件格式，里边显示的是字节数，等于RAM大小加上4kb\n/proc/kmsg 记录内核生成的信息，可以通过/sbin/klogd或/bin/dmesg来处理\n/proc/loadavg 根据过去一段时间内CPU和IO的状态得出的负载状态，与uptime命令有关\n/proc/locks 内核锁住的文件列表\n/proc/mdstat 多硬盘，RAID配置信息(md=multiple disks)\n/proc/meminfo RAM使用的相关信息\n/proc/misc 其他的主要设备(设备号为10)上注册的驱动\n/proc/modules 所有加载到内核的模块列表\n/proc/mounts 系统中使用的所有挂载\n/proc/mtrr 系统使用的Memory Type Range Registers (MTRRs)\n/proc/partitions 分区中的块分配信息\n/proc/pci 系统中的PCI设备列表\n/proc/slabinfo 系统中所有活动的 slab 缓存信息\n/proc/stat 所有的CPU活动信息\n/proc/sysrq-trigger 使用echo命令来写这个文件的时候，远程root用户可以执行大多数的系统请求关键命令，就好像在本地终端执行一样。要写入这个文件，需要把/proc/sys/kernel/sysrq不能设置为0。这个文件对root也是不可读的\n/proc/uptime 系统已经运行了多久\n/proc/swaps 交换空间的使用情况\n/proc/version Linux内核版本和gcc版本\n/proc/bus 系统总线(Bus)信息，例如pci/usb等\n/proc/driver 驱动信息\n/proc/fs 文件系统信息\n/proc/ide ide设备信息\n/proc/irq 中断请求设备信息\n/proc/net 网卡设备信息\n/proc/scsi scsi设备信息\n/proc/tty tty设备信息\n/proc/net/dev 显示网络适配器及统计信息\n/proc/vmstat 虚拟内存统计信息\n/proc/vmcore 内核panic时的内存映像\n/proc/diskstats 取得磁盘信息\n/proc/schedstat kernel调度器的统计信息\n/proc/zoneinfo 显示内存空间的统计信息，对分析虚拟内存行为很有用"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下是/proc目录中进程N的信息\n/proc/N pid为N的进程信息\n/proc/N/cmdline 进程启动命令\n/proc/N/cwd 链接到进程当前工作目录\n/proc/N/environ 进程环境变量列表\n/proc/N/exe 链接到进程的执行命令文件\n/proc/N/fd 包含进程相关的所有的文件描述符\n/proc/N/maps 与进程相关的内存映射信息\n/proc/N/mem 指代进程持有的内存，不可读\n/proc/N/root 链接到进程的根目录\n/proc/N/stat 进程的状态\n/proc/N/statm 进程使用的内存的状态\n/proc/N/status 进程状态信息，比stat/statm更具可读性\n/proc/self 链接到当前正在运行的进程"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"目录","depth":2,"text":"目录","children":[{"id":"linux-proc目录详解","depth":3,"text":"Linux /proc目录详解"}]}]}},"_type":"markdown","_id":"content:5.notes:linux:sys_base_info.md","_source":"content","_file":"5.notes/linux/sys_base_info.md","_extension":"md"},{"_path":"/notes/linux/sys_category","_dir":"linux","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"linux系统分类","description":"一般来说linux系统基本上分两大类：","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"linux系统分类"},"children":[{"type":"text","value":"linux系统分类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说linux系统基本上分两大类："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"RedHat系列：Redhat、Centos、Fedora等"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian系列：Debian、Ubuntu等"}]}]},{"type":"element","tag":"h2","props":{"id":"redhat-系列"},"children":[{"type":"text","value":"RedHat 系列"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常见的安装包格式 rpm包,安装rpm包的命令是“rpm -参数”"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"包管理工具 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yum"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"支持tar包"}]}]},{"type":"element","tag":"h2","props":{"id":"debian系列"},"children":[{"type":"text","value":"Debian系列"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常见的安装包格式 deb包,安装deb包的命令是“dpkg -参数”"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"包管理工具 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"apt-get"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"支持tar包"}]}]},{"type":"element","tag":"h3","props":{"id":"debian"},"children":[{"type":"text","value":"Debian"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方镜像列表，"},{"type":"element","tag":"a","props":{"href":"https://www.debian.org/mirror/list.zh-cn.html","rel":["nofollow"]},"children":[{"type":"text","value":"全球镜像站"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.debian.org/releases/","rel":["nofollow"]},"children":[{"type":"text","value":"release"}]},{"type":"text","value":" name"}]},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下一代 Debian 正式发行版的代号为 bookworm — 测试（testing）版 — 发布日期尚未确定"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 11 (bullseye) — 当前的稳定（stable）版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 10（buster） — 当前的旧的稳定（oldstable）版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 9（stretch） — 更旧的稳定（oldoldstable）版，现有长期支持"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 8（jessie） — 已存档版本，现有扩展长期支持"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 7（wheezy） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian 6.0（squeeze） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 5.0（lenny） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 4.0（etch） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 3.1（sarge） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 3.0（woody） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 2.2（potato） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 2.1（slink） — 被淘汰的稳定版"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Debian GNU/Linux 2.0（hamm） — 被淘汰的稳定版"}]}]}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"官方源超时"},"children":[{"type":"text","value":"官方源超时"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"大陆使用镜像资源超时，可以使用 "},{"type":"element","tag":"a","props":{"href":"https://developer.aliyun.com/mirror/debian","rel":["nofollow"]},"children":[{"type":"text","value":"aliyun 镜像"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这里更推荐"},{"type":"element","tag":"a","props":{"href":"https://mirrors.tuna.tsinghua.edu.cn/help/debian/","rel":["nofollow"]},"children":[{"type":"text","value":"清华源"}]}]},{"type":"element","tag":"h3","props":{"id":"编译问题"},"children":[{"type":"text","value":"编译问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"../compile"},"children":[{"type":"text","value":"参考"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"redhat-系列","depth":2,"text":"RedHat 系列"},{"id":"debian系列","depth":2,"text":"Debian系列","children":[{"id":"debian","depth":3,"text":"Debian"}]},{"id":"sol","depth":2,"text":"sol","children":[{"id":"官方源超时","depth":3,"text":"官方源超时"},{"id":"编译问题","depth":3,"text":"编译问题"}]}]}},"_type":"markdown","_id":"content:5.notes:linux:sys_category.md","_source":"content","_file":"5.notes/linux/sys_category.md","_extension":"md"},{"_path":"/notes/macos/_dir","_dir":"macos","_draft":false,"_partial":true,"_locale":"","title":"macOS","icon":"vscode-icons:folder-type-macos","_id":"content:5.notes:macos:_dir.yml","_type":"yaml","_source":"content","_file":"5.notes/macos/_dir.yml","_extension":"yml"},{"_path":"/notes/macos/base","_dir":"macos","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"mac primary","description":"","date":"2022-09-26T16:42:00.000Z","category":["编程"],"tag":["mac","工具"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mac-basin"},"children":[{"type":"text","value":"Mac Basin"}]},{"type":"element","tag":"h2","props":{"id":"截屏"},"children":[{"type":"element","tag":"a","props":{"href":"https://support.apple.com/zh-cn/HT201361","rel":["nofollow"]},"children":[{"type":"text","value":"截屏"}]}]},{"type":"element","tag":"h2","props":{"id":"mac上显示开头的文件"},"children":[{"type":"text","value":"mac上显示.开头的文件"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一种方法是在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"finder"}]},{"type":"text","value":"中按下"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command+shift+."}]},{"type":"text","value":"键。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第二种方法是在命令行输入如下命令"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults write com.apple.Finder AppleShowAllFiles YES"}]}]}]},{"type":"element","tag":"h2","props":{"id":"mac-多屏幕固定-dock"},"children":[{"type":"text","value":"mac 多屏幕固定 dock"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将鼠标指针放置在想要显示的屏幕最下方，越下方越好，看不到更好，持续1-2s，即可在你想要显示的屏幕上显示"}]},{"type":"element","tag":"h2","props":{"id":"mac应用内窗口切换"},"children":[{"type":"text","value":"mac应用内窗口切换"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"command + ~"}]},{"type":"element","tag":"h2","props":{"id":"光标移动"},"children":[{"type":"text","value":"光标移动"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"应该不限制操作系统"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"command + 左右，行首行尾移动光标"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\noption + 左右，跨单词移动"}]},{"type":"element","tag":"h2","props":{"id":"mac-osx-自带拼音输入法卡顿"},"children":[{"type":"text","value":"mac osx 自带拼音输入法卡顿"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"【键盘】-【文本】，所有选项全部勾掉。但是还是卡……不知道是什么问题"}]},{"type":"element","tag":"h2","props":{"id":"解压-rar"},"children":[{"type":"text","value":"解压 rar"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/ningy1009/p/16571791.html","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"下载，"},{"type":"element","tag":"a","props":{"href":"https://www.rarlab.com/download.htm","rel":["nofollow"]},"children":[{"type":"text","value":"官网"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解压"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装"},{"type":"element","tag":"code","props":{"code":"cd rar\nsudo install -c -o $USER rar /usr/local/bin/\nsudo install -c -o $USER unrar /usr/local/bin/\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c18fe"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"rar"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8bb6bc"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c18fe"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c18fe"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" $USER "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"rar"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"/usr/local/bin/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8bb6bc"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c18fe"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9c18fe"},"children":[{"type":"text","value":"-o"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" $USER "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"/usr/local/bin/"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code","props":{"code":"unrar x xxx.rar\nrar a xxx.rar file or dir\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8bb6bc"},"children":[{"type":"text","value":"unrar"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"xxx.rar"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8bb6bc"},"children":[{"type":"text","value":"rar"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"xxx.rar"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"dir"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"env"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://support.apple.com/zh-cn/guide/terminal/apd382cc5fa-4f58-4449-b20a-41c53c006f8f/mac","rel":["nofollow"]},"children":[{"type":"text","value":"环境变量"}]}]},{"type":"element","tag":"code","props":{"code":"PATH=/bin:/sbin:/user/bin:/user/sbin:/system/Library/ export PATH\n# 查看环境变量\nenv\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":"PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-4baa1f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-508518"},"children":[{"type":"text","value":"/bin:/sbin:/user/bin:/user/sbin:/system/Library/"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4baa1f"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f85418"},"children":[{"type":"text","value":" PATH"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6d0be"},"children":[{"type":"text","value":"# 查看环境变量"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8bb6bc"},"children":[{"type":"text","value":"env"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在一个“终端”窗口设置变量不会影响其他“终端”窗口的设置。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-e6d0be{color:#6E7781}\n.ct-4baa1f{color:#CF222E}\n.ct-8bb6bc{color:#953800}\n.ct-508518{color:#0A3069}\n.ct-f85418{color:#24292F}\n.ct-9c18fe{color:#0550AE}\n.dark .ct-9c18fe{color:#79C0FF}\n.dark .ct-f85418{color:#C9D1D9}\n.dark .ct-508518{color:#A5D6FF}\n.dark .ct-8bb6bc{color:#FFA657}\n.dark .ct-4baa1f{color:#FF7B72}\n.dark .ct-e6d0be{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"截屏","depth":2,"text":"截屏"},{"id":"mac上显示开头的文件","depth":2,"text":"mac上显示.开头的文件"},{"id":"mac-多屏幕固定-dock","depth":2,"text":"mac 多屏幕固定 dock"},{"id":"mac应用内窗口切换","depth":2,"text":"mac应用内窗口切换"},{"id":"光标移动","depth":2,"text":"光标移动"},{"id":"mac-osx-自带拼音输入法卡顿","depth":2,"text":"mac osx 自带拼音输入法卡顿"},{"id":"解压-rar","depth":2,"text":"解压 rar"},{"id":"env","depth":2,"text":"env"}]}},"_type":"markdown","_id":"content:5.notes:macos:base.md","_source":"content","_file":"5.notes/macos/base.md","_extension":"md"},{"_path":"/notes/macos/sol","_dir":"macos","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"solution","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"solution"},"children":[{"type":"text","value":"solution"}]},{"type":"element","tag":"h2","props":{"id":"mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun"},"children":[{"type":"text","value":"Mac OS: xcrun: error: invalid active developer path, missing xcrun"}]},{"type":"element","tag":"code","props":{"code":"xcode-select --install\nxcode-select --reset\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6018de"},"children":[{"type":"text","value":"xcode-select"}]},{"type":"element","tag":"span","props":{"class":"ct-d072d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80ea4c"},"children":[{"type":"text","value":"--install"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6018de"},"children":[{"type":"text","value":"xcode-select"}]},{"type":"element","tag":"span","props":{"class":"ct-d072d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80ea4c"},"children":[{"type":"text","value":"--reset"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"mac发热严重"},"children":[{"type":"text","value":"Mac发热严重"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mac上vscode始终打开"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"code helper"}]},{"type":"text","value":"这个进程，发热严重"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vscode 设置 - followSymlinks - 设置为false， 即可解决！"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\"search.followSymlinks\": false"}]},{"type":"element","tag":"h2","props":{"id":"控制台乱码"},"children":[{"type":"text","value":"控制台乱码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"reset"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-80ea4c{color:#0550AE}\n.ct-d072d0{color:#24292F}\n.ct-6018de{color:#953800}\n.dark .ct-6018de{color:#FFA657}\n.dark .ct-d072d0{color:#C9D1D9}\n.dark .ct-80ea4c{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"mac-os-xcrun-error-invalid-active-developer-path-missing-xcrun","depth":2,"text":"Mac OS: xcrun: error: invalid active developer path, missing xcrun"},{"id":"mac发热严重","depth":2,"text":"Mac发热严重"},{"id":"控制台乱码","depth":2,"text":"控制台乱码"}]}},"_type":"markdown","_id":"content:5.notes:macos:sol.md","_source":"content","_file":"5.notes/macos/sol.md","_extension":"md"},{"_path":"/notes/makefile","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Makefile","description":"","icon":"flat-color-icons:make-decision","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"beginner"},"children":[{"type":"text","value":"beginner"}]},{"type":"element","tag":"h2","props":{"id":"higher"},"children":[{"type":"text","value":"higher"}]},{"type":"element","tag":"h3","props":{"id":"使用-makefilein-和-configure"},"children":[{"type":"text","value":"使用 Makefile.in 和 configure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Makefile.in 是一个模板文件，它指定了如何生成最终的 Makefile。它通常由项目的开发者提供，并且是一个文本文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Makefile.in 中可以包含各种指令，用来定义编译项目时所需的变量和规则。例如，下面是一个简单的 Makefile.in 示例："}]},{"type":"element","tag":"code","props":{"code":"# define some variables\nCC = gcc\nCFLAGS = -g -O2\n\n# define a target to build the executable\nmyapp: myapp.o\n        $(CC) $(CFLAGS) -o myapp myapp.o\n\n# define a target to clean up the project\nclean:\n        rm -f myapp myapp.o\n","filename":"Makefile.in","language":"makefile","meta":"[Makefile.in]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# define some variables"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"CC = gcc"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"CFLAGS = -g -O2"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# define a target to build the executable"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-186a68"},"children":[{"type":"text","value":"myapp"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":": myapp.o"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"CC"}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"CFLAGS"}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" -o myapp myapp.o"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# define a target to clean up the project"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-186a68"},"children":[{"type":"text","value":"clean"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"        rm -f myapp myapp.o"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要生成最终的 Makefile，需要使用 configure 工具。configure 工具是一个 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"shell"}]},{"type":"text","value":" 脚本，它的作用是根据系统环境和项目的特定要求来生成 Makefile。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要编写一个 configure 脚本，需要了解 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"shell"}]},{"type":"text","value":" 脚本语言，并且需要了解项目的特定环境和需求。一个简单的 configure 脚本示例如下所示："}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\n# check for the required compiler\nif ! which gcc > /dev/null; then\n  echo \"Error: GCC is not installed\"\n  exit 1\nfi\n\n# check for the required libraries\nif ! pkg-config --exists libfoo; then\n  echo \"Error: libfoo is not installed\"\n  exit 1\nfi\n\n# create the Makefile\necho \"CC = gcc\" > Makefile\necho \"CFLAGS = -g -O2\" >> Makefile\necho \"\" >> Makefile\necho \"myapp: myapp.o\" >> Makefile\necho -e \"\\t\\$(CC) \\$(CFLAGS) -o myapp myapp.o\" >> Makefile\necho \"\" >> Makefile\necho \"clean:\" >> Makefile\necho -e \"\\trm -f myapp myapp.o\" >> Makefile\n","filename":"configure","language":"shell","meta":"[configure]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# check for the required compiler"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"which"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"gcc"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"/dev/null"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"Error: GCC is not installed\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# check for the required libraries"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-76d81c"},"children":[{"type":"text","value":"pkg-config"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"--exists"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"libfoo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"Error: libfoo is not installed\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1bf317"},"children":[{"type":"text","value":"# create the Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"CC = gcc\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"CFLAGS = -g -O2\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"myapp: myapp.o\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"\\t"}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"\\$"}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"(CC) "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"\\$"}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"(CFLAGS) -o myapp myapp.o\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"clean:\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27f5a6"},"children":[{"type":"text","value":"-e"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"\"\\trm -f myapp myapp.o\""}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e2138"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-67b8d0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3be1aa"},"children":[{"type":"text","value":"Makefile"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-76d81c{color:#953800}\n.ct-27f5a6{color:#0550AE}\n.ct-3e2138{color:#CF222E}\n.ct-3be1aa{color:#0A3069}\n.ct-186a68{color:#8250DF}\n.ct-67b8d0{color:#24292F}\n.ct-1bf317{color:#6E7781}\n.dark .ct-1bf317{color:#8B949E}\n.dark .ct-67b8d0{color:#C9D1D9}\n.dark .ct-186a68{color:#D2A8FF}\n.dark .ct-3be1aa{color:#A5D6FF}\n.dark .ct-3e2138{color:#FF7B72}\n.dark .ct-27f5a6{color:#79C0FF}\n.dark .ct-76d81c{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"beginner","depth":2,"text":"beginner"},{"id":"higher","depth":2,"text":"higher","children":[{"id":"使用-makefilein-和-configure","depth":3,"text":"使用 Makefile.in 和 configure"}]}]}},"_type":"markdown","_id":"content:5.notes:Makefile.md","_source":"content","_file":"5.notes/Makefile.md","_extension":"md"},{"_path":"/notes/markdown","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Markdown","description":"","icon":"vscode-icons:file-type-markdown","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"markdown"},"children":[{"type":"text","value":"Markdown"}]},{"type":"element","tag":"h2","props":{"id":"语法"},"children":[{"type":"text","value":"语法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://markdown.com.cn/extended-syntax/","rel":["nofollow"]},"children":[{"type":"text","value":"markdown高级教程"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://markdown.com.cn/basic-syntax/","rel":["nofollow"]},"children":[{"type":"text","value":"markdown初级教程"}]}]}]},{"type":"element","tag":"h2","props":{"id":"代码块"},"children":[{"type":"text","value":"代码块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"代码块支持的语言，以文件名后缀即可"}]},{"type":"element","tag":"h2","props":{"id":"代码规范检查-refer"},"children":[{"type":"text","value":"代码规范检查 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Markdown 常用代码规范检查工具如下："}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"工具"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"用途"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"lint 命令"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"支持 IDE"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"remark"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Markdown 通用规范"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"remark -f docs/"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=drewbourne.vscode-remark-lint","rel":["nofollow"]},"children":[{"type":"text","value":"VSCode"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"lint-md"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"Markdown 中文规范"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"lint-md docs/"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=ZhixiangZhang.mdlint","rel":["nofollow"]},"children":[{"type":"text","value":"VSCode"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"fnlint"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"文件名 slug 规范"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"fnlint -c .fnlint.json"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"不支持"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"remark"},"children":[{"type":"text","value":"remark"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"remark"}]},{"type":"text","value":" 是国际流行的开源项目，用于检查 Markdown 书写规范，内置推荐规范「remark-preset-lint-recommended」，常见规则如下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文本文件结尾需要换行符（POSIX 规范）；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"列表：顶格，符号后 3 个空格；"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装："}]},{"type":"element","tag":"code","props":{"code":"$ npm install -save-dev remark-cli remark-preset-lint-recommended\n$ vi package.json\n  \"scripts\": {\n    \"lint-all\": \"remark -f docs/\"\n  },\n  \"remarkConfig\": {\n    \"plugins\": [\"remark-preset-lint-recommended\"]\n  }\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"-save-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"remark-cli"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"remark-preset-lint-recommended"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"vi"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"package.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"    \"lint-all\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":" \"remark -f docs/\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"remarkConfig\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"    \"plugins\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"\"remark-preset-lint-recommended\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  }"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"全量检查："}]},{"type":"element","tag":"code","props":{"code":"$ npx remark -f docs/\ndocs/start/ci.md: no issues found\ndocs/open/start.md\n     1:1   warning  Missing newline character at end of file\n     16:4  warning  Incorrect list-item indent: add 1 space\n     22:3  warning  Incorrect list-item indent: add 2 spaces\n⚠ 2422 warnings\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"remark"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"docs/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"docs/start/ci.md:"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"no"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"issues"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"found"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"docs/open/start.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"1:1"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"warning"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"Missing"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"newline"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"character"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"at"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"file"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"16:4"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"warning"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"Incorrect"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"list-item"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"indent:"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"space"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"22:3"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"warning"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"Incorrect"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"list-item"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"indent:"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"spaces"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"⚠"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"2422"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"warnings"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本地增量检查："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git diff --diff-filter=d --name-only HEAD | grep \".md$\" | xargs npx remark -f"}]},{"type":"text","value":"\n持续集成合并请求增量检查："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sh \"git diff --diff-filter=d --name-only ${env.MR_TARGET_BRANCH}... | grep '.md\\$' | xargs npx remark -f\""}]}]},{"type":"element","tag":"h3","props":{"id":"lint-md"},"children":[{"type":"text","value":"lint-md"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"lint-md"}]},{"type":"text","value":" 用于检查 Markdown 中文书写规范，内置「"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"阮一峰中文技术文档规范"}]},{"type":"text","value":"」，常见规则如下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"中文与英文之间需要空格"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"中文与数字之间需要空格"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"代码块需声明编程语言（参考："},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Markdown 编程语言清单"}]},{"type":"text","value":"）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"禁止使用全角数字\n安装："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$ npm install -save-dev lint-md-cli"}]},{"type":"text","value":"\n全量检查："}]},{"type":"element","tag":"code","props":{"code":"$ lint-md docs/\ndocs/project/open/webhook.md\n51:1-51:4   no-empty-code-lang Language of code can not be empty. \n74:1-74:123 no-long-code       Code Block cannot have too long line. line with 122 characters exceeds code max length 100\ndocs/practice/agile-development.md\n52:27-52:28 space-round-alphabet No space between Chinese and alphabet. '后，Scrum负责人就会\ndocs/project/basis/settings.md\n75:29-75:30 space-round-number   No space between Chinese and number. '的缺陷最多显示10条，可\nLint total 247 files, 0 warnings 782 errors\n$ echo $?\n1\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"lint-md"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"docs/"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"docs/project/open/webhook.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"51"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"51"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"   no-empty-code-lang Language of code can not be empty. "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"74"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"74"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" no-long-code       Code Block cannot have too long line. line with "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"122"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" characters exceeds code max length "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"100"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"docs/practice/agile-development.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"27"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"52"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"28"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" space-round-alphabet No space between Chinese and alphabet. "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"'后，Scrum负责人就会"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"docs/project/basis/settings.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"75:29-75:30 space-round-number   No space between Chinese and number. '"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"的缺陷最多显示10条，可"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"Lint"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"247"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"files,"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"warnings"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"782"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"errors"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"$?"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本地增量检查："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git diff --diff-filter=d --name-only HEAD | grep \".md$\" | xargs npx lint-md"}]},{"type":"text","value":"\n持续集成合并请求增量检查："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sh \"git diff --diff-filter=d --name-only ${env.MR_TARGET_BRANCH}... | grep '.md\\$' | xargs npx lint-md\""}]}]},{"type":"element","tag":"h3","props":{"id":"fnlint"},"children":[{"type":"text","value":"fnlint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"fnlint"}]},{"type":"text","value":" 用于检查文件名规范，内置 4 种规范："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"kebabcase （如 kebab-case.md）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"camelcase （如 camelCase.js）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pascalcase （如 PascalCase.js）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"snakecase （如 snake_case.rb）\n其中「kebabcase」适合用于检查 Markdown 文档的文件名，因为文件名将出现在 URL 中，按照 slug 和域名规范，应使用全小写、连字符，禁止使用大写字母、下划线。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装："}]},{"type":"element","tag":"code","props":{"code":"$ npm install --save-dev fnlint\n$ vi .fnlint.json\n{\n  \"basePath\": \".\",\n  \"files\": \"docs/**/*.md\",\n  \"format\": \"kebabcase\",\n  \"directories\": true\n}\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"--save-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"fnlint"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"vi"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":".fnlint.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"basePath\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":" \".\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"files\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":" \"docs/**/*.md\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"format\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":" \"kebabcase\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"  \"directories\""}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"全量检查："}]},{"type":"element","tag":"code","props":{"code":"$ npx fnlint -c .fnlint.json\nkebabcase: 9 of 257 file(s) failed linting\n/docs/coding.net.md\n/docs/best-practices/ci/1minute/#C+makefile.md\n/docs/cd/question/FAQ.md\n/docs/repo/git/commands.md\n/docs/ZZZ/aaa/a.md\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"fnlint"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":".fnlint.json"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"kebabcase:"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"257"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"failed"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dd2222"},"children":[{"type":"text","value":"linting"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/docs/coding.net.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/docs/best-practices/ci/1minute/"}]},{"type":"element","tag":"span","props":{"class":"ct-99bc57"},"children":[{"type":"text","value":"#C+makefile.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/docs/"}]},{"type":"element","tag":"span","props":{"class":"ct-94e0b9"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/question/FAQ.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/docs/repo/git/commands.md"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c2391"},"children":[{"type":"text","value":"/docs/ZZZ/aaa/a.md"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"增量检查：不支持。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-94e0b9{color:#0550AE}\n.ct-dd2222{color:#0A3069}\n.ct-99bc57{color:#24292F}\n.ct-0c2391{color:#953800}\n.dark .ct-0c2391{color:#FFA657}\n.dark .ct-99bc57{color:#C9D1D9}\n.dark .ct-dd2222{color:#A5D6FF}\n.dark .ct-94e0b9{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"语法","depth":2,"text":"语法"},{"id":"代码块","depth":2,"text":"代码块"},{"id":"代码规范检查-refer","depth":2,"text":"代码规范检查 refer","children":[{"id":"remark","depth":3,"text":"remark"},{"id":"lint-md","depth":3,"text":"lint-md"},{"id":"fnlint","depth":3,"text":"fnlint"}]}]}},"_type":"markdown","_id":"content:5.notes:markdown.md","_source":"content","_file":"5.notes/markdown.md","_extension":"md"},{"_path":"/notes/mergify","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Mergify","description":"github 官方支持 auto merge 这个 bot 可以下架了","icon":"pajamas:git-merge","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mergify"},"children":[{"type":"text","value":"Mergify"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"github 官方支持 "},{"type":"element","tag":"a","props":{"href":"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request","rel":["nofollow"]},"children":[{"type":"text","value":"auto merge"}]},{"type":"text","value":" "},{"type":"element","tag":"del","props":{},"children":[{"type":"text","value":"这个 "},{"type":"element","tag":"a","props":{"href":"https://docs.mergify.com/examples/#bots","rel":["nofollow"]},"children":[{"type":"text","value":"bot"}]},{"type":"text","value":" 可以下架了"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nonono, official doc, I haven't figured it yet... now still use mergify"}]},{"type":"element","tag":"code","props":{"code":"pull_request_rules:\n  - name: automatic merge for ImgBot pull requests\n    conditions:\n      - author=imgbot[bot]\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for dependabot pull requests\n    conditions:\n      - author=dependabot[bot]\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for Renovate pull requests\n    conditions:\n      - author=renovate[bot]\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for Requires.io pull requests\n    conditions:\n      - title~=^\\[requires.io\\]\n      - head~=^requires-io\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for auto pull requests\n    conditions:\n      - title=pulling refs/heads/dev into master\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n","language":"yml","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pull_request_rules:\n  - name: automatic merge for ImgBot pull requests\n    conditions:\n      - author=imgbot[bot]\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for dependabot pull requests\n    conditions:\n      - author=dependabot[bot]\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for Renovate pull requests\n    conditions:\n      - author=renovate[bot]\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for Requires.io pull requests\n    conditions:\n      - title~=^\\[requires.io\\]\n      - head~=^requires-io\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge\n\n  - name: automatic merge for auto pull requests\n    conditions:\n      - title=pulling refs/heads/dev into master\n      - check-success=deploy\n    actions:\n      merge:\n        method: merge"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:5.notes:mergify.md","_source":"content","_file":"5.notes/mergify.md","_extension":"md"},{"_path":"/notes/openai/_dir","_dir":"openai","_draft":false,"_partial":true,"_locale":"","title":"OpenAI","icon":"logos:openai-icon","_id":"content:5.notes:openai:_dir.yml","_type":"yaml","_source":"content","_file":"5.notes/openai/_dir.yml","_extension":"yml"},{"_path":"/notes/openai","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"OpenAI","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"openai"},"children":[{"type":"text","value":"OpenAI"}]},{"type":"element","tag":"h2","props":{"id":"not-available"},"children":[{"type":"text","value":"not available"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://harishgarg.com/writing/openai-api-gpt-3-is-not-available-in-your-country-do-this-instead/","rel":["nofollow"]},"children":[{"type":"text","value":"OpenAI API/GPT-3 is not available in your country: List of countries"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"China"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Russia"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ukraine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Afghanistan"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Belarus"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Venezuela"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Iran"}]}]},{"type":"element","tag":"h2","props":{"id":"available"},"children":[{"type":"text","value":"available"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://beta.openai.com/docs/supported-countries","rel":["nofollow"]},"children":[{"type":"text","value":"document"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"not-available","depth":2,"text":"not available"},{"id":"available","depth":2,"text":"available"}]}},"_type":"markdown","_id":"content:5.notes:openai:0.index.md","_source":"content","_file":"5.notes/openai/0.index.md","_extension":"md"},{"_path":"/notes/openai/chatgpt","_dir":"openai","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"ChatGPT","description":"ChatGPT: Optimizing Language Models for Dialogue","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"chatgpt"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ChatGPT"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ChatGPT: Optimizing Language Models for Dialogue"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"try"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:5.notes:openai:chatgpt.md","_source":"content","_file":"5.notes/openai/chatgpt.md","_extension":"md"},{"_path":"/notes/rbac","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Understanding Role-Based Access Control (RBAC)","description":"","tittle":"RBAC","icon":"eos-icons:role-binding-outlined","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"understanding-role-based-access-control-rbac"},"children":[{"type":"text","value":"Understanding Role-Based Access Control (RBAC)"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/rbac","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Everything you need to know about RBAC in one place."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This article provides a comprehensive overview of "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"role-based access control (RBAC)"}]},{"type":"text","value":" along with a guided approach to implementing, maintaining, and extending RBAC to suit the needs of your organization. You will discover what roles are, how to define them, and how using them to govern access can help secure your network, reduce administrative overhead, and help you achieve regulatory compliance. Let’s jump in."}]},{"type":"element","tag":"h2","props":{"id":"what-is-rbac"},"children":[{"type":"text","value":"What is RBAC?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Role-based access control (RBAC) is a security approach that authorizes and restricts system access to users based on their role(s) within an organization."}]},{"type":"text","value":" This allows users to access the data and applications needed to fulfill their job requirements and minimizes the risk of unauthorized employees accessing sensitive information or performing unauthorized tasks. In addition to restricting access, RBAC can refine the way a user interacts with data—permitting read-only or read/write access to certain roles, thus limiting a user’s ability to execute commands or delete information."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An effective system of user access control is essential for large enterprises or companies that manage a large number of contractors, vendors, and even customers. For these organizations, RBAC will protect critical data, improve operational efficiency, and help certify regulatory compliance. We’ll cover all of this later in the article. But first, let’s take a quick look at where it all began."}]},{"type":"element","tag":"h2","props":{"id":"history-of-role-based-access-control"},"children":[{"type":"text","value":"History of Role-Based Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"People have used roles and responsibilities to moderate access to commercial computer systems since at least the 1970s. However, these procedures were ad hoc and often had to be redesigned on a per-case basis for each new system."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It wasn’t until 1992 that researchers at the "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/nist-compliance","rel":["nofollow"]},"children":[{"type":"text","value":"American National Standards Institute (NIST)"}]},{"type":"text","value":" first began to formalize the system we know as role-based access control. In that year, "},{"type":"element","tag":"a","props":{"href":"https://csrc.nist.gov/CSRC/media/Projects/Role-Based-Access-Control/documents/ferraiolo-kuhn-92.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"Ferraiolo and Kuhn"}]},{"type":"text","value":" laid the foundation for the model we use today in a paper outlining a general-purpose access control methodology appropriate for civilian and commercial use."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ferraiolo, Kuhn, and others continued to refine RBAC throughout the 1990s and early 2000s, building on earlier work to explore the economic benefits of RBAC, outline a unified model, and most notably, define separation of duty forms. In 2004, NIST officially "},{"type":"element","tag":"a","props":{"href":"https://csrc.nist.gov/Projects/Role-Based-Access-Control/faqs","rel":["nofollow"]},"children":[{"type":"text","value":"adopted RBAC as an industry standard"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"the-rbac-model"},"children":[{"type":"text","value":"The RBAC Model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are three types of access control under the RBAC standard: core, hierarchical, and constrained."}]},{"type":"element","tag":"h3","props":{"id":"core-rbac"},"children":[{"type":"text","value":"Core RBAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The core model outlines the essential elements of every role-based access control system. While core RBAC can stand alone as an access control method, it also lays the foundation for both the hierarchical and constrained models."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As such, all RBAC must adhere to the following three rules:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Role assignment: A subject can exercise a permission only if the subject has selected or been assigned a role."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Role authorization: A subject’s active role must be authorized."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Permission authorization: A subject can only exercise a permission which is authorized for the subject’s active role.\n‍"}]}]},{"type":"element","tag":"h3","props":{"id":"hierarchical-rbac"},"children":[{"type":"text","value":"Hierarchical RBAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By assuming your defenses have already been infiltrated, you can take a stronger security posture against potential threats, minimizing the impact if a breach does occur. Limit the “blast radius” — the extent and reach of potential damage incurred by a breach — by segmenting access and reducing your "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/attack-surface","rel":["nofollow"]},"children":[{"type":"text","value":"attack surface"}]},{"type":"text","value":", verifying end-to-end encryption, and monitoring your network in real time.\n‍"}]},{"type":"element","tag":"h3","props":{"id":"constrained-rbac"},"children":[{"type":"text","value":"Constrained RBAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This third RBAC standard adds separation of duties to the core model. Separation of duty relations fall under two headings: static and dynamic."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Under Static Separation of Duty (SSD) relations, a single user cannot hold mutually-exclusive roles (as defined by the organization). This ensures, for example, that one individual cannot both make and approve a purchase."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"In the Dynamic Separation of Duty (DSD) model, a user can be a member of conflicting roles. However, the user may not function in both roles during a single session. This constraint helps control internal security threats by, for example, enforcing the two-person rule in which two distinct users are required to authorize an action."}]}]},{"type":"element","tag":"h2","props":{"id":"examples-of-role-based-access-control"},"children":[{"type":"text","value":"Examples of Role-Based Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To see how this might work, consider an analogy (oversimplified for the sake of clarity)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Steve oversees a youth hockey team composed of players, coaches, referees, and a concession seller. Even in this very basic organization, complex rights and responsibilities exist. Players need access to locker rooms and the ice rink, while the referee needs access only to the ice. The coach must create and share a roster of players, including contact information. The person selling concessions interacts with items for sale, processes credit cards, and collects/deposits cash. The administrator organizes the game schedule, gathers fees from players, pays coaches and refs (or organizes volunteers). And so on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this scenario, allocating access according to roles is a useful approach. When a new child joins the team, she is issued a player uniform and a read-only copy of the roster. She is given a game and practice schedule and the combination to her locker. Nobody has to consider whether she needs a key to the cash register or a pair of referee’s orange armbands."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The same principle can apply to businesses and other institutions. Here are a few examples of RBAC in action:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"An HR manager at a large enterprise is authorized to add, change, or delete employee records for anyone in the organization (except herself, see separation of duties) but has no access to the customer database."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A member of the sales team at a medium-sized IT vendor is assigned a role that allows him to update the customer database, but he is unable to view the details of employee records other than his own."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A doctor at a large hospital has access to complete patient records, while the receptionist can access only basic contact information."}]}]},{"type":"element","tag":"h2","props":{"id":"benefits-of-role-based-access-control"},"children":[{"type":"text","value":"Benefits of Role-Based Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see from these examples, RBAC provides a layer of security without interrupting peoples’ ability to do their jobs. Here are the three primary benefits of role-based access control."}]},{"type":"element","tag":"h3","props":{"id":"increases-security"},"children":[{"type":"text","value":"Increases Security"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RBAC restricts user access to the minimum levels required to perform a job. This helps organizations enforce security best-practices like the "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/principle-of-least-privilege","rel":["nofollow"]},"children":[{"type":"text","value":"principle of least privilege"}]},{"type":"text","value":" (PoLP), which diminishes the risk of data breaches and data leakage. Should a breach occur, RBAC limits the impact by shrinking the attack surface—access to protected information will be limited to the role that the hacker used as an entry point. So, for example, an HR employee who falls victim to a phishing attack cannot expose privileged information from the finance department. Malicious attacks on any single account are stifled before they can harm other systems."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The RBAC principle of separation of duties (SoD) improves security even more by precluding any employee from having sole power to handle a task. With SoD, even bad-actors within the organization are limited in the damage they can cause."}]},{"type":"element","tag":"h3","props":{"id":"simplifies-workflows"},"children":[{"type":"text","value":"Simplifies Workflows"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RBAC grants users the exact access needed for their roles, which helps eliminate the bottlenecks. Employees no longer have to badger admins for access to data and systems."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And IT is freed from the mountain of busywork required to manage one-off permissions for each user."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RBAC simplifies onboarding, offboarding, and other provisioning/deprovisioning activities. Admins can easily update permissions for existing employees who change roles within the organization or for contractors and third-party users who need temporary access to your network."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These increases in operational efficiency offer economic benefits and improve employee satisfaction. A win-win."}]},{"type":"element","tag":"h3","props":{"id":"improves-compliance"},"children":[{"type":"text","value":"Improves Compliance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, RBAC improves your compliance posture. All organizations—from health care providers and IT vendors to financial institutions—must adhere to federal, state, and local regulations for privacy and confidentiality. Additionally, compliance certifications like SOC 2 can improve brand reputation and offer a competitive advantage for businesses that regularly handle third-party data. Demonstrating compliance reflects a commitment to ensuring the security of customer data as well as the ability to protect sensitive information in general."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RBAC provides a framework for managing and monitoring access. Administrators know who accessed a system and when, what modifications were made, and what authorizations were in effect. This helps organizations correct any issues that arise and makes it easier to meet regulatory requirements such as "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/hipaa-compliance","rel":["nofollow"]},"children":[{"type":"text","value":"HIPAA"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/sox-compliance","rel":["nofollow"]},"children":[{"type":"text","value":"SOX"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/soc2/compliance","rel":["nofollow"]},"children":[{"type":"text","value":"SOC 2"}]},{"type":"text","value":", and "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/iso-27001","rel":["nofollow"]},"children":[{"type":"text","value":"ISO 27001"}]},{"type":"text","value":", which depend on network visibility to prove that data and sensitive information have been handled according to privacy, security, and confidentiality standards."}]},{"type":"element","tag":"h2","props":{"id":"disadvantages-of-role-based-access-control"},"children":[{"type":"text","value":"Disadvantages of Role-Based Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For many users, the standard definition of RBAC as a method of restricting access conjures images of frustration and friction, and without thoughtful implementation, those outcomes may indeed come to fruition. Later in this article, we will outline how to set up and manage RBAC smoothly. But first, here are four potential disadvantages of the model."}]},{"type":"element","tag":"h3","props":{"id":"requires-business-knowledge"},"children":[{"type":"text","value":"Requires Business Knowledge"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There is no one-size-fits-all approach to defining roles. Organizations must coordinate across departments when determining how to categorize roles and how to manage access for those roles. This requires a clear understanding of the ideal structure of the organization as well as the technical infrastructure that supports it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In large or growing organizations, this can be a daunting task made harder when IT or security managers are expected to define roles without the help of HR or executive decision-makers. This common attempt to simplify implementation actually makes the problem worse, resulting in a misalignment with larger company goals."}]},{"type":"element","tag":"h3","props":{"id":"demands-thoughtful-implementation"},"children":[{"type":"text","value":"Demands Thoughtful Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assigning roles can be a challenge. Is it ever the case that junior staff members need more access than their managers, or is a hierarchical structure more important? Do security teams need access to the data they are trying to secure and at what level (create/read/update/delete)? Should a user be assigned a role outside of their department in order to secure temporary access to privileged files? Numerous questions may arise, and the answers won’t always be clear."}]},{"type":"element","tag":"h3","props":{"id":"lacks-flexibility"},"children":[{"type":"text","value":"Lacks Flexibility"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RBAC has a reputation for being too rigid, and it’s no wonder. Organizations grow, teams expand, and access needs shift. Roles you defined at the beginning of your RBAC project may no longer fit company goals. On top of that, admins face pressure to quickly onboard new hires—even those with as-yet undefined roles."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The result? People’s roles and level of permissions may be misaligned.  For instance, a person may be given too many permissions for his or her role, assigned to too many roles, or perhaps a combination of both. While these efforts may work as a quick fix, they also create security gaps and compliance challenges—undoing the whole reason you implemented RBAC in the first place!"}]},{"type":"element","tag":"h3","props":{"id":"leads-to-role-explosion"},"children":[{"type":"text","value":"Leads to Role Explosion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some teams attempt to side-step the problems above by defining increasingly fine-grained roles, creating ad hoc roles as new needs emerge, or assigning too many roles to individual users. While this may ease friction in the short term, it also makes RBAC confusing and difficult to manage."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This problem, often termed role explosion, is one of the most common objections to RBAC. It arises when real-world roles and access needs differ from those outlined in your policy documents, even in very minor ways. And roles created as a temporary fix have a habit of sticking around. Admins may forget or even purposely choose to leave these roles in place, even when the people for whom they were created leave or change jobs within the organization. The result: privilege creep and chaos."}]},{"type":"element","tag":"h2","props":{"id":"rbac-vs-abac-vs-acl-vs-pbac"},"children":[{"type":"text","value":"RBAC vs. ABAC vs. ACL vs. PBAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Effective access control is any method that secures your network without creating friction for users. While RBAC remains a popular approach to restricting access, you may want to consider other options. Attribute-based access control (ABAC), access control lists (ACL), and policy-based access control are three alternatives. Let’s take a look at each in turn."}]},{"type":"element","tag":"h3","props":{"id":"rbac-vs-abac"},"children":[{"type":"text","value":"RBAC vs. ABAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Organizations use ABAC to achieve more fine-grained access control—either as a replacement for or supplement to RBAC. Unlike RBAC, which grants access according to predefined roles, ABAC relies on a combination of attributes to match users with the resources they need to do a job."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Learn more about "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/rbac-vs-abac","rel":["nofollow"]},"children":[{"type":"text","value":"RBAC vs. ABAC | Pros, Cons, and Major Distinctions"}]}]},{"type":"element","tag":"h3","props":{"id":"rbac-vs-acl"},"children":[{"type":"text","value":"RBAC vs. ACL"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Access control lists (ACL) control or restrict the flow of traffic through a digital environment. ACL rules grant or deny access in two general categories:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Filesystem ACLs apply to files and/or directories. The ACL specifies which subject (human user or machine/system process) is allowed access to objects and what operations are allowed on those objects."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Networking ACLs apply to the network routers and switches. The ACL specifies which type of traffic can access the network and what activity is allowed."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Organizations use ACLs in tandem with VPNs to manage traffic. Doing so may improve network performance, increase security, and allow for more granular monitoring at entry and exit points. This makes ACLs suitable for securing individual users and low-level data, but it may not be the best approach to access management in most business applications."}]},{"type":"element","tag":"h3","props":{"id":"rbac-vs-pbac"},"children":[{"type":"text","value":"RBAC vs. PBAC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Policy-Based Access Control (PBAC) is another access management strategy that focuses on authorization. Whereas RBAC restricts user access based on static roles, PBAC determines access privileges dynamically based on rules and policies. Although PBAC is fairly similar to ABAC, ABAC requires more IT and development resources (e.g., XML coding) as the number of attributes required increases."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some key benefits of PBAC include:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"flexibility to be fine- or coarse-grained."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ability to quickly add, remove, or amend permissions."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"environmental and contextual controls (e.g., time- or location-bound access)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"visibility into the relationship between identities and resources."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These benefits may make access control nimbler, especially as organizations grow and change. But every access control system will require some amount of management and thoughtful implementation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Luckily, some advanced planning and a little elbow grease can make the task productive, successful, and even fun. Here’s how."}]},{"type":"element","tag":"h2","props":{"id":"how-to-implement-access-control-rbac-best-practices"},"children":[{"type":"text","value":"How to Implement Access Control | RBAC Best Practices"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set yourself up for success by following these role-based access control best practices. Don’t expect IT to implement RBAC alone. Begin with a conversation across departments, and then proceed systematically to ease the transition and avoid unnecessary friction in your workforce as new systems roll out. RBAC implementation requires high-level understanding of business structure and goals. By collaborating from the start, you will be better prepared to reap the benefits of RBAC and get the most out of your efforts."}]},{"type":"element","tag":"h3","props":{"id":"develop-an-rbac-strategy"},"children":[{"type":"text","value":"Develop an RBAC Strategy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Start by evaluating where you are. What systems, data, or processes in your organization would benefit from access control? Be sure to include any job functions, technologies, and business operations. Paint with broad strokes in the beginning. You will refine the process as you go along."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next, consider where you want to be. Will you use RBAC to automate provisioning? Do you need a better way to control access to applications that store "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/sensitive-data","rel":["nofollow"]},"children":[{"type":"text","value":"sensitive data"}]},{"type":"text","value":"? What is your desired outcome for this process?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, note any gaps you need to tackle. Are your authentication/authorization models consistent across your organization? Are there compliance or regulatory requirements you need to meet? Was there a security event that prompted you to switch to RBAC?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once you have mapped out your strategy, you are ready to move on to the details."}]},{"type":"element","tag":"h3","props":{"id":"inventory-your-systems"},"children":[{"type":"text","value":"Inventory Your Systems"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make a list of every resource or service that requires access control. The list may include email, cloud apps, customer databases, shared folders on a file server, and so on."}]},{"type":"element","tag":"h3","props":{"id":"analyze-your-workforce"},"children":[{"type":"text","value":"Analyze Your Workforce"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/role-access-discovery","rel":["nofollow"]},"children":[{"type":"text","value":"Role and access discovery"}]},{"type":"text","value":" is both art and science, and collaboration across IT, HR, and executive leaders will make the process easier."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Start by grouping your workforce into roles based on shared access needs. Be sure to include both current and planned departments. At the same time, avoid the trap of defining too many roles. How many is too many? That will depend on your organization. The right number will restrict access enough to secure your systems without stifling creativity."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Larger organizations may require a more systematic method of role creation in order to avoid common pitfalls such as role explosion, role overlap, and over-reliance on exceptions. Here, we recommend a two-pronged approach."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Evaluate roles from the top down. Business managers should design a set of roles that align with company goals and take the entire workforce into consideration. Rather than focusing on systems and technology, the top-down approach should address the functional access needs of each role."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Concurrent with phase one, IT can begin a bottoms-up analysis, gathering information about the way users are accessing systems. Then generate roles based on this analysis."}]}]},{"type":"element","tag":"h3","props":{"id":"create-and-define-roles"},"children":[{"type":"text","value":"Create and Define Roles"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, reconcile your lists. Map the result of your workforce analysis to the resources from your inventory according to the principle of least privilege. This mapping will define your roles."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, you may create a Basic User role, which has access to email and Slack and applies to all users in the organization. You may create a specialist role, such as Hiring Manager, which has read/write access to the employee database. You may create an Employee Database Administrator role, which has full control of the employee database. And so on for each department."}]},{"type":"element","tag":"h3","props":{"id":"establish-a-governance-structure"},"children":[{"type":"text","value":"Establish a Governance Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In addition to defining roles, you need to establish a decision-making body to maintain them. Articulate, in writing, the project priorities and standards that serve the best interests of your organization as a whole."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Your access control policies may include:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"performance measures"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"risk-management strategies"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"role re-evaluation guidelines"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"direction regarding who maintains roles"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a plan to keep the policy up to date"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Policy-based access control helps prevent role proliferation and keeps your RBAC project on track even as your company grows or conflicts between departments arise."}]},{"type":"element","tag":"h3","props":{"id":"assign-people-to-roles"},"children":[{"type":"text","value":"Assign People to Roles"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All of that preparation has laid the groundwork for the final step: implementation. Now that you have inventoried your systems and outlined the way your workforce uses them, it is time to assign roles to your employees and begin using RBAC to manage access rights and permissions."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Larger organizations may choose to roll out RBAC in stages. Start with a small group of users, organized around a business function or department. Collect feedback and make any adjustments before moving to the next stage. This will minimize workforce disruption, help you build on small successes, and demonstrate the value of the role-based access control model."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Congratulations! You have now successfully implemented RBAC in your organization. Your next task is to keep it running smoothly."}]},{"type":"element","tag":"h2","props":{"id":"managing-role-based-access-control"},"children":[{"type":"text","value":"Managing Role-Based Access Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Needs change. Systems change. People come and go. The RBAC you design at the start of this project will invariably differ from the RBAC you need down the road. In the early days of implementation, keep an eye on your security status and fine-tune your roles as needed. Once you reach stability, settle into a consistent cadence of regular review—annually or quarterly depending on the needs of your organization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using roles simplifies the process of adding, removing, and adjusting permissions to individual users, but as your organization grows in complexity, you will need to modify your roles as well. This is where iterative adjustment and regular review come into play."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Continue to collect feedback and monitor your security status on an ongoing basis. And conduct a periodic review of roles, role assignments, and RBAC authorization. Review access logs and user feedback to discover what’s working and what may need to change."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Keep an eye out for:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"roles with unnecessary access to a particular resource."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"users attempting to access data outside the scope of their role."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"overlapping role assignments."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"role proliferation/role explosion."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It may also be a good time to educate your workforce about security best practices. However, if you have taken all of these steps and still struggle to control access, never fear. RBAC has a few more tricks up its sleeves."}]},{"type":"element","tag":"h2","props":{"id":"extending-rbac-a-rule-based-approach"},"children":[{"type":"text","value":"Extending RBAC | A Rule-Based Approach"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Teams managing a large volume of resources, especially ephemeral ones, need more flexible access rules to keep up with their ever-changing infrastructure. But this doesn’t mean scrapping RBAC and starting over."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rather than replacing role-based access control, you can complement it with ABAC policies.  With the flexibility that dynamic access control affords, you now are in position to scale your organization without sacrificing any prior investments made in your RBAC system.‍"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://profsandhu.com/cs5323_s17/mmm-acns12-rabac-paper.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"Extending RBAC"}]},{"type":"text","value":" in this way makes it nimbler, preventing the bottlenecks and workflow disruption that follow from delays in provisioning, while maintaining the security benefit of timely revocation of unauthorized access."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Managing access in the modern cloud presents new challenges that must be met with a collaborative approach that balances network security with workforce happiness. Role-based access control simplifies user provisioning, helps satisfy audit requirements, and facilitates adherence to security best-practices such as PoLP and Zero Trust. So give it a try. The effort you put in today will yield great benefits in the long run."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unsure where to start? We’ve got your RBAC! Visit strongDM, and sign up for our "},{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/get-a-demo","rel":["nofollow"]},"children":[{"type":"text","value":"free, no-BS demo"}]},{"type":"text","value":" today."}]},{"type":"element","tag":"h2","props":{"id":"more-rbac-resources"},"children":[{"type":"text","value":"More RBAC Resources"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/ebooks/rbac-ebook","rel":["nofollow"]},"children":[{"type":"text","value":"Understanding RBAC eBook"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/rbac-vs-abac","rel":["nofollow"]},"children":[{"type":"text","value":"RBAC vs. ABAC | Pros, Cons, and Major Distinctions"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/tools/roles-and-access-discovery-workbook","rel":["nofollow"]},"children":[{"type":"text","value":"Free Role and Access Discovery Workbook"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/kubernetes-rbac-role-based-access-control","rel":["nofollow"]},"children":[{"type":"text","value":"Kubernetes Role-Based Access Control (RBAC)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/access-management-101-roles-and-access","rel":["nofollow"]},"children":[{"type":"text","value":"Access Management 101: Understanding Roles & Access"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/getting-started-role-access-discovery","rel":["nofollow"]},"children":[{"type":"text","value":"Getting Started: Role & Access Discovery"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/role-access-discovery","rel":["nofollow"]},"children":[{"type":"text","value":"Role & Access Discovery | Who Has Access to What Now?"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"about-the-author"},"children":[{"type":"text","value":"About the Author"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.strongdm.com/blog/author/maile-mccarthy","rel":["nofollow"]},"children":[{"type":"text","value":"Maile McCarthy"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Contributing Writer and Illustrator"}]},{"type":"text","value":", has a passion for helping people bring their ideas to life through web and book illustration, writing, and animation. In recent years, her work has focused on researching the context and differentiation of technical products and relaying that understanding through appealing and vibrant language and images. She holds a B.A. in Philosophy from the University of California, Berkeley. To contact Maile, "},{"type":"element","tag":"a","props":{"href":"https://www.linkedin.com/in/maile-mccarthy/","rel":["nofollow"]},"children":[{"type":"text","value":"visit her on LinkedIn"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"what-is-rbac","depth":2,"text":"What is RBAC?"},{"id":"history-of-role-based-access-control","depth":2,"text":"History of Role-Based Access Control"},{"id":"the-rbac-model","depth":2,"text":"The RBAC Model","children":[{"id":"core-rbac","depth":3,"text":"Core RBAC"},{"id":"hierarchical-rbac","depth":3,"text":"Hierarchical RBAC"},{"id":"constrained-rbac","depth":3,"text":"Constrained RBAC"}]},{"id":"examples-of-role-based-access-control","depth":2,"text":"Examples of Role-Based Access Control"},{"id":"benefits-of-role-based-access-control","depth":2,"text":"Benefits of Role-Based Access Control","children":[{"id":"increases-security","depth":3,"text":"Increases Security"},{"id":"simplifies-workflows","depth":3,"text":"Simplifies Workflows"},{"id":"improves-compliance","depth":3,"text":"Improves Compliance"}]},{"id":"disadvantages-of-role-based-access-control","depth":2,"text":"Disadvantages of Role-Based Access Control","children":[{"id":"requires-business-knowledge","depth":3,"text":"Requires Business Knowledge"},{"id":"demands-thoughtful-implementation","depth":3,"text":"Demands Thoughtful Implementation"},{"id":"lacks-flexibility","depth":3,"text":"Lacks Flexibility"},{"id":"leads-to-role-explosion","depth":3,"text":"Leads to Role Explosion"}]},{"id":"rbac-vs-abac-vs-acl-vs-pbac","depth":2,"text":"RBAC vs. ABAC vs. ACL vs. PBAC","children":[{"id":"rbac-vs-abac","depth":3,"text":"RBAC vs. ABAC"},{"id":"rbac-vs-acl","depth":3,"text":"RBAC vs. ACL"},{"id":"rbac-vs-pbac","depth":3,"text":"RBAC vs. PBAC"}]},{"id":"how-to-implement-access-control-rbac-best-practices","depth":2,"text":"How to Implement Access Control | RBAC Best Practices","children":[{"id":"develop-an-rbac-strategy","depth":3,"text":"Develop an RBAC Strategy"},{"id":"inventory-your-systems","depth":3,"text":"Inventory Your Systems"},{"id":"analyze-your-workforce","depth":3,"text":"Analyze Your Workforce"},{"id":"create-and-define-roles","depth":3,"text":"Create and Define Roles"},{"id":"establish-a-governance-structure","depth":3,"text":"Establish a Governance Structure"},{"id":"assign-people-to-roles","depth":3,"text":"Assign People to Roles"}]},{"id":"managing-role-based-access-control","depth":2,"text":"Managing Role-Based Access Control"},{"id":"extending-rbac-a-rule-based-approach","depth":2,"text":"Extending RBAC | A Rule-Based Approach"},{"id":"more-rbac-resources","depth":2,"text":"More RBAC Resources"},{"id":"about-the-author","depth":2,"text":"About the Author"}]}},"_type":"markdown","_id":"content:5.notes:rbac.md","_source":"content","_file":"5.notes/rbac.md","_extension":"md"},{"_path":"/notes/sublime","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Sublime","description":"高亮文本日志文件","icon":"logos:sublimetext-icon","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"sublime"},"children":[{"type":"text","value":"Sublime"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"高亮文本日志文件"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:5.notes:sublime.md","_source":"content","_file":"5.notes/sublime.md","_extension":"md"},{"_path":"/notes/svn","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"svn","description":"","icon":"file-icons:tortoisesvn","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"svn"},"children":[{"type":"text","value":"svn"}]},{"type":"element","tag":"h2","props":{"id":"externals"},"children":[{"type":"text","value":"externals"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"official "},{"type":"element","tag":"a","props":{"href":"https://tortoisesvn.net/docs/release/TortoiseSVN_zh_CN/tsvn-dug-externals.html","rel":["nofollow"]},"children":[{"type":"text","value":"zh"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html","rel":["nofollow"]},"children":[{"type":"text","value":"en"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Subversion (SVN) 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"externals"}]},{"type":"text","value":" 功能允许您将外部的 Subversion 仓库中的文件或目录链接到您当前的版本库中。这对于共享公共文件或库非常有用，而无需将这些文件或库完全复制到您自己的版本库中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"externals"}]},{"type":"text","value":"，首先需要在您的版本库中找到要将外部文件链接到的目录，并执行以下操作："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svn propedit svn:externals"}]},{"type":"text","value":" 来编辑该目录的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svn:externals"}]},{"type":"text","value":" 属性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在编辑器中，输入要链接的外部文件或目录的信息，格式为：\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<外部目录名> <外部版本库 URL>"}]},{"type":"text","value":"\n例如：\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"my_lib https://svn.example.com/repos/my_lib"}]},{"type":"text","value":"s"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"保存并退出编辑器。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提交更改，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svn commit"}]},{"type":"text","value":" 命令。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在，当您检出版本库时，您会看到在该目录中链接的外部文件或目录。如果您对外部文件进行了更改并提交了更改，则需要更新您的版本库，以便在本地看到这些更改。要这样做，请使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"svn update"}]},{"type":"text","value":" 命令。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"递归列出所有 externals"}]},{"type":"element","tag":"code","props":{"code":"svn propget svn:externals -R\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9248d5"},"children":[{"type":"text","value":"svn"}]},{"type":"element","tag":"span","props":{"class":"ct-2cd768"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-352ecb"},"children":[{"type":"text","value":"propget"}]},{"type":"element","tag":"span","props":{"class":"ct-2cd768"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-352ecb"},"children":[{"type":"text","value":"svn:externals"}]},{"type":"element","tag":"span","props":{"class":"ct-2cd768"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-707634"},"children":[{"type":"text","value":"-R"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-707634{color:#0550AE}\n.ct-352ecb{color:#0A3069}\n.ct-2cd768{color:#24292F}\n.ct-9248d5{color:#953800}\n.dark .ct-9248d5{color:#FFA657}\n.dark .ct-2cd768{color:#C9D1D9}\n.dark .ct-352ecb{color:#A5D6FF}\n.dark .ct-707634{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"externals","depth":2,"text":"externals"}]}},"_type":"markdown","_id":"content:5.notes:svn.md","_source":"content","_file":"5.notes/svn.md","_extension":"md"},{"_path":"/notes/tabby","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Tabby","description":"","icon":"icon-park:terminal","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"tabby"},"children":[{"type":"text","value":"Tabby"}]},{"type":"element","tag":"h2","props":{"id":"plugins"},"children":[{"type":"text","value":"plugins"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"quick-cmds"}]}]},{"type":"element","tag":"h2","props":{"id":"hot-keys"},"children":[{"type":"text","value":"hot keys"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command-w"}]},{"type":"text","value":" close tab"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command-shift-w"}]},{"type":"text","value":" close focused pane"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ctrl-tab"}]},{"type":"text","value":" next tab"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ctrl-shift-tab"}]},{"type":"text","value":" previous tab"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"plugins","depth":2,"text":"plugins"},{"id":"hot-keys","depth":2,"text":"hot keys"}]}},"_type":"markdown","_id":"content:5.notes:tabby.md","_source":"content","_file":"5.notes/tabby.md","_extension":"md"},{"_path":"/notes/tmdb","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"TMDB","description":"first, get API.","date":"2022-10-20T11:42:00.000Z","icon":"simple-icons:themoviedatabase","category":["编程"],"tag":["API","TMDB","movie"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"the-movie-database"},"children":[{"type":"text","value":"The Movie Database"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"first, get API."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"search: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://api.themoviedb.org/3/search/movie?query=Marvel&api_key=<yourkey>&page=5"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"image: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://image.tmdb.org/t/p/w500/yYrvN5WFeGYjJnRzhY0QXuo4Isw.jpg"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ori: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://image.tmdb.org/t/p/original/yYrvN5WFeGYjJnRzhY0QXuo4Isw.jpg"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"w500: above"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developers.themoviedb.org/3/getting-started/images","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"by id: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://api.themoviedb.org/3/movie/157336?api_key=<yourkey>"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"query 没有 keyword 厉害"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"根据 API 文档 ，"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"TMDB api"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"get "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/search/keyword"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://developers.themoviedb.org/3/search/search-keywords","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://api.themoviedb.org/3/search/keyword?query=marvel-cinematic-universe-mcu&api_key=yourkey"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nresponse id, name => 180547"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"get "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/keyword/{keyword_id}/movies"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://developers.themoviedb.org/3/keywords/get-movies-by-keyword","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://api.themoviedb.org/3/keyword/180547/movies?api_key=yourkey"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"blog 里的 json movie 部分即是 这个 keyword 查询出来的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tv 仍然是 query 出来的"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:5.notes:tmdb.md","_source":"content","_file":"5.notes/tmdb.md","_extension":"md"},{"_path":"/notes/vercel","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Vercel","description":"","icon":"logos:vercel-icon","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"if open "},{"type":"element","tag":"a","props":{"href":"https://vercel.com/draugus/notes/analytics","rel":["nofollow"]},"children":[{"type":"text","value":"analytics"}]},{"type":"text","value":", then catch many errors"}]},{"type":"element","tag":"details","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"such as,"}]},{"type":"element","tag":"code","props":{"code":"[22:11:33.891] Installing dependencies...\n[22:11:34.354]  WARN  Your pnpm-lock.yaml was generated by a newer version of pnpm. It is a compatible version but it might get downgraded to version 5.3\n[22:11:34.355] Lockfile is up-to-date, resolution step is skipped\n[22:11:34.357]  ERR_PNPM_OUTDATED_LOCKFILE  Cannot install with \"frozen-lockfile\" because pnpm-lock.yaml is not up-to-date with package.json\n[22:11:34.357] \n[22:11:34.357] Note that in CI environments this setting is true by default. If you still need to run install in such cases, use \"pnpm install --no-frozen-lockfile\"\n[22:11:34.372] Error: Command \"pnpm install\" exited with 1\n","language":"log","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[22:11:33.891] Installing dependencies...\n[22:11:34.354]  WARN  Your pnpm-lock.yaml was generated by a newer version of pnpm. It is a compatible version but it might get downgraded to version 5.3\n[22:11:34.355] Lockfile is up-to-date, resolution step is skipped\n[22:11:34.357]  ERR_PNPM_OUTDATED_LOCKFILE  Cannot install with \"frozen-lockfile\" because pnpm-lock.yaml is not up-to-date with package.json\n[22:11:34.357] \n[22:11:34.357] Note that in CI environments this setting is true by default. If you still need to run install in such cases, use \"pnpm install --no-frozen-lockfile\"\n[22:11:34.372] Error: Command \"pnpm install\" exited with 1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"but when you change install command: pnpm install --no-frozen-lockfile, then catch"}]},{"type":"element","tag":"code","props":{"code":"[error] Cannot destructure property 'nuxt' of 'this' as it is undefined.\n","language":"log","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[error] Cannot destructure property 'nuxt' of 'this' as it is undefined."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"see the "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/framework/issues/9314#issuecomment-1327136918","rel":["nofollow"]},"children":[{"type":"text","value":"issue"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"truly answer is to "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"close the "},{"type":"element","tag":"a","props":{"href":"https://vercel.com/draugus/notes/analytics","rel":["nofollow"]},"children":[{"type":"text","value":"analytics"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"qa","depth":2,"text":"QA"}]}},"_type":"markdown","_id":"content:5.notes:vercel.md","_source":"content","_file":"5.notes/vercel.md","_extension":"md"},{"_path":"/notes/vim","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"vim","description":"","icon":"logos:vimeo-icon","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vim"},"children":[{"type":"text","value":"vim"}]},{"type":"element","tag":"h2","props":{"id":"模式"},"children":[{"type":"text","value":"模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4种模式"}]},{"type":"element","tag":"h3","props":{"id":"普通模式"},"children":[{"type":"text","value":"普通模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"h"}]},{"type":"text","value":" left "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"j"}]},{"type":"text","value":" down "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" up "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"l"}]},{"type":"text","value":" right"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"4j"}]},{"type":"text","value":" 向下跳4行"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"w"}]},{"type":"text","value":" 跳转下一个单词"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"b"}]},{"type":"text","value":" 跳转到前一个单词开头"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gg"}]},{"type":"text","value":" 回到文档最上方 即 home 键"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"G"}]},{"type":"text","value":" 回到文档最下方 即 end 键"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl U"}]},{"type":"text","value":" 即 PgUp"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl D"}]},{"type":"text","value":" 即 PgDn"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fr"}]},{"type":"text","value":"移动到离你最近的r"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"y"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yaw"}]},{"type":"text","value":" yank all words"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"y4j"}]},{"type":"text","value":" 复制包含当前行的下四行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yfr"}]},{"type":"text","value":" 复制到r为止的内容"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"p"}]},{"type":"text","value":" 粘贴"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"d"}]},{"type":"text","value":" 删除"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dj"}]},{"type":"text","value":" 删除当前行和下一行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dfr"}]},{"type":"text","value":" 删除到r为止的内容"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-caw"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"caw"}]},{"type":"text","value":" change all words 改变当前这个单词 进入输入模式"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-cc"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cc"}]},{"type":"text","value":" 删除当前行进入输入模式"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"c4j"}]},{"type":"text","value":" 删除下四行进入输入模式"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-i"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"i"}]},{"type":"text","value":" 是在当前光标的前一个字母进行输入"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-a"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"a"}]},{"type":"text","value":" 是在当前光标之后进行输入"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-I"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"I"}]},{"type":"text","value":" 从这一行开头开始输入"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"insert-A"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" 从这一行末尾开始输入"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"o"}]},{"type":"text","value":" 在当前行之后插入一行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"O"}]},{"type":"text","value":" 在当前行之前插入一行"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"搜索 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"正向往下搜索 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"?"}]},{"type":"text","value":"反向往上搜索 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":"正向向下寻找下一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"N"}]},{"type":"text","value":"反向向上寻找上一个"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"全局替换 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"%s/源字符串/目的字符串/g"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"撤销 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"u"}]},{"type":"text","value":" 撤销整行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"U"}]},{"type":"text","value":" 取消撤销 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ctrl + r"}]}]}]},{"type":"element","tag":"h3","props":{"id":"命令模式"},"children":[{"type":"text","value":"命令模式"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在普通模式下键入:进入命令模式"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"退出"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":q"}]},{"type":"text","value":"退出编辑"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":q!"}]},{"type":"text","value":"强制退出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":wq"}]},{"type":"text","value":"保存并退出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":w"}]},{"type":"text","value":"保存文件但不退出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":w file"}]},{"type":"text","value":"将修改另存为file文件里不退出vim"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":w!"}]},{"type":"text","value":"强制保存文件但不退出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":wq!"}]},{"type":"text","value":"强制保存文件并退出"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":e!"}]},{"type":"text","value":"放弃所有更改"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以:和/开头的命令都有历史纪录，可以首先键入:或/然后按上下箭头来选择某个历史命令。"}]}]},{"type":"element","tag":"h3","props":{"id":"输入模式"},"children":[{"type":"text","value":"输入模式"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在普通模式下键入"},{"type":"element","tag":"a","props":{"href":"#insert-i"},"children":[{"type":"text","value":"i"}]},{"type":"text","value":"进入输入模式\n其他进入方式，如 "},{"type":"element","tag":"a","props":{"href":"#insert-a"},"children":[{"type":"text","value":"a"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#insert-I"},"children":[{"type":"text","value":"I"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#insert-A"},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#insert-caw"},"children":[{"type":"text","value":"caw"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#insert-cc"},"children":[{"type":"text","value":"cc"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"此时可以对文件内容进行编辑，左下角会显示"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"-- INSERT --\""}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"按\"ESC\"进入底行模式"}]}]},{"type":"element","tag":"h3","props":{"id":"可视模式"},"children":[{"type":"text","value":"可视模式"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在普通模式下键入v进入可视模式"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"移动光标就会选中内容"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"y就可以直接复制选中的内容"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/feosun/article/details/73196299","title":"其他命令","target":"_blank"},"children":[{"type":"text","value":"本文已足够，如果还想看点冗余的"}]}]},{"type":"element","tag":"h2","props":{"id":"补充"},"children":[{"type":"text","value":"补充"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vim +10 filename.txt //打开文件并跳到第10行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vim -R /etc/passwd //以只读模式打开文件"}]},{"type":"element","tag":"h2","props":{"id":"vimrc"},"children":[{"type":"text","value":"vimrc"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim ~/.vimsc"}]}]},{"type":"element","tag":"h3","props":{"id":"tab"},"children":[{"type":"text","value":"tab"}]},{"type":"element","tag":"code","props":{"code":"set shiftwidth=4 #\"这个量是每行的缩进深度，一般设置成和tabstop一样的宽度\"\nset tabstop=4 #\"设置Tab显示的宽度，Python建议设置成4\"\n\nset expandtab\n#\"如果只想在Python文件中将Tab展开成空格，就改换成下面这句\"\nautocmd FileType python set expandtab\n\nset smartindent #\"智能缩进\"\nset cindent #\"C语言风格缩进\"\nset autoindent #\"自动缩进\"\n","filename":".vimsc","language":"txt","meta":"[.vimsc]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"set shiftwidth=4 #\"这个量是每行的缩进深度，一般设置成和tabstop一样的宽度\"\nset tabstop=4 #\"设置Tab显示的宽度，Python建议设置成4\"\n\nset expandtab\n#\"如果只想在Python文件中将Tab展开成空格，就改换成下面这句\"\nautocmd FileType python set expandtab\n\nset smartindent #\"智能缩进\"\nset cindent #\"C语言风格缩进\"\nset autoindent #\"自动缩进\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"显示行号"},"children":[{"type":"text","value":"显示行号"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"临时显示行号 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set nu"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n永久显示行号 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim ~/.vimsc"}]},{"type":"text","value":" 末尾加上 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set number"}]}]},{"type":"element","tag":"h2","props":{"id":"替换字符串"},"children":[{"type":"text","value":"替换字符串"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":s/source str/replace str/"}]},{"type":"text","value":" replace current line first str"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":s/source str/replace str/g"}]},{"type":"text","value":" replace current line all str"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":n,$s/source str/replace str/"}]},{"type":"text","value":" replace from n to the last line all first str"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":%s/source str/replace str/"}]},{"type":"text","value":" replace all str"}]}]},{"type":"element","tag":"h2","props":{"id":"光标移动"},"children":[{"type":"text","value":"光标移动"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" 移动光标到当前行行首"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$"}]},{"type":"text","value":" 移动光标到当前行行尾"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"^"}]},{"type":"text","value":" 移动光标到当前行的第一个非空字符"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nG"}]},{"type":"text","value":" 移动光标到当前文件的第n行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":n"}]},{"type":"text","value":" 移动光标到当前文件的第n行 (同上)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gg"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":0"}]},{"type":"text","value":" 移动光标到当前文件的第一行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GG"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":$"}]},{"type":"text","value":" 移动光标到当前未经的最后一行"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"w"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"W"}]},{"type":"text","value":" 移动到下一单词的开头"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"b"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"B"}]},{"type":"text","value":" 移动到上一单词的开头"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"e"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"E"}]},{"type":"text","value":" 移动到光标所在单词的末尾"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl"}]},{"type":"text","value":" + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f"}]},{"type":"text","value":" 向前滚动一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl"}]},{"type":"text","value":" + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"b"}]},{"type":"text","value":" 向后滚动一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl"}]},{"type":"text","value":" + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"u"}]},{"type":"text","value":" 向前滚动半页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Ctrl"}]},{"type":"text","value":" + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"d"}]},{"type":"text","value":" 向后滚动半页"}]}]},{"type":"element","tag":"h2","props":{"id":"撤销"},"children":[{"type":"text","value":"撤销"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"u"}]},{"type":"text","value":" 撤销"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ctrl+r"}]},{"type":"text","value":" 恢复刚刚的撤销"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"模式","depth":2,"text":"模式","children":[{"id":"普通模式","depth":3,"text":"普通模式"},{"id":"命令模式","depth":3,"text":"命令模式"},{"id":"输入模式","depth":3,"text":"输入模式"},{"id":"可视模式","depth":3,"text":"可视模式"}]},{"id":"补充","depth":2,"text":"补充"},{"id":"vimrc","depth":2,"text":"vimrc","children":[{"id":"tab","depth":3,"text":"tab"},{"id":"显示行号","depth":3,"text":"显示行号"}]},{"id":"替换字符串","depth":2,"text":"替换字符串"},{"id":"光标移动","depth":2,"text":"光标移动"},{"id":"撤销","depth":2,"text":"撤销"}]}},"_type":"markdown","_id":"content:5.notes:vim.md","_source":"content","_file":"5.notes/vim.md","_extension":"md"},{"_path":"/notes/vscode","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"VS Code","description":"","icon":"vscode-icons:file-type-vscode","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vs-code"},"children":[{"type":"text","value":"VS Code"}]},{"type":"element","tag":"h2","props":{"id":"tips"},"children":[{"type":"text","value":"tips"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"文本自动换行"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n文本超出显示时，需要拖动下面的滑块才能看到超出的部分，"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以设置自动换行显示，在菜单“查看-切换自动换行”选中，就可以自动换行了，"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"也可以快捷键"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ALT+Z"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"切换窗口"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"control + w"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"command + shift + b"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"tips","depth":2,"text":"tips"}]}},"_type":"markdown","_id":"content:5.notes:vscode.md","_source":"content","_file":"5.notes/vscode.md","_extension":"md"},{"_path":"/notes/webtools","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"web tools","description":"","icon":"logos:web-dev-icon","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"web-tools"},"children":[{"type":"text","value":"web tools"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"yarn"}]}]},{"type":"element","tag":"h2","props":{"id":"node"},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"h3","props":{"id":"install"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nodesource/distributions","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"use "},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/en/download/","rel":["nofollow"]},"children":[{"type":"text","value":"official"}]},{"type":"text","value":" download, or use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nodesource"}]},{"type":"text","value":" below"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"curl -fsSL https://deb.nodesource.com/setup_19.x | sudo -E bash - &&\\\nsudo apt-get install -y nodejs\n","filename":"Ubuntu","language":"bash","meta":"[Ubuntu]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"https://deb.nodesource.com/setup_19.x"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-48a9a9"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-E"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":"sudo "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"nodejs"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"curl -fsSL https://deb.nodesource.com/setup_19.x | bash - &&\\\napt-get install -y nodejs\n","filename":"Debian, as root","language":"bash","meta":"[Debian, as root]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"https://deb.nodesource.com/setup_19.x"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-48a9a9"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":"apt-get "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"nodejs"}]}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash - &&\\\nsudo apt-get install -y nodejs\n","filename":"Current","language":"bash","meta":"[Current]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"curl"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-fsSL"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"https://deb.nodesource.com/setup_current.x"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-48a9a9"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-E"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"bash"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"\\"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":"sudo "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"nodejs"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"npm"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"h3","props":{"id":"install-1"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"to download the latest version of npm, on the command line, run the following command:"}]},{"type":"element","tag":"code","props":{"code":"npm install -g npm\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"npm"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"check"}]},{"type":"element","tag":"code","props":{"code":"node -v\nnpm -v\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-v"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-v"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"pnpm"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"h3","props":{"id":"install-2"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://pnpm.io/installation","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm install -g pnpm\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-g"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"pnpm"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"yarn"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看当前 yarn 版本"},{"type":"element","tag":"code","props":{"code":"yarn -v\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-v"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"获取当前最新 yarn 版本"},{"type":"element","tag":"code","props":{"code":"npm view yarn version\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"version"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用npm升级 yarn 版本"},{"type":"element","tag":"code","props":{"code":"npm install yarn@1.22.19 -g\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fe01f"},"children":[{"type":"text","value":"yarn@1.22.19"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-g"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"查看升级后版本"},{"type":"element","tag":"code","props":{"code":"yarn -v\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b0df4"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-4db5c8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b55"},"children":[{"type":"text","value":"-v"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h3","props":{"id":"nuxt-dev-catch-error"},"children":[{"type":"text","value":"nuxt dev catch error"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ExperimentalWarning: The Fetch API is an experimental feature. This feature could change at any time"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/framework/issues/9524#issuecomment-1337698628","rel":["nofollow"]},"children":[{"type":"text","value":"solve"}]},{"type":"text","value":" or upgrade your node/npm/pnpm"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-48a9a9{color:#CF222E}\n.ct-6fe01f{color:#0A3069}\n.ct-ed8b55{color:#0550AE}\n.ct-4db5c8{color:#24292F}\n.ct-5b0df4{color:#953800}\n.dark .ct-5b0df4{color:#FFA657}\n.dark .ct-4db5c8{color:#C9D1D9}\n.dark .ct-ed8b55{color:#79C0FF}\n.dark .ct-6fe01f{color:#A5D6FF}\n.dark .ct-48a9a9{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"node","depth":2,"text":"node","children":[{"id":"install","depth":3,"text":"install"}]},{"id":"npm","depth":2,"text":"npm","children":[{"id":"install-1","depth":3,"text":"install"}]},{"id":"pnpm","depth":2,"text":"pnpm","children":[{"id":"install-2","depth":3,"text":"install"}]},{"id":"yarn","depth":2,"text":"yarn"},{"id":"qa","depth":2,"text":"QA","children":[{"id":"nuxt-dev-catch-error","depth":3,"text":"nuxt dev catch error"}]}]}},"_type":"markdown","_id":"content:5.notes:webtools.md","_source":"content","_file":"5.notes/webtools.md","_extension":"md"},{"_path":"/notes/windows/_dir","_dir":"windows","_draft":false,"_partial":true,"_locale":"","title":"Windows","icon":"logos:microsoft-windows","_id":"content:5.notes:windows:_dir.yml","_type":"yaml","_source":"content","_file":"5.notes/windows/_dir.yml","_extension":"yml"},{"_path":"/notes/windows/chocolatey","_dir":"windows","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"chocolatey","description":"","icon":"simple-icons:chocolatey","date":"2022-07-20T17:52:11.000Z","category":["编程"],"tag":["chocolatey","工具","包"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Install"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install Chocolatey for Individual Use"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"use an administrative shell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"code","props":{"code":"Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a76bc"},"children":[{"type":"text","value":"Set-ExecutionPolicy"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb822c"},"children":[{"type":"text","value":"Bypass"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"-Scope"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb822c"},"children":[{"type":"text","value":"Process"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"-Force"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"; [System.Net.ServicePointManager]"}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-0a76bc"},"children":[{"type":"text","value":":SecurityProtocol"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb822c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" [System.Net.ServicePointManager]::SecurityProtocol "}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"-bor"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"3072"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-0a76bc"},"children":[{"type":"text","value":"iex"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" ((New"}]},{"type":"element","tag":"span","props":{"class":"ct-763a37"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"Object System.Net.WebClient).DownloadString('https"}]},{"type":"element","tag":"span","props":{"class":"ct-763a37"},"children":[{"type":"text","value":"://"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"community.chocolatey.org"}]},{"type":"element","tag":"span","props":{"class":"ct-763a37"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"install.ps"}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":"'))"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"upgrade"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Upgrade"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See more info on the official website"}]},{"type":"element","tag":"h2","props":{"id":"安装其他包"},"children":[{"type":"text","value":"安装其他包"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docfx"}]}]},{"type":"element","tag":"code","props":{"code":"choco install docfx -y\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a76bc"},"children":[{"type":"text","value":"choco"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb822c"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eb822c"},"children":[{"type":"text","value":"docfx"}]},{"type":"element","tag":"span","props":{"class":"ct-bd7b56"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-589c0e"},"children":[{"type":"text","value":"-y"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"TIPS:\nEnvironment Vars (like PATH) have changed. Close/reopen your shell to\nsee the changes (or in powershell/cmd.exe just type "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"refreshenv"}]},{"type":"text","value":")."}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-763a37{color:#CF222E}\n.ct-589c0e{color:#0550AE}\n.ct-eb822c{color:#0A3069}\n.ct-bd7b56{color:#24292F}\n.ct-0a76bc{color:#953800}\n.dark .ct-0a76bc{color:#FFA657}\n.dark .ct-bd7b56{color:#C9D1D9}\n.dark .ct-eb822c{color:#A5D6FF}\n.dark .ct-589c0e{color:#79C0FF}\n.dark .ct-763a37{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install","depth":2,"text":"Install"},{"id":"upgrade","depth":2,"text":"Upgrade"},{"id":"安装其他包","depth":2,"text":"安装其他包"}]}},"_type":"markdown","_id":"content:5.notes:windows:chocolatey.md","_source":"content","_file":"5.notes/windows/chocolatey.md","_extension":"md"},{"_path":"/notes/windows/cmd","_dir":"windows","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"cmd指南","description":"","excerpt":"cmd命令 & 恢复cmd默认配色","date":"2021-10-30T21:38:01.000Z","category":["windows"],"tag":["windows","cmd"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"cmd-命令"},"children":[{"type":"text","value":"CMD 命令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以用cmd /?查看帮助信息"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmd /c dir"}]},{"type":"text","value":" 是执行完dir命令后关闭命令窗口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmd /k dir"}]},{"type":"text","value":" 是执行完dir命令后不关闭命令窗口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmd /c start dir"}]},{"type":"text","value":" 会打开一个新窗口后执行dir指令，原窗口会关闭。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cmd /k start dir"}]},{"type":"text","value":" 会打开一个新窗口后执行dir指令，原窗口不会关闭。"}]}]},{"type":"element","tag":"h2","props":{"id":"恢复cmd默认配色"},"children":[{"type":"text","value":"恢复cmd默认配色"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不知道哪次脑子抽了换成这种配色"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://i.loli.net/2021/10/30/3QFsoKDjcbB6JRH.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后试图恢复默认，为什么想要恢复，发现WebStorm里的控制台颜色也变了，，丑死了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://i.loli.net/2021/10/30/vVSBLnk8jI6Wdwe.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"打开注册表 regedit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HKEY_CURRENT_USER - Console 将下面的全删了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://i.loli.net/2021/10/30/DF8ik9cX1VdbowW.png"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"cmd-命令","depth":2,"text":"CMD 命令"},{"id":"恢复cmd默认配色","depth":2,"text":"恢复cmd默认配色"}]}},"_type":"markdown","_id":"content:5.notes:windows:cmd.md","_source":"content","_file":"5.notes/windows/cmd.md","_extension":"md"},{"_path":"/notes/windows/virtualbox","_dir":"windows","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"虚拟机记录","description":"","date":"2022-04-06T09:09:09.000Z","category":["编程"],"tag":["虚拟机","linux"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"virtualbox该何去何从"},"children":[{"type":"text","value":"VirtualBox该何去何从"}]},{"type":"element","tag":"h2","props":{"id":"重装系统后如何重新启用virtual-box"},"children":[{"type":"text","value":"重装系统后如何重新启用Virtual Box"}]},{"type":"element","tag":"h3","props":{"id":"避免后面出现如下报错信息请先检查vboxdrv服务是否正常运行"},"children":[{"type":"text","value":"避免后面出现如下报错信息，请先检查"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vboxdrv"}]},{"type":"text","value":"服务是否正常运行"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NtCreateFile(\\Device\\VBoxDrvStub) failed: 0xc000000034 STATUS_OBJECT_NAME_NOT_FOUND (0 retries) (rc=-101)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nMake sure the kernel module has been loaded successfully."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vboxdrv服务"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cmd键入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sc.exe query vboxdrv"}]},{"type":"text","value":"检测其运行状态"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若未启动，键入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sc start vboxdrv"}]},{"type":"text","value":"进行启动"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动失败则需要重新安装，进入安装路径"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"C:\\Program Files\\Oracle\\VirtualBox\\drivers\\vboxdrv"}]},{"type":"text","value":", 右击VBoxDrv.inf，选安装，然后重启。"}]}]},{"type":"element","tag":"h3","props":{"id":"下面我们开始恢复"},"children":[{"type":"text","value":"下面我们开始恢复"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"重现你当时安装所选的配置，在到虚拟硬盘的步骤时，选择使用现有文件，找到你之前的vdi文件，点击创建，大功告成"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://sm.ms/image/agfDFEBjGoNMdu7","rel":["nofollow"]},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"https://i.loli.net/2021/10/11/agfDFEBjGoNMdu7.png"},"children":[]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一些坑..."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一定要把网络设置为桥接网卡"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://sm.ms/image/OYZgpsw4CBJhVju","rel":["nofollow"]},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"https://i.loli.net/2021/10/11/OYZgpsw4CBJhVju.png"},"children":[]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"检查linux网卡配置"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim /etc/sysconfig/network-scripts/ifcfg-enp0s3"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vim /etc/resolv.conf"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"重装系统后如何重新启用virtual-box","depth":2,"text":"重装系统后如何重新启用Virtual Box","children":[{"id":"避免后面出现如下报错信息请先检查vboxdrv服务是否正常运行","depth":3,"text":"避免后面出现如下报错信息，请先检查vboxdrv服务是否正常运行"},{"id":"下面我们开始恢复","depth":3,"text":"下面我们开始恢复"}]}]}},"_type":"markdown","_id":"content:5.notes:windows:VirtualBox.md","_source":"content","_file":"5.notes/windows/VirtualBox.md","_extension":"md"},{"_path":"/notes/windows/wallpaper","_dir":"windows","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"壁纸","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"壁纸"},"children":[{"type":"text","value":"壁纸"}]},{"type":"element","tag":"h2","props":{"id":"win10锁屏的漂亮壁纸如何保存"},"children":[{"type":"text","value":"Win10锁屏的漂亮壁纸如何保存"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先将隐藏文件设为可见，通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Win+E"}]},{"type":"text","value":"键打开文件资源管理器，点击系统盘（一般是C盘）->用户，点击自己的用户名称，并进一步点击 AppData->Local->Packages，找到开头为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Microsoft.Windows.ContentDeliveryManager"}]},{"type":"text","value":" 的文件夹，继续进入 LocalState->Assets 该文件夹内的文件即为锁屏壁纸，我们将其复制粘贴后，添加扩展名为.jpg或.png，修改后就可以看到文件变成了锁屏壁纸图片。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果以上没有，可以尝试 C:\\ProgramData\\ILockScreen\\cache"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"win10锁屏的漂亮壁纸如何保存","depth":2,"text":"Win10锁屏的漂亮壁纸如何保存"}]}},"_type":"markdown","_id":"content:5.notes:windows:wallpaper.md","_source":"content","_file":"5.notes/windows/wallpaper.md","_extension":"md"},{"_path":"/notes/windows/windows11-update","_dir":"windows","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"windows11更新纪要","description":"介绍win11更新路上的绊脚石","date":"2021-10-05T13:16:44.000Z","category":["windows"],"tag":["windows","更新"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"win11"},"children":[{"type":"text","value":"win11"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"介绍win11更新路上的绊脚石"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2021-10-11 update AMD用户一定不要升级Windows11"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果需要跨过这些绊脚石，进PE直接安装win11镜像即可。\n"},{"type":"element","tag":"a","props":{"href":"https://www.microsoft.com/zh-cn/software-download/windows11","rel":["nofollow"]},"children":[{"type":"text","value":"附官方更新地址"}]}]},{"type":"element","tag":"h2","props":{"id":"tmp20-开启"},"children":[{"type":"text","value":"TMP2.0 开启"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"启用 TPM 的选项可能标记为\"安全设备、安全设备支持、TPM 状态、AMD fTPM开关、AMD PSP fTPM、IntelPTT或Intel平台信任技术\"。"}]}]},{"type":"element","tag":"h2","props":{"id":"安全启动-开启"},"children":[{"type":"text","value":"安全启动 开启"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以直接在bios里搜索"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"security"}]},{"type":"text","value":"或"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"安全"}]},{"type":"text","value":"，找到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"安全启动"}]},{"type":"text","value":"选项，此时点击开启，可能会提示"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"System in Setup Mode!Secure Boot can be enabled when System in User Mode. Repeat operation after enrolling Platform Key(PK)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决办法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动模式改为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"UEFI"}]},{"type":"text","value":"模式 （如果是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LEGACY+UEFI"}]},{"type":"text","value":"模式 可能切换了导致系统无法进入 需要重装系统 设置为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"UEFI"}]},{"type":"text","value":"模式"},{"type":"element","tag":"a","props":{"href":"#dg_op"},"children":[{"type":"text","value":"或者使用分区助手"}]},{"type":"text","value":"）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关闭csm 在bios搜索csm将csm模式改为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"UEFI"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解决以上两步，重新去启用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"安全启动"}]},{"type":"text","value":"，则可成功启动"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"dg_op"},"children":[{"type":"text","value":"使用分区助手修改为UEFI"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"前置操作，在磁盘管理中分一个>200MB的区"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"进入pe桌面后打开DG硬盘分区工具，选中自己的硬盘右键单击选择转换分区表类型为GUID格式，点确定然后点左上方保存更改。此时我们的硬盘已经从MBR变为GPT"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"右键单击前置操作的分区，选择建立ESP/MSR分区"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"img","props":{"alt":"set_esp.png","src":"https://i.loli.net/2021/10/07/xmoZ9JuesbIWTgN.png"},"children":[]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"完成之后DiskGenius工具会自动为ESP分区设置一个盘符，如果没有，请手动设置。至此，ESP分区创建完成。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最后，打开pe上的修复工具，修复下引导即可"}]}]},{"type":"element","tag":"h2","props":{"id":"其他问题20201019bug-fixed"},"children":[{"type":"text","value":"其他问题"},{"type":"element","tag":"a","props":{"href":"#fixed20536"},"children":[{"type":"text","value":"20201019bug fixed"}]}]},{"type":"element","tag":"h3","props":{"id":"kb5007125升级到安装了-oracle-virtualbox-的-windows-11-时保持兼容性"},"children":[{"type":"element","tag":"a","props":{"href":"https://support.microsoft.com/zh-cn/topic/kb5007125-%E5%8D%87%E7%BA%A7%E5%88%B0%E5%AE%89%E8%A3%85%E4%BA%86-oracle-virtualbox-%E7%9A%84-windows-11-%E6%97%B6%E4%BF%9D%E6%8C%81%E5%85%BC%E5%AE%B9%E6%80%A7-ea84b50c-77f5-473c-99a8-81c2b7b53d35","rel":["nofollow"]},"children":[{"type":"text","value":"KB5007125：升级到安装了 Oracle VirtualBox 的 Windows 11 时保持兼容性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.virtualbox.org/ticket/20536","rel":["nofollow"]},"children":[{"type":"text","value":"官方解决方案"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bcdedit /set hypervisorlaunchtype off"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用管理员权限打开CMD或window powershell 关闭 启动项"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"hypervisorlaunchtype_off.png","src":"https://i.loli.net/2021/10/11/K7sOnQZbuvaqBic.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之后输入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bcdedit"}]},{"type":"text","value":" 查看启动管理器，查看 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hypervisorlaunchtype"}]},{"type":"text","value":" 是不是off状态的，重启之后生效。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"bcdedit.png","src":"https://i.loli.net/2021/10/11/T4vshnFbzEkf5Oj.png"},"children":[]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意这个解决办法 是能够升级win11但是无法使用virtualbox"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"id":"fixed20536"},"children":[{"type":"text","value":"2020-10-19 bug已修复"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"fixed in 6.1.28\nThis incompatibility with the Windows Hypervisor related interface in Windows 11 (host) should be fixed with VirtualBox 6.1.28.\nUsing the Windows Hypervisor (Hyper-V) is working again. However, the performance is unchanged, i.e. still very noticeably lower than with VirtualBox's own hypervisor code, so it can make sense to disable Hyper-V. You decide."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要注意"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"win11默认关闭Hyper-V服务，需要你重新打开（在windows功能里重新打开）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"管理员命令执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".\\VBoxSDS.exe --regservice"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"tmp20-开启","depth":2,"text":"TMP2.0 开启"},{"id":"安全启动-开启","depth":2,"text":"安全启动 开启"},{"id":"其他问题20201019bug-fixed","depth":2,"text":"其他问题20201019bug fixed","children":[{"id":"kb5007125升级到安装了-oracle-virtualbox-的-windows-11-时保持兼容性","depth":3,"text":"KB5007125：升级到安装了 Oracle VirtualBox 的 Windows 11 时保持兼容性"}]}]}},"_type":"markdown","_id":"content:5.notes:windows:windows11-update.md","_source":"content","_file":"5.notes/windows/windows11-update.md","_extension":"md"},{"_path":"/notes/xcode","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"xcode","description":"","icon":"simple-icons:xcode","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"xcode"},"children":[{"type":"text","value":"xcode"}]},{"type":"element","tag":"h2","props":{"id":"download-version"},"children":[{"type":"text","value":"download version"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.apple.com/download/all/?q=Xcode","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"h2","props":{"id":"support"},"children":[{"type":"text","value":"support"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Minimum requirements and supported SDKs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.apple.com/support/xcode/","rel":["nofollow"]},"children":[{"type":"text","value":"link"}]}]},{"type":"element","tag":"h2","props":{"id":"sol"},"children":[{"type":"text","value":"sol"}]},{"type":"element","tag":"h3","props":{"id":"error-unable-to-find-utility-simctl"},"children":[{"type":"text","value":"error: unable to find utility \"simctl\""}]},{"type":"element","tag":"code","props":{"code":"xcrun: error: unable to find utility \"simctl\", not a developer tool or in PATH\nerror Could not get the simulator list from Xcode. Please open Xcode and try running project directly from there to resolve the remaining issues.\nError: Command failed: xcrun simctl list --json devices\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"xcrun: error: unable to find utility \"simctl\", not a developer tool or in PATH\nerror Could not get the simulator list from Xcode. Please open Xcode and try running project directly from there to resolve the remaining issues.\nError: Command failed: xcrun simctl list --json devices"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/a/53046024/17744936","rel":["nofollow"]},"children":[{"type":"text","value":"refer"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While running Xcode, open the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Xcode"}]},{"type":"text","value":" menu, go to "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Preferences"}]},{"type":"text","value":", then select "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Locations"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn Locations, \"Command Line Tools\", choose your version of Xcode."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt should be fine."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"download-version","depth":2,"text":"download version"},{"id":"support","depth":2,"text":"support"},{"id":"sol","depth":2,"text":"sol","children":[{"id":"error-unable-to-find-utility-simctl","depth":3,"text":"error: unable to find utility \"simctl\""}]}]}},"_type":"markdown","_id":"content:5.notes:xcode.md","_source":"content","_file":"5.notes/xcode.md","_extension":"md"},{"_path":"/notes/xshell","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"XShell","description":"","icon":"vscode-icons:file-type-shell","date":"2021-10-21T14:32:44.000Z","category":["XShell"],"tag":["XShell"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"全局设置配色方案"},"children":[{"type":"text","value":"全局设置配色方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"工具 - 配色方案 - 自定义设计好自己喜欢的配色"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"xshell-1.png","src":"https://i.loli.net/2021/10/22/TZgEns2OMVNxu1l.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"点击导出，将默认配色(XTerm)也导出"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将默认配色的名字修改为自定义名称 如 defaultXTerm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将你的自定义配色方案改为原默认名称 XTerm 则可实现 全局配色替换"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"全局设置配色方案","depth":2,"text":"全局设置配色方案"}]}},"_type":"markdown","_id":"content:5.notes:xshell.md","_source":"content","_file":"5.notes/xshell.md","_extension":"md"}],"navigation":[{"title":"C++","_path":"/cpp","children":[{"title":"basin cpp","_path":"/cpp"},{"title":"C 与 C++","_path":"/cpp/c_cpp_diff"},{"title":"程序题","_path":"/cpp/code"},{"title":"复杂声明","_path":"/cpp/complex_declaration"},{"title":"Concept","_path":"/cpp/concept","children":[{"title":"概念辨析","_path":"/cpp/concept"},{"title":"原子","_path":"/cpp/concept/atomic"},{"title":"类","_path":"/cpp/concept/class"},{"title":"并发","_path":"/cpp/concept/concurrent"},{"title":"const","_path":"/cpp/concept/const"},{"title":"概念辨析","_path":"/cpp/concept/diff"},{"title":"异常","_path":"/cpp/concept/exception"},{"title":"lambda","_path":"/cpp/concept/lambda"},{"title":"Operator","_path":"/cpp/concept/operator"},{"title":"指针","_path":"/cpp/concept/pointer"},{"title":"引用","_path":"/cpp/concept/reference"},{"title":"堆栈 内存","_path":"/cpp/concept/stack_memory"},{"title":"STL","_path":"/cpp/concept/stl"},{"title":"虚函数","_path":"/cpp/concept/virtual"}],"icon":"icon-park-outline:concept-sharing"},{"title":"C++ Feature","_path":"/cpp/feature"},{"title":"C/C++ lib","_path":"/cpp/lib","children":[{"title":"actor","_path":"/cpp/lib/actor"},{"title":"内存检测","_path":"/cpp/lib/asan"},{"title":"BERT","_path":"/cpp/lib/bert"},{"title":"epoll","_path":"/cpp/lib/epoll"},{"title":"RapidJSON","_path":"/cpp/lib/rapidjson"},{"title":"Reactor","_path":"/cpp/lib/reactor"}],"icon":"vscode-icons:folder-type-library-opened"},{"title":"printf","_path":"/cpp/printf"},{"title":"遇到的问题速查","_path":"/cpp/qa"},{"title":"代码风格","_path":"/cpp/style"},{"title":"线程 锁","_path":"/cpp/thread-mutex","children":[{"title":"线程 锁","_path":"/cpp/thread-mutex"},{"title":"4 Easy Tips for Using Threads and Mutexes in C++","_path":"/cpp/thread-mutex/4-easy-tips-on-using-threads-and-mutexes-in-cpp"},{"title":"各种锁","_path":"/cpp/thread-mutex/mutex"},{"title":"Thread","_path":"/cpp/thread-mutex/thread"},{"title":"Threads and Mutexes","_path":"/cpp/thread-mutex/threads-and-mutexes"}]},{"title":"Clue","_path":"/cpp/tips","children":[{"title":"base","_path":"/cpp/tips/base"},{"title":"check OS with a preprocessor directive","_path":"/cpp/tips/check-os"},{"title":"一些要点","_path":"/cpp/tips/tip"}],"icon":"ic:twotone-tips-and-updates"}],"icon":"bx:code-curly"},{"title":"DSA","_path":"/algorithm","children":[{"title":"算法与数据结构","_path":"/algorithm"},{"title":"复杂度","_path":"/algorithm/complexity"},{"title":"LeetCode","_path":"/algorithm/leetcode","children":[{"title":"LeetCode","_path":"/algorithm/leetcode"},{"title":"LC1114 解题方案","_path":"/algorithm/leetcode/lc-1114"}],"icon":"simple-icons:leetcode"},{"title":"Collection","_path":"/algorithm/collection","children":[{"title":"集合结构","_path":"/algorithm/collection"},{"title":"Hash Table","_path":"/algorithm/collection/hash"},{"title":"QA","_path":"/algorithm/collection/qa"}],"icon":"carbon:data-collection"},{"title":"Linear","_path":"/algorithm/linear","children":[{"title":"线性结构","_path":"/algorithm/linear"},{"title":"array","_path":"/algorithm/linear/array"},{"title":"heap","_path":"/algorithm/linear/heap"},{"title":"Linked list","_path":"/algorithm/linear/linked-list"},{"title":"QA","_path":"/algorithm/linear/qa"},{"title":"queue","_path":"/algorithm/linear/queue"},{"title":"stack","_path":"/algorithm/linear/stack"}],"icon":"material-symbols:linear-scale"},{"title":"Tree","_path":"/algorithm/tree","children":[{"title":"树形结构","_path":"/algorithm/tree"},{"title":"B tree","_path":"/algorithm/tree/b-tree"},{"title":"Balanced Tree","_path":"/algorithm/tree/balanced-tree"},{"title":"QA","_path":"/algorithm/tree/qa"},{"title":"Rb tree","_path":"/algorithm/tree/rb-tree"},{"title":"Trie","_path":"/algorithm/tree/trie"},{"title":"Union-find","_path":"/algorithm/tree/union-find"}],"icon":"carbon:tree-view"},{"title":"Graph","_path":"/algorithm/graph","children":[{"title":"图形结构","_path":"/algorithm/graph"},{"title":"QA","_path":"/algorithm/graph/qa"}],"icon":"ph:graph"},{"title":"QA","_path":"/algorithm/qa"},{"title":"Recursion","_path":"/algorithm/recursion"}],"icon":"ion:calculator-sharp"},{"title":"CODE","_path":"/code","children":[{"title":"今天码了 🐎","_path":"/code","icon":"fxemoji:horseracing"},{"title":"未来路线计划","_path":"/code/future","children":[{"title":"Future and Goal","_path":"/code/future/future"},{"title":"题库每日","_path":"/code/future/practice"},{"title":"Prepare","_path":"/code/future/prepare"}],"icon":"flat-color-icons:todo-list"},{"title":"配环境","_path":"/code/config-env","icon":"vscode-icons:file-type-dependencies"},{"title":"Database","_path":"/code/db","children":[{"title":"数据库","_path":"/code/db/database"},{"title":"DB2","_path":"/code/db/db2"},{"title":"mongoDB使用记录","_path":"/code/db/mongodb"},{"title":"ODPS","_path":"/code/db/odps"},{"title":"SQL","_path":"/code/db/sql","icon":"vscode-icons:file-type-plsql"}],"icon":"flat-color-icons:accept-database"},{"title":"分布式","_path":"/code/distributed","children":[{"title":"Kafka","_path":"/code/distributed/kafka","children":[{"title":"refer","_path":"/code/distributed/kafka/refer"}],"icon":"logos:kafka-icon"},{"title":"PAXOS","_path":"/code/distributed/paxos"},{"title":"Raft论文","_path":"/code/distributed/raft"}],"icon":"icon-park-twotone:distribute-horizontally"},{"title":"前端","_path":"/code/front-end","children":[{"title":"css","_path":"/code/front-end/css","icon":"vscode-icons:file-type-scss"},{"title":"Javascript","_path":"/code/front-end/javascript","icon":"logos:javascript"},{"title":"Nuxt","_path":"/code/front-end/nuxt"},{"title":"前端","_path":"/code/front-end/qa"},{"title":"React Native","_path":"/code/front-end/react-native"},{"title":"Sol","_path":"/code/front-end/sol"},{"title":"Vue","_path":"/code/front-end/vue","icon":"logos:vue"},{"title":"VuePress","_path":"/code/front-end/vuepress","icon":"logos:vue"}],"icon":"logos:vue"},{"title":"编码习惯","_path":"/code/habit","icon":"vscode-icons:file-type-cddl"},{"title":"Java","_path":"/code/java","children":[{"title":"Java","_path":"/code/java/basin"},{"title":"sol","_path":"/code/java/sol"}],"icon":"logos:java"},{"title":"Lua","_path":"/code/lua","children":[{"title":"lua学习记录","_path":"/code/lua/2021-11-01-lua"},{"title":"lua自动化测试指南","_path":"/code/lua/2021-11-24-lua-auto-test"},{"title":"lua深入","_path":"/code/lua/2022-07-22-lua"}],"icon":"logos:lua"},{"title":"网络协议","_path":"/code/network","children":[{"title":"QA","_path":"/code/network/qa"}],"icon":"mdi:folder-key-network-outline"},{"title":"非技术问题","_path":"/code/non-tech"},{"title":"操作系统","_path":"/code/os","children":[{"title":"QA","_path":"/code/os/qa"}],"icon":"eos-icons:ai-operator"},{"title":"一些有的没的","_path":"/code/others"},{"title":"疑难排查","_path":"/code/problems"},{"title":"Python","_path":"/code/python","icon":"logos:python"},{"title":"正则表达式","_path":"/code/regex","icon":"file-icons:regex"},{"title":"Rust","_path":"/code/rust","icon":"vscode-icons:file-type-rust"},{"title":"Shell","_path":"/code/shell","icon":"vscode-icons:file-type-powershell-psd2"},{"title":"瞎玩","_path":"/code/stroll"},{"title":"系统设计","_path":"/code/sys-design","children":[{"title":"设计模式","_path":"/code/sys-design/design-pattern"},{"title":"QA","_path":"/code/sys-design/qa"}],"icon":"nimbus:ecosystem"}],"icon":"mdi:code-tags-check"},{"title":"八股文","_path":"/interview","children":[{"title":"编译","_path":"/interview/compile"},{"title":"指针","_path":"/interview/pointer"},{"title":"进程","_path":"/interview/process"},{"title":"STL","_path":"/interview/stl"},{"title":"线程","_path":"/interview/thread"}],"icon":"mdi:code-tags-check"},{"title":"NOTES","_path":"/notes","children":[{"title":"Guide","_path":"/notes","icon":"twemoji:newspaper"},{"title":"Intro","_path":"/notes/intro","icon":"twemoji:card-file-box"},{"title":"Algolia","_path":"/notes/algolia","icon":"logos:algolia"},{"title":"CMakeLists","_path":"/notes/cmakelists","icon":"vscode-icons:file-type-cmake"},{"title":"Compile","_path":"/notes/compile","icon":"fluent-emoji-flat:person-running-light"},{"title":"Docker","_path":"/notes/docker","icon":"logos:docker-icon"},{"title":"Excel","_path":"/notes/excel","icon":"vscode-icons:file-type-excel2"},{"title":"fish","_path":"/notes/fish","icon":"noto:fishing-pole"},{"title":"gcc","_path":"/notes/gcc","icon":"twemoji:building-construction"},{"title":"Git","_path":"/notes/git","icon":"vscode-icons:file-type-git"},{"title":"gitalk","_path":"/notes/gitalk","icon":"icon-park:github-one"},{"title":"GitHub","_path":"/notes/github","icon":"logos:github-octocat"},{"title":"Gitlab","_path":"/notes/gitlab","icon":"logos:gitlab"},{"title":"Jenkins","_path":"/notes/jenkins","icon":"vscode-icons:file-type-jenkins"},{"title":"JetBrains","_path":"/notes/jetbrains","icon":"logos:jetbrains"},{"title":"Linux","_path":"/notes/linux","children":[{"title":"cmd","_path":"/notes/linux/command"},{"title":"gdb","_path":"/notes/linux/gdb"},{"title":"指南","_path":"/notes/linux/guide"},{"title":"install","_path":"/notes/linux/install"},{"title":"Linux 问题收集","_path":"/notes/linux/qa"},{"title":"linux记录","_path":"/notes/linux/readme"},{"title":"查看Linux的基本信息","_path":"/notes/linux/sys_base_info"},{"title":"linux系统分类","_path":"/notes/linux/sys_category"}],"icon":"logos:linux-tux"},{"title":"macOS","_path":"/notes/macos","children":[{"title":"mac primary","_path":"/notes/macos/base"},{"title":"solution","_path":"/notes/macos/sol"}],"icon":"vscode-icons:folder-type-macos"},{"title":"Makefile","_path":"/notes/makefile","icon":"flat-color-icons:make-decision"},{"title":"Markdown","_path":"/notes/markdown","icon":"vscode-icons:file-type-markdown"},{"title":"Mergify","_path":"/notes/mergify","icon":"pajamas:git-merge"},{"title":"OpenAI","_path":"/notes/openai","children":[{"title":"OpenAI","_path":"/notes/openai"},{"title":"ChatGPT","_path":"/notes/openai/chatgpt"}],"icon":"logos:openai-icon"},{"title":"Understanding Role-Based Access Control (RBAC)","_path":"/notes/rbac","icon":"eos-icons:role-binding-outlined"},{"title":"Sublime","_path":"/notes/sublime","icon":"logos:sublimetext-icon"},{"title":"svn","_path":"/notes/svn","icon":"file-icons:tortoisesvn"},{"title":"Tabby","_path":"/notes/tabby","icon":"icon-park:terminal"},{"title":"TMDB","_path":"/notes/tmdb","icon":"simple-icons:themoviedatabase"},{"title":"Vercel","_path":"/notes/vercel","icon":"logos:vercel-icon"},{"title":"vim","_path":"/notes/vim","icon":"logos:vimeo-icon"},{"title":"VS Code","_path":"/notes/vscode","icon":"vscode-icons:file-type-vscode"},{"title":"web tools","_path":"/notes/webtools","icon":"logos:web-dev-icon"},{"title":"Windows","_path":"/notes/windows","children":[{"title":"chocolatey","_path":"/notes/windows/chocolatey","icon":"simple-icons:chocolatey"},{"title":"cmd指南","_path":"/notes/windows/cmd"},{"title":"虚拟机记录","_path":"/notes/windows/virtualbox"},{"title":"壁纸","_path":"/notes/windows/wallpaper"},{"title":"windows11更新纪要","_path":"/notes/windows/windows11-update"}],"icon":"logos:microsoft-windows"},{"title":"xcode","_path":"/notes/xcode","icon":"simple-icons:xcode"},{"title":"XShell","_path":"/notes/xshell","icon":"vscode-icons:file-type-shell"}],"icon":"charm:notes-tick"}]}