{"_path":"/code/lua/2022-07-22-lua","_dir":"lua","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"lua深入","description":"","date":"2022-07-22T11:39:11.000Z","isOriginal":true,"category":["编程"],"tag":["lua","热更新","栈","内存","绑定","ELuna"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"热更新"},"children":[{"type":"text","value":"热更新"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://john.js.org/2020/10/27/Lua-Runtime-Hotfix/","rel":["nofollow"]},"children":[{"type":"text","value":"hot update"}]}]},{"type":"element","tag":"li","props":{},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"lua-的栈与内存限制"},"children":[{"type":"element","tag":"a","props":{"href":"https://www.ogura.io/posts/2018/05/lua_stack_limits/","rel":["nofollow"]},"children":[{"type":"text","value":"lua 的栈与内存限制"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个lua文件不能超过 262144 个常量"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个控制结构不能超过 32895 个栈"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"upvalue数量不能超过 60 个"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Lua 的每个函数(function)中不能超过 200 个本地变量"}]}]},{"type":"element","tag":"h2","props":{"id":"eluna"},"children":[{"type":"element","tag":"a","props":{"href":"http://radiotail.github.io/2014/10/28/Eluna%E5%8F%91%E5%B8%83/","rel":["nofollow"]},"children":[{"type":"text","value":"ELuna"}]}]},{"type":"element","tag":"h3","props":{"id":"绑定c类"},"children":[{"type":"text","value":"绑定C++类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerClass( lua_State, className, constructor)"}]},{"type":"text","value":" 函数绑定一个C++类。第一个参数是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lua_state"}]},{"type":"text","value":",\n第二个参数是类在Lua中的名字。第三个参数"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"constructor"}]},{"type":"text","value":"是这个类要用到的构造函数，通过传递具体的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::constructor"}]},{"type":"text","value":"\n函数来为这个类设置好一个构造函数，这个函数模板参数中的第一个参数是构造函数所属的类，后面的参数为构造函数的参数类型列表。如你需要为类Test设置一个参数为int的构造函数，则须传递"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::constructor"}]},{"type":"text","value":"\n到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"registerClass"}]},{"type":"text","value":"函数中，模板参数中的int就是这个类的构造函数所需的参数类型。在Lua中创建对象时需这样写: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test = Test(1)"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定c类成员函数"},"children":[{"type":"text","value":"绑定c++类成员函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerMethod(lua_State, funcName, func)"}]},{"type":"text","value":"\n函数绑定一个c++类成员函数。第一个参数同上面的函数。第二个参数是函数在Lua中的名字。第三个参数是这个函数的地址。如你要注册Test类的foo函数到Lua中，应利用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerMethod(L,”foo”, &Test::foo)"}]},{"type":"text","value":"来注册函数。在Lua中的调用为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test:foo()"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定c函数"},"children":[{"type":"text","value":"绑定c++函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::registerFunction(lua_State, funcName, func)"}]},{"type":"text","value":"函数c++函数。这个函数中参数的意义同registerMethod函数。例如C++中有一函数foo，利"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna:: registerFunction(L,“foo”, &foo)"}]},{"type":"text","value":"注册这个函数，在Lua调用为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"foo()"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定lua函数"},"children":[{"type":"text","value":"绑定Lua函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaFunction"}]},{"type":"text","value":"类为Lua函数生成一个相应的C++中的对象，调用函数通过使用类的”()”方法来实现。比如在Lua中有一个函数foo(a)，其中参数a是number型，且无返回值，则在C++中的绑定方法为先利用\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaFunction luaFoo(L, “foo”)"}]},{"type":"text","value":"\n创建一个C++对象，其中模板参数是这个Lua函数的返回值类型，因为foo无返回值，所以为void，LuaFunction的第一个参数是lua_state，第二个参数是这个Lua函数的名字。在C++中的调用方式为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luaFoo(1)"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"绑定lua中的table类型"},"children":[{"type":"text","value":"绑定Lua中的Table类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna::LuaTable"}]},{"type":"text","value":"类生成一个Lua Table在c++中的对象，读取插入元素通过”get”, “set”方法。比如Lua中有一个Table变量luaTable = {“hello”}，在C++中使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ELuna:: LuaTable luaTable(L, “luaTable”)"}]},{"type":"text","value":"来为luaTable在C++中生成一个对象，调用luaTable.get(1)来取得luaTable中key为1的字符串”hello”，其中模板参数char*\n为get返回的value类型。调用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"luaTable.set(2, “world”)"}]},{"type":"text","value":"来为luaTable插入一个key=2,value=”world”的键值对。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":::: details 示例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::: code-tabs#shell"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"@tab:active c++"}]},{"type":"element","tag":"code","props":{"code":"#include <stdio.h>\n#include \"ELuna.h\"\n\n\n//define a class\nclass CPPClass\n{\npublic:\n CPPClass(const char* name): m_name(name){\n  printf(\"%s %p Constructor!\\n\", name, this);\n }\n ~CPPClass(){\n  printf(\"%s %p Destructor!\\n\", m_name, this);\n }\n\n //define method\n void cppPrint(const char* word) {\n  printf(\"%s: %s\\n\", m_name, word);\n }\n\n int cppSum(int a, int b){\n  return a + b;\n }\n\n void print() {\n  printf(\"%s: %p\\n\", m_name, this);\n }\n\n CPPClass& createRef(CPPClass& p) {\n  printf(\"%s %s %p %p createRef!\\n\", m_name, p.m_name, &p, this);\n  p.m_name = \"ref\";\n  return p;\n } \nprivate:\n const char* m_name;\n};\n\n//define function\nvoid cppPrint(char* str) {\n printf(\"cppPrint: %s\\n\", str);\n}\n\nint cppSum(int a, int b){\n return a + b;\n}\n\nCPPClass* testnil(CPPClass* c)\n{\n    printf(\"CPPClass c: %p\\n\", c);\n    return nullptr;\n}\n\nvoid testCPP(lua_State* L) {\n //register a class and it's constructor. indicate all constructor's param type\n ELuna::registerClass<CPPClass>(L, \"CPPClass\", ELuna::constructor<CPPClass, const char* >);\n //register a method\n ELuna::registerMethod<CPPClass>(L, \"cppPrint\", &CPPClass::cppPrint);\n ELuna::registerMethod<CPPClass>(L, \"cppSum\", &CPPClass::cppSum);\n ELuna::registerMethod<CPPClass, CPPClass&>(L, \"createRef\", &CPPClass::createRef);\n ELuna::registerMethod<CPPClass>(L, \"print\", &CPPClass::print);\n\n //register a function\n ELuna::registerFunction(L, \"cppPrint\", cppPrint);\n ELuna::registerFunction(L, \"cppSum\", cppSum);\n    ELuna::registerFunction(L, \"testnil\", testnil);\n}\n\nvoid testLua(lua_State* L) {\n //new a LuaFunction object to bind lua function. indicate return value type\n ELuna::LuaFunction<void> luaPrint(L, \"luaPrint\");\n ELuna::LuaFunction<int> luaSum(L, \"luaSum\");\n\n //run Luafunction's () to call lua function\n luaPrint(\"hello world\");\n printf(\"luaSum: %d\\n\", luaSum(1,2));\n\n //register a lua table\n ELuna::LuaTable luaTable(L, \"luaTable\");\n //set table's key and value\n luaTable.set(2, \"world\");\n printf(\"LuaTable: %s %s\\n\", luaTable.get<int, char*>(1), luaTable.get<int, char*>(2));\n}\n\nconst char *fileName = \"../sample/sample.lua\";\n\nint main()\n{\n lua_State *L = ELuna::openLua();\n\n testCPP(L);\n\n ELuna::doFile(L, fileName);\n\n testLua(L);\n ELuna::closeLua(L);\n\n getchar();\n\n return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"<stdio.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"ELuna.h\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"//define a class"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"m_name"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(name){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" Constructor!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"~CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" Destructor!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //define method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"word"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, word);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"createRef"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" createRef!"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", m_name, p.m_name, "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"p, "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  p.m_name "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"ref\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" p;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" } "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" m_name;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"//define function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", str);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"){"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testnil"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass c: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%p\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", c);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testCPP"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"lua_State"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a class and it's constructor. indicate all constructor's param type"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"CPPClass, "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::cppPrint);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::cppSum);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"createRef\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::createRef);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":">(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"print\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::print);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", cppPrint);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", cppSum);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"registerFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"testnil\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", testnil);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"lua_State"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //new a LuaFunction object to bind lua function. indicate return value type"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<void>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaPrint\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaSum\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //run Luafunction's () to call lua function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaSum: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%d\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //register a lua table"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::LuaTable "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaTable"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaTable\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":" //set table's key and value"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" luaTable."}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"printf"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"LuaTable: "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"%s\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", luaTable.get"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"), luaTable.get"}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"<int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char*>"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"fileName "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"../sample/sample.lua\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" lua_State "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"L "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"openLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testCPP"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"doFile"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L, fileName);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"testLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"ELuna"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"closeLua"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(L);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"getchar"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"@tab lua"}]},{"type":"element","tag":"code","props":{"code":"--new a class\nlocal cppClass = CPPClass(\"cppClass\")\ncppClass:print()\n--call cpp method\ncppClass:cppPrint(\"Hello world!\")\nprint(\"CPPClass's cppSum:\", cppClass:cppSum(1,2))\n\n--call cpp function\ncppPrint(\"Hello world!\")\nprint(\"cppSum:\", cppSum(1,2))\nprint(\"testnil: \", testnil(cppClass))\n-- print(\"testnil: \", testnil(nil))\n\n--define lua function\nfunction luaPrint(str)\n print(\"luaPrint:\", str)\nend\n\nfunction luaSum(a, b)\n return a + b\nend\n\n--define table\nluaTable = {\"hello\"}\n\nlocal refClass = cppClass:createRef(cppClass)\nprint(\"createRef: \", refClass, cppClass)\ncppClass:print()\nrefClass:print()\n\n","language":"lua","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--new a class"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" cppClass "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"CPPClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppClass\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--call cpp method"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"Hello world!\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"CPPClass's cppSum:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--call cpp function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"Hello world!\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"cppSum:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"cppSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"testnil: \""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"testnil"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(cppClass))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"-- print(\"testnil: \", testnil(nil))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--define lua function"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(str)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"luaPrint:\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", str)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-caecc7"},"children":[{"type":"text","value":"luaSum"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(a, b)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" b"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9a3e1"},"children":[{"type":"text","value":"--define table"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"luaTable "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" refClass "}]},{"type":"element","tag":"span","props":{"class":"ct-30f2f6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"createRef"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"(cppClass)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1630fe"},"children":[{"type":"text","value":"\"createRef: \""}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":", refClass, cppClass)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"cppClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d5f28a"},"children":[{"type":"text","value":"refClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-880903"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"class":"ct-68f130"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":::"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"::::"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-880903{color:#0550AE}\n.ct-caecc7{color:#8250DF}\n.ct-d5f28a{color:#953800}\n.ct-c9a3e1{color:#6E7781}\n.ct-1630fe{color:#0A3069}\n.ct-68f130{color:#24292F}\n.ct-30f2f6{color:#CF222E}\n.dark .ct-30f2f6{color:#FF7B72}\n.dark .ct-68f130{color:#C9D1D9}\n.dark .ct-1630fe{color:#A5D6FF}\n.dark .ct-c9a3e1{color:#8B949E}\n.dark .ct-d5f28a{color:#FFA657}\n.dark .ct-caecc7{color:#D2A8FF}\n.dark .ct-880903{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"热更新","depth":2,"text":"热更新"},{"id":"lua-的栈与内存限制","depth":2,"text":"lua 的栈与内存限制"},{"id":"eluna","depth":2,"text":"ELuna","children":[{"id":"绑定c类","depth":3,"text":"绑定C++类"},{"id":"绑定c类成员函数","depth":3,"text":"绑定c++类成员函数"},{"id":"绑定c函数","depth":3,"text":"绑定c++函数"},{"id":"绑定lua函数","depth":3,"text":"绑定Lua函数"},{"id":"绑定lua中的table类型","depth":3,"text":"绑定Lua中的Table类型"}]}]}},"_type":"markdown","_id":"content:3.code:lua:2022-07-22-lua-深入.md","_source":"content","_file":"3.code/lua/2022-07-22-lua-深入.md","_extension":"md"}