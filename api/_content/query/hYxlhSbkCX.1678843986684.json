{"_path":"/cpp/tips/tip","_dir":"tips","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"一些要点","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"一些要点"},"children":[{"type":"text","value":"一些要点"}]},{"type":"element","tag":"h2","props":{"id":"二维动态数组的申请和删除"},"children":[{"type":"text","value":"二维动态数组的申请和删除"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先是如何申请二维的数组，这里我们先申请一个指针数组，然后令指针数组中的每一个元素都指向一个数组，这样二维数组就成了："}]},{"type":"element","tag":"code","props":{"code":"size_t row, col;\n//输入row和col的数值\nint **MathTable = new int*[row];\nfor (int i = 0; i < row; i++)\n  MathTable[i] = new int[col];\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row, col;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//输入row和col的数值"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"**"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"MathTable "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[row];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row; i"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MathTable[i] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[col];"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后是释放空间的过程："}]},{"type":"element","tag":"code","props":{"code":"//code\nfor (int i = 0; i < row; i++)\n  delete[] MathTable[i];\ndelete[]MathTable;\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//code"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" row; i"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"delete[]"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" MathTable[i];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[]MathTable;"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"符合new和delete配对的原则，怎么new出来就怎么delete掉。"}]},{"type":"element","tag":"h2","props":{"id":"为什么要内存对齐"},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/lgouc/article/details/82354710","rel":["nofollow"]},"children":[{"type":"text","value":"为什么要内存对齐"}]}]},{"type":"element","tag":"h2","props":{"id":"将程序跳转到指定内存地址"},"children":[{"type":"text","value":"将程序跳转到指定内存地址"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要对绝对地址0x100000赋值，我们可以用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(unsigned int*)0x100000 = 1234;"}]},{"type":"text","value":"那么要是想让程序跳转到绝对地址是0x100000去执行，应该怎么做？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((void (*)( ))0x100000 ) ( );"}]},{"type":"text","value":"\n首先要将0x100000强制转换成函数指针,即:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"(void (*)())0x100000"}]},{"type":"text","value":"\n然后再调用它:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((void (*)())0x100000)();"}]},{"type":"text","value":"\n用typedef可以看得更直观些:\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typedef void(*)() voidFuncPtr;"}]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*((voidFuncPtr)0x100000)();"}]}]},{"type":"element","tag":"h2","props":{"id":"如何实现仿函数为什么需要通过继承自unary_function-或者-binary_function来实现仿函数"},"children":[{"type":"text","value":"如何实现仿函数？为什么需要通过继承自unary_function 或者 binary_function来实现仿函数？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"function object就是重载了函数调用操作符 operator()的一个struct或者class\n所有内置一元仿函数均继承自unary_function，所有内置二元仿函数均继承自binary_function\n继承自unary_function和binary_function的仿函数可以成为“可配接“的仿函数。可配接的仿函数，能够与其他STL组件更”和谐“地协同工作。"}]},{"type":"element","tag":"h2","props":{"id":"什么是字节对齐为什么要采用这种机制"},"children":[{"type":"text","value":"什么是字节对齐，为什么要采用这种机制？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字节对齐是指将数据按字节的边界对齐到指定的地址，使得数据在内存中的存储位置更加合理。通常来说，对齐的字节数是 2 的整数次幂，比如 1、2、4 或 8 字节。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"采用字节对齐机制的原因有以下几个："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高内存访问效率。如果数据不对齐，那么当 CPU 读取数据时，它可能需要进行多次内存访问，从而降低内存访问效率。而如果数据对齐，那么 CPU 就可以在一次内存访问中读取整个数据，从而提高内存访问效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"减少内存空间的浪费。如果数据不对，那么可能会出现内存碎片，即某些内存空间无法被使用。而如果数据对齐，那么可以避免内存碎片的产生，从而减少内存的浪费。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"提高软件的可移植性。由于不同的 CPU 架构有不同的字长和对齐规则，如果软件不进行字节对齐，那么在不同的 CPU 架构下可能会出现问题。而如果进行字节对齐，那么软件就可以在不同的 CPU 架构下运行，从而提高软件的可移植性。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，字节对齐是一种有用的机制，它能够提高内存访问效率、减少内存空间的浪费以及提高软件的可移植性。不同的编程语言和编译器都会提供字节对齐的机制，开发人员可以根据需要来选择是否使用这种机制。"}]},{"type":"element","tag":"h2","props":{"id":"两种常用的实现隐式类类型转换的方式是什么如何避免隐式类型转换"},"children":[{"type":"text","value":"两种常用的实现隐式类类型转换的方式是什么？如何避免隐式类型转换？"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用单参数的构造函数或N个参数中有N-1个是默认参数的构造函数，"},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n    A(string s);\n    A(string s, int a = 0);\n};\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"使用operator what_you_want_to_convert_type() const"},{"type":"element","tag":"code","props":{"code":"class A {\n public:\n     operator char *() const {\n         return data;//当从其他类型转换到char*时自动调用\n     }\n \n private:\n     char *data;\n };\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"operator"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"         "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" data;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//当从其他类型转换到char*时自动调用"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"private:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"data;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" };"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在单参数的构造函数或N个参数中有N-1个是默认参数的构造函数声明之前加上explicit。"}]}]},{"type":"element","tag":"h2","props":{"id":"面向对象的设计原则"},"children":[{"type":"text","value":"面向对象的设计原则"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"面向对象设计是指使用继承和抽象来创建可重用的类和对象的方法。面向对象设计原则的目的是提高软件系统的质量和灵活性。常见的面向对象设计原则包括单一职责原则、开放封闭原则、里氏替换原则、接口隔离原则、依赖反转原则等。"}]},{"type":"element","tag":"h2","props":{"id":"函数调用的具体实现"},"children":[{"type":"text","value":"函数调用的具体实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"函数调用的具体实现取决于编程语言和使用的计算机体系结构。但是，一般来说，在进行函数调用时，首先会在函数的调用点保存当前的执行上下文，然后将控制权转移到函数的定义体开头执行。在函数执行完毕后，会恢复之前保存的执行上下文，并将控制权返回到调用点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了实现函数调用，计算机系统通常会使用一个栈来保存执行上下文。每当进行函数调用时，就会将当前的执行上下文压入栈中，并在函数执行完毕后弹出栈顶元素。这样，在函数调用过程中，栈中保存的就是当前函数调用的堆栈跟踪信息。"}]},{"type":"element","tag":"h2","props":{"id":"构造函数可以调用虚函数吗语法上通过吗语义上可以通过吗"},"children":[{"type":"text","value":"构造函数可以调用虚函数吗？语法上通过吗？语义上可以通过吗？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不能，语法上通过，语义上有问题。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"对象内的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"成分会在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"自身构造之前构造完毕。因此，在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"\n的构造函数中执行的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"virtual"}]},{"type":"text","value":"函数将会是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"base class"}]},{"type":"text","value":"\n的版本，决不会是"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"的版本。 即使目前确实正在构造"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"derived class"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h2","props":{"id":"拷贝构造函数作用及用途什么时候需要自定义拷贝构造函数"},"children":[{"type":"text","value":"拷贝构造函数作用及用途？什么时候需要自定义拷贝构造函数？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在C++中，有下面三种对象需要拷贝的情况："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象以值传递的方式传入函数体"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象以值传递的方式从函数返回"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个对象需要通过另外一个对象进行初始化 以上的情况就需要拷贝构造函数的调用。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当类中的数据成员需要动态分配存储空间时，不可以依赖"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default copy constructor"}]},{"type":"text","value":"。当"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default copy constructor"}]},{"type":"text","value":"\n被因编译器需要而合成时，将执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"default memberwise copy"}]},{"type":"text","value":"语义。\n此时如果类中有动态分配的存储空间时，将会发生惨重的灾情。 在需要时（包括这种对象要赋值、这种对象作为函数参数要传递、函数返回值为这种对象等情况），要考虑到自定义拷贝构造函数。"}]}]},{"type":"element","tag":"h2","props":{"id":"如果在构造函数和析构函数中抛出异常会发生什么什么是栈展开"},"children":[{"type":"text","value":"如果在构造函数和析构函数中抛出异常会发生什么？什么是栈展开？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构造函数抛异常：不会发生资源泄漏。假设在operator new()\n时抛出异常，那么将会因异常而结束此次调用，内存分配失败，不可能存在内存泄露。假设在别处(operator new() )\n执行之后抛出异常，此时析构函数调用，已构造的对象将得以正确释放，且自动调用operator delete()释放内存 析构函数抛异常：\n可以抛出异常，但该异常必须留在析构函数；若析构函数因异常退出，情况会很糟糕(all\nkinds of bad things are likely to happen)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可能使得已分配的对象未能正常析构，造成内存泄露；"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"例如在对像数组的析构时，如果对象的析构函数抛出异常，释放代码将引发未定义行为。考虑一个对象数组的中间部分在析构时抛出异常，它无法传播，因为传播的话将使得后续部分不能正常释放；它也无法吸收，因为这违反了”异常中立“原则(\n异常中立，就是指任何底层的异常都会抛出到上层，也就相当于是异常透明的)。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"抛出异常时，将暂停当前函数的执行，开始查找匹配的catch子句。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n首先检查throw本身是否在try块内部如果是，检查与该try相关的catch子句，看是否可以处理该异常。如果不能处理，就退出当前函数，并且释放当前函数的内存并销毁局部对象，继续到上层的调用函数中查找，直到找到一个可以处理该异常的catch。"}]}]},{"type":"element","tag":"h2","props":{"id":"virtual函数能声明为内联吗为什么"},"children":[{"type":"text","value":"virtual函数能声明为内联吗？为什么？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通常情况下是不能的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原因：inline是编译期决定，他意味着在执行前就将调用动作替换为被调用函数的本体； virtual是运行期决定，他意味着直道运行期才决定调用哪个函数。\n这两者之间通常是冲突的。\n然而也有特例，就是当编译阶段就已经知道调用虚函数的指针为多态指针。这里就不再赘述了。"}]}]},{"type":"element","tag":"h2","props":{"id":"基类的析构函数不是虚函数会带来什么问题"},"children":[{"type":"text","value":"基类的析构函数不是虚函数，会带来什么问题？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"派生类的析构函数用不上，会造成资源的泄漏。"}]},{"type":"element","tag":"h2","props":{"id":"子类析构时要调用父类的析构函数吗"},"children":[{"type":"text","value":"子类析构时要调用父类的析构函数吗"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"析构函数调用的次序是先派生类的析构后基类的析构，也就是说在基类的的析构调用的时候,派生类的信息已经全部销毁了。定义一个对象时先调用基类的构造函数、然后调用派生类的构造函数；析构的时候恰好相反：先调用派生类的析构函数、然后调用基类的析构函数。"}]},{"type":"element","tag":"h2","props":{"id":"哪些类型的对象不可以作为union的成员为什么有这种限制"},"children":[{"type":"text","value":"哪些类型的对象不可以作为union的成员？为什么有这种限制？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"标准规定，凡是具有"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial constructor"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial destructor"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial copy constructor"}]},{"type":"text","value":"\n、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"non-trivial assignment operator"}]},{"type":"text","value":"的class对象都不能作为union的成员。 即是说，这个class的以上四种成员必须均经由编译器合成且该class无虚函数和虚基类。\n有这种限制是为了兼容C。"}]},{"type":"element","tag":"h2","props":{"id":"c中的转化机制各适用于什么环境dynamic_cast转换失败时会出现什么情况"},"children":[{"type":"text","value":"C++中的转化机制？各适用于什么环境？dynamic_cast转换失败时，会出现什么情况？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对指针，返回NULL.对引用，抛出bad_cast异常more Effective C++ C++引入了4种类型转化操作符（cast\noperator）：static_cast，const_cast，dynamic_cast和reinterpret_cast，使用方法与C语言中略有不同："}]},{"type":"element","tag":"code","props":{"code":"(type)expression; //这是C语言的\n","language":"c","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(type)expression;"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":" //这是C语言的"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后引入C++的："}]},{"type":"element","tag":"code","props":{"code":"static_cast<type>(expression);//这是C++的\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"static_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(expression);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"//这是C++的"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后看一下各自的适用范围："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"static_cast：static_cast基本上拥有与C旧式转型相同的威力和意义，以及相同的限制。但是，该类型转换操作符不能移除常量性，因为有一个专门的操作符用来移除常量性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"const_cast：用来改变表达式中的常量性（constness）或者易变形（volatileness），只能用于此功能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"dynamic_cast：将指向基类basic class object的pointer或者reference转型为指向派生类derived（或这sibling base）class\nobject的pointer或者reference中，并且可以获知是否转型成功：如果转型失败，当转型对象是指针的时候会返回一个null指针；当转型对象是reference会抛出一个异常exception。dynamic_cast无法应用在缺乏虚函数的类型上，也不能改变类型的常量性。\n此外，dynamic_cast还有一个用途就是找出被对象占用的内存的起始点。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"reinterpret_cast：这个操作符的转换结果几乎总是和编译器平台相关，所以不具有移植性。reinterpret_cast的最常用用途是转换“函数指针”类型，如下："},{"type":"element","tag":"code","props":{"code":"typedef void (*FuncPtr)();\nint doSomething();\nint main() {\n    FuncPtr funcPtrArray[10];\n    funcPtrArray[0] = reinterpret_cast<FuncPtr>(&doSomething);\n    return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"typedef"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (*FuncPtr)();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    FuncPtr funcPtrArray["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    funcPtrArray["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"reinterpret_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"FuncPtr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"doSomething);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"通过reinterpret_cast强迫编译器了，并成功的将不同的类型的函数&doSomething转换为需要的类型。不过这个操作符进行的转换动作不具有移植性（C++不保证所有的函数指针都能以此方式重新呈现），某些情况下这样的转型可能会导致不正确的结果，所以这种操作不到万不得已不要使用。"}]}]},{"type":"element","tag":"h2","props":{"id":"为什么函数参数的入栈的顺序是从右往左"},"children":[{"type":"text","value":"为什么函数参数的入栈的顺序是从右往左"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为好多函数是不定参数个数的，比如最常用的printf，所以需要参数的入栈顺序是从右往左。"}]},{"type":"element","tag":"h2","props":{"id":"有哪几种强制类型转换以及使用场景"},"children":[{"type":"text","value":"有哪几种强制类型转换以及使用场景"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态类型转换（static_cast）：该类型转换是最常用的强制类型转换方式，它支持转换基本数据类型、指针、引用和枚举类型。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动态类型转换（dynamic_cast）：该类型转换主要用于转换基类指针或引用到派生类指针或引用，并在运行时检查转换是否成功。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"常量类型转换（const_cast）：该类型转换可以用来去除或添加对象的常量属性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"向上转型（reinterpret_cast）：该类型转换可以用来进行位域转换，或将任意类型的指针转换为任意其它类型的指针。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用场景方面，C++ 中的强制类型转换主要用于两类情况："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换不同类型的数据：在 C++ 中，数据的类型是严格检查的，因此如果需要进行类型不同的数据运算，就必须先进行强制类型转换。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"转换基类指针或引用到派生类指针或引用：在 C++ 中，继承关系中的类之间可以相互转换，但是这种转换需要使用动态类型转换进行。例如，假设有一个基类 Base 和一个派生类 Derived，那么可以使用动态类型转换将基类指针转换为派生类指针，从而调用派生类中特有的成员函数。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一个简单的例子："}]},{"type":"element","tag":"code","props":{"code":"class Base {\npublic:\n  virtual void doSomething() {\n    // 在基类中实现的通用操作\n  }\n};\n\nclass Derived : public Base {\npublic:\n  void doSomething() {\n    // 在派生类中重写的 doSomething 操作\n  }\n\n  void doSomethingElse() {\n    // 派生类中独有的操作\n  }\n};\n\nint main() {\n  Base* b = new Base();\n  b->doSomething();  // 调用基类中的 doSomething 操作\n\n  Derived* d = dynamic_cast<Derived*>(b);\n  d->doSomething();  // 调用派生类中重写的 doSomething 操作\n  d->doSomethingElse();  // 调用派生类中独有的 doSomethingElse 操作\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在基类中实现的通用操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 派生类中独有的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Base"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用基类中的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"dynamic_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中独有的 doSomethingElse 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们首先定义了一个基类 Base 和一个派生类 Derived。然后在 main 函数中，我们先创建了一个基类指针 b，并通过该指针调用了基类中的 doSomething 操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接着，我们使用动态类型转换将 b 转换为派生类指针 d，并通过 d 调用了派生类中重写的 doSomething 操作和独有的 doSomethingElse"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们通过动态类型转换将基类指针转换为派生类指针，从而实现了基类指针向派生类指针的转换。但是，这种转换并不是没有风险的。如果指针 b 实际指向的对象并不是一个派生类的对象，那么动态类型转换将会失败，从而导致程序崩溃。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了避免这种情况的发生，在进行动态类型转换时，可以使用特殊的语法来检查转换是否成功。例如，可以改写上面的例子如下："}]},{"type":"element","tag":"code","props":{"code":"class Base {\npublic:\n  virtual void doSomething() {\n    // 在基类中实现的通用操作\n  }\n};\n\nclass Derived : public Base {\npublic:\n  void doSomething() {\n    // 在派生类中重写的 doSomething 操作\n  }\n\n  void doSomethingElse() {\n    // 派生类中独有的操作\n  }\n};\n\nint main() {\n  Base* b = new Base();\n  b->doSomething();  // 调用基类中的 doSomething 操作\n\n  Derived* d = dynamic_cast<Derived*>(b);\n  if (d != nullptr) {\n    d->doSomething();  // 调用派生类中重写的 doSomething 操作\n    d->doSomethingElse();  // 调用派生类中独有的 doSomethingElse 操作\n  } else {\n    // 如果转换失败，则不执行任何操作\n  }\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"virtual"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在基类中实现的通用操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 派生类中独有的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Base"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"Base"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用基类中的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"dynamic_cast<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"Derived"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (d "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中重写的 doSomething 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    d->"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomethingElse"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 调用派生类中独有的 doSomethingElse 操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 如果转换失败，则不执行任何操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们通过检查 d 是否为 nullptr 来判断动态类型转换是否成功。如果转换成功，则 d 指向一个派生类对象，否则 d 指向 nullptr。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在进行动态类型转换时，检查转换是否成功是一个很好的实跃。它可以帮助我们避免对于非法对象进行操作，从而保证程序的正确性和安全性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了动态类型转换之外，C++ 还支持其他类型的强制类型转换，如静态类型转换、常量类型转换、向上转型等。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，假设有一个名为 A 的类，它包含一个整型成员 a。如果我们想要将 a 的值转换为浮点型，那么可以使用静态类型转换："}]},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n  int a;\n};\n\nint main() {\n  A obj;\n  obj.a = 10;\n\n  float f = static_cast<float>(obj.a);  // 将 a 的值转换为浮点型\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.a "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" f "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"static_cast<float>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(obj.a);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 a 的值转换为浮点型"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，假设有一个名为 B 的类，它包含一个指向 A 类的指针成员 b。如果我们想要将 b 转换为指向 A 类的常量指针，那么可以使用常量类型转换："}]},{"type":"element","tag":"code","props":{"code":"class A {\npublic:\n  int a;\n};\n\nclass B {\npublic:\n  A* b;\n};\n\nint main() {\n  A obj;\n  obj.a = 10;\n\n  B b;\n  b.b = &obj;\n\n  const A* p = const_cast<const A*>(b.b);  // 将 b 转换为指向 A 类的常量指针\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" a;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  A obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.a "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  B b;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  b.b "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" p "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"const_cast<const"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" A"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(b.b);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 b 转换为指向 A 类的常量指针"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后，假设有一个名为 C 的类，它包含一个指针成员 c，该指针指向一个指针。如果我们想要将 c 转换为指向一个整型的指针，那么可以使用向上转型："}]},{"type":"element","tag":"code","props":{"code":"class C {\npublic:\n  void** c;\n};\n\nint main() {\n  int i = 10;\n\n  C obj;\n  obj.c = reinterpret_cast<void**>(&i);  // 将 c 转换为指向整型的指针\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void**"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" c;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  C obj;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj.c "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"reinterpret_cast<void**>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"i);"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 将 c 转换为指向整型的指针"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面是一些简单的例子，它们演示了 C++ 中常用的几种强制类型转换方式。总体来说，强制类型转换是一种有用的工具，它可以帮助我们更方便地进行数据类型转换。不过，我们在使用它们时也需要格外小心，避免破坏数据类型的约定，从而保证程序的正确性和安全性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外，在 C++ 中，我们也可以使用类型擦除来实现类型的转换。类型擦除是指将泛型类型转换为一种通用类型，从而实现类型的转换。例如，假设有一个泛型类型 T，那么我们可以将它转换为 void 类型，从而实现类型擦除："}]},{"type":"element","tag":"code","props":{"code":"template<typename T>\nclass MyClass {\npublic:\n  void doSomething(T t) {\n    // 在 MyClass 中实现的操作\n  }\n};\n\nint main() {\n  MyClass<int> obj1;\n  obj1.doSomething(10);\n\n  MyClass<float> obj2;\n  obj2.doSomething(3.14);\n\n  MyClass<void> obj3;\n  obj3.doSomething(nullptr);  // 类型擦除\n\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"typename"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"public:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 在 MyClass 中实现的操作"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj1;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj1."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<float>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj2;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj2."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"3.14"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<void>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" obj3;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  obj3."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"doSomething"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"nullptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 类型擦除"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面的例子中，我们定义了一个泛型类 MyClass，然后在 main 函数中创建了三个 MyClass 对象，分别表示 int、float 和 void 类型。然后，我们通过类型擦除，将"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MyClass<void>"}]},{"type":"text","value":"对象转换为 void 类型，并调用它的 doSomething 操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，在 C++ 中，强制类型转换和类型擦除是两种实现类型转换的重要方式。它们都有各自的优缺点，适用于不同的场景。因此，我们在使用它们时，需要根据具体的情况，仔细斟酌选择合适的方式。"}]},{"type":"element","tag":"h2","props":{"id":"如何避免循环依赖"},"children":[{"type":"text","value":"如何避免循环依赖"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"循环依赖是指两个或多个模块之间相互依赖，导致它们无法正确加载的情况。解决循环依赖的一种方法是使用抽象类来提供一个公共接口，并让这些模块实现该接口。这样，模块之间就只依赖于这个抽象类，而不是相互依赖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另一种方法是使用构造函数来注入依赖。这种方法的思想是将每个模块的依赖作为它的构造函数的参数，然后在每个模块中创建它所依赖的模块的实例。这样，模块之间就不存在直接的依赖关系，只存在通过构造函数传递的间接依赖关系。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一种方法是使用服务定位器模式。该模式涉及到一个中央注册表，所有模块都向该注册表注册自己，然后在需要时从注册表中获取所需的模块实例。这样，模块之间就只存在对注册表的依赖，而不是相互依赖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，避免循环依赖的方法有很多，具体应用哪种方法取决于您的项目的具体情况。"}]},{"type":"element","tag":"h2","props":{"id":"unique_ptr中stdmove作用"},"children":[{"type":"text","value":"unique_ptr中std::move()作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"std::move 是一个 C++ 标准库函数，用于将一个对象的所有权从一个对象转移到另一个对象。它通常用于将一个对象的所有权从一个 std::unique_ptr 对象转移到另一个 std::unique_ptr 对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"举个例子，假设有一个 std::unique_ptr 对象 ptr1，它指向一个动态分配的整型变量，值为 10："}]},{"type":"element","tag":"code","props":{"code":"std::unique_ptr<int> ptr1(new int(10));\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"ptr1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"));"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果您想将 ptr1 的所有权转移到另一个 std::unique_ptr 对象 ptr2 中，可以使用 std::move 函数，如下所示："}]},{"type":"element","tag":"code","props":{"code":"std::unique_ptr<int> ptr2 = std::move(ptr1);\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::unique_ptr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<int>"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ptr2 "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"move"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(ptr1);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这种情况下，ptr1 和 ptr2 将指向同一个整型变量，值为 10。不过，由于 std::move 函数将 ptr1 的所有权转移到了 ptr2 中，因此 ptr1 将不再持有任何所有权，所以 ptr1 将变为空指针。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"总之，std::move 函数用于将对象的所有权从一个对象转移到另一个对象，它通常用于 std::unique_ptr 对象之间的所有权转移。"}]},{"type":"element","tag":"h2","props":{"id":"main函数执行以前还会执行什么代码之后呢"},"children":[{"type":"text","value":"main函数执行以前，还会执行什么代码？之后呢？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"全局对象的构造函数会在main函数之前执行"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在主函数之前，编译器会执行一些初始化代码，例如初始化全局变量。主函数执行完成后，如果程序中还有其他函数正在运行，那么这些函数会继续执行。一旦所有函数都执行完毕，程序就会结束。"}]},{"type":"element","tag":"h2","props":{"id":"c是不是类型安全的"},"children":[{"type":"text","value":"C++是不是类型安全的？"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不是。两个不同类型的指针之间可以强制转换（用reinterpret cast)。C#是类型安全的。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++是类型安全的编程语言。类型安全是指在编译时对类型的检查，以确保变量的值和它的类型相匹配。这样可以防止在运行时出现错误，比如将一个整型值赋给一个字符型变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了C++，Java、C#和Haskell等语言也是类型安全的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"C++ 是一种强类型语言，它对类型有严格的检查，并且支持类型转换。这些特性都可以被看作是类型安全的特征。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 C++ 中，不同类型的指针可以互相转换，但是这种转换是非常危险的，因为它可能导致程序运行时出现错误。例如，如果将一个整型指针转换成字符型指针，程序可能会在使用该指针时崩溃。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，在 C++ 中，指针类型的转换可能会绕过类型安全检查，并导致程序出现错误。但是，在大多数情况下，C++ 仍然是一种类型安全的语言，因为它对类型的检查非常严格。如果您的代码涉及指针类型的转换，我建议您格外小心，确保转换是安全的。"}]},{"type":"element","tag":"h2","props":{"id":"有哪几种情况只能用initialization-list而不能用assignment"},"children":[{"type":"text","value":"有哪几种情况只能用initialization list而不能用assignment?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当类中含const、reference成员变量；基类的构造函数都需要初始化表。"}]},{"type":"element","tag":"h2","props":{"id":"list-和-set"},"children":[{"type":"text","value":"List 和 Set"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"List 可以存放相同元素 Set 不可存放相同元素"}]},{"type":"element","tag":"h2","props":{"id":"写一个http网络服务器该如何写"},"children":[{"type":"text","value":"写一个http网络服务器，该如何写"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"包含必要的头文件，例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<iostream>"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<string>"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::string"}]},{"type":"text","value":" 类型定义一个字符串，用来存储 HTTP 响应。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cout"}]},{"type":"text","value":" 向标准输出流中输出 HTTP 响应字符串。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cin"}]},{"type":"text","value":" 从标准输入流中读取 HTTP 请求，并将其存储在一个字符串中。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用字符串函数解析 HTTP 请求，从中提取 URL 和其他必要的信息。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"根据请求的 URL 来选择如何响应请求。例如，如果 URL 指向一个文件，可以读取文件内容并将其作为响应的正文返回。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"构造一个 HTTP 响应字符串，并使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"std::cout"}]},{"type":"text","value":" 将其输出到标准输出流中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了完成这个项目，您可能需要了解以下技术："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网络编程：您需要了解如何使用 C++ 库来编写网络应用程序，例如如何使用套接字来连接客户端和服务器。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HTTP 协议：您需要了解 HTTP 协议的工作原理，包括请求和响应的格式以及如何处理常见的 HTTP 方法（例如 GET 和 POST）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多线程编程：为了实现高性能的服务器，您可能需要使用多线程来处理多个请求。您需要了解如何使用 C++ 标准库中的线程类来创建和管理多个线程。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实现这个项目时，您可能需要先完成以下步骤："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个新的 C++ 项目，并包含必要的头文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 C++ 标准库中的网络编程库，创建一个新的套接字，并将其绑定到一个特定的端口。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"编写一个函数，用来接收客户端的连接。在这个函数中，您需要创建一个新的线程来处理客户端的请求。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在新线程中，编写代码来读取客户端发送的 HTTP 请求，并解析其中的 URL。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下是一个简单的例子，它展示了如何创建一个网络服务器，并使用多线程来处理客户端请求。"}]},{"type":"element","tag":"code","props":{"code":"#include <iostream>\n#include <string>\n#include <thread>\n#include <cstdio>\n#include <cstring>\n#include <cerrno>\n#include <unistd.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n\n// 定义服务器的 IP 地址和端口号\nconstexpr char SERVER_IP[] = \"127.0.0.1\";\nconstexpr int SERVER_PORT = 8080;\n\n// 定义缓冲区的大小\nconstexpr size_t BUFFER_SIZE = 1024;\n\n// 定义 HTTP 响应字符串\nconstexpr char HTTP_RESPONSE[] = \"HTTP/1.1 200 OK\\r\\n\\r\\n\";\n\n// 定义处理客户端请求的函数\nvoid handle_client(int client_fd) {\n  // 创建缓冲区\n  char buffer[BUFFER_SIZE];\n\n  // 读取客户端发送的请求\n  ssize_t n = read(client_fd, buffer, sizeof(buffer));\n  if (n <= 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return;\n  }\n\n  // 解析请求中的 URL\n  std::string request(buffer, n);\n  // (省略)\n\n  // 构造 HTTP 响应字符串\n  std::string response = HTTP_RESPONSE;\n  // (省略)\n\n  // 向客户端发送响应\n  n = write(client_fd, response.c_str(), response.size());\n  if (n <= 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return;\n  }\n\n  // 关闭客户端的连接\n  close(client_fd);\n}\n\nint main(int argc, char* argv[]) {\n  // 解析命令行参数\n  int opt;\n  bool server_running = true;\n  while ((opt = getopt(argc, argv, \"h\")) != -1) {\n    switch (opt) {\n      case 'h':\n        // 打印帮助信息\n        print_usage(argv[0]);\n        return 0;\n      default:\n        std::cerr << \"Error: Invalid option \" << opt << std::endl;\n        print_usage(argv[0]);\n        return 1;\n    }\n  }\n\n  // 创建一个新的套接字\n  int sock_fd = socket(AF_INET, SOCK_STREAM, 0);\n  if (sock_fd < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 填充服务器的地址信息\n  sockaddr_in server_addr;\n  std::memset(&server_addr, 0, sizeof(server_addr));\n  server_addr.sin_family = AF_INET;\n  server_addr.sin_port = htons(SERVER_PORT);\n  inet_pton(AF_INET, SERVER_IP, &server_addr.sin_addr);\n\n  // 绑定套接字\n  if (bind(sock_fd, (sockaddr*)&server_addr, sizeof(server_addr)) < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 开始监听\n  if (listen(sock_fd, SOMAXCONN) < 0) {\n    std::cerr << \"Error: \" << strerror(errno) << std::endl;\n    return 1;\n  }\n\n  // 注册信号处理器\n  signal(SIGINT, [](int){ server_running = false; });\n\n  // 使用死循环来接收客户端的连接\n  while (server_running) {\n    // 接收客户端的连接\n    sockaddr_in client_addr;\n    socklen_t client_addr_len = sizeof(client_addr);\n    int client_fd = accept(sock_fd, (sockaddr*)&client_addr, &client_addr_len);\n    if (client_fd < 0) {\n      std::cerr << \"Error: \" << strerror(errno) << std::endl;\n      continue;\n    }\n\n    // 为客户端创建一个新的线程来处理请求\n    std::thread client_thread(handle_client, client_fd);\n    client_thread.detach();\n  }\n\n  // 关闭套接字\n  close(sock_fd);\n  return 0;\n}\n","language":"cpp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<iostream>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<string>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<thread>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cstdio>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cstring>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<cerrno>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<unistd.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<sys/socket.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<netinet/in.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"<arpa/inet.h>"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义服务器的 IP 地址和端口号"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" SERVER_IP[] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"127.0.0.1\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" SERVER_PORT "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"8080"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义缓冲区的大小"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"size_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" BUFFER_SIZE "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1024"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义 HTTP 响应字符串"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"constexpr"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" HTTP_RESPONSE[] "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"HTTP/1.1 200 OK"}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"\\r\\n\\r\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"// 定义处理客户端请求的函数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"handle_client"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"client_fd"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 创建缓冲区"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" buffer[BUFFER_SIZE];"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 读取客户端发送的请求"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"ssize_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"read"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd, buffer, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(buffer));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 解析请求中的 URL"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::string "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(buffer, n);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // (省略)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 构造 HTTP 响应字符串"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::string response "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" HTTP_RESPONSE;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // (省略)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 向客户端发送响应"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"write"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd, response."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"c_str"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(), response."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (n "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 关闭客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"main"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"argc"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"char*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"argv"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"[]) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 解析命令行参数"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" opt;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" server_running "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ((opt "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"getopt"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argc, argv, "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"h\""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"switch"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (opt) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"'h'"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"        // 打印帮助信息"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"print_usage"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argv["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: Invalid option \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" opt "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"print_usage"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(argv["}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 创建一个新的套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" sock_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"socket"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(AF_INET, SOCK_STREAM, "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (sock_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 填充服务器的地址信息"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  sockaddr_in server_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"memset"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(server_addr));"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  server_addr.sin_family "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" AF_INET;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  server_addr.sin_port "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"htons"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(SERVER_PORT);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"inet_pton"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(AF_INET, SERVER_IP, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr.sin_addr);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 绑定套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, (sockaddr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"server_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(server_addr)) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 开始监听"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, SOMAXCONN) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 注册信号处理器"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"signal"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(SIGINT, []("}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"){ server_running "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"; });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 使用死循环来接收客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (server_running) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 接收客户端的连接"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    sockaddr_in client_addr;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"socklen_t"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" client_addr_len "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"sizeof"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(client_addr);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" client_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"accept"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd, (sockaddr"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"client_addr, "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"client_addr_len);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" (client_fd "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::cerr "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5443f4"},"children":[{"type":"text","value":"\"Error: \""}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"strerror"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(errno) "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"<<"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::endl;"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"continue"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"    // 为客户端创建一个新的线程来处理请求"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d03a5c"},"children":[{"type":"text","value":"std"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"::thread "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"client_thread"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(handle_client, client_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"    client_thread."}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"detach"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e9bc0d"},"children":[{"type":"text","value":"  // 关闭套接字"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ac4102"},"children":[{"type":"text","value":"close"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"(sock_fd);"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-68d151"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64eb61"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0036ff"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了上述的步骤之外，您还可以考虑以下优化："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设置套接字的选项，例如 SO_REUSEADDR 和 SO_REUSEPORT，以提高服务器的性能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 epoll 或 select 等 I/O 多路复用技术来支持多个客户端的并发访问。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用线程池来管理线程，而不是每次创建一个新的线程。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用缓存来存储客户端请求的内容，以提高服务器的响应速度。"}]}]},{"type":"element","tag":"h2","props":{"id":"谈一谈-c-的-this"},"children":[{"type":"text","value":"谈一谈 c++ 的 this"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zintrulcre.vip/posts/cpp/closure-and-anonymous-function/","rel":["nofollow"]},"children":[{"type":"text","value":"匿名函数"}]}]},{"type":"element","tag":"h2","props":{"id":"不同类型的语言有什么差异"},"children":[{"type":"text","value":"不同类型的语言有什么差异"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自然语言"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同类型的语言有很多差异，包括它们的语法、词汇和发音方式。例如，拉丁语和汉语是两种非常不同的语言，它们的语法和词汇都大不相同。拉丁语是一种重音语言，它的词语通常是以重读音节结尾的，而汉语则是一种声调语言，词语的意思取决于它的声调。此外，拉丁语和汉语在语音方面也有很大差异，拉丁语的语音比较清脆，而汉语的语音则比较柔和。总之，不同类型的语言在许多方面都有所不同，包括它们的语法、词汇和发音方式。"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这些差异主要体现在它们的语法、语义、功能和性能方面。例如，C++和Python是两种非常不同的编程语言。C++是一种类型严格的语言，它的语法比较严谨，需要程序员明确地指定每一个变量的类型，而Python是一种类型动态的语言，它的语法比较灵活，不需要程序员指定变量的类型。此外，C++在性能方面比Python要优秀得多，因为它是一种编译型语言，在运行时会被编译成机器代码，而Python则是一种解释型语言，它的代码在运行时会被解释器逐行执行。总之，不同类型的编程语言在语法、语义、功能和性能方面都有所不同，程序员可以根据自己的需要选择合适的语言来开发自己的程序。"}]},{"type":"element","tag":"h2","props":{"id":"如何优化冒泡排序"},"children":[{"type":"text","value":"如何优化冒泡排序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"冒泡排序是一种简单但不够高效的排序算法。为了优化冒泡排序，我们可以采用以下技术："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每次冒泡时，将最大值移动到数组末尾，并逐渐缩小冒泡范围。这样，每次冒泡时只需要比较一部分数组元素，可以大大减少冒泡次数，提高排序效率。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在每次冒泡时，记录最后一次交换的位置。这个位置之后的元素都已经有序，因此可以在下一次冒泡时跳过这些元素，减少无用的比较次数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在冒泡过程中，如果发现某一轮冒泡没有发生任何交换，那么说明数组已经有序，可以提前结束排序。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过以上技术，我们可以大大优化冒泡排序的性能，使它能够更快地完成排序任务。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5443f4{color:#0A3069}\n.ct-ac4102{color:#8250DF}\n.ct-d03a5c{color:#953800}\n.ct-64eb61{color:#0550AE}\n.ct-e9bc0d{color:#6E7781}\n.ct-0036ff{color:#24292F}\n.ct-68d151{color:#CF222E}\n.dark .ct-68d151{color:#FF7B72}\n.dark .ct-0036ff{color:#C9D1D9}\n.dark .ct-e9bc0d{color:#8B949E}\n.dark .ct-64eb61{color:#79C0FF}\n.dark .ct-d03a5c{color:#FFA657}\n.dark .ct-ac4102{color:#D2A8FF}\n.dark .ct-5443f4{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"二维动态数组的申请和删除","depth":2,"text":"二维动态数组的申请和删除"},{"id":"为什么要内存对齐","depth":2,"text":"为什么要内存对齐"},{"id":"将程序跳转到指定内存地址","depth":2,"text":"将程序跳转到指定内存地址"},{"id":"如何实现仿函数为什么需要通过继承自unary_function-或者-binary_function来实现仿函数","depth":2,"text":"如何实现仿函数？为什么需要通过继承自unary_function 或者 binary_function来实现仿函数？"},{"id":"什么是字节对齐为什么要采用这种机制","depth":2,"text":"什么是字节对齐，为什么要采用这种机制？"},{"id":"两种常用的实现隐式类类型转换的方式是什么如何避免隐式类型转换","depth":2,"text":"两种常用的实现隐式类类型转换的方式是什么？如何避免隐式类型转换？"},{"id":"面向对象的设计原则","depth":2,"text":"面向对象的设计原则"},{"id":"函数调用的具体实现","depth":2,"text":"函数调用的具体实现"},{"id":"构造函数可以调用虚函数吗语法上通过吗语义上可以通过吗","depth":2,"text":"构造函数可以调用虚函数吗？语法上通过吗？语义上可以通过吗？"},{"id":"拷贝构造函数作用及用途什么时候需要自定义拷贝构造函数","depth":2,"text":"拷贝构造函数作用及用途？什么时候需要自定义拷贝构造函数？"},{"id":"如果在构造函数和析构函数中抛出异常会发生什么什么是栈展开","depth":2,"text":"如果在构造函数和析构函数中抛出异常会发生什么？什么是栈展开？"},{"id":"virtual函数能声明为内联吗为什么","depth":2,"text":"virtual函数能声明为内联吗？为什么？"},{"id":"基类的析构函数不是虚函数会带来什么问题","depth":2,"text":"基类的析构函数不是虚函数，会带来什么问题？"},{"id":"子类析构时要调用父类的析构函数吗","depth":2,"text":"子类析构时要调用父类的析构函数吗"},{"id":"哪些类型的对象不可以作为union的成员为什么有这种限制","depth":2,"text":"哪些类型的对象不可以作为union的成员？为什么有这种限制？"},{"id":"c中的转化机制各适用于什么环境dynamic_cast转换失败时会出现什么情况","depth":2,"text":"C++中的转化机制？各适用于什么环境？dynamic_cast转换失败时，会出现什么情况？"},{"id":"为什么函数参数的入栈的顺序是从右往左","depth":2,"text":"为什么函数参数的入栈的顺序是从右往左"},{"id":"有哪几种强制类型转换以及使用场景","depth":2,"text":"有哪几种强制类型转换以及使用场景"},{"id":"如何避免循环依赖","depth":2,"text":"如何避免循环依赖"},{"id":"unique_ptr中stdmove作用","depth":2,"text":"unique_ptr中std::move()作用"},{"id":"main函数执行以前还会执行什么代码之后呢","depth":2,"text":"main函数执行以前，还会执行什么代码？之后呢？"},{"id":"c是不是类型安全的","depth":2,"text":"C++是不是类型安全的？"},{"id":"有哪几种情况只能用initialization-list而不能用assignment","depth":2,"text":"有哪几种情况只能用initialization list而不能用assignment?"},{"id":"list-和-set","depth":2,"text":"List 和 Set"},{"id":"写一个http网络服务器该如何写","depth":2,"text":"写一个http网络服务器，该如何写"},{"id":"谈一谈-c-的-this","depth":2,"text":"谈一谈 c++ 的 this"},{"id":"不同类型的语言有什么差异","depth":2,"text":"不同类型的语言有什么差异"},{"id":"如何优化冒泡排序","depth":2,"text":"如何优化冒泡排序"}]}},"_type":"markdown","_id":"content:1.cpp:tips:tip.md","_source":"content","_file":"1.cpp/tips/tip.md","_extension":"md"}