{"_path":"/notes/compile","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Compile","description":"","icon":"fluent-emoji-flat:person-running-light","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"compile"},"children":[{"type":"text","value":"Compile"}]},{"type":"element","tag":"h2","props":{"id":"qa"},"children":[{"type":"text","value":"QA"}]},{"type":"element","tag":"h3","props":{"id":"make1-no-rule-to-make-target"},"children":[{"type":"text","value":"make"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":": *** No rule to make target"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"清除之前生成的 build"}]},{"type":"element","tag":"h3","props":{"id":"can-not-be-used-when-making-a-shared-object"},"children":[{"type":"text","value":"can not be used when making a shared object"}]},{"type":"element","tag":"code","props":{"code":"/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/7/crtbeginT.o: relocation R_X86_64_32 against hidden symbol `__TMC_END__' can not be used when making a shared object\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"/usr/bin/ld:"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"/usr/lib/gcc/x86_64-linux-gnu/"}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"/crtbeginT.o:"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"relocation"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"R_X86_64_32"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"against"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"hidden"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"symbol"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"__TMC_END__'"}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":" can not be used when making a shared object"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"configure-error-c-compiler-cannot-create-executables"},"children":[{"type":"text","value":"configure: error: C compiler cannot create executables"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 x64 位机器上编译 x86 位程序时，报错 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"configure: error: C compiler cannot create executables"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"# 确认主机内核为 x64 输出 amd64\ndpkg --print-architecture \n# 确认打开了多架构支持 输出 i386\ndpkg --print-foreign-architectures\n# 若没有\ndpkg --add-architecture i386 && apt-get update\n# 安装 gcc multilib\napt-get install  gcc-multilib g++-multilib \n# 编译加上 -m32\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 确认主机内核为 x64 输出 amd64"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--print-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 确认打开了多架构支持 输出 i386"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--print-foreign-architectures"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 若没有"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"dpkg"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8eded2"},"children":[{"type":"text","value":"--add-architecture"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"i386"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"update"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 安装 gcc multilib"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-98c06d"},"children":[{"type":"text","value":"apt-get"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"gcc-multilib"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f70cde"},"children":[{"type":"text","value":"g++-multilib"}]},{"type":"element","tag":"span","props":{"class":"ct-1ac6a3"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b0c25b"},"children":[{"type":"text","value":"# 编译加上 -m32"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"error-adding-symbols-dso-missing-from-command-line"},"children":[{"type":"text","value":"error adding symbols: DSO missing from command line"}]},{"type":"element","tag":"code","props":{"code":"/usr/bin/ld: build/release/objs/index_conn.o: undefined reference to symbol '_ZN5boost6system15system_categoryEv'\n//usr/lib/x86_64-linux-gnu/libboost_system.so.1.55.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [build/release/query_runner] Error 1\n","language":"txt","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"/usr/bin/ld: build/release/objs/index_conn.o: undefined reference to symbol '_ZN5boost6system15system_categoryEv'\n//usr/lib/x86_64-linux-gnu/libboost_system.so.1.55.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [build/release/query_runner] Error 1"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"sol: flag add "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-lboost_system"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":LDFLAGS += -L/usr/lib/boost -lboost_thread -lpthread -lboost_system"}]}]},{"type":"element","tag":"h3","props":{"id":"is-incompatible-with-i386x86-64-output"},"children":[{"type":"text","value":"is incompatible with i386:x86-64 output"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"/usr/bin/ld: i386 architecture of input file `xxx.a(log.o)' is incompatible with i386:x86-64 output"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将 xxx.a 库在当前机器上重新编译 或者 flag + "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m32"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncmake "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_target_properties (your_project PROPERTIES LINK_FLAGS \"-m32\")"}]}]},{"type":"element","tag":"h3","props":{"id":"d_file_offset_bits64"},"children":[{"type":"text","value":"-D_FILE_OFFSET_BITS=64"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://digital-domain.net/largefiles.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://digital-domain.net/largefiles.html"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b0c25b{color:#6E7781}\n.ct-8eded2{color:#0550AE}\n.ct-f70cde{color:#0A3069}\n.ct-1ac6a3{color:#24292F}\n.ct-98c06d{color:#953800}\n.dark .ct-98c06d{color:#FFA657}\n.dark .ct-1ac6a3{color:#C9D1D9}\n.dark .ct-f70cde{color:#A5D6FF}\n.dark .ct-8eded2{color:#79C0FF}\n.dark .ct-b0c25b{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"qa","depth":2,"text":"QA","children":[{"id":"make1-no-rule-to-make-target","depth":3,"text":"make1: *** No rule to make target"},{"id":"can-not-be-used-when-making-a-shared-object","depth":3,"text":"can not be used when making a shared object"},{"id":"configure-error-c-compiler-cannot-create-executables","depth":3,"text":"configure: error: C compiler cannot create executables"},{"id":"error-adding-symbols-dso-missing-from-command-line","depth":3,"text":"error adding symbols: DSO missing from command line"},{"id":"is-incompatible-with-i386x86-64-output","depth":3,"text":"is incompatible with i386:x86-64 output"},{"id":"d_file_offset_bits64","depth":3,"text":"-D_FILE_OFFSET_BITS=64"}]}]}},"_type":"markdown","_id":"content:5.notes:compile.md","_source":"content","_file":"5.notes/compile.md","_extension":"md"}