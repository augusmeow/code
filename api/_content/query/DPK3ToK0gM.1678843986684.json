{"_path":"/notes/gitalk","_dir":"notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"gitalk","description":"","icon":"icon-park:github-one","date":"2021-12-30T15:39:11.000Z","category":["编程"],"tag":["gitalk","评论","转载"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"gitalk评论接入教程"},"children":[{"type":"text","value":"gitalk评论接入教程"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000018072952","rel":["nofollow"]},"children":[{"type":"text","value":"转载并修改自sf"}]}]}]},{"type":"element","tag":"h2","props":{"id":"安装使用"},"children":[{"type":"text","value":"安装使用"}]},{"type":"element","tag":"h3","props":{"id":"安装-引入"},"children":[{"type":"text","value":"安装 引入"}]},{"type":"element","tag":"code","props":{"code":"<link rel=\"stylesheet\" href=\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css\">\n<script src=\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js\"></script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"rel"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"stylesheet\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"使用"},"children":[{"type":"text","value":"使用"}]},{"type":"element","tag":"h4","props":{"id":"1申请一个oauth-application"},"children":[{"type":"text","value":"1、申请一个OAuth application"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GitHub OAuth application允许程序来操作你的github账户，可以对github中仓库读写。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"申请GitHub OAuth application流程："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"打开github网站登陆后，点击右上角的用户图标，选择Settings"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在Settings页面选择Developer settings选项。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在Developer settings选择OAuth Apps,然后会在页面右边有一个New OAuth App按钮，点击这个按钮就进入到新建OAuth application页面"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在注册OAuth应用页面有如下几个参数需要填写："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application name：必填，OAuth的名字"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nHomepage URL：必填，你应用的网址，哪个网站用了Gitalk组件，就填写这个网址"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nApplication description：选填，该OAuth的说明"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAuthorization callback URL：必填，授权成功后回调网址，跟Homepage URL参数保持一致就好"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n这些参数在注册成功后是可以修改。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数填好后，点"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Register application"}]},{"type":"text","value":"按钮即可完成注册。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注册成功后会自动跳转到这个OAuth应用的页面，或者在Developer settings选择OAuth Apps后就能看见你创建的OAuth应用名字，点击它进入这个OAuth应用的页面："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"找到 clientID clientSecret 后面会用到。"}]},{"type":"element","tag":"h4","props":{"id":"2首先需要在html文件中添加一个容器gitalk组件会在此处显示"},"children":[{"type":"text","value":"2、首先需要在html文件中添加一个容器，Gitalk组件会在此处显示"}]},{"type":"element","tag":"code","props":{"code":"<div id=\"gitalk-container\"></div>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"gitalk-container\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-ccf02e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"3使用下面的javascript代码来生成gitalk评论"},"children":[{"type":"text","value":"3、使用下面的JavaScript代码来生成Gitalk评论"}]},{"type":"element","tag":"code","props":{"code":"const initGitalk = () => {\n    const gitalk = new Gitalk({\n        clientID: \"5301328d56cf49a6d68e\",\n        clientSecret: \"dd04918e1a0267bc6eeaf27c1f7c9cc65832db57\",\n        repo: \"draugus.github.io\",\n        owner: \"draugus\",\n        admin: [\"draugus\"],\n        id: \"{{page.title}}\",\n        language: \"zh-CN\",\n        perPage: 10,\n        distractionFreeMode: false,\n        pagerDirection: \"last\",\n        createIssueManually: false\n        // updateCountCallback: commentCount\n    });\n\n    gitalk.render(\"gitalk-container\");\n};\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"initGitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"gitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c33e"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"Gitalk"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        clientID: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"5301328d56cf49a6d68e\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        clientSecret: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"dd04918e1a0267bc6eeaf27c1f7c9cc65832db57\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        repo: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus.github.io\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        owner: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        admin: ["}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"draugus\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        id: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"{{page.title}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        language: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"zh-CN\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        perPage: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        distractionFreeMode: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        pagerDirection: "}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"last\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        createIssueManually: "}]},{"type":"element","tag":"span","props":{"class":"ct-f0e639"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4dbc84"},"children":[{"type":"text","value":"// updateCountCallback: commentCount"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"    gitalk."}]},{"type":"element","tag":"span","props":{"class":"ct-4fb149"},"children":[{"type":"text","value":"render"}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dc339f"},"children":[{"type":"text","value":"\"gitalk-container\""}]},{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c43d44"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数说明"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clientID"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，申请的OAuth App的Client ID"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clientSecret"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，申请的OAuth App的Client Secret"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"repo"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，github上的仓库名字，用于存放Gitalk评论"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"owner"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，必填，github仓库的所有者的名字"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"admin"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：数组(元素是字符串)，必填，github仓库的所有者和合作者 (对这个 repository 有写权限的用户)"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，选填，页面的唯一标识。长度必须小于50。此参数用于评论和页面对应的标识，如果想让两个页面用一个评论，可设置两个页面的id一样。默认值：location.href(页面URL)"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"title"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"类型：字符串，选填，GitHub issue 的标题，默认值：document.title(HTML中title标签中的值)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配置好会显示如下"},{"type":"element","tag":"a","props":{"href":"https://gitalk.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"效果"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"/gitalk.png"},"children":[]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4dbc84{color:#6E7781}\n.ct-4fb149{color:#8250DF}\n.ct-16c33e{color:#CF222E}\n.ct-dc339f{color:#0A3069}\n.ct-f0e639{color:#0550AE}\n.ct-ccf02e{color:#116329}\n.ct-c43d44{color:#24292F}\n.dark .ct-c43d44{color:#C9D1D9}\n.dark .ct-ccf02e{color:#7EE787}\n.dark .ct-f0e639{color:#79C0FF}\n.dark .ct-dc339f{color:#A5D6FF}\n.dark .ct-16c33e{color:#FF7B72}\n.dark .ct-4fb149{color:#D2A8FF}\n.dark .ct-4dbc84{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"安装使用","depth":2,"text":"安装使用","children":[{"id":"安装-引入","depth":3,"text":"安装 引入"},{"id":"使用","depth":3,"text":"使用"}]}]}},"_type":"markdown","_id":"content:5.notes:gitalk.md","_source":"content","_file":"5.notes/gitalk.md","_extension":"md"}